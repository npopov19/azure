/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={7437:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9877),o=i(2357),a=["redmond.corp.microsoft.com","northamerica.corp.microsoft.com","fareast.corp.microsoft.com","ntdev.corp.microsoft.com","wingroup.corp.microsoft.com","southpacific.corp.microsoft.com","wingroup.windeploy.ntdev.microsoft.com","ddnet.microsoft.com","europe.corp.microsoft.com"],s={"common.msftInternal":function(){const e=process.env.USERDNSDOMAIN;if(!e)return!1;const t=e.toLowerCase();return a.some((e=>t===e))}()?1:0},l={};try{const e=i(9072);l["common.adsversion"]=null==e?void 0:e.version}catch(e){}class c{constructor(e,t,i,n){this.reporter=e,this.eventName=t,this.properties=i,this.measurements=n,this.properties=i||{},Object.assign(this.properties,l),this.measurements=n||{},Object.assign(this.measurements,s)}send(){var e;try{null===(e=this.reporter)||void 0===e||e.sendTelemetryEvent(this.eventName,this.properties,this.measurements)}catch(e){const t=e instanceof Error?e.message:e;console.error(`Error sending ${this.eventName} event ${t}`)}}withAdditionalProperties(e){return Object.assign(this.properties,e),this}withAdditionalMeasurements(e){return Object.assign(this.measurements,e),this}withConnectionInfo(e){return Object.assign(this.properties,{authenticationType:e.authenticationType,providerName:e.providerName}),this}withServerInfo(e){var t,i,n;return Object.assign(this.properties,{connectionType:void 0!==(null==e?void 0:e.isCloud)?e.isCloud?"Azure":"Standalone":"",serverVersion:null!==(t=null==e?void 0:e.serverVersion)&&void 0!==t?t:"",serverEdition:null!==(i=null==e?void 0:e.serverEdition)&&void 0!==i?i:"",serverEngineEdition:null!==(n=null==e?void 0:e.engineEditionId)&&void 0!==n?n:""}),this}}t.default=class{constructor(e,t,i){var n,o;this._telemetryReporter=void 0;try{this._telemetryReporter=new r.default(e,t,i)}catch(t){console.error(`Error initializing TelemetryReporter for '${e}'. ${null!==(o=null===(n=t)||void 0===n?void 0:n.message)&&void 0!==o?o:t}`)}}createViewEvent(e){return new c(this._telemetryReporter,"view",{view:e})}sendViewEvent(e){this.createViewEvent(e).send()}createActionEvent(e,t,i="",n="",r){const o=r?{durationInMs:r}:{};return new c(this._telemetryReporter,"action",{view:e,action:t,target:i,source:n},o)}sendActionEvent(e,t,i="",n="",r){this.createActionEvent(e,t,i,n,r).send()}createTimedAction(e,t,i,n){return new o.TimedAction(this,e,t,i,n)}createMetricsEvent(e,t=""){return new c(this._telemetryReporter,"metrics",{groupName:t},e)}sendMetricsEvent(e,t=""){this.createMetricsEvent(e,t).send()}createErrorEvent(e,t,i="",n=""){return new c(this._telemetryReporter,"error",{view:e,name:t,errorCode:i,errorType:n})}sendErrorEvent(e,t,i="",n=""){this.createErrorEvent(e,t,i,n).send()}createErrorEvent2(e,t,i=void 0,n=!1,r="",o=""){const a={view:e,name:t,errorCode:r,errorType:o};if(i instanceof Error){a.message=!0===n?i.message:"";let e=i.stack||"";if(!0!==n&&i.message){const t=new RegExp(i.message,"g");e=e.replace(t,"<REDACTED: error-message>")}a.stack=e}else a.message=!0===n?null==i?void 0:i.toString():"",a.stack="";return new c(this._telemetryReporter,"error",a)}sendErrorEvent2(e,t,i=void 0,n=!1,r="",o=""){this.createErrorEvent2(e,t,i,n,r,o).send()}createTelemetryEvent(e,t,i){return new c(this._telemetryReporter,e,t,i)}sendTelemetryEvent(e,t,i){this.createTelemetryEvent(e,t,i).send()}dispose(){var e;return n(this,void 0,void 0,(function*(){yield null===(e=this._telemetryReporter)||void 0===e?void 0:e.dispose()}))}}},2357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimedAction=void 0,t.TimedAction=class{constructor(e,t,i,n="",r=""){this.reporter=e,this.view=t,this.action=i,this.target=n,this.source=r,this.properties={},this.measures={},this.start=Date.now()}withAdditionalProperties(e){return Object.assign(this.properties,e),this}withAdditionalMeasures(e){return Object.assign(this.measures,e),this}send(){this.reporter.createActionEvent(this.view,this.action,this.source,this.target,Date.now()-this.start).withAdditionalProperties(this.properties).withAdditionalMeasurements(this.measures).send()}}},1357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sequencer=void 0,t.Sequencer=class{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then((()=>e()))}}},588:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DistributionNotSupportedError=t.ArchitectureNotSupportedError=t.PlatformNotSupportedError=void 0;class i extends Error{constructor(e){super(`The platform '${e}' is not supported.`),this.code=0}}t.PlatformNotSupportedError=i;class n extends Error{constructor(e,t){super(`The architecture '${t}' for platform '${e}' is not supported.`),this.code=2}}t.ArchitectureNotSupportedError=n;class r extends Error{constructor(e,t,i){super(`The distribution '${t}' with version '${i}' for platform '${e}' is not supported.`),this.code=1}}t.DistributionNotSupportedError=r},8537:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveExtractor=void 0;const a=o(i(7998)),s=i(6387),l=i(4405),c=i(2697);t.ArchiveExtractor=class{constructor(){this.eventEmitter=new s.EventEmitter2({wildcard:!0}),this.unzipper=new l.Unzipper,this.logger=new c.Logger(this.eventEmitter)}extract(e,t){if(this.logger.verbose(`Extracting arhive '${e}' to '${t}'.`),e.match(/\.tar\.gz|\.tar|\.gz$/i)){let i=0;return a.x({file:e,cwd:t,onentry:e=>this.eventEmitter.emit("entry_extracted",e.path,++i,-1)})}return this.unzipper.extract(e,t)}}},7353:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const a=o(i(5687)),s=o(i(3685)),l=o(i(7147)),c=i(7310),u=i(6387),d=i(5479);t.HttpClient=class{constructor(){this.eventEmitter=new u.EventEmitter2({wildcard:!0})}downloadFile(e,t,i,n){const r=(0,c.parse)(e);let o=this.getHttpClientOptions(r,i,n),l="http:"===r.protocol?s.request:a.request;return new Promise(((e,r)=>{if(!t.tmpFile||0===t.tmpFile.fd)return r(new Error("Temporary package file unavailable"));let a=l(o,(o=>301===o.statusCode||302===o.statusCode?e(this.downloadFile(o.headers.location,t,i,n)):200!==o.statusCode?r(new Error(o.statusCode.toString())):void this.handleSuccessfulResponse(t,o).then((t=>{e()})).catch((e=>{r(e)}))));a.on("error",(e=>{r(new Error(`Request error: ${e.name||"NONE"}`))})),a.end()}))}getHttpClientOptions(e,t,i){const n=(0,d.getProxyAgent)(e,t,i);let r={host:e.hostname,path:e.path,agent:n,port:+e.port};return"https:"===e.protocol&&(r={host:e.hostname,path:e.path,agent:n,port:+e.port}),r}handleDataReceivedEvent(e,t){if(e.downloadedBytes+=t.length,e.packageSize>0){let t=Math.ceil(e.downloadedBytes/e.packageSize*100);t!==e.downloadPercentage&&(this.eventEmitter.emit("download_progress",t),e.downloadPercentage=t)}}handleSuccessfulResponse(e,t){return new Promise(((i,n)=>{let r={packageSize:parseInt(t.headers["content-length"],10),downloadedBytes:0,downloadPercentage:0};this.eventEmitter.emit("download_start",e.url,r.packageSize),t.on("data",(e=>{this.handleDataReceivedEvent(r,e)}));let o=l.createWriteStream(void 0,{fd:e.tmpFile.fd});t.on("end",(()=>{this.eventEmitter.emit("download_end"),i()})),t.on("error",(e=>{n(new Error(`Response error: ${e.name||"NONE"}`))})),t.pipe(o,{end:!1})}))}}},7725:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLogger=t.Logger=void 0,t.Logger=class{constructor(e){this.eventEmitter=e}verbose(e){this.log(0,e)}info(e){this.log(1,e)}warn(e){this.log(2,e)}error(e){this.log(3,e)}critical(e){this.log(4,e)}log(e,t){this.eventEmitter.emit("log_emitted",e,t)}},t.ConsoleLogger=class{verbose(e){console.log(e)}info(e){console.info(e)}warn(e){console.warn(e)}error(e){console.error(e)}critical(e){console.error(e)}}},9707:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(4759),t),r(i(4286),t),r(i(7725),t)},9773:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformInformation=t.getFallbackRuntimes=t.getRuntimeDisplayName=t.getRuntimeId=t.LinuxDistribution=t.Runtime=void 0;const a=o(i(2037)),s=o(i(2081)),l=o(i(7147)),c=i(588),u=i(2697),d="unknown";var p;!function(e){e.Unknown="Unknown",e.Windows_86="Windows_86",e.Windows_64="Windows_64",e.Windows_ARM64="Windows_ARM64",e.Windows="Windows",e.OSX="OSX",e.OSX_ARM64="OSX_ARM64",e.CentOS="CentOS",e.Debian="Debian",e.ElementaryOS_0_3="ElementaryOS_0_3",e.ElementaryOS_0_4="ElementaryOS_0_4",e.ElementaryOS="ElementaryOS",e.Fedora="Fedora",e.GalliumOS="GalliumOS",e.LinuxMint="LinuxMint",e.OpenSUSE="OpenSUSE",e.OracleLinux="OracleLinux",e.RHEL="RHEL",e.SLES="SLES",e.Ubuntu_14="Ubuntu_14",e.Ubuntu_16="Ubuntu_16",e.Ubuntu_18="Ubuntu_18",e.Ubuntu_20="Ubuntu_20",e.Ubuntu_22="Ubuntu_22",e.Ubuntu="Ubuntu",e.Linux="Linux"}(p=t.Runtime||(t.Runtime={}));class h{constructor(e,t,i){this.name=e,this.version=t,this.idLike=i}static getCurrent(){return h.fromFilePath("/etc/os-release").catch((()=>h.fromFilePath("/usr/lib/os-release"))).catch((()=>Promise.resolve(new h(d,d))))}toString(){return`name=${this.name}, version=${this.version}`}static fromFilePath(e){return new Promise(((t,i)=>{l.readFile(e,"utf8",((e,n)=>{e?i(e):t(h.fromReleaseInfo(n))}))}))}static fromReleaseInfo(e,t=a.EOL){let i,n=d,r=d;const o=e.split(t);for(let e of o){e=e.trim();let t=e.indexOf("=");if(t>=0){let o=e.substring(0,t),a=e.substring(t+1);if((a.length>1&&a.startsWith('"')&&a.endsWith('"')||a.length>1&&a.startsWith("'")&&a.endsWith("'"))&&(a=a.substring(1,a.length-1)),"ID"===o?n=a:"VERSION_ID"===o?r=a:"ID_LIKE"===o&&(i=a.split(" ")),n!==d&&r!==d&&void 0!==i)break}}return new h(n,r,i)}}function _(e,t,i){switch(e){case"ubuntu":return t.startsWith("14")?p.Ubuntu_14:t.startsWith("16")?p.Ubuntu_16:t.startsWith("18")?p.Ubuntu_18:t.startsWith("20")?p.Ubuntu_20:t.startsWith("22")?p.Ubuntu_22:(i.warn(`The Ubuntu version '${t}' is unknown to the service downloader, it will be treated as Ubuntu.`),p.Ubuntu);case"elementary":case"elementary OS":return t.startsWith("0.3")?p.ElementaryOS_0_3:t.startsWith("0.4")?p.ElementaryOS_0_4:(i.warn(`The ElementaryOS version '${t}' is unknown to the service downloader, it will be treated as ElementaryOS.`),p.ElementaryOS);case"linuxmint":return p.LinuxMint;case"centos":return p.CentOS;case"ol":return p.OracleLinux;case"fedora":return p.Fedora;case"opensuse":return p.OpenSUSE;case"sles":return p.SLES;case"rhel":return p.RHEL;case"debian":return p.Debian;case"galliumos":return p.GalliumOS;default:return i.warn(`Unknown distribution name: ${e}`),p.Linux}}function g(e,t,i,n){const r=process.env.AZDATA_RUNTIME;if(r)return n.verbose(`AZDATA_RUNTIME environment variable is set, the value '${r}' will be used as the runtime.`),r;switch(e){case"win32":switch(t){case"x86":return p.Windows_86;case"x86_64":return p.Windows_64;case"arm64":return p.Windows_ARM64;default:throw new c.ArchitectureNotSupportedError(e,t)}case"darwin":switch(t){case"x86_64":return p.OSX;case"arm64":return p.OSX_ARM64;default:throw new c.ArchitectureNotSupportedError(e,t)}case"linux":if("x86_64"===t){let e=_(i.name,i.version,n);if(e===p.Unknown&&i.idLike&&i.idLike.length>0)for(let t of i.idLike)if(e=_(t,i.version,n),e!==p.Unknown)break;if(e!==p.Unknown)return e}throw new c.DistributionNotSupportedError(e,i.name,i.version);default:throw new c.PlatformNotSupportedError(e)}}function m(e){switch(e){case p.Windows_64:case p.Windows_86:case p.Windows_ARM64:case p.Windows:return"Windows";case p.OSX:return"OSX";case p.OSX_ARM64:return"OSX_ARM64";case p.CentOS:case p.Debian:case p.ElementaryOS_0_3:case p.ElementaryOS_0_4:case p.ElementaryOS:case p.Fedora:case p.GalliumOS:case p.LinuxMint:case p.OpenSUSE:case p.OracleLinux:case p.SLES:case p.RHEL:case p.Ubuntu_14:case p.Ubuntu_16:case p.Ubuntu_18:case p.Ubuntu_20:case p.Ubuntu_22:case p.Ubuntu:case p.Linux:return"Linux";default:throw new c.PlatformNotSupportedError(e)}}t.LinuxDistribution=h,t.getRuntimeId=g,t.getRuntimeDisplayName=m,t.getFallbackRuntimes=function e(t){switch(t){case p.Windows_64:case p.Windows_86:case p.Windows_ARM64:return[p.Windows];case p.OSX_ARM64:return[p.OSX];case p.ElementaryOS_0_3:return[p.Ubuntu_14,...e(p.Ubuntu_14)];case p.ElementaryOS_0_4:return[p.Ubuntu_16,...e(p.Ubuntu_16)];case p.ElementaryOS:return[p.Linux];case p.GalliumOS:case p.LinuxMint:return[p.Ubuntu_16,...e(p.Ubuntu_16)];case p.OracleLinux:return[p.CentOS,...e(p.CentOS)];case p.CentOS:case p.Debian:case p.Fedora:case p.OpenSUSE:case p.RHEL:case p.SLES:return[p.Linux];case p.Ubuntu_22:case p.Ubuntu_20:case p.Ubuntu_18:case p.Ubuntu_16:case p.Ubuntu_14:return[p.Ubuntu,...e(p.Ubuntu)];case p.Ubuntu:return[p.Linux];case p.Windows:case p.OSX:case p.Linux:return[];default:throw new c.PlatformNotSupportedError(t)}};class S{constructor(e,t,i,n=void 0){this.platform=t,this.architecture=i,this.distribution=n;try{e.verbose(`Getting runtime information. platform: ${t}, architecture: ${i}, distribution: ${n}`),this.runtimeId=g(t,i,n,e)}catch(r){const o=r&&r.message?r.message:r;e.error(`Failed to get the runtime information. platform: ${t}, architecture: ${i}, distribution: ${n}. error message: ${o}`),this.runtimeId=void 0}}get isWindows(){return"win32"===this.platform}get isMacOS(){return"darwin"===this.platform}get isLinux(){return"linux"===this.platform}get isValidRuntime(){return void 0!==this.runtimeId&&this.runtimeId!==p.Unknown}get runtimeDisplayName(){return m(this.runtimeId)}toString(){let e=this.platform;return this.architecture&&(e&&(e+=", "),e+=this.architecture),this.distribution&&(e&&(e+=", "),e+=this.distribution.toString()),e}static getCurrent(e=new u.ConsoleLogger){let t,i,n=a.platform();switch(n){case"win32":t=S.getWindowsArchitecture(),i=Promise.resolve(void 0);break;case"darwin":t=S.getUnixArchitecture(),i=Promise.resolve(void 0);break;case"linux":t=S.getUnixArchitecture(),i=h.getCurrent();break;default:return Promise.reject(new c.PlatformNotSupportedError(n))}return Promise.all([t,i]).then((t=>new S(e,n,t[0],t[1])))}static getWindowsArchitecture(){return new Promise(((e,t)=>{S.getWindowsArchitectureWmic().then((t=>{if(t&&t!==d)e(t);else{const t=S.getWindowsArchitectureEnv();e(t)}}))}))}static getWindowsArchitectureWmic(){return this.execChildProcess("wmic os get osarchitecture").then((e=>{if(e){let t=e.split(a.EOL);if(t.length>=2){let e=t[1].trim();if(e.toUpperCase().indexOf("ARM")>=0)return"arm64";if(e.indexOf("64")>=0)return"x86_64";if(e.indexOf("32")>=0)return"x86"}}return d})).catch((e=>d))}static getWindowsArchitectureEnv(){let e;return e="ARM64"===process.env.PROCESSOR_ARCHITECTURE?"arm64":"x86"===process.env.PROCESSOR_ARCHITECTURE&&void 0===process.env.PROCESSOR_ARCHITEW6432?"x86":"x86_64",e}static getUnixArchitecture(){return this.execChildProcess("uname -m").then((e=>{if(e)return e.trim()}))}static execChildProcess(e){return new Promise(((t,i)=>{s.exec(e,{maxBuffer:512e3},((e,n,r)=>{e?i(e):r&&r.length>0?i(new Error(r)):t(n)}))}))}}t.PlatformInformation=S},5479:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getProxyAgent=void 0;const r=i(7310),o=n(i(9201)),a=n(i(6018));t.getProxyAgent=function(e,t,i){const n=t||function(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||void 0:"https:"===e.protocol&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||void 0}(e);if(!n)return;const s=(0,r.parse)(n);if(!/^https?:$/.test(s.protocol))return;i=i||!0;const l={host:s.hostname,port:Number(s.port),auth:s.auth,rejectUnauthorized:i};return"http:"===e.protocol?(0,o.default)(l):(0,a.default)(l)}},4759:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerProvider=void 0;const a=o(i(1017)),s=o(i(7147)),l=i(6387),c=i(9773),u=i(4286),d=i(2697);t.ServerProvider=class{get runtime(){return this._runtime?Promise.resolve(this._runtime):this.findRuntime().then((e=>(this._runtime=e,e)))}constructor(e){this.config=e,this.eventEmitter=new l.EventEmitter2({wildcard:!0}),this._downloadProvider=new u.ServiceDownloadProvider(this.config),this._downloadProvider.eventEmitter.onAny(((e,...t)=>{this.eventEmitter.emit(e,...t)})),this.logger=new d.Logger(this.eventEmitter)}get downloadProvider(){return this._downloadProvider}findRuntime(){return c.PlatformInformation.getCurrent(this.logger).then((e=>e.runtimeId))}findServerPath(e,t=void 0){return new Promise(((i,n)=>{s.stat(e,((n,r)=>{let o;r.isFile()&&i(e),void 0===t&&void 0!==this.config&&(t=this.config.executableFiles),void 0!==t&&t.forEach((t=>{let n=a.join(e,t);void 0===o&&s.existsSync(n)&&(o=n,i(o))})),i(o)}))}))}getOrDownloadServer(){return this.getServerPath().then((e=>void 0===e?this.downloadServerFiles().then((e=>e)):e))}getServerPath(){return this.runtime.then((e=>{const t=this._downloadProvider.getInstallDirectory(e);return this.findServerPath(t)}))}downloadServerFiles(){return this.runtime.then((e=>{const t=this._downloadProvider.getInstallDirectory(e);return this._downloadProvider.installService(e).then((e=>this.findServerPath(t)))}))}}},4286:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceDownloadProvider=void 0;const l=o(i(7147)),c=o(i(1890)),u=i(6387),d=o(i(6276)),p=o(i(1017)),h=i(9773),_=i(7353),g=i(588),m=i(3837),S=s(i(2047)),f=i(8537),E=i(2697);t.ServiceDownloadProvider=class{constructor(e){this._config=e,this.httpClient=new _.HttpClient,this.extractor=new f.ArchiveExtractor,this.eventEmitter=new u.EventEmitter2({wildcard:!0}),d.setGracefulCleanup(),this.httpClient.eventEmitter.onAny(((e,...t)=>{this.eventEmitter.emit(e,...t)})),this.extractor.eventEmitter.onAny(((e,...t)=>{this.eventEmitter.emit(e,...t)})),this.logger=new E.Logger(this.eventEmitter)}getDownloadFileName(e){const t=this._config.downloadFileNames;this.logger.verbose(`Runtimes specified in the configuration file: ${JSON.stringify(t)}`);const i=[e,...(0,h.getFallbackRuntimes)(e)];let n;this.logger.verbose(`Current runtime and the fallback runtimes: ${JSON.stringify(i)}`);for(let e=0;e<i.length;e++){const r=i[e];if(this.logger.verbose(`Checking whether a service file is specified for runtime: '${r}'.`),n=t[r],n){this.logger.verbose(`Found the service file for runtime: '${r}'.`);break}this.logger.verbose(`Service file is not specified for runtime: '${r}'.`)}if(void 0===n)throw"linux"===process.platform?new g.DistributionNotSupportedError("Unsupported linux distribution",process.platform,e):new g.PlatformNotSupportedError(process.platform);return n}getInstallDirectory(e){let t=this._config.installDirectory,i=this._config.version;return t=t.replace("{#version#}",i),t=t.replace("{#platform#}",(0,h.getRuntimeDisplayName)(e)),l.existsSync(t)||c.sync(t),t}getGetDownloadUrl(e){let t=this._config.downloadUrl,i=this._config.version;return t=t.replace("{#version#}",i),t=t.replace("{#fileName#}",e),t}installService(e){return a(this,void 0,void 0,(function*(){const t=this._config.proxy,i=this._config.strictSSL,n=this.getDownloadFileName(e),r={installPath:this.getInstallDirectory(e),url:this.getGetDownloadUrl(n),tmpFile:void 0},o=(0,m.promisify)(l.exists),s=(0,m.promisify)(l.unlink);return yield function(e,t,i={retries:0}){return a(this,void 0,void 0,(function*(){return yield(0,S.default)(((n,r)=>a(this,void 0,void 0,(function*(){try{return yield e()}catch(o){if(/403/.test(o))return void n(o);throw r<=i.retries&&t.warn(`[${(new Date).toLocaleTimeString("en-US",{hour12:!1})}] Retrying...   as attempt:${r} to run '${e.name}' failed with: '${o}'.`),o}}))),i)}))}((()=>a(this,void 0,void 0,(function*(){try{r.tmpFile=yield this.createTempFile(r),this.logger.info(`Downloading the package: '${r.url}' to file: '${r.tmpFile.name}'`),yield this.httpClient.downloadFile(r.url,r,t,i),this.logger.info(`Installing the package from file: ${r.tmpFile.name}`),yield this.install(r)}finally{(yield o(r.tmpFile.name))&&(yield s(r.tmpFile.name),this.logger.info(`Deleted the package file: ${r.tmpFile.name}`))}}))),this.logger,this._config.retry),!0}))}createTempFile(e){return new Promise(((t,i)=>{d.file({prefix:"package-",postfix:p.extname(e.url)},((e,n,r,o)=>{if(e)return i(new Error("Error from tmp.file"));t({name:n,fd:r,removeCallback:o})}))}))}install(e){return a(this,void 0,void 0,(function*(){this.eventEmitter.emit("install_start",e.installPath),yield this.extractor.extract(e.tmpFile.name,e.installPath),this.eventEmitter.emit("install_end")}))}}},4405:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Unzipper=t.ExtractError=void 0;const s=i(7766),l=o(i(1017)),c=a(i(1890)),u=i(1357),d=i(7147),p=i(6387);class h extends Error{constructor(e,t){let i=t.message;"CorruptZip"===e&&(i=`Corrupt ZIP: ${i}`),super(i),this.type=e,this.cause=t}}function _(e){if(e instanceof h)return e;let t;return/end of central directory record signature not found/.test(e.message)&&(t="CorruptZip"),new h(t,e)}t.ExtractError=h,t.Unzipper=class{constructor(){this.eventEmitter=new p.EventEmitter2({wildcard:!0})}extract(e,t){return this.openZip(e,!0).then((e=>this.extractZip(e,t)))}openZip(e,t=!1){return new Promise(((i,n)=>{(0,s.open)(e,t?{lazyEntries:!0}:void 0,((e,t)=>{e?n(_(e)):i(t)}))}))}extractZip(e,t){let i=0;return new Promise(((n,r)=>{const o=new u.Sequencer,a=()=>{i++,e.readEntry()};e.once("error",r),e.once("close",(()=>{e.entryCount===i?n():r(new h("Incomplete",new Error(`Incomplete. Found ${i} of ${e.entryCount} entries`)))})),e.readEntry(),e.on("entry",(n=>{if(/\/$/.test(n.fileName)){const e=l.join(t,n.fileName);return void(0,c.default)(e).then((()=>a())).then(void 0,r)}const s=this.openZipStream(e,n),u=function(e){const t=e.externalFileAttributes>>16||33188;return[448,56,7].map((e=>t&e)).reduce(((e,t)=>e+t),61440&t)}(n);o.queue((()=>s.then((r=>this.extractEntry(r,n.fileName,u,t,i+1,e.entryCount).then((()=>a())))))).then(void 0,r)}))}))}extractEntry(e,t,i,n,r,o){const a=l.dirname(t),s=l.join(n,a);if(0!==s.indexOf(n))return Promise.reject(new Error(`Error extracting ${t}. Invalid file.`));const u=l.join(n,t);let p;return Promise.resolve((0,c.default)(s)).then((()=>new Promise(((t,n)=>{try{p=(0,d.createWriteStream)(u,{mode:i}),p.once("close",(()=>{this.eventEmitter.emit("entry_extracted",u,r,o),t()})),p.once("error",n),e.once("error",n),e.pipe(p)}catch(e){n(e)}}))))}openZipStream(e,t){return new Promise(((i,n)=>{e.openReadStream(t,((e,t)=>{e?n(_(e)):i(t)}))}))}}},2046:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,{signal:i}={}){return new Promise(((n,r)=>{function o(){null==i||i.removeEventListener("abort",o),e.removeListener(t,a),e.removeListener("error",s)}function a(...e){o(),n(e)}function s(e){o(),r(e)}null==i||i.addEventListener("abort",o),e.on(t,a),e.on("error",s)}))}},9877:(e,t,i)=>{var n,r,o,a,s=Object.create,l=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,_=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,S=(e,t,i)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,f=(e,t)=>{for(var i in t||(t={}))g.call(t,i)&&S(e,i,t[i]);if(h)for(var i of h(t))m.call(t,i)&&S(e,i,t[i]);return e},E=(e,t)=>c(e,d(t)),T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),C=(e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of p(t))!g.call(e,r)&&r!==i&&l(e,r,{get:()=>t[r],enumerable:!(n=u(t,r))||n.enumerable});return e},y=(e,t,i)=>(i=null!=e?s(_(e)):{},C(!t&&e&&e.__esModule?i:l(i,"default",{value:e,enumerable:!0}),e)),v=T(((i,a)=>{var s;s=function(e){"use strict";var t="function",i="object",n="undefined",r="prototype",o="hasOwnProperty",a="default",s=Object,l=s[r],c=s.assign,u=s.create,d=s.defineProperty,p=l[o],h=null;function _(e){return void 0===e&&(e=!0),(!h||!e)&&(typeof globalThis!==n&&globalThis&&(h=globalThis),typeof self!==n&&self&&(h=self),typeof window!==n&&window&&(h=window),typeof global!==n&&global&&(h=global)),h}function g(e){throw new TypeError(e)}function m(e){if(u)return u(e);if(null==e)return{};var n=typeof e;function o(){}return n!==i&&n!==t&&g("Object prototype may only be an Object:"+e),o[r]=e,new o}var S=(_()||{}).Symbol,f=(_()||{}).Reflect,E=!!f,T="decorate",C="metadata",y="getOwnPropertySymbols",v="iterator",R=c||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])l[o].call(t,r)&&(e[r]=t[r]);return e},A=function(e,t){return(A=s.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t[o](i)&&(e[i]=t[i])})(e,t)};function I(e,i){function n(){this.constructor=e}typeof i!==t&&null!==i&&g("Class extends value "+String(i)+" is not a constructor or null"),A(e,i),e[r]=null===i?m(i):(n[r]=i[r],new n)}function w(e,t,i,n){void 0===n&&(n=i),u?d(e,n,{enumerable:!0,get:function(){return t[i]}}):e[n]=t[i]}e.ObjAssign=c,e.ObjClass=s,e.ObjCreate=u,e.ObjDefineProperty=d,e.ObjHasOwnProperty=p,e.ObjProto=l,e.__assignFn=R,e.__createBindingFn=w,e.__decorateFn=function(e,i,n,r){var o,a=arguments.length,l=a<3?i:null===r?r=s.getOwnPropertyDescriptor(i,n):r;if(E&&typeof f[T]===t)l=f[T](e,i,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(l=(a<3?o(l):a>3?o(i,n,l):o(i,n))||l);return a>3&&l&&d(i,n,l),l},e.__exportStarFn=function(e,t){for(var i in e)i!==a&&!p.call(t,i)&&w(t,e,i)},e.__exposeGlobalTsLib=function(){var e,t,i,n,r=_()||{};t=R,i=I,n=w,(e=r).__assign||(e.__assign=c||t),e.__extends||(e.__extends=i),e.__createBinding||(e.__createBinding=n),__assign||(__assign=r.__assign),__extends||(__extends=r.__extends),__createBinding||(__createBinding=r.__createBinding)},e.__extendsFn=I,e.__importDefaultFn=function(e){return e&&e.__esModule?e:{strDefault:e}},e.__importStarFn=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)i!==a&&Object.prototype.hasOwnProperty.call(e,i)&&w(t,e,i);return u?d(t,a,{enumerable:!0,value:e}):t[a]=e,t},e.__makeTemplateObjectFn=function(e,t){return d?d(e,"raw",{value:t}):e.raw=t,e},e.__metadataFn=function(e,i){if(E&&f[C]===t)return f[C](e,i)},e.__paramFn=function(e,t){return function(i,n){t(i,n,e)}},e.__readFn=function(e,i){var n=typeof S===t&&e[S[v]];if(!n)return e;var r,o,a=n.call(e),s=[];try{for(;(void 0===i||i-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},e.__restFn=function(e,i){var n={};for(var r in e)p.call(e,r)&&i.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&typeof s[y]===t)for(var o=0,a=s[y](e);o<a.length;o++)i.indexOf(a[o])<0&&l.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]]);return n},e.__spreadArrayFn=function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e},e.__spreadArraysFn=function(){for(var e=arguments,t=0,i=0,n=e.length;i<n;i++)t+=e[i].length;var r=Array(t),o=0;for(i=0;i<n;i++)for(var a=e[i],s=0,l=a.length;s<l;s++,o++)r[o]=a[s];return r},e.__valuesFn=function(e){var i=typeof S===t&&S[v],n=i&&e[i],r=0;return n?n.call(e):e&&"number"==typeof e.length?{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}:void g(i?"Object is not iterable.":"Symbol.iterator is not defined.")},e.getGlobal=_,e.objCreateFn=m,e.strDefault=a,e.strShimFunction=t,e.strShimHasOwnProperty=o,e.strShimObject=i,e.strShimPrototype=r,e.strShimUndefined=n,e.throwTypeError=g,function(e,t,i){var n=Object.defineProperty;if(n)try{return n(e,t,i)}catch{}i&&void 0!==typeof i.value&&(e[t]=i.value)}(e,"__esModule",{value:!0})},"object"==typeof i&&typeof a<"u"?s(i):(r=[t],void 0===(o="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=o))})),R=T(((i,a)=>{var s;s=function(e){"use strict";var t="function",i="object",n="undefined",r="prototype",o="hasOwnProperty",a=Object,s=a[r],l=a.assign,c=a.create,u=a.defineProperty,d=s[o],p=null;function h(e){return void 0===e&&(e=!0),(!p||!e)&&(typeof globalThis!==n&&globalThis&&(p=globalThis),typeof self!==n&&self&&(p=self),typeof window!==n&&window&&(p=window),typeof global!==n&&global&&(p=global)),p}function _(e){throw new TypeError(e)}function g(e){if(c)return c(e);if(null==e)return{};var n=typeof e;function o(){}return n!==i&&n!==t&&_("Object prototype may only be an Object:"+e),o[r]=e,new o}(h()||{}).Symbol,(h()||{}).Reflect;var m=function(e,t){return(m=a.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t[o](i)&&(e[i]=t[i])})(e,t)};function S(e,i){function n(){this.constructor=e}typeof i!==t&&null!==i&&_("Class extends value "+String(i)+" is not a constructor or null"),m(e,i),e[r]=null===i?g(i):(n[r]=i[r],new n)}function f(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e}var E="",T="processTelemetry",C="priority",y="setNextPlugin",v="isInitialized",R="teardown",A="core",I="update",w="disabled",O="_doTeardown",b="processNext",N="resume",D="pause",M="NotificationListener",L="add"+M,P="remove"+M,x="eventsSent",B="eventsDiscarded",k="eventsSendRequest",U="perfEvent",F="toISOString",G="endsWith",V="startsWith",q="indexOf",j="reduce",H="trim",z="toString",W="__proto__",K="constructor",Q=u,Y=a.freeze,$=a.seal,Z=a.keys,X=String[r],J=X[H],ee=X[G],te=X[V],ie=Date[r][F],ne=Array.isArray,re=s[z],oe=d[z],ae=oe.call(a),se=/-([a-z])/g,le=/([^\w\d_$])/g,ce=/^(\d+[\w\d_$])/,ue=Object.getPrototypeOf;function de(e){if(e){if(ue)return ue(e);var t=e[W]||e[r]||e[K];if(t)return t}return null}function pe(e,t){return typeof e===t}function he(e){return void 0===e||typeof e===n}function _e(e){return null===e||he(e)}function ge(e){return!_e(e)}function me(e,t){return!(!e||!d.call(e,t))}function Se(e){return!(!e||typeof e!==i)}function fe(e){return!(!e||typeof e!==t)}function Ee(e){var t=e;return t&&Ie(t)&&(t=(t=(t=t.replace(se,(function(e,t){return t.toUpperCase()}))).replace(le,"_")).replace(ce,(function(e,t){return"_"+t}))),t}function Te(e,t){if(e)for(var i in e)d.call(e,i)&&t.call(e,i,e[i])}function Ce(e,t){var i=!1;return e&&t&&!(i=e===t)&&(i=ee?e[G](t):function(e,t){var i=!1,n=t?t.length:0,r=e?e.length:0;if(n&&r&&r>=n&&!(i=e===t)){for(var o=r-1,a=n-1;a>=0;a--){if(e[o]!=t[a])return!1;o--}i=!0}return i}(e,t)),i}function ye(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function ve(e){return!(!e||"[object Date]"!==re.call(e))}var Re=ne||function(e){return!(!e||"[object Array]"!==re.call(e))};function Ae(e){return!(!e||"[object Error]"!==re.call(e))}function Ie(e){return"string"==typeof e}function we(e){return"number"==typeof e}function Oe(e){return"boolean"==typeof e}function be(e){var i=!1;if(e&&"object"==typeof e){var n=ue?ue(e):de(e);n?(n[K]&&d.call(n,K)&&(n=n[K]),i=typeof n===t&&oe.call(n)===ae):i=!0}return i}function Ne(e){if(e)return ie?e[F]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function De(e,t,i){var n=e.length;try{for(var r=0;r<n&&(!(r in e)||-1!==t.call(i||e,e[r],r,e));r++);}catch{}}function Me(e,t,i){if(e){if(e[q])return e[q](t,i);var n=e.length,r=i||0;try{for(var o=Math.max(r>=0?r:n-Math.abs(r),0);o<n;o++)if(o in e&&e[o]===t)return o}catch{}}return-1}function Le(e,t,i){var n;if(e){if(e.map)return e.map(t,i);var r=e.length,o=i||e;n=new Array(r);try{for(var a=0;a<r;a++)a in e&&(n[a]=t.call(o,e[a],e))}catch{}}return n}function Pe(e,t,i){var n;if(e){if(e[j])return e[j](t,i);var r=e.length,o=0;if(arguments.length>=3)n=arguments[2];else{for(;o<r&&!(o in e);)o++;n=e[o++]}for(;o<r;)o in e&&(n=t(n,e[o],o,e)),o++}return n}function xe(e){return e&&(e=J&&e[H]?e[H]():e.replace?e.replace(/^\s+|\s+$/g,""):e),e}var Be=!{toString:null}.propertyIsEnumerable("toString"),ke=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Ue(e){var n=typeof e;if(n!==t&&(n!==i||null===e)&&_("objKeys called on non-object"),!Be&&Z)return Z(e);var r=[];for(var o in e)e&&d.call(e,o)&&r.push(o);if(Be)for(var a=ke.length,s=0;s<a;s++)e&&d.call(e,ke[s])&&r.push(ke[s]);return r}function Fe(e,t,i,n){if(Q)try{var r={enumerable:!0,configurable:!0};return i&&(r.get=i),n&&(r.set=n),Q(e,t,r),!0}catch{}return!1}function Ge(e){return e}function Ve(e){return Y&&Te(e,(function(e,t){(Re(t)||Se(t))&&Y(t)})),qe(e)}var qe=Y||Ge,je=$||Ge;function He(){var e=Date;return e.now?e.now():(new e).getTime()}function ze(e){return Ae(e)?e.name:E}function We(e,t,i,n,r){var o=i;return e&&(o=e[t])!==i&&(!r||r(o))&&(!n||n(i))&&(o=i,e[t]=o),o}function Ke(e,t,i){var n;return e?!(n=e[t])&&_e(n)&&(n=he(i)?{}:i,e[t]=n):n=he(i)?{}:i,n}function Qe(e){return!e}function Ye(e){return!!e}function $e(e){throw new Error(e)}function Ze(e,t){var i=null,n=null;return fe(e)?i=e:n=e,function(){var e=arguments;if(i&&(n=i()),n)return n[t].apply(n,e)}}function Xe(e,t,i,n,r){e&&t&&i&&(!1!==r||he(e[t]))&&(e[t]=Ze(i,n))}function Je(e,t,i,n){return e&&t&&Se(e)&&Re(i)&&De(i,(function(i){Ie(i)&&Xe(e,i,t,i,n)})),e}function et(e,t,i,n,r,o){var a=arguments,s=a[0]||{},l=a.length,c=!1,u=1;for(l>0&&Oe(s)&&(c=s,s=a[u]||{},u++),Se(s)||(s={});u<l;u++){var p=a[u],h=Re(p),_=Se(p);for(var g in p)if(h&&g in p||_&&d.call(p,g)){var m=p[g],S=void 0;if(c&&m&&((S=Re(m))||be(m))){var f=s[g];S?Re(f)||(f=[]):be(f)||(f={}),m=et(c,f,m)}void 0!==m&&(s[g]=m)}}return s}function tt(e){var t={};return Te(e,(function(e,i){t[e]=i,t[i]=e})),Ve(t)}var it=tt({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),nt="constructor",rt="prototype",ot="function",at="_dynInstFuncs",st="_isDynProxy",lt="_dynClass",ct="_dynInstChk",ut=ct,dt="_dfOpts",pt="_unknown_",ht="__proto__",_t="_dyn"+ht,gt="_dynInstProto",mt="useBaseInst",St="setInstFuncs",ft=Object,Et=ft.getPrototypeOf,Tt=ft.getOwnPropertyNames,Ct=0;function yt(e,t){return e&&ft[rt].hasOwnProperty.call(e,t)}function vt(e){return e&&(e===ft[rt]||e===Array[rt])}function Rt(e){return vt(e)||e===Function[rt]}function At(e){var t;if(e){if(Et)return Et(e);var i=e[ht]||e[rt]||(e[nt]?e[nt][rt]:null);t=e[_t]||i,yt(e,_t)||(delete e[gt],t=e[_t]=e[gt]||e[_t],e[gt]=i)}return t}function It(e,t){var i=[];if(Tt)i=Tt(e);else for(var n in e)"string"==typeof n&&yt(e,n)&&i.push(n);if(i&&i.length>0)for(var r=0;r<i.length;r++)t(i[r])}function wt(e,t,i){return t!==nt&&typeof e[t]===ot&&(i||yt(e,t))}function Ot(e){throw new TypeError("DynamicProto: "+e)}function bt(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t)return!0;return!1}function Nt(e,t,i,n,r){if(!vt(e)){var o=i[at]=i[at]||{},a=o[t]=o[t]||{};!1!==o[ut]&&(o[ut]=!!r),It(i,(function(t){wt(i,t,!1)&&i[t]!==n[t]&&(a[t]=i[t],delete i[t],(!yt(e,t)||e[t]&&!e[t][st])&&(e[t]=function(e,t){var i=function(){var n=function(e,t,i,n){var r=null;if(e&&yt(i,lt)){var o=e[at]||{};if((r=(o[i[lt]]||{})[t])||Ot("Missing ["+t+"] "+ot),!r[ct]&&!1!==o[ut]){for(var a=!yt(e,t),s=At(e),l=[];a&&s&&!Rt(s)&&!bt(l,s);){var c=s[t];if(c){a=c===n;break}l.push(s),s=At(s)}try{a&&(e[t]=r),r[ct]=1}catch{o[ut]=!1}}}return r}(this,t,e,i)||function(e,t,i){var n=t[e];return n===i&&(n=At(t)[e]),typeof n!==ot&&Ot("["+e+"] is not a "+ot),n}(t,e,i);return n.apply(this,arguments)};return i[st]=1,i}(e,t)))}))}}function Dt(e,t){return yt(e,rt)?e.name||t||pt:((e||{})[nt]||{}).name||t||pt}function Mt(e,t,i,n){yt(e,rt)||Ot("theClass is an invalid class definition.");var r=e[rt];(function(e,t){if(Et){for(var i=[],n=At(t);n&&!Rt(n)&&!bt(i,n);){if(n===e)return!0;i.push(n),n=At(n)}return!1}return!0})(r,t)||Ot("["+Dt(e)+"] is not in class hierarchy of ["+Dt(t)+"]");var o=null;yt(r,lt)?o=r[lt]:(o="_dynCls$"+Dt(e,"_")+"$"+Ct,Ct++,r[lt]=o);var a=Mt[dt],s=!!a[mt];s&&n&&void 0!==n[mt]&&(s=!!n[mt]);var l=function(e){var t={};return It(e,(function(i){!t[i]&&wt(e,i,!1)&&(t[i]=e[i])})),t}(t),c=function(e,t,i,n){function r(e,t,i){var r=t[i];if(r[st]&&n){var o=e[at]||{};!1!==o[ut]&&(r=(o[t[lt]]||{})[i]||r)}return function(){return r.apply(e,arguments)}}var o={};It(i,(function(e){o[e]=r(t,i,e)}));for(var a=At(e),s=[];a&&!Rt(a)&&!bt(s,a);)It(a,(function(e){!o[e]&&wt(a,e,!Et)&&(o[e]=r(t,a,e))})),s.push(a),a=At(a);return o}(r,t,l,s);i(t,c);var u=!!Et&&!!a[St];u&&n&&(u=!!n[St]),Nt(r,o,t,l,!1!==u)}Mt[dt]={setInstFuncs:!0,useBaseInst:!0};var Lt="window",Pt="document",xt="navigator",Bt="location",kt="console",Ut="performance",Ft="JSON",Gt="crypto",Vt="msCrypto",qt="msie",jt="trident/",Ht="XMLHttpRequest",zt=null,Wt=null,Kt=!1,Qt=null,Yt=null;function $t(e,t){var i=!1;if(e){try{if(!(i=t in e)){var n=e[r];n&&(i=t in n)}}catch{}if(!i)try{i=!he((new e)[t])}catch{}}return i}function Zt(e){var t=h();return t&&t[e]?t[e]:e===Lt&&Xt()?window:null}function Xt(){return Boolean(typeof window===i&&window)}function Jt(){return Xt()?window:Zt(Lt)}function ei(){return Boolean(typeof document===i&&document)}function ti(){return ei()?document:Zt(Pt)}function ii(){return Boolean(typeof navigator===i&&navigator)}function ni(){return ii()?navigator:Zt(xt)}function ri(){return Boolean(typeof history===i&&history)}function oi(e){if(e&&Kt){var t=Zt("__mockLocation");if(t)return t}return typeof location===i&&location?location:Zt(Bt)}function ai(){return typeof console!==n?console:Zt(kt)}function si(){return Zt(Ut)}function li(){return Boolean(typeof JSON===i&&JSON||null!==Zt(Ft))}function ci(){return li()?JSON||Zt(Ft):null}function ui(){return Zt(Gt)}function di(){return Zt(Vt)}function pi(){var e=ni();if(e&&(e.userAgent!==Wt||null===zt)){var t=((Wt=e.userAgent)||E).toLowerCase();zt=ye(t,qt)||ye(t,jt)}return zt}function hi(e){var t=Object[r].toString.call(e),i=E;return"[object Error]"===t?i="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":li()&&(i=ci().stringify(e)),t+i}function _i(){var e=!1;try{e=!!Zt(Ht)}catch{}return e}function gi(e,t){if(e)for(var i=0;i<e.length;i++){var n=e[i];if(n.name&&n.name===t)return n}return{}}function mi(e){var t=ti();return t&&e?gi(t.querySelectorAll("meta"),e).content:null}function Si(e){var t,i=si();if(i){var n=i.getEntriesByType("navigation")||[];t=gi((n.length>0?n[0]:{}).serverTiming,e).description}return t}var fi,Ei=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Ti=null;function Ci(e,t){return function(){var i=arguments,n=yi(t);if(n){var r=n.listener;r&&r[e]&&r[e].apply(r,i)}}}function yi(e){var t=Ti;return!t&&!0!==e.disableDbgExt&&(t=Ti||function(){var e=Zt("Microsoft");return e&&(Ti=e.ApplicationInsights),Ti}()),t?t.ChromeDbgExt:null}function vi(e){if(!fi){fi={};for(var t=0;t<Ei.length;t++)fi[Ei[t]]=Ci(Ei[t],e)}return fi}function Ri(e){return e?'"'+e.replace(/\"/g,E)+'"':E}function Ai(e,t){var i=ai();if(i){var n="log";i[e]&&(n=e),fe(i[n])&&i[n](t)}}var Ii=function(){function e(e,t,i,n){void 0===i&&(i=!1);var r=this;r.messageId=e,r.message=(i?"AI: ":"AI (Internal): ")+e;var o=E;li()&&(o=ci().stringify(n));var a=(t?" message:"+Ri(t):E)+(n?" props:"+Ri(o):E);r.message+=a}return e.dataType="MessageData",e}();function wi(e,t){return(e||{}).logger||new Oi(t)}var Oi=function e(t){this.identifier="DiagnosticLogger",this.queue=[];var i=0,n={};Mt(e,this,(function(e){function r(e,i){var n=t[e];return _e(n)?i:n}function o(e,i){var n=yi(t);n&&n.diagLog&&n.diagLog(e,i)}_e(t)&&(t={}),e.consoleLoggingLevel=function(){return r("loggingLevelConsole",0)},e.telemetryLoggingLevel=function(){return r("loggingLevelTelemetry",1)},e.maxInternalMessageLimit=function(){return r("maxMessageLimit",25)},e.enableDebugExceptions=function(){return r("enableDebugExceptions",!1)},e.throwInternal=function(t,i,r,a,s){void 0===s&&(s=!1);var l=new Ii(i,r,s,a);if(e.enableDebugExceptions())throw hi(l);var c=1===t?"errorToConsole":"warnToConsole";if(he(l.message))o("throw"+(1===t?"Critical":"Warning"),l);else{var u=e.consoleLoggingLevel();if(s){var d=+l.messageId;!n[d]&&u>=t&&(e[c](l.message),n[d]=!0)}else u>=t&&e[c](l.message);e.logInternalMessage(t,l)}},e.warnToConsole=function(e){Ai("warn",e),o("warning",e)},e.errorToConsole=function(e){Ai("error",e),o("error",e)},e.resetInternalMessageCount=function(){i=0,n={}},e.logInternalMessage=function(t,r){if(!(i>=e.maxInternalMessageLimit())){var a=!0,s="AITR_"+r.messageId;if(n[s]?a=!1:n[s]=!0,a&&(t<=e.telemetryLoggingLevel()&&(e.queue.push(r),i++,o(1===t?"error":"warn",r)),i===e.maxInternalMessageLimit())){var l="Internal events throttle limit per PageView reached for this app.",c=new Ii(23,l,!1);e.queue.push(c),1===t?e.errorToConsole(l):e.warnToConsole(l)}}}}))};function bi(e){return e||new Oi}function Ni(e,t,i,n,r,o){void 0===o&&(o=!1),(e||new Oi).throwInternal(t,i,n,r,o)}function Di(e,t){bi(e).warnToConsole(t)}var Mi="ctx",Li=null,Pi=function(){function e(t,i,n){var r,o=this,a=!1;o.start=He(),o.name=t,o.isAsync=n,o.isChildEvt=function(){return!1},fe(i)&&(a=Fe(o,"payload",(function(){return!r&&fe(i)&&(r=i(),i=null),r}))),o.getCtx=function(t){return t?t===e.ParentContextKey||t===e.ChildrenContextKey?o[t]:(o[Mi]||{})[t]:null},o.setCtx=function(t,i){t&&(t===e.ParentContextKey?(o[t]||(o.isChildEvt=function(){return!0}),o[t]=i):t===e.ChildrenContextKey?o[t]=i:(o[Mi]=o[Mi]||{})[t]=i)},o.complete=function(){var t=0,n=o.getCtx(e.ChildrenContextKey);if(Re(n))for(var r=0;r<n.length;r++){var s=n[r];s&&(t+=s.time)}o.time=He()-o.start,o.exTime=o.time-t,o.complete=function(){},!a&&fe(i)&&(o.payload=i())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),xi=function e(t){this.ctx={},Mt(e,this,(function(e){e.create=function(e,t,i){return new Pi(e,t,i)},e.fire=function(e){e&&(e.complete(),t&&fe(t.perfEvent)&&t.perfEvent(e))},e.setCtx=function(t,i){t&&((e[Mi]=e[Mi]||{})[t]=i)},e.getCtx=function(t){return(e[Mi]||{})[t]}}))},Bi="CoreUtils.doPerf";function ki(e,t,i,n,r){if(e){var o=e;if(fe(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var a=void 0,s=o.getCtx(Bi);try{if(a=o.create(t(),n,r)){if(s&&a.setCtx&&(a.setCtx(Pi.ParentContextKey,s),s.getCtx&&s.setCtx)){var l=s.getCtx(Pi.ChildrenContextKey);l||(l=[],s.setCtx(Pi.ChildrenContextKey,l)),l.push(a)}return o.setCtx(Bi,a),i(a)}}catch(e){a&&a.setCtx&&a.setCtx("exception",e)}finally{a&&o.fire(a),o.setCtx(Bi,s)}}}return i()}function Ui(){return Li}var Fi=4294967296,Gi=4294967295,Vi=!1,qi=123456789,ji=987654321;function Hi(e){e<0&&(e>>>=0),qi=123456789+e&Gi,ji=987654321-e&Gi,Vi=!0}function zi(){try{var e=2147483647&He();Hi((Math.random()*Fi^e)+e)}catch{}}function Wi(e){return e>0?Math.floor(Ki()/Gi*(e+1))>>>0:0}function Ki(e){var t=0,i=ui()||di();return i&&i.getRandomValues&&(t=i.getRandomValues(new Uint32Array(1))[0]&Gi),0===t&&pi()&&(Vi||zi(),t=Yi()&Gi),0===t&&(t=Math.floor(Fi*Math.random()|0)),e||(t>>>=0),t}function Qi(e){e?Hi(e):zi()}function Yi(e){var t=((ji=36969*(65535&ji)+(ji>>16)&Gi)<<16)+(65535&(qi=18e3*(65535&qi)+(qi>>16)&Gi))>>>0&Gi|0;return e||(t>>>=0),t}function $i(e){void 0===e&&(e=22);for(var t=Ki()>>>0,i=0,n=E;n.length<e;)i++,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===i&&(t=(Ki()<<2&4294967295|3&t)>>>0,i=0);return n}var Zi=u,Xi="2.8.4",Ji="."+$i(6),en=0;function tn(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function nn(e,t){return void 0===t&&(t=!1),Ee(e+en+++(t?"."+Xi:"")+Ji)}function rn(e){var t={id:nn("_aiData-"+(e||"")+"."+Xi),accept:function(e){return tn(e)},get:function(e,i,n,r){var o=e[t.id];return o?o[Ee(i)]:(r&&((o=function(e,t){var i=t[e.id];if(!i){i={};try{tn(t)&&(function(e,t,i){if(Zi)try{return Zi(e,t,{value:i,enumerable:!1,configurable:!0}),!0}catch{}return!1}(t,e.id,i)||(t[e.id]=i))}catch{}}return i}(t,e))[Ee(i)]=n),n)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch{}}};return t}var on="toGMTString",an="toUTCString",sn="cookie",ln="expires",cn="enabled",un="isCookieUseDisabled",dn="disableCookiesUsage",pn="_ckMgr",hn=null,_n=null,gn=null,mn=ti(),Sn={},fn={};function En(e,t){var i=Cn[pn]||fn[pn];return i||(i=Cn[pn]=Cn(e,t),fn[pn]=i),i}function Tn(e){return!e||e.isEnabled()}function Cn(e,t){var i=function(e){var t=e.cookieCfg=e.cookieCfg||{};if(We(t,"domain",e.cookieDomain,ge,_e),We(t,"path",e.cookiePath||"/",null,_e),_e(t[cn])){var i=void 0;he(e[un])||(i=!e[un]),he(e[dn])||(i=!e[dn]),t[cn]=i}return t}(e||fn),n=i.path||"/",r=i.domain,o=!1!==i[cn],a={isEnabled:function(){var e=o&&yn(t),i=fn[pn];return e&&i&&a!==i&&(e=Tn(i)),e},setEnabled:function(e){o=!1!==e},set:function(e,t,o,s,l){var c=!1;if(Tn(a)){var u={},d=xe(t||E),p=d.indexOf(";");if(-1!==p&&(d=xe(t.substring(0,p)),u=vn(t.substring(p+1))),We(u,"domain",s||r,Ye,he),!_e(o)){var h=pi();if(he(u[ln])){var _=He()+1e3*o;if(_>0){var g=new Date;g.setTime(_),We(u,ln,Rn(g,h?on:an)||Rn(g,h?on:an)||E,Ye)}}h||We(u,"max-age",E+o,null,he)}var m=oi();m&&"https:"===m.protocol&&(We(u,"secure",null,null,he),null===_n&&(_n=!On((ni()||{}).userAgent)),_n&&We(u,"SameSite","None",null,he)),We(u,"path",l||n,null,he),(i.setCookie||wn)(e,An(d,u)),c=!0}return c},get:function(e){var t=E;return Tn(a)&&(t=(i.getCookie||In)(e)),t},del:function(e,t){var i=!1;return Tn(a)&&(i=a.purge(e,t)),i},purge:function(e,n){var r,o=!1;if(yn(t)){var a=((r={}).path=n||"/",r[ln]="Thu, 01 Jan 1970 00:00:01 GMT",r);pi()||(a["max-age"]="0"),(i.delCookie||wn)(e,An(E,a)),o=!0}return o}};return a[pn]=a,a}function yn(e){if(null===hn){hn=!1;try{hn=void 0!==(mn||{})[sn]}catch(t){Ni(e,2,68,"Cannot access document.cookie - "+ze(t),{exception:hi(t)})}}return hn}function vn(e){var t={};return e&&e.length&&De(xe(e).split(";"),(function(e){if(e=xe(e||E)){var i=e.indexOf("=");-1===i?t[e]=null:t[xe(e.substring(0,i))]=xe(e.substring(i+1))}})),t}function Rn(e,t){return fe(e[t])?e[t]():null}function An(e,t){var i=e||E;return Te(t,(function(e,t){i+="; "+e+(_e(t)?E:"="+t)})),i}function In(e){var t=E;if(mn){var i=mn[sn]||E;gn!==i&&(Sn=vn(i),gn=i),t=xe(Sn[e]||E)}return t}function wn(e,t){mn&&(mn[sn]=e+"="+t)}function On(e){return!!Ie(e)&&!!(ye(e,"CPU iPhone OS 12")||ye(e,"iPad; CPU OS 12")||ye(e,"Macintosh; Intel Mac OS X 10_14")&&ye(e,"Version/")&&ye(e,"Safari")||ye(e,"Macintosh; Intel Mac OS X 10_14")&&Ce(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||ye(e,"Chrome/5")||ye(e,"Chrome/6")||ye(e,"UnrealEngine")&&!ye(e,"Chrome")||ye(e,"UCBrowser/12")||ye(e,"UCBrowser/11"))}var bn="on",Nn="attachEvent",Dn="addEventListener",Mn="detachEvent",Ln="removeEventListener",Pn="events",xn="visibilitychange",Bn="pagehide",kn="pageshow",Un="unload",Fn="beforeunload",Gn=nn("aiEvtPageHide"),Vn=nn("aiEvtPageShow"),qn=/\.[\.]+/g,jn=/[\.]+$/,Hn=1,zn=rn("events"),Wn=/^([^.]*)(?:\.(.+)|)/;function Kn(e){return e&&e.replace?e.replace(/^\s*\.*|\.*\s*$/g,""):e}function Qn(e,t){if(t){var i="";Re(t)?(i="",De(t,(function(e){(e=Kn(e))&&("."!==e[0]&&(e="."+e),i+=e)}))):i=Kn(t),i&&("."!==i[0]&&(i="."+i),e=(e||"")+i)}var n=Wn.exec(e||"")||[];return{type:n[1],ns:(n[2]||"").replace(qn,".").replace(jn,"").split(".").sort().join(".")}}function Yn(e,t,i){void 0===i&&(i=!0);var n=zn.get(e,Pn,{},i),r=n[t];return r||(r=n[t]=[]),r}function $n(e,t,i,n){e&&t&&t.type&&(e[Ln]?e[Ln](t.type,i,n):e[Mn]&&e[Mn](bn+t.type,i))}function Zn(e,t,i,n){for(var r=t.length;r--;){var o=t[r];o&&(!i.ns||i.ns===o.evtName.ns)&&(!n||n(o))&&($n(e,o.evtName,o.handler,o.capture),t.splice(r,1))}}function Xn(e,t){return t?Qn("xx",Re(t)?[e].concat(t):[e,t]).ns.split("."):e}function Jn(e,t,i,n,r){void 0===r&&(r=!1);var o=!1;if(e)try{var a=Qn(t,n);if(o=function(e,t,i,n){var r=!1;return e&&t&&t.type&&i&&(e[Dn]?(e[Dn](t.type,i,n),r=!0):e[Nn]&&(e[Nn](bn+t.type,i),r=!0)),r}(e,a,i,r),o&&zn.accept(e)){var s={guid:Hn++,evtName:a,handler:i,capture:r};Yn(e,a.type).push(s)}}catch{}return o}function er(e,t,i,n,r){if(void 0===r&&(r=!1),e)try{var o=Qn(t,n),a=!1;(function(e,t,i){if(t.type)Zn(e,Yn(e,t.type),t,i);else{var n=zn.get(e,Pn,{});Te(n,(function(n,r){Zn(e,r,t,i)})),0===Ue(n).length&&zn.kill(e,Pn)}})(e,o,(function(e){return!((!o.ns||i)&&e.handler!==i||(a=!0,0))})),a||$n(e,o,i,r)}catch{}}function tr(e,t,i,n){return void 0===n&&(n=!1),Jn(e,t,i,null,n)}function ir(e,t,i,n){void 0===n&&(n=!1),er(e,t,i,null,n)}function nr(e,t,i){var n=!1,r=Jt();r&&(n=Jn(r,e,t,i),n=Jn(r.body,e,t,i)||n);var o=ti();return o&&(n=Jn(o,e,t,i)||n),n}function rr(e,t,i){var n=Jt();n&&(er(n,e,t,i),er(n.body,e,t,i));var r=ti();r&&er(r,e,t,i)}function or(e,t,i,n){var r=!1;return t&&e&&e.length>0&&De(e,(function(e){e&&(!i||-1===Me(i,e))&&(r=nr(e,t,n)||r)})),r}function ar(e,t,i,n){var r=!1;return t&&e&&Re(e)&&!(r=or(e,t,i,n))&&i&&i.length>0&&(r=or(e,t,null,n)),r}function sr(e,t,i){e&&Re(e)&&De(e,(function(e){e&&rr(e,t,i)}))}var lr,cr=null,ur=n;function dr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(gr,(function(e){var t=0|Wi(15);return("x"===e?t:3&t|8).toString(16)}))}function pr(){var e=si();return e&&e.now?e.now():He()}function hr(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i=E,n=0;n<4;n++)i+=t[15&(e=Ki())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var r=t[8+(3&Ki())|0];return i.substr(0,8)+i.substr(9,4)+"4"+i.substr(13,3)+r+i.substr(16,3)+i.substr(19,12)}var _r={_canUseCookies:void 0,isTypeof:pe,isUndefined:he,isNullOrUndefined:_e,hasOwnProperty:me,isFunction:fe,isObject:Se,isDate:ve,isArray:Re,isError:Ae,isString:Ie,isNumber:we,isBoolean:Oe,toISOString:Ne,arrForEach:De,arrIndexOf:Me,arrMap:Le,arrReduce:Pe,strTrim:xe,objCreate:g,objKeys:Ue,objDefineAccessors:Fe,addEventHandler:nr,dateNow:He,isIE:pi,disableCookies:fr,newGuid:dr,perfNow:pr,newId:$i,randomValue:Wi,random32:Ki,mwcRandomSeed:Qi,mwcRandom32:Yi,generateW3CId:hr},gr=/[xy]/g,mr={Attach:tr,AttachEvent:tr,Detach:ir,DetachEvent:ir};function Sr(e,t){var i=En(e,t),n=_r._canUseCookies;return null===cr&&(cr=[],lr=n,Fe(_r,"_canUseCookies",(function(){return lr}),(function(e){lr=e,De(cr,(function(t){t.setEnabled(e)}))}))),-1===Me(cr,i)&&cr.push(i),Oe(n)&&i.setEnabled(n),Oe(lr)&&i.setEnabled(lr),i}function fr(){Sr().setEnabled(!1)}var Er=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,Tr="00",Cr="ff",yr="00000000000000000000000000000000",vr="0000000000000000";function Rr(e,t,i){return!(!e||e.length!==t||e===i||!e.match(/^[\da-f]*$/))}function Ar(e,t,i){return Rr(e,t)?e:i}function Ir(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function wr(e){if(!e||(Re(e)&&(e=e[0]||""),!e||!Ie(e)||e.length>8192))return null;var t=Er.exec(xe(e));return t&&t[1]!==Cr&&t[2]!==yr&&t[3]!==vr?{version:t[1],traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}:null}function Or(e){return Rr(e,32,yr)}function br(e){return Rr(e,16,vr)}function Nr(e){return!!(e&&Rr(e.version,2,Cr)&&Rr(e.traceId,32,yr)&&Rr(e.spanId,16,vr)&&Rr(Ir(e.traceFlags),2))}var Dr=rn("plugin");function Mr(e){return Dr.get(e,"state",{},!0)}function Lr(e,t){for(var i,n=[],r=null,o=e.getNext();o;){var a=o.getPlugin();a&&(r&&fe(r[y])&&fe(a[T])&&r[y](a),(fe(a[v])?a[v]():(i=Mr(a))[v])||n.push(a),r=a,o=o.getNext())}De(n,(function(n){var r=e.core();n.initialize(e.getCfg(),r,t,e.getNext()),i=Mr(n),!n[A]&&!i[A]&&(i[A]=r),i[v]=!0,delete i[R]}))}function Pr(e){return e.sort((function(e,t){var i=0;if(t){var n=fe(t[T]);fe(e[T])?i=n?e[C]-t[C]:1:n&&(i=-1)}else i=e?1:-1;return i}))}var xr="TelemetryPluginChain",Br="_hasRun",kr="_getTelCtx",Ur=0;function Fr(e,t,i,n){var r=null,o=[];null!==n&&(r=n?function(e,t,i){for(;e;){if(e.getPlugin()===i)return e;e=e.getNext()}return jr([i],t.config||{},t)}(e,i,n):e);var a={_next:function(){var e=r;if(r=e?e.getNext():null,!e){var t=o;t&&t.length>0&&(De(t,(function(e){try{e.func.call(e.self,e.args)}catch(e){Ni(i.logger,2,73,"Unexpected Exception during onComplete - "+hi(e))}})),o=[])}return e},ctx:{core:function(){return i},diagLog:function(){return wi(i,t)},getCfg:function(){return t},getExtCfg:s,getConfig:function(e,i,n){void 0===n&&(n=!1);var r,o=s(e,null);return o&&!_e(o[i])?r=o[i]:t&&!_e(t[i])&&(r=t[i]),_e(r)?n:r},hasNext:function(){return!!r},getNext:function(){return r},setNext:function(e){r=e},iterate:function(e){for(var t;t=a._next();){var i=t.getPlugin();i&&e(i)}},onComplete:function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];e&&o.push({func:e,self:he(t)?a.ctx:t,args:i})}}};function s(e,i,n){var r;if(void 0===i&&(i={}),void 0===n&&(n=0),t){var o=t.extensionConfig;o&&e&&(r=o[e])}if(r){if(Se(i)&&0!==n){var a=et(!0,i,r);t&&2===n&&Te(i,(function(e){if(_e(a[e])){var i=t[e];_e(i)||(a[e]=i)}})),r=a}}else r=i;return r}return a}function Gr(e,t,i,n){var r=Fr(e,t,i,n),o=r.ctx;return o.processNext=function(e){var t=r._next();return t&&t.processTelemetry(e,o),!t},o.createNew=function(e,n){return void 0===e&&(e=null),Re(e)&&(e=jr(e,t,i,n)),Gr(e||o.getNext(),t,i,n)},o}function Vr(e,t,i){var n=t.config||{},r=Fr(e,n,t,i),o=r.ctx;return o.processNext=function(e){var t=r._next();return t&&t.unload(o,e),!t},o.createNew=function(e,i){return void 0===e&&(e=null),Re(e)&&(e=jr(e,n,t,i)),Vr(e||o.getNext(),t,i)},o}function qr(e,t,i){var n=t.config||{},r=Fr(e,n,t,i).ctx;return r.processNext=function(e){return r.iterate((function(t){fe(t.update)&&t.update(r,e)}))},r.createNew=function(e,i){return void 0===e&&(e=null),Re(e)&&(e=jr(e,n,t,i)),qr(e||r.getNext(),t,i)},r}function jr(e,t,i,n){var r=null,o=!n;if(Re(e)&&e.length>0){var a=null;De(e,(function(e){if(!o&&n===e&&(o=!0),o&&e&&fe(e.processTelemetry)){var s=function(e,t,i){var n,r=null,o=fe(e.processTelemetry),a=fe(e.setNextPlugin),s={getPlugin:function(){return e},getNext:function(){return r},processTelemetry:function(n,c){l(c=c||function(){var n;return e&&fe(e[kr])&&(n=e[kr]()),n||(n=Gr(s,t,i)),n}(),(function(t){if(!e||!o)return!1;var i=Mr(e);return!i.teardown&&!i[w]&&(a&&e.setNextPlugin(r),e.processTelemetry(n,t),!0)}),"processTelemetry",(function(){return{item:n}}),!n.sync)||c.processNext(n)},unload:function(t,i){l(t,(function(){var n=!1;if(e){var r=Mr(e),o=e[A]||r.core;e&&(!o||o===t[A]())&&!r[R]&&(r[A]=null,r[R]=!0,r[v]=!1,e[R]&&!0===e[R](t,i)&&(n=!0))}return n}),"unload",(function(){}),i.isAsync)||t.processNext(i)},update:function(t,i){l(t,(function(){var n=!1;if(e){var r=Mr(e),o=e[A]||r.core;e&&(!o||o===t[A]())&&!r[R]&&e[I]&&!0===e[I](t,i)&&(n=!0)}return n}),"update",(function(){}),!1)||t.processNext(i)},_id:n=e?e.identifier+"-"+e.priority+"-"+Ur++:"Unknown-0-"+Ur++,_setNext:function(e){r=e}};function l(t,i,o,a,s){var l=!1,c=e?e.identifier:xr,u=t[Br];return u||(u=t[Br]={}),t.setNext(r),e&&ki(t[A](),(function(){return c+":"+o}),(function(){u[n]=!0;try{var e=r?r._id:E;e&&(u[e]=!1),l=i(t)}catch(e){var a=!r||u[r._id];a&&(l=!0),(!r||!a)&&Ni(t.diagLog(),1,73,"Plugin ["+c+"] failed during "+o+" - "+hi(e)+", run flags: "+hi(u))}}),a,s),l}return qe(s)}(e,t,i);r||(r=s),a&&a._setNext(s),a=s}}))}return n&&!r?jr([n],t,i):r}var Hr="extensionConfig",zr=500;function Wr(e,t,i,n){t&&Re(t)&&t.length>0&&(De(t=t.sort((function(e,t){return e.priority-t.priority})),(function(e){e.priority<zr&&$e("Channel has invalid priority - "+e.identifier)})),e.push({queue:qe(t),chain:jr(t,i,n)}))}function Kr(){var e=[];return{add:function(t){t&&e.push(t)},run:function(t,i){De(e,(function(e){try{e(t,i)}catch(e){Ni(t.diagLog(),2,73,"Unexpected error calling unload handler - "+hi(e))}})),e=[]}}}var Qr="getPlugin",Yr=function e(){var t,i,n,r,o,a=this;function s(e){void 0===e&&(e=null);var t=e;if(!t){var r=i||Gr(null,{},a.core);t=n&&n[Qr]?r.createNew(null,n[Qr]):r.createNew(null,n)}return t}function l(e,t,r){e&&We(e,Hr,[],null,_e),!r&&t&&(r=t.getProcessTelContext().getNext());var o=n;n&&n[Qr]&&(o=n[Qr]()),a.core=t,i=Gr(r,e,t,o)}function c(){t=!1,a.core=null,i=null,n=null,o=[],r=Kr()}c(),Mt(e,a,(function(e){e.initialize=function(e,i,n,r){l(e,i,r),t=!0},e.teardown=function(t,i){var a=e.core;if(a&&(!t||a===t.core())){var s,l=!1,u=t||Vr(null,a,n&&n[Qr]?n[Qr]():n),d=i||{reason:0,isAsync:!1};return e[O]&&!0===e[O](u,d,p)?s=!0:p(),s}function p(){l||(l=!0,r.run(u,i),De(o,(function(e){e.rm()})),o=[],!0===s&&u.processNext(d),c())}},e.update=function(t,i){var r=e.core;if(r&&(!t||r===t.core())){var o,a=!1,s=t||qr(null,r,n&&n[Qr]?n[Qr]():n),c=i||{reason:0};return e._doUpdate&&!0===e._doUpdate(s,c,u)?o=!0:u(),o}function u(){a||(a=!0,l(s.getCfg(),s.core(),s.getNext()))}},e._addHook=function(e){e&&(Re(e)?o=o.concat(e):o.push(e))},Xe(e,"_addUnloadCb",(function(){return r}),"add")})),a.diagLog=function(e){return s(e).diagLog()},a[v]=function(){return t},a.setInitialized=function(e){t=e},a[y]=function(e){n=e},a.processNext=function(e,t){t?t.processNext(e):n&&fe(n.processTelemetry)&&n.processTelemetry(e,null)},a._getTelCtx=s},$r=function(e){function t(){var i,n,r=e.call(this)||this;function o(){i=0,n=[]}return r.identifier="TelemetryInitializerPlugin",r.priority=199,o(),Mt(t,r,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:i++,fn:e};return n.push(t),{remove:function(){De(n,(function(e,i){if(e.id===t.id)return n.splice(i,1),-1}))}}},e.processTelemetry=function(t,i){for(var r=!1,o=n.length,a=0;a<o;++a){var s=n[a];if(s)try{if(!1===s.fn.apply(null,[t])){r=!0;break}}catch(e){Ni(i.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+ze(e),{exception:hi(e)},!0)}}r||e.processNext(t,i)},e[O]=function(){o()}})),r}return S(t,e),t}(Yr),Zr="Plugins must provide initialize method",Xr="_notificationManager",Jr="SDK is still unloading...",eo={loggingLevelConsole:1};function to(e,t){return new xi(t)}function io(e,t){var i=!1;return De(t,(function(t){if(t===e)return i=!0,-1})),i}var no=function e(){var t,i,n,r,o,a,s,l,c,u,d,p,h,_,m,S,E,T,C,y=0;Mt(e,this,(function(e){function v(){t=!1,e.config=et(!0,{},eo),e.logger=new Oi(e.config),e._extensions=[],_=new $r,i=[],n=null,r=null,o=null,a=null,s=null,c=null,l=[],u=null,d=null,p=null,h=!1,m=null,S=nn("AIBaseCore",!0),E=Kr(),C=null}function A(){return Gr(M(),e.config,e)}function I(t,i){var n=function(e,t,i){var n=[],r={};return De(i,(function(t){(_e(t)||_e(t.initialize))&&$e(Zr);var i=t.priority,o=t.identifier;t&&i&&(_e(r[i])?r[i]=o:Di(e,"Two extensions have same priority #"+i+" - "+r[i]+", "+o)),(!i||i<500)&&n.push(t)})),{all:i,core:n}}(e.logger,0,l);c=n.core,s=null;var r=n.all;if(p=qe(function(e,t,i,n){var r=[];if(e&&De(e,(function(e){return Wr(r,e,i,n)})),t){var o=[];De(t,(function(e){e.priority>zr&&o.push(e)})),Wr(r,o,i,n)}return r}(d,r,t,e)),u){var o=Me(r,u);-1!==o&&r.splice(o,1),-1!==(o=Me(c,u))&&c.splice(o,1),u._setQueue(p)}else u=function(e,t){var i;function n(){return Gr(null,t.config,t,null)}function r(e,t,i,n){var r=e?e.length+1:1;function o(){0==--r&&(n&&n(),n=null)}r>0&&De(e,(function(e){if(e&&e.queue.length>0){var n=e.chain,a=t.createNew(n);a.onComplete(o),i(a)}else r--})),o()}var o=!1;return(i={identifier:"ChannelControllerPlugin",priority:zr,initialize:function(t,i,n,r){o=!0,De(e,(function(e){e&&e.queue.length>0&&Lr(Gr(e.chain,t,i),n)}))},isInitialized:function(){return o},processTelemetry:function(t,i){r(e,i||n(),(function(e){e[b](t)}),(function(){i[b](t)}))},update:function(t,i){var n=i||{reason:0};return r(e,t,(function(e){e[b](n)}),(function(){t[b](n)})),!0}})[D]=function(){r(e,n(),(function(e){e.iterate((function(e){e[D]&&e[D]()}))}),null)},i[N]=function(){r(e,n(),(function(e){e.iterate((function(e){e[N]&&e[N]()}))}),null)},i[R]=function(t,i){var n=i||{reason:0,isAsync:!1};return r(e,t,(function(e){e[b](n)}),(function(){t[b](n),o=!1})),!0},i.getChannel=function(t){var i=null;return e&&e.length>0&&De(e,(function(e){if(e&&e.queue.length>0&&(De(e.queue,(function(e){if(e.identifier===t)return i=e,-1})),i))return-1})),i},i.flush=function(t,i,o,a){var s=1,l=!1,c=null;function u(){s--,l&&0===s&&(c&&(clearTimeout(c),c=null),i&&i(l),i=null)}return a=a||5e3,r(e,n(),(function(e){e.iterate((function(e){if(e.flush){s++;var i=!1;e.flush(t,(function(){i=!0,u()}),o)||i||(t&&null==c?c=setTimeout((function(){c=null,u()}),a):u())}}))}),(function(){l=!0,u()})),!0},i._setQueue=function(t){e=t},i}(p,e);r.push(u),c.push(u),e._extensions=Pr(r),u.initialize(t,e,r),Lr(A(),r),e._extensions=qe(Pr(c||[])).slice(),i&&function(t){var i=qr(M(),e);(!e._updateHook||!0!==e._updateHook(i,t))&&i.processNext(t)}(i)}function O(t){var i=null,n=null;return De(e._extensions,(function(e){if(e.identifier===t&&e!==u&&e!==_)return n=e,-1})),!n&&u&&(n=u.getChannel(t)),n&&(i={plugin:n,setEnabled:function(e){Mr(n)[w]=!e},isEnabled:function(){var e=Mr(n);return!e[R]&&!e[w]},remove:function(t,i){void 0===t&&(t=!0);var r=[n];U(r,{reason:1,isAsync:t},(function(t){t&&I(e.config,{reason:32,removed:r}),i&&i(t)}))}}),i}function M(){if(!s){var t=(c||[]).slice();-1===Me(t,_)&&t.push(_),s=jr(Pr(t),e.config,e)}return s}function U(t,i,n){if(t&&t.length>0){var r=Vr(jr(t,e.config,e),e);r.onComplete((function(){var e=!1,i=[];De(l,(function(n,r){io(n,t)?e=!0:i.push(n)})),l=i;var r=[];d&&(De(d,(function(i,n){var o=[];De(i,(function(i){io(i,t)?e=!0:o.push(i)})),r.push(o)})),d=r),n&&n(e)})),r.processNext(i)}else n(!1)}function F(){var t=e.logger?e.logger.queue:[];t&&(De(t,(function(t){var i={name:m||"InternalMessageId: "+t.messageId,iKey:e.config.instrumentationKey,time:Ne(new Date),baseType:Ii.dataType,baseData:{message:t.message}};e.track(i)})),t.length=0)}function G(e,t,i,n){return u?u.flush(e,t,i||6,n):(t&&t(!1),!0)}function V(t){var i=e.logger;i?Ni(i,2,73,t):$e(t)}v(),e.isInitialized=function(){return t},e.initialize=function(i,r,a,s){h&&$e(Jr),e.isInitialized()&&$e("Core should not be initialized more than once"),(!i||_e(i.instrumentationKey))&&$e("Please provide instrumentation key"),n=s,e[Xr]=s,e.config=i||{},function(e){!0===e.disableDbgExt&&T&&(n[P](T),T=null),n&&!T&&!0!==e.disableDbgExt&&(T=vi(e),n[L](T))}(i),function(t){!t.enablePerfMgr&&o&&(o=null),t.enablePerfMgr&&We(e.config,"createPerfMgr",to)}(i),i.extensions=_e(i.extensions)?[]:i.extensions,function(e){Ke(e,Hr).NotificationManager=n}(i),a&&(e.logger=a),(l=[]).push.apply(l,f(f([],r),i.extensions)),d=(i||{}).channels,I(i,null),(!p||0===p.length)&&$e("No channels available"),t=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return p&&De(p,(function(t){e.push(t.queue)})),qe(e)},e.track=function(t){We(t,"iKey",e.config.instrumentationKey,null,Qe),We(t,"time",Ne(new Date),null,Qe),We(t,"ver","4.0",null,_e),!h&&e.isInitialized()?A().processNext(t):i.push(t)},e.getProcessTelContext=A,e.getNotifyMgr=function(){return n||(n=function(){var e;return g(((e={})[L]=function(e){},e[P]=function(e){},e[x]=function(e){},e[B]=function(e,t){},e[k]=function(e,t){},e))}(),e[Xr]=n),n},e[L]=function(e){n&&n[L](e)},e[P]=function(e){n&&n[P](e)},e.getCookieMgr=function(){return a||(a=Cn(e.config,e.logger)),a},e.setCookieMgr=function(e){a=e},e.getPerfMgr=function(){return!r&&!o&&e.config&&e.config.enablePerfMgr&&fe(e.config.createPerfMgr)&&(o=e.config.createPerfMgr(e,e.getNotifyMgr())),r||o||Ui()},e.setPerfMgr=function(e){r=e},e.eventCnt=function(){return i.length},e.releaseQueue=function(){if(t&&i.length>0){var e=i;i=[],De(e,(function(e){A().processNext(e)}))}},e.pollInternalLogs=function(t){m=t||null;var i=e.config.diagnosticLogInterval;return(!i||!(i>0))&&(i=1e4),y&&clearInterval(y),y=setInterval((function(){F()}),i)},e.stopPollingInternalLogs=function(){y&&(clearInterval(y),y=0,F())},Je(e,(function(){return _}),["addTelemetryInitializer"]),e.unload=function(i,n,r){void 0===i&&(i=!0),t||$e("SDK is not initialized"),h&&$e(Jr);var o={reason:50,isAsync:i,flushComplete:!1},a=Vr(M(),e);function s(t){o.flushComplete=t,h=!0,E.run(a,o),e.stopPollingInternalLogs(),a.processNext(o)}a.onComplete((function(){v(),n&&n(o)}),e),G(i,s,6,r)||s(!1)},e.getPlugin=O,e.addPlugin=function(t,i,n,r){if(!t)return r&&r(!1),void V(Zr);var o=O(t.identifier);if(o&&!i)return r&&r(!1),void V("Plugin ["+t.identifier+"] is already loaded!");var a={reason:16};function s(i){l.push(t),a.added=[t],I(e.config,a),r&&r(!0)}if(o){var c=[o.plugin];U(c,{reason:2,isAsync:!!n},(function(e){e?(a.removed=c,a.reason|=32,s()):r&&r(!1)}))}else s()},e.evtNamespace=function(){return S},e.flush=G,e.getTraceCtx=function(e){return C||(C=function(e){var t={};return{getName:function(){return t.name},setName:function(e){t.name=e},getTraceId:function(){return t.traceId},setTraceId:function(e){Or(e)&&(t.traceId=e)},getSpanId:function(){return t.spanId},setSpanId:function(e){br(e)&&(t.spanId=e)},getTraceFlags:function(){return t.traceFlags},setTraceFlags:function(e){t.traceFlags=e}}}()),C},e.setTraceCtx=function(e){C=e||null},Xe(e,"addUnloadCb",(function(){return E}),"add")}))};function ro(e,t,i,n){De(e,(function(e){if(e&&e[t])if(i)setTimeout((function(){return n(e)}),0);else try{n(e)}catch{}}))}var oo=function e(t){this.listeners=[];var i=!!(t||{}).perfEvtsSendAll;Mt(e,this,(function(e){e[L]=function(t){e.listeners.push(t)},e[P]=function(t){for(var i=Me(e.listeners,t);i>-1;)e.listeners.splice(i,1),i=Me(e.listeners,t)},e[x]=function(t){ro(e.listeners,x,!0,(function(e){e[x](t)}))},e[B]=function(t,i){ro(e.listeners,B,!0,(function(e){e[B](t,i)}))},e[k]=function(t,i){ro(e.listeners,k,i,(function(e){e[k](t,i)}))},e[U]=function(t){t&&(i||!t.isChildEvt())&&ro(e.listeners,U,!1,(function(e){t.isAsync?setTimeout((function(){return e[U](t)}),0):e[U](t)}))}}))},ao=function(e){function t(){var i=e.call(this)||this;return Mt(t,i,(function(e,t){function i(t){var i=e.getNotifyMgr();i&&i.eventsDiscarded([t],2)}e.initialize=function(e,i,n,r){t.initialize(e,i,n||new Oi(e),r||new oo(e))},e.track=function(n){ki(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===n&&(i(n),$e("Invalid telemetry item")),function(e){_e(e.name)&&(i(e),$e("telemetry name required"))}(n),t.track(n)}),(function(){return{item:n}}),!n.sync)}})),i}return S(t,e),t}(no),so=tt({CRITICAL:1,WARNING:2}),lo=tt({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),co="_aiHooks",uo=["req","rsp","hkErr","fnErr"];function po(e,t){if(e)for(var i=0;i<e.length&&!t(e[i],i);i++);}function ho(e,t,i,n,r){r>=0&&r<=2&&po(e,(function(e,o){var a=e.cbks,s=a[uo[r]];if(s){t.ctx=function(){return n[o]=n[o]||{}};try{s.apply(t.inst,i)}catch(e){var l=t.err;try{var c=a[uo[2]];c&&(t.err=e,c.apply(t.inst,i))}catch{}finally{t.err=l}}}}))}function _o(e,t,i){var n=null;return e&&(me(e,t)?n=e:i&&(n=_o(de(e),t,!1))),n}function go(e,t,i,n){var r=i&&i[co];if(!r){var o=function(e){return function(){var t=arguments,i=e.h,n={name:e.n,inst:this,ctx:null,set:function(e,i){(t=a([],t))[e]=i,o=a([n],t)}},r=[],o=a([n],t);function a(e,t){return po(t,(function(t){e.push(t)})),e}n.evt=Zt("event"),ho(i,n,o,r,0);var s=e.f;if(s)try{n.rslt=s.apply(this,t)}catch(e){throw n.err=e,ho(i,n,o,r,3),e}return ho(i,n,o,r,1),n.rslt}}(r={i:0,n:t,f:i,h:[]});o[co]=r,e[t]=o}var a={id:r.i,cbks:n,rm:function(){var e=this.id;po(r.h,(function(t,i){if(t.id===e)return r.h.splice(i,1),1}))}};return r.i++,r.h.push(a),a}function mo(e,i,n,r){if(void 0===r&&(r=!0),e&&i&&n){var o=_o(e,i,r);if(o){var a=o[i];if(typeof a===t)return go(o,i,a,n)}}return null}function So(e,t,i,n){void 0===n&&(n=!0);var r=null;return po(t,(function(t){var o=mo(e,t,i,n);o&&(r||(r=[]),r.push(o))})),r}e.AppInsightsCore=ao,e.BaseCore=no,e.BaseTelemetryPlugin=Yr,e.CoreUtils=_r,e.DiagnosticLogger=Oi,e.EventHelper=mr,e.EventsDiscardedReason=it,e.InstrumentEvent=function(e,t,i,n){if(e&&t&&i){var r=_o(e,t,n)||e;if(r)return go(r,t,r[t],i)}return null},e.InstrumentFunc=mo,e.InstrumentFuncs=So,e.InstrumentProto=function(e,t,i){return e?mo(e[r],t,i,!1):null},e.InstrumentProtos=function(e,t,i){return e?So(e[r],t,i,!1):null},e.LoggingSeverity=so,e.MinChannelPriorty=100,e.NotificationManager=oo,e.PerfEvent=Pi,e.PerfManager=xi,e.ProcessTelemetryContext=function(e,t,i,n){var r=Gr(e,t,i,n);Je(this,r,Ue(r))},e.Undefined=ur,e._InternalLogMessage=Ii,e._InternalMessageId=lo,e.__getRegisteredEvents=function(e,t,i){var n=[],r=zn.get(e,Pn,{},!1),o=Qn(t,i);return Te(r,(function(e,t){De(t,(function(e){(!o.type||o.type===e.evtName.type)&&(!o.ns||o.ns==o.ns)&&n.push({name:e.evtName.type+(e.evtName.ns?"."+e.evtName.ns:""),handler:e.handler})}))})),n},e._legacyCookieMgr=Sr,e._logInternalMessage=function(e,t,i){bi(e).logInternalMessage(t,i)},e._throwInternal=Ni,e._warnToConsole=Di,e.addEventHandler=nr,e.addEventListeners=ar,e.addPageHideEventListener=function e(t,i,n){var r=Xn(Gn,n),o=or([Bn],t,i,r);return(!i||-1===Me(i,xn))&&(o=or([xn],(function(e){var i=ti();t&&i&&"hidden"===i.visibilityState&&t(e)}),i,r)||o),!o&&i&&(o=e(t,null,n)),o},e.addPageShowEventListener=function e(t,i,n){var r=Xn(Vn,n),o=or([kn],t,i,r);return!(o=or([xn],(function(e){var i=ti();t&&i&&"visible"===i.visibilityState&&t(e)}),i,r)||o)&&i&&(o=e(t,null,n)),o},e.addPageUnloadEventListener=function(e,t,i){return ar([Fn,Un,Bn],e,t,i)},e.areCookiesSupported=yn,e.arrForEach=De,e.arrIndexOf=Me,e.arrMap=Le,e.arrReduce=Pe,e.attachEvent=tr,e.canUseCookies=function(e){return Sr(null,e).isEnabled()},e.createClassFromInterface=function(e){return function(){var t=this;e&&Te(e,(function(e,i){t[e]=i}))}},e.createCookieMgr=Cn,e.createEnumMap=function(e){var t={};return Te(e,(function(e,i){t[e]=e,t[i]=e})),Ve(t)},e.createEnumStyle=tt,e.createProcessTelemetryContext=Gr,e.createTraceParent=function(e,t,i,n){return{version:Rr(n,2,Cr)?n:Tr,traceId:Or(e)?e:hr(),spanId:br(t)?t:hr().substr(0,16),traceFlags:i>=0&&i<=255?i:1}},e.createUniqueNamespace=nn,e.createUnloadHandlerContainer=Kr,e.createValueMap=function(e){var t={};return Te(e,(function(e,i){t[e]=i[1],t[i[0]]=i[1]})),Ve(t)},e.dateNow=He,e.deepFreeze=Ve,e.deleteCookie=function(e,t){return Sr(null,e).del(t)},e.detachEvent=ir,e.disableCookies=fr,e.doPerf=ki,e.dumpObj=hi,e.eventOff=er,e.eventOn=Jn,e.findMetaTag=mi,e.findNamedServerTiming=Si,e.findW3cTraceParent=function(){var e="traceparent",t=wr(mi(e));return t||(t=wr(Si(e))),t},e.formatTraceParent=function(e){if(e){var t=Ir(e.traceFlags);Rr(t,2)||(t="01");var i=e.version||Tr;return"00"!==i&&"ff"!==i&&(i=Tr),"".concat(i,"-").concat(Ar(e.traceId,32,yr),"-").concat(Ar(e.spanId,16,vr),"-").concat(t)}return""},e.generateW3CId=hr,e.getConsole=ai,e.getCookie=function(e,t){return Sr(null,e).get(t)},e.getCrypto=ui,e.getDebugExt=yi,e.getDebugListener=vi,e.getDocument=ti,e.getExceptionName=ze,e.getGblPerfMgr=Ui,e.getGlobal=h,e.getGlobalInst=Zt,e.getHistory=function(){return ri()?history:Zt("history")},e.getIEVersion=function(e){if(void 0===e&&(e=null),!e){var t=ni()||{};e=t?(t.userAgent||E).toLowerCase():E}var i=(e||E).toLowerCase();if(ye(i,qt)){var n=ti()||{};return Math.max(parseInt(i.split(qt)[1]),n.documentMode||0)}if(ye(i,jt)){var r=parseInt(i.split(jt)[1]);if(r)return r+4}return null},e.getJSON=ci,e.getLocation=oi,e.getMsCrypto=di,e.getNavigator=ni,e.getPerformance=si,e.getSetValue=Ke,e.getWindow=Jt,e.hasDocument=ei,e.hasHistory=ri,e.hasJSON=li,e.hasNavigator=ii,e.hasOwnProperty=me,e.hasWindow=Xt,e.initializePlugins=Lr,e.isArray=Re,e.isBeaconsSupported=function(){return null===Yt&&(Yt=ii()&&Boolean(ni().sendBeacon)),Yt},e.isBoolean=Oe,e.isDate=ve,e.isError=Ae,e.isFetchSupported=function(e){var t=!1;try{t=!!Zt("fetch");var i=Zt("Request");t&&e&&i&&(t=$t(i,"keepalive"))}catch{}return t},e.isFunction=fe,e.isIE=pi,e.isNotNullOrUndefined=ge,e.isNotTruthy=Qe,e.isNotUndefined=function(e){return!he(e)},e.isNullOrUndefined=_e,e.isNumber=we,e.isObject=Se,e.isReactNative=function(){var e=ni();return!(!e||!e.product)&&"ReactNative"===e.product},e.isSafari=function(e){if(!e||!Ie(e)){var t=ni()||{};e=t?(t.userAgent||E).toLowerCase():E}return(e||E).toLowerCase().indexOf("safari")>=0},e.isSampledFlag=function(e){return!!Nr(e)&&1==(1&e.traceFlags)},e.isString=Ie,e.isSymbol=function(e){return"symbol"==typeof e},e.isTruthy=Ye,e.isTypeof=pe,e.isUndefined=he,e.isValidSpanId=br,e.isValidTraceId=Or,e.isValidTraceParent=Nr,e.isXhrSupported=_i,e.mergeEvtNamespace=Xn,e.mwcRandom32=Yi,e.mwcRandomSeed=Qi,e.newGuid=dr,e.newId=$i,e.normalizeJsName=Ee,e.objCreate=g,e.objDefineAccessors=Fe,e.objExtend=et,e.objForEachKey=Te,e.objFreeze=qe,e.objKeys=Ue,e.objSeal=je,e.objToString=function(e){return re.call(e)},e.optimizeObject=function(e){return e&&l&&(e=a(l({},e))),e},e.parseTraceParent=wr,e.perfNow=pr,e.proxyAssign=function(e,t,i){if(e&&t&&Se(e)&&Se(t)){var n=function(n){if(Ie(n)){var r=t[n];fe(r)?(!i||i(n,!0,t,e))&&(e[n]=Ze(t,n)):(!i||i(n,!1,t,e))&&(me(e,n)&&delete e[n],Fe(e,n,(function(){return t[n]}),(function(e){t[n]=e}))||(e[n]=r))}};for(var r in t)n(r)}return e},e.proxyFunctionAs=Xe,e.proxyFunctions=Je,e.random32=Ki,e.randomValue=Wi,e.removeEventHandler=rr,e.removeEventListeners=sr,e.removePageHideEventListener=function(e,t){var i=Xn(Gn,t);sr([Bn],e,i),sr([xn],null,i)},e.removePageShowEventListener=function(e,t){var i=Xn(Vn,t);sr([kn],e,i),sr([xn],null,i)},e.removePageUnloadEventListener=function(e,t){sr([Fn,Un,Bn],e,t)},e.safeGetCookieMgr=function(e,t){var i;if(e)i=e.getCookieMgr();else if(t){var n=t.cookieCfg;i=n[pn]?n[pn]:Cn(t)}return i||(i=En(t,(e||{}).logger)),i},e.safeGetLogger=wi,e.setCookie=function(e,t,i,n){Sr(null,e).set(t,i,null,n)},e.setEnableEnvMocks=function(e){Kt=e},e.setGblPerfMgr=function(e){Li=e},e.setValue=We,e.sortPlugins=Pr,e.strContains=ye,e.strEndsWith=Ce,e.strFunction=t,e.strObject=i,e.strPrototype=r,e.strStartsWith=function(e,t){var i=!1;return e&&t&&!(i=e===t)&&(i=te?e[V](t):function(e,t){var i=!1,n=t?t.length:0;if(e&&n&&e.length>=n&&!(i=e===t)){for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;i=!0}return i}(e,t)),i},e.strTrim=xe,e.strUndefined=n,e.throwError=$e,e.toISOString=Ne,e.uaDisallowsSameSiteNone=On,e.unloadComponents=function(e,t,i,n){var r=0;return function n(){for(;r<e.length;){var o=e[r++];if(o){var a=o._doUnload||o[O];if(fe(a)&&!0===a.call(o,t,i,n))return!0}}}()},e.useXDomainRequest=function(){return null===Qt&&(Qt=typeof XDomainRequest!==n)&&_i()&&(Qt=Qt&&!$t(Zt(Ht),"withCredentials")),Qt},function(e,t,i){var n=Object.defineProperty;if(n)try{return n(e,t,i)}catch{}i&&void 0!==typeof i.value&&(e[t]=i.value)}(e,"__esModule",{value:!0})},"object"==typeof i&&typeof a<"u"?s(i):(r=[t],void 0===(o="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=o))})),A=T(((r,a)=>{var s;s=function(){"use strict";var e="constructor",t="prototype",i="function",n="_dynInstFuncs",r="_isDynProxy",o="_dynClass",a="_dynInstChk",s=a,l="_dfOpts",c="_unknown_",u="__proto__",d="_dyn"+u,p="_dynInstProto",h="useBaseInst",_="setInstFuncs",g=Object,m=g.getPrototypeOf,S=g.getOwnPropertyNames,f=0;function E(e,i){return e&&g[t].hasOwnProperty.call(e,i)}function T(e){return e&&(e===g[t]||e===Array[t])}function C(e){return T(e)||e===Function[t]}function y(i){var n;if(i){if(m)return m(i);var r=i[u]||i[t]||(i[e]?i[e][t]:null);n=i[d]||r,E(i,d)||(delete i[p],n=i[d]=i[p]||i[d],i[p]=r)}return n}function v(e,t){var i=[];if(S)i=S(e);else for(var n in e)"string"==typeof n&&E(e,n)&&i.push(n);if(i&&i.length>0)for(var r=0;r<i.length;r++)t(i[r])}function R(t,n,r){return n!==e&&typeof t[n]===i&&(r||E(t,n))}function A(e){throw new TypeError("DynamicProto: "+e)}function I(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t)return!0;return!1}function w(e,t,l,c,u){if(!T(e)){var d=l[n]=l[n]||{},p=d[t]=d[t]||{};!1!==d[s]&&(d[s]=!!u),v(l,(function(t){R(l,t,!1)&&l[t]!==c[t]&&(p[t]=l[t],delete l[t],(!E(e,t)||e[t]&&!e[t][r])&&(e[t]=function(e,t){var l=function(){var r=function(e,t,r,l){var c=null;if(e&&E(r,o)){var u=e[n]||{};if((c=(u[r[o]]||{})[t])||A("Missing ["+t+"] "+i),!c[a]&&!1!==u[s]){for(var d=!E(e,t),p=y(e),h=[];d&&p&&!C(p)&&!I(h,p);){var _=p[t];if(_){d=_===l;break}h.push(p),p=y(p)}try{d&&(e[t]=c),c[a]=1}catch{u[s]=!1}}}return c}(this,t,e,l)||function(e,t,n){var r=t[e];return r===n&&(r=y(t)[e]),typeof r!==i&&A("["+e+"] is not a "+i),r}(t,e,l);return r.apply(this,arguments)};return l[r]=1,l}(e,t)))}))}}function O(i,n){return E(i,t)?i.name||n||c:((i||{})[e]||{}).name||n||c}function b(e,i,a,c){E(e,t)||A("theClass is an invalid class definition.");var u=e[t];(function(e,t){if(m){for(var i=[],n=y(t);n&&!C(n)&&!I(i,n);){if(n===e)return!0;i.push(n),n=y(n)}return!1}return!0})(u,i)||A("["+O(e)+"] is not in class hierarchy of ["+O(i)+"]");var d=null;E(u,o)?d=u[o]:(d="_dynCls$"+O(e,"_")+"$"+f,f++,u[o]=d);var p=b[l],g=!!p[h];g&&c&&void 0!==c[h]&&(g=!!c[h]);var S=function(e){var t={};return v(e,(function(i){!t[i]&&R(e,i,!1)&&(t[i]=e[i])})),t}(i),T=function(e,t,i,a){function l(e,t,i){var l=t[i];if(l[r]&&a){var c=e[n]||{};!1!==c[s]&&(l=(c[t[o]]||{})[i]||l)}return function(){return l.apply(e,arguments)}}var c={};v(i,(function(e){c[e]=l(t,i,e)}));for(var u=y(e),d=[];u&&!C(u)&&!I(d,u);)v(u,(function(e){!c[e]&&R(u,e,!m)&&(c[e]=l(t,u,e))})),d.push(u),u=y(u);return c}(u,i,S,g);a(i,T);var N=!!m&&!!p[_];N&&c&&(N=!!c[_]),w(u,d,i,S,!1!==N)}return b[l]={setInstFuncs:!0,useBaseInst:!0},b},"object"==typeof r&&typeof a<"u"?a.exports=s():void 0===(o="function"==typeof(n=s)?n.call(t,i,t,e):n)||(e.exports=o)})),I=T(((a,s)=>{var l;l=function(e,t,i,n){"use strict";var r,o,a=(o=n)&&"object"==typeof o&&"default"in o?o.default:o,s=i.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),l=i.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),c=i.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),u=i.createEnumStyle({Normal:1,Critical:2}),d=i.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),p=i.objFreeze(t.__assignFn(t.__assignFn({},i._InternalMessageId),i.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),h="3.2.3",_="1DS-Web-JS-"+h,g="withCredentials",m=((r={})[0]=0,r[2]=6,r[1]=1,r[3]=7,r[4098]=6,r[4097]=1,r[4099]=7,r),S=null,f=Boolean(i.getDocument()),E=Boolean(i.getWindow());function T(e){return!(""===e||i.isNullOrUndefined(e))}function C(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return""}function y(){return null===S&&(S=!i.isUndefined(Uint8Array)&&!function(){var e=i.getNavigator();if(!i.isUndefined(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!i.isReactNative()),S}function v(e){return!!(e&&i.isNumber(e)&&e>=1&&e<=4)}function R(e,t,n){if(!t&&!T(t)||"string"!=typeof e)return null;var r=typeof t;if("string"===r||"number"===r||"boolean"===r||i.isArray(t))t={value:t};else if("object"!==r||t.hasOwnProperty("value")){if(i.isNullOrUndefined(t.value)||""===t.value||!i.isString(t.value)&&!i.isNumber(t.value)&&!i.isBoolean(t.value)&&!i.isArray(t.value))return null}else t={value:n?JSON.stringify(t):t};if(i.isArray(t.value)&&!x(t.value))return null;if(!i.isNullOrUndefined(t.kind)){if(i.isArray(t.value)||!P(t.kind))return null;t.value=t.value.toString()}return t}function A(e,t,n){var r=-1;if(!i.isUndefined(e))if(t>0&&(32===t?r=8192:t<=13&&(r=t<<5)),function(e){return e>=0&&e<=9}(n))-1===r&&(r=0),r|=n;else{var o=m[k(e)]||-1;-1!==r&&-1!==o?r|=o:6===o&&(r=o)}return r}function I(){i.safeGetCookieMgr(null).setEnabled(!1)}function w(e,t,n){i.areCookiesSupported(null)&&i.safeGetCookieMgr(null).set(e,t,86400*n,null,"/")}function O(e){i.areCookiesSupported(null)&&i.safeGetCookieMgr(null).del(e)}function b(e){return i.areCookiesSupported(null)?N(i.safeGetCookieMgr(null),e):""}function N(e,t,i){var n;return void 0===i&&(i=!0),e&&(n=e.get(t),i&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||""}function D(e){void 0===e&&(e="D");var t=i.newGuid();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,"")),t}function M(e,t,n,r,o){var a={},s=!1,l=0,c=arguments.length,u=arguments;for("[object Boolean]"===Object[i.strPrototype].toString.call(u[0])&&(s=u[0],l++);l<c;l++)e=u[l],i.objForEachKey(e,(function(e,t){s&&t&&i.isObject(t)?i.isArray(t)?(a[e]=a[e]||[],i.arrForEach(t,(function(t,n){t&&i.isObject(t)?a[e][n]=M(!0,a[e][n],t):a[e][n]=t}))):a[e]=M(!0,a[e],t):a[e]=t}));return a}var L=i.perfNow;function P(e){return 0===e||e>0&&e<=13||32===e}function x(e){return e.length>0}function B(e,t){var i=e;i.timings=i.timings||{},i.timings.processTelemetryStart=i.timings.processTelemetryStart||{},i.timings.processTelemetryStart[t]=L()}function k(e){var n=0;if(null!=e){var r=typeof e;"string"===r?n=1:"number"===r?n=2:"boolean"===r?n=3:r===t.strShimObject&&(n=4,i.isArray(e)?(n=4096,e.length>0&&(n|=k(e[0]))):i.hasOwnProperty(e,"value")&&(n=8192|k(e.value)))}return n}var U={Version:h,FullVersionString:_,strUndefined:i.strUndefined,strObject:i.strObject,Undefined:i.strUndefined,arrForEach:i.arrForEach,arrIndexOf:i.arrIndexOf,arrMap:i.arrMap,arrReduce:i.arrReduce,objKeys:i.objKeys,toISOString:i.toISOString,isReactNative:i.isReactNative,isString:i.isString,isNumber:i.isNumber,isBoolean:i.isBoolean,isFunction:i.isFunction,isArray:i.isArray,isObject:i.isObject,strTrim:i.strTrim,isDocumentObjectAvailable:f,isWindowObjectAvailable:E,isValueAssigned:T,getTenantId:C,isBeaconsSupported:i.isBeaconsSupported,isUint8ArrayAvailable:y,isLatency:v,sanitizeProperty:R,getISOString:i.toISOString,useXDomainRequest:i.useXDomainRequest,getCommonSchemaMetaData:A,cookieAvailable:i.areCookiesSupported,disallowsSameSiteNone:i.uaDisallowsSameSiteNone,setCookie:w,deleteCookie:O,getCookie:b,createGuid:D,extend:M,getTime:L,isValueKind:P,isArrayValid:x,objDefineAccessors:i.objDefineAccessors,addPageUnloadEventListener:i.addPageUnloadEventListener,setProcessTelemetryTimings:B,addEventHandler:i.addEventHandler,getFieldValueType:k,strEndsWith:i.strEndsWith,objForEachKey:i.objForEachKey},F={_canUseCookies:void 0,isTypeof:i.isTypeof,isUndefined:i.isUndefined,isNullOrUndefined:i.isNullOrUndefined,hasOwnProperty:i.hasOwnProperty,isFunction:i.isFunction,isObject:i.isObject,isDate:i.isDate,isArray:i.isArray,isError:i.isError,isString:i.isString,isNumber:i.isNumber,isBoolean:i.isBoolean,toISOString:i.toISOString,arrForEach:i.arrForEach,arrIndexOf:i.arrIndexOf,arrMap:i.arrMap,arrReduce:i.arrReduce,strTrim:i.strTrim,objCreate:t.objCreateFn,objKeys:i.objKeys,objDefineAccessors:i.objDefineAccessors,addEventHandler:i.addEventHandler,dateNow:i.dateNow,isIE:i.isIE,disableCookies:I,newGuid:i.newGuid,perfNow:i.perfNow,newId:i.newId,randomValue:i.randomValue,random32:i.random32,mwcRandomSeed:i.mwcRandomSeed,mwcRandom32:i.mwcRandom32,generateW3CId:i.generateW3CId},G="version",V="properties",q=function(e){function n(){var t=e.call(this)||this;return t.pluginVersionStringArr=[],t.pluginVersionString="",a(n,t,(function(e,t){(!e.logger||!e.logger.queue)&&(e.logger=new i.DiagnosticLogger({loggingLevelConsole:1})),e.initialize=function(n,r,o,a){i.doPerf(e,(function(){return"AppInsightsCore.initialize"}),(function(){if(n){n.endpointUrl||(n.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var s=n.propertyStorageOverride;if(s&&(!s.getProperty||!s.setProperty))throw new Error("Invalid property storage override passed.");n.channels&&i.arrForEach(n.channels,(function(t){t&&i.arrForEach(t,(function(t){if(t.identifier&&t.version){var i=t.identifier+"="+t.version;e.pluginVersionStringArr.push(i)}}))}))}e.getWParam=function(){return typeof document<"u"?0:-1},r&&i.arrForEach(r,(function(t){if(t&&t.identifier&&t.version){var i=t.identifier+"="+t.version;e.pluginVersionStringArr.push(i)}})),e.pluginVersionString=e.pluginVersionStringArr.join(";");try{t.initialize(n,r,o,a),e.pollInternalLogs("InternalLog")}catch(t){var l=e.logger,c=i.dumpObj(t);-1!==c.indexOf("channels")&&(c+="\n - Channels must be provided through config.channels only!"),l.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+c)}}),(function(){return{config:n,extensions:r,logger:o,notificationManager:a}}))},e.track=function(n){i.doPerf(e,(function(){return"AppInsightsCore.track"}),(function(){var i=n;if(i){i.timings=i.timings||{},i.timings.trackStart=L(),v(i.latency)||(i.latency=1);var r=i.ext=i.ext||{};r.sdk=r.sdk||{},r.sdk.ver=_;var o=i.baseData=i.baseData||{};o[V]||(o[V]={});var a=o[V];a[G]||(a[G]=""),""!==e.pluginVersionString&&(a[G]=e.pluginVersionString)}t.track(i)}),(function(){return{item:n}}),!n.sync)}})),t}return t.__extendsFn(n,e),n}(i.AppInsightsCore),j=function(e){function n(){var t=e.call(this)||this;return a(n,t,(function(e,t){e.initialize=function(n,r,o,a){n&&!n.endpointUrl&&(n.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),e.getWParam=function(){return f?0:-1};try{t.initialize(n,r,o,a)}catch(t){i._throwInternal(e.logger,1,514,"Initialization Failed: "+i.dumpObj(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var i=e;if(i){var n=i.ext=i.ext||{};n.sdk=n.sdk||{},n.sdk.ver=_}t.track(i)}})),t}return t.__extendsFn(n,e),n}(i.BaseCore),H=i.isFunction;function z(e,t,i){return function(n){e[t]=n,i()}}var W=function(){function e(t){var i=0,n=null,r=[];function o(){if(r.length>0){var e=r.slice();r=[],setTimeout((function(){for(var t=0,i=e.length;t<i;++t)try{e[t]()}catch{}}),0)}}function s(e){0===i&&(n=e,i=1,o())}function l(e){0===i&&(n=e,i=2,o())}a(e,this,(function(t){t.then=function(t,a){return new e((function(s,l){!function(t,a,s,l){r.push((function(){var r;try{(r=1===i?H(t)?t(n):n:H(a)?a(n):n)instanceof e?r.then(s,l):2!==i||H(a)?s(r):l(r)}catch(e){return void l(e)}})),0!==i&&o()}(t,a,s,l)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!H(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(s,l)}catch(e){l(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&H(t.then)?new e((function(e,i){try{t.then(e,i)}catch(e){i(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,i){i(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,i){try{for(var n=[],r=0,o=0;o<t.length;o++){var a=t[o];a&&H(a.then)?(r++,a.then(z(n,o,(function(){0==--r&&e(n)})),i)):n[o]=a}0===r&&setTimeout((function(){e(n)}),0)}catch(e){i(e)}}))},e.race=function(t){return new e((function(e,i){if(t&&t.length)try{for(var n=function(n){var r=t[n];r&&H(r.then)?r.then(e,i):setTimeout((function(){e(r)}),0)},r=0;r<t.length;r++)n(r)}catch(e){i(e)}}))},e}(),K=0,Q=[],Y=[],$=[];function Z(){return(new Date).getTime()}var X=function(){function e(t,n){var r=0,o=(t||"<unnamed>")+"."+K;function s(e){var t=i.getGlobal();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+o+"] "+e)}function l(e){n&&n.warnToConsole("ESPromiseScheduler["+o+"] "+e)}K++,a(e,this,(function(e){var t=null,i=0;function n(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return e.splice(i,1)[0];return null}e.scheduleEvent=function(e,a,c){var u=o+"."+i;i++,a&&(u+="-("+a+")");var d=u+"{"+r+"}";r++;var p,h,_,g={evt:null,tm:Z(),id:d,isRunning:!1,isAborted:!1};return g.evt=t?(p=g,h=t,_=new W((function(e,t){var i=Z()-h.tm,r=h.id;s("["+u+"] is waiting for ["+r+":"+i+" ms] to complete before starting -- ["+Y.length+"] waiting and ["+Q.length+"] running"),p.abort=function(e){p.abort=null,n(Y,u),p.isAborted=!0,t(new Error(e))},h.evt.then((function(i){n(Y,u),C(p).then(e,t)}),(function(i){n(Y,u),C(p).then(e,t)}))})),Y.push(p),_):C(g),(t=g).evt._schId=d,g.evt;function m(e){for(var t=Z(),i=t-6e5,n=e.length,r=0;r<n;){var o=e[r];if(o&&o.tm<i){var a=null;o.abort?(a="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(a)):a="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",l(a),e.splice(r,1),n--}else r++}}function S(e,i){var r=!1,o=n(Q,e);if(o||(o=n($,e),r=!0),o){o.to&&(clearTimeout(o.to),o.to=null);var a=Z()-o.tm;i?r?l("Timed out event ["+e+"] finally complete -- "+a+" ms"):s("Promise ["+e+"] Complete -- "+a+" ms"):($.push(o),l("Event ["+e+"] Timed out and removed -- "+a+" ms"))}else s("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),m(Q),m(Y),m($)}function f(e,t){return function(i){return S(e,!0),t&&t(i),i}}function E(e,t,i,n){t.then((function(t){return t instanceof W?(s("Event ["+e+"] returned a promise -- waiting"),E(e,t,i,n),t):f(e,i)(t)}),f(e,n))}function T(e,t){var i=e.id;return new W((function(n,r){s("Event ["+i+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,S(i,!1),r(new Error(t))};var o=t(i);o instanceof W?(c&&(e.to=setTimeout((function(){S(i,!1),r(new Error("Timed out after ["+c+"] ms"))}),c)),E(i,o,(function(t){s("Event ["+i+"] Resolving after "+(Z()-e.tm)+" ms"),n(t)}),r)):(s("Promise ["+i+"] Auto completed as the start action did not return a promise"),n())}))}function C(t){var i=Z();return t.wTm=i-t.tm,t.tm=i,t.isAborted?W.reject(new Error("["+u+"] was aborted")):(Q.push(t),T(t,e))}}}))}return e.incomplete=function(){return Q},e.waitingToStart=function(){return Y},e}(),J=function(){function e(e){var t=this,n={},r=[],o=[];function a(e,t){var a,s=n[e];if(s&&(a=s[t]),!a&&null!==a){if(i.isString(e)&&i.isString(t))if(o.length>0){for(var l=0;l<o.length;l++)if(o[l].handleField(e,t)){a={canHandle:!0,fieldHandler:o[l]};break}}else 0===r.length&&(a={canHandle:!0});if(!a&&null!==a)for(a=null,l=0;l<r.length;l++)if(r[l].handleField(e,t)){a={canHandle:!0,handler:r[l],fieldHandler:null};break}s||(s=n[e]={}),s[t]=a}return a}function s(e,t,n,r,o,a){if(e.handler)return e.handler.property(t,n,o,a);if(!i.isNullOrUndefined(o.kind)){if(4096==(4096&r)||!P(o.kind))return null;o.value=o.value.toString()}return c(e.fieldHandler,t,n,r,o)}function l(e,t,i){return T(i)?{value:i}:null}function c(e,n,r,o,a){if(a&&e){var s=e.getSanitizer(n,r,o,a.kind,a.propertyType);if(s)if(4===o){var u={},d=a.value;i.objForEachKey(d,(function(t,i){var o=n+"."+r;if(T(i)){var a=l(0,0,i);(a=c(e,o,t,k(i),a))&&(u[t]=a.value)}})),a.value=u}else{var p={path:n,name:r,type:o,prop:a,sanitizer:t};a=s.call(t,p)}}return a}e&&o.push(e),t.addSanitizer=function(e){e&&(r.push(e),n={})},t.addFieldSanitizer=function(e){e&&(o.push(e),n={})},t.handleField=function(e,t){var i=a(e,t);return!!i&&i.canHandle},t.value=function(e,t,n,r){var o=a(e,t);if(o&&o.canHandle){if(!o||!o.canHandle)return null;if(o.handler)return o.handler.value(e,t,n,r);if(!i.isString(t)||i.isNullOrUndefined(n)||""===n)return null;var c=null,u=k(n);if(8192==(8192&u)){var d=-8193&u;if(!T((c=n).value)||1!==d&&2!==d&&3!==d&&4096!=(4096&d))return null}else 1===u||2===u||3===u||4096==(4096&u)?c=l(0,0,n):4===u&&(c=l(0,0,r?JSON.stringify(n):n));if(c)return s(o,e,t,u,c,r)}return null},t.property=function(e,t,n,r){var o=a(e,t);if(!o||!o.canHandle||!i.isString(t)||i.isNullOrUndefined(n)||!T(n.value))return null;var l=k(n.value);return 0===l?null:s(o,e,t,l,n,r)}}return e.getFieldType=k,e}();e.BaseTelemetryPlugin=i.BaseTelemetryPlugin,e.DiagnosticLogger=i.DiagnosticLogger,e.EventHelper=i.EventHelper,e.EventsDiscardedReason=i.EventsDiscardedReason,e.InternalAppInsightsCore=i.AppInsightsCore,e.InternalBaseCore=i.BaseCore,e.LoggingSeverity=i.LoggingSeverity,e.MinChannelPriorty=i.MinChannelPriorty,e.NotificationManager=i.NotificationManager,e.PerfEvent=i.PerfEvent,e.PerfManager=i.PerfManager,e.ProcessTelemetryContext=i.ProcessTelemetryContext,e.Undefined=i.strUndefined,e._InternalLogMessage=i._InternalLogMessage,e._InternalMessageId=i._InternalMessageId,e.__getRegisteredEvents=i.__getRegisteredEvents,e._throwInternal=i._throwInternal,e.addEventHandler=i.addEventHandler,e.addEventListeners=i.addEventListeners,e.addPageHideEventListener=i.addPageHideEventListener,e.addPageShowEventListener=i.addPageShowEventListener,e.addPageUnloadEventListener=i.addPageUnloadEventListener,e.areCookiesSupported=i.areCookiesSupported,e.arrForEach=i.arrForEach,e.arrIndexOf=i.arrIndexOf,e.arrMap=i.arrMap,e.arrReduce=i.arrReduce,e.attachEvent=i.attachEvent,e.cookieAvailable=i.areCookiesSupported,e.createCookieMgr=i.createCookieMgr,e.createEnumStyle=i.createEnumStyle,e.createProcessTelemetryContext=i.createProcessTelemetryContext,e.createTraceParent=i.createTraceParent,e.createUniqueNamespace=i.createUniqueNamespace,e.createUnloadHandlerContainer=i.createUnloadHandlerContainer,e.dateNow=i.dateNow,e.detachEvent=i.detachEvent,e.disallowsSameSiteNone=i.uaDisallowsSameSiteNone,e.doPerf=i.doPerf,e.dumpObj=i.dumpObj,e.eventOff=i.eventOff,e.eventOn=i.eventOn,e.findW3cTraceParent=i.findW3cTraceParent,e.formatTraceParent=i.formatTraceParent,e.generateW3CId=i.generateW3CId,e.getConsole=i.getConsole,e.getCrypto=i.getCrypto,e.getDocument=i.getDocument,e.getExceptionName=i.getExceptionName,e.getGlobal=i.getGlobal,e.getGlobalInst=i.getGlobalInst,e.getHistory=i.getHistory,e.getIEVersion=i.getIEVersion,e.getISOString=i.toISOString,e.getJSON=i.getJSON,e.getLocation=i.getLocation,e.getMsCrypto=i.getMsCrypto,e.getNavigator=i.getNavigator,e.getPerformance=i.getPerformance,e.getSetValue=i.getSetValue,e.getWindow=i.getWindow,e.hasDocument=i.hasDocument,e.hasHistory=i.hasHistory,e.hasJSON=i.hasJSON,e.hasNavigator=i.hasNavigator,e.hasOwnProperty=i.hasOwnProperty,e.hasWindow=i.hasWindow,e.isArray=i.isArray,e.isBeaconsSupported=i.isBeaconsSupported,e.isBoolean=i.isBoolean,e.isDate=i.isDate,e.isError=i.isError,e.isFetchSupported=i.isFetchSupported,e.isFunction=i.isFunction,e.isIE=i.isIE,e.isNotTruthy=i.isNotTruthy,e.isNullOrUndefined=i.isNullOrUndefined,e.isNumber=i.isNumber,e.isObject=i.isObject,e.isReactNative=i.isReactNative,e.isSampledFlag=i.isSampledFlag,e.isString=i.isString,e.isTruthy=i.isTruthy,e.isTypeof=i.isTypeof,e.isUndefined=i.isUndefined,e.isValidSpanId=i.isValidSpanId,e.isValidTraceId=i.isValidTraceId,e.isValidTraceParent=i.isValidTraceParent,e.isXhrSupported=i.isXhrSupported,e.mergeEvtNamespace=i.mergeEvtNamespace,e.newGuid=i.newGuid,e.newId=i.newId,e.normalizeJsName=i.normalizeJsName,e.objCreate=i.objCreate,e.objDefineAccessors=i.objDefineAccessors,e.objForEachKey=i.objForEachKey,e.objFreeze=i.objFreeze,e.objKeys=i.objKeys,e.objSeal=i.objSeal,e.optimizeObject=i.optimizeObject,e.parseTraceParent=i.parseTraceParent,e.perfNow=i.perfNow,e.proxyAssign=i.proxyAssign,e.proxyFunctionAs=i.proxyFunctionAs,e.proxyFunctions=i.proxyFunctions,e.random32=i.random32,e.randomValue=i.randomValue,e.removeEventHandler=i.removeEventHandler,e.removeEventListeners=i.removeEventListeners,e.removePageHideEventListener=i.removePageHideEventListener,e.removePageShowEventListener=i.removePageShowEventListener,e.removePageUnloadEventListener=i.removePageUnloadEventListener,e.safeGetCookieMgr=i.safeGetCookieMgr,e.safeGetLogger=i.safeGetLogger,e.setEnableEnvMocks=i.setEnableEnvMocks,e.setValue=i.setValue,e.strContains=i.strContains,e.strEndsWith=i.strEndsWith,e.strFunction=i.strFunction,e.strObject=i.strObject,e.strPrototype=i.strPrototype,e.strStartsWith=i.strStartsWith,e.strTrim=i.strTrim,e.strUndefined=i.strUndefined,e.throwError=i.throwError,e.toISOString=i.toISOString,e.useXDomainRequest=i.useXDomainRequest,e.AppInsightsCore=q,e.BaseCore=j,e.CoreUtils=F,e.ESPromise=W,e.ESPromiseScheduler=X,e.EventLatency=l,e.EventPersistence=u,e.EventPropertyType=c,e.FullVersionString=_,e.TraceLevel=d,e.Utils=U,e.ValueKind=s,e.ValueSanitizer=J,e.Version=h,e._ExtendedInternalMessageId=p,e.createGuid=D,e.deleteCookie=O,e.disableCookies=I,e.extend=M,e.getCommonSchemaMetaData=A,e.getCookie=b,e.getCookieValue=N,e.getFieldValueType=k,e.getTenantId=C,e.getTime=L,e.isArrayValid=x,e.isChromium=function(){return!!i.getGlobalInst("chrome")},e.isDocumentObjectAvailable=f,e.isLatency=v,e.isUint8ArrayAvailable=y,e.isValueAssigned=T,e.isValueKind=P,e.isWindowObjectAvailable=E,e.openXhr=function(e,t,i,n,r,o){function a(e,t,i){try{e[t]=i}catch{}}void 0===n&&(n=!1),void 0===r&&(r=!1);var s=new XMLHttpRequest;return n&&a(s,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",n),i&&a(s,g,i),s.open(e,t,!r),i&&a(s,g,i),!r&&o&&a(s,"timeout",o),s},e.sanitizeProperty=R,e.setCookie=w,e.setProcessTelemetryTimings=B,function(e,t,i){var n=Object.defineProperty;if(n)try{return n(e,t,i)}catch{}i&&void 0!==typeof i.value&&(e[t]=i.value)}(e,"__esModule",{value:!0})},"object"==typeof a&&typeof s<"u"?l(a,v(),R(),A()):(r=[t,i(623),i(4719),i(2314)],void 0===(o="function"==typeof(n=l)?n.apply(t,r):n)||(e.exports=o))})),w=T(((i,a)=>{var s;s=function(e){"use strict";var t="function",i="object",n="undefined",r="prototype",o="hasOwnProperty",a="default",s=Object,l=s[r],c=s.assign,u=s.create,d=s.defineProperty,p=l[o],h=null;function _(e){return void 0===e&&(e=!0),(!h||!e)&&(typeof globalThis!==n&&globalThis&&(h=globalThis),typeof self!==n&&self&&(h=self),typeof window!==n&&window&&(h=window),typeof global!==n&&global&&(h=global)),h}function g(e){throw new TypeError(e)}function m(e){if(u)return u(e);if(null==e)return{};var n=typeof e;function o(){}return n!==i&&n!==t&&g("Object prototype may only be an Object:"+e),o[r]=e,new o}var S=(_()||{}).Symbol,f=(_()||{}).Reflect,E=!!f,T="decorate",C="metadata",y="getOwnPropertySymbols",v="iterator",R=c||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])l[o].call(t,r)&&(e[r]=t[r]);return e},A=function(e,t){return(A=s.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t[o](i)&&(e[i]=t[i])})(e,t)};function I(e,i){function n(){this.constructor=e}typeof i!==t&&null!==i&&g("Class extends value "+String(i)+" is not a constructor or null"),A(e,i),e[r]=null===i?m(i):(n[r]=i[r],new n)}function w(e,t,i,n){void 0===n&&(n=i),u?d(e,n,{enumerable:!0,get:function(){return t[i]}}):e[n]=t[i]}e.ObjAssign=c,e.ObjClass=s,e.ObjCreate=u,e.ObjDefineProperty=d,e.ObjHasOwnProperty=p,e.ObjProto=l,e.__assignFn=R,e.__createBindingFn=w,e.__decorateFn=function(e,i,n,r){var o,a=arguments.length,l=a<3?i:null===r?r=s.getOwnPropertyDescriptor(i,n):r;if(E&&typeof f[T]===t)l=f[T](e,i,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(l=(a<3?o(l):a>3?o(i,n,l):o(i,n))||l);return a>3&&l&&d(i,n,l),l},e.__exportStarFn=function(e,t){for(var i in e)i!==a&&!p.call(t,i)&&w(t,e,i)},e.__exposeGlobalTsLib=function(){var e,t,i,n,r=_()||{};t=R,i=I,n=w,(e=r).__assign||(e.__assign=c||t),e.__extends||(e.__extends=i),e.__createBinding||(e.__createBinding=n),__assign||(__assign=r.__assign),__extends||(__extends=r.__extends),__createBinding||(__createBinding=r.__createBinding)},e.__extendsFn=I,e.__importDefaultFn=function(e){return e&&e.__esModule?e:{strDefault:e}},e.__importStarFn=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)i!==a&&Object.prototype.hasOwnProperty.call(e,i)&&w(t,e,i);return u?d(t,a,{enumerable:!0,value:e}):t[a]=e,t},e.__makeTemplateObjectFn=function(e,t){return d?d(e,"raw",{value:t}):e.raw=t,e},e.__metadataFn=function(e,i){if(E&&f[C]===t)return f[C](e,i)},e.__paramFn=function(e,t){return function(i,n){t(i,n,e)}},e.__readFn=function(e,i){var n=typeof S===t&&e[S[v]];if(!n)return e;var r,o,a=n.call(e),s=[];try{for(;(void 0===i||i-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s},e.__restFn=function(e,i){var n={};for(var r in e)p.call(e,r)&&i.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&typeof s[y]===t)for(var o=0,a=s[y](e);o<a.length;o++)i.indexOf(a[o])<0&&l.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]]);return n},e.__spreadArrayFn=function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e},e.__spreadArraysFn=function(){for(var e=arguments,t=0,i=0,n=e.length;i<n;i++)t+=e[i].length;var r=Array(t),o=0;for(i=0;i<n;i++)for(var a=e[i],s=0,l=a.length;s<l;s++,o++)r[o]=a[s];return r},e.__valuesFn=function(e){var i=typeof S===t&&S[v],n=i&&e[i],r=0;return n?n.call(e):e&&"number"==typeof e.length?{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}:void g(i?"Object is not iterable.":"Symbol.iterator is not defined.")},e.getGlobal=_,e.objCreateFn=m,e.strDefault=a,e.strShimFunction=t,e.strShimHasOwnProperty=o,e.strShimObject=i,e.strShimPrototype=r,e.strShimUndefined=n,e.throwTypeError=g,function(e,t,i){var n=Object.defineProperty;if(n)try{return n(e,t,i)}catch{}i&&void 0!==typeof i.value&&(e[t]=i.value)}(e,"__esModule",{value:!0})},"object"==typeof i&&typeof a<"u"?s(i):(r=[t],void 0===(o="function"==typeof(n=s)?n.apply(t,r):n)||(e.exports=o))})),O=T(((a,s)=>{var l;l=function(e,t,i,n){"use strict";var r,o=(r=i)&&"object"==typeof r&&"default"in r?r.default:r,a="REAL_TIME",s="NEAR_REAL_TIME",l="BEST_EFFORT",c="POST",u="drop",d="requeue",p="application/x-json-stream",h="cache-control",_="content-type",g="kill-duration",m="time-delta-millis",S="client-version",f="client-id",E="time-delta-to-apply-millis",T="upload-time",C="apikey",y="AuthMsaDeviceTicket",v="AuthXToken",R="msfpc";function A(e){var t=(e.ext||{}).intweb;return t&&n.isValueAssigned(t[R])?t[R]:null}function I(e){for(var t=null,i=0;null===t&&i<e.length;i++)t=A(e[i]);return t}var w=function(){function e(t,i){var r=i?[].concat(i):[],o=this,a=I(r);o.iKey=function(){return t},o.Msfpc=function(){return a||""},o.count=function(){return r.length},o.events=function(){return r},o.addEvent=function(e){return!!e&&(r.push(e),a||(a=A(e)),!0)},o.split=function(i,o){var s;if(i<r.length){var l=r.length-i;n.isNullOrUndefined(o)||(l=o<l?o:l),s=r.splice(i,l),a=I(r)}return new e(t,s)}}return e.create=function(t,i){return new e(t,i)},e}(),O=2e6,b=Math.min(O,65e3),N="metadata",D="f",M=/\./,L=function e(t,i,r,a){var s="data",l="baseData",c=!!a,u=i,d={};o(e,this,(function(e){function i(e,t,o,a,s,l,p){n.objForEachKey(e,(function(e,h){var _=null;if(h||n.isValueAssigned(h)){var g=o,m=e,S=s,f=t;if(c&&!a&&M.test(e)){var E=e.split("."),T=E.length;if(T>1){S&&(S=S.slice());for(var C=0;C<T-1;C++){var y=E[C];f=f[y]=f[y]||{},g+="."+y,S&&S.push(y)}m=E[T-1]}}var v=a&&function(e,t){var i=d[e];return void 0===i&&(e.length>=7&&(i=n.strStartsWith(e,"ext.metadata")||n.strStartsWith(e,"ext.web")),d[e]=i),i}(g);if(_=!v&&u&&u.handleField(g,m)?u.value(g,m,h,r):n.sanitizeProperty(m,h,r)){var R=_.value;if(f[m]=R,l&&l(S,m,_),p&&"object"==typeof R&&!n.isArray(R)){var A=S;A&&(A=A.slice()).push(m),i(h,R,g+"."+m,a,A,l,p)}}}}))}e.createPayload=function(e,t,i,n,r,o){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:t,isSync:i,isBeacon:n,sendType:o,sendReason:r}},e.appendPayload=function(i,r,o){var a=i&&r&&!i.overflow;return a&&n.doPerf(t,(function(){return"Serializer:appendPayload"}),(function(){for(var t=r.events(),a=i.payloadBlob,s=i.numEvents,l=!1,c=[],u=[],d=i.isBeacon,p=d?65e3:3984588,h=d?b:O,_=0,g=0;_<t.length;){var m=t[_];if(m){if(s>=o){i.overflow=r.split(_);break}var S=e.getEventBlob(m);if(S&&S.length<=h){var f=S.length;if(a.length+f>p){i.overflow=r.split(_);break}a&&(a+="\n"),a+=S,++g>20&&(a.substr(0,1),g=0),l=!0,s++}else S?c.push(m):u.push(m),t.splice(_,1),_--}_++}if(c&&c.length>0&&i.sizeExceed.push(w.create(r.iKey(),c)),u&&u.length>0&&i.failedEvts.push(w.create(r.iKey(),u)),l){i.batches.push(r),i.payloadBlob=a,i.numEvents=s;var E=r.iKey();-1===n.arrIndexOf(i.apiKeys,E)&&i.apiKeys.push(E)}}),(function(){return{payload:i,theBatch:{iKey:r.iKey(),evts:r.events()},max:o}})),a},e.getEventBlob=function(e){try{return n.doPerf(t,(function(){return"Serializer.getEventBlob"}),(function(){var t={};t.name=e.name,t.time=e.time,t.ver=e.ver,t.iKey="o:"+n.getTenantId(e.iKey);var r={},o=e.ext;o&&(t.ext=r,n.objForEachKey(o,(function(e,t){i(t,r[e]={},"ext."+e,!0,null,null,!0)})));var a=t[s]={};a.baseType=e.baseType;var c=a[l]={};return i(e.baseData,c,l,!1,[l],(function(e,t,i){P(r,e,t,i)}),!0),i(e.data,a,s,!1,[],(function(e,t,i){P(r,e,t,i)}),!0),JSON.stringify(t)}),(function(){return{item:e}}))}catch{return null}}}))};function P(e,t,i,r){if(r&&e){var o=n.getCommonSchemaMetaData(r.value,r.kind,r.propertyType);if(o>-1){var a=e[N];a||(a=e[N]={f:{}});var s=a[D];if(s||(s=a[D]={}),t)for(var l=0;l<t.length;l++){var c=t[l];s[c]||(s[c]={f:{}});var u=s[c][D];u||(u=s[c][D]={}),s=u}s=s[i]={},n.isArray(r.value)?s.a={t:o}:s.t=o}}}function x(e){var t,i=Math.floor(1200*Math.random())+2400;return t=Math.pow(2,e)*i,Math.min(t,6e5)}var B,k=function e(){var t={};o(e,this,(function(e){e.setKillSwitchTenants=function(e,i){if(e&&i)try{var r=function(e){var t=[];return e&&n.arrForEach(e,(function(e){t.push(n.strTrim(e))})),t}(e.split(","));if("this-request-only"===i)return r;for(var o=1e3*parseInt(i,10),a=0;a<r.length;++a)t[r[a]]=n.dateNow()+o}catch{return[]}return[]},e.isTenantKilled=function(e){var i=t,r=n.strTrim(e);return void 0!==i[r]&&i[r]>n.dateNow()||(delete i[r],!1)}}))},U=function e(){var t=!0,i=!0,n=!0,r="use-collector-delta",a=!1;o(e,this,(function(e){e.allowRequestSending=function(){return t},e.firstRequestSent=function(){n&&(n=!1,a||(t=!1))},e.shouldAddClockSkewHeaders=function(){return i},e.getClockSkewHeaderValue=function(){return r},e.setClockSkew=function(e){a||(e?(r=e,i=!0,a=!0):i=!1,t=!0)}}))},F="sendAttempt",G="&NoResponseBody=true",V=((B={})[1]=d,B[100]=d,B[200]="sent",B[8004]=u,B[8003]=u,B),q={},j={};function H(e,t,i){q[e]=t,!1!==i&&(j[t]=e)}function z(e){try{return e.responseText}catch{}return""}function W(e,t){var i=!1;if(e&&t){var r=n.objKeys(e);if(r&&r.length>0)for(var o=t.toLowerCase(),a=0;a<r.length;a++){var s=r[a];if(s&&n.hasOwnProperty(t,s)&&s.toLowerCase()===o){i=!0;break}}}return i}function K(e,t,i,n){t&&i&&i.length>0&&(n&&q[t]?(e.hdrs[q[t]]=i,e.useHdrs=!0):e.url+="&"+t+"="+i)}H(y,y,!1),H(S,S),H(f,"Client-Id"),H(C,C),H(E,E),H(T,T),H(v,v);var Q=function e(t,i,r,a,s){this._responseHandlers=[];var l,d,y,v,A,I,w="?cors=true&"+_.toLowerCase()+"="+p,O=new k,b=!1,N=new U,D=!1,M=0,P=!0,B=[],q={},H=[],Q=null,Y=!1,$=!1,Z=!1;o(e,this,(function(e){var o=!0;function k(e,t){for(var i=0,r=null,o=0;null==r&&o<e.length;)1===(i=e[o])?n.useXDomainRequest()?r=U:n.isXhrSupported()&&(r=J):2===i&&n.isFetchSupported(t)?r=X:D&&3===i&&n.isBeaconsSupported()&&(r=te),o++;return r?{_transport:i,_isSync:t,sendPOST:r}:null}function U(e,t,i){var n=new XDomainRequest;n.open(c,e.urlString),e.timeout&&(n.timeout=e.timeout),n.onload=function(){var e=z(n);ee(t,200,{},e),pe(e)},n.onerror=function(){ee(t,400,{})},n.ontimeout=function(){ee(t,500,{})},n.onprogress=function(){},i?n.send(e.data):s.set((function(){n.send(e.data)}),0)}function X(e,t,i){var r,a=e.urlString,l=!1,u=!1,d=((r={body:e.data,method:c}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0,r);i&&(d.keepalive=!0,2===e._sendReason&&(l=!0,a+=G)),o&&(d.credentials="include"),e.headers&&n.objKeys(e.headers).length>0&&(d.headers=e.headers),fetch(a,d).then((function(e){var i={},n="";e.headers&&e.headers.forEach((function(e,t){i[t]=e})),e.body&&e.text().then((function(e){n=e})),u||(u=!0,ee(t,e.status,i,n),pe(n))})).catch((function(e){u||(u=!0,ee(t,0,{}))})),l&&!u&&(u=!0,ee(t,200,{})),!u&&e.timeout>0&&s.set((function(){u||(u=!0,ee(t,500,{}))}),e.timeout)}function J(e,t,i){var r=e.urlString;function a(e,t,i){if(!e[i]&&t&&t.getResponseHeader){var r=t.getResponseHeader(i);r&&(e[i]=n.strTrim(r))}return e}function s(e,i){ee(t,e.status,function(e){var t={};return e.getAllResponseHeaders?t=function(e){var t={};if(n.isString(e)){var i=n.strTrim(e).split(/[\r\n]+/);n.arrForEach(i,(function(e){if(e){var i=e.indexOf(": ");if(-1!==i){var r=n.strTrim(e.substring(0,i)).toLowerCase(),o=n.strTrim(e.substring(i+1));t[r]=o}else t[n.strTrim(e)]=1}}))}return t}(e.getAllResponseHeaders()):(t=a(t,e,m),t=a(t,e,g),t=a(t,e,"kill-duration-seconds")),t}(e),i)}i&&e.disableXhrSync&&(i=!1);var l=n.openXhr(c,r,o,!0,i,e.timeout);n.objForEachKey(e.headers,(function(e,t){l.setRequestHeader(e,t)})),l.onload=function(){var e=z(l);s(l,e),pe(e)},l.onerror=function(){s(l)},l.ontimeout=function(){s(l)},l.send(e.data)}function ee(e,t,i,r){try{e(t,i,r)}catch(e){n._throwInternal(l.diagLog(),2,518,n.dumpObj(e))}}function te(e,t,i){var r=200,o=e._thePayload,a=e.urlString+G;try{var s=n.getNavigator();if(!s.sendBeacon(a,e.data))if(o){var c=[];n.arrForEach(o.batches,(function(e){if(c&&e&&e.count()>0){for(var t=e.events(),i=0;i<t.length;i++)if(!s.sendBeacon(a,Q.getEventBlob(t[i]))){c.push(e.split(i));break}}else c.push(e.split(0))})),he(c,8003,o.sendType,!0)}else r=0}catch(e){l.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+n.dumpObj(e)),r=0}finally{ee(t,r,{},"")}}function ie(e){return 2===e||3===e}function ne(e){return $&&ie(e)&&(e=2),e}function re(){return!b&&M<i}function oe(){var e=H;return H=[],e}function ae(e,t,i){var n=!1;return e&&e.length>0&&!b&&d[t]&&Q&&(n=0!==t||re()&&(i>0||N.allowRequestSending())),n}function se(e){var t={};return e&&n.arrForEach(e,(function(e,i){t[i]={iKey:e.iKey(),evts:e.events()}})),t}function le(e,i,r,o,a){if(e&&0!==e.length){if(b)return void he(e,1,o);o=ne(o);try{var s=e,c=0!==o;n.doPerf(y,(function(){return"HttpManager:_sendBatches"}),(function(s){s&&(e=e.slice(0));for(var l=[],u=null,p=n.getTime(),h=d[o]||(c?d[1]:d[0]),_=($||ie(o)||h&&3===h._transport)&&!P&&D&&n.isBeaconsSupported();ae(e,o,i);){var g=e.shift();g&&g.count()>0&&(O.isTenantKilled(g.iKey())?l.push(g):(u=u||Q.createPayload(i,r,c,_,a,o),Q.appendPayload(u,g,t)?null!==u.overflow&&(e=[u.overflow].concat(e),u.overflow=null,ue(u,p,n.getTime(),a),p=n.getTime(),u=null):(ue(u,p,n.getTime(),a),p=n.getTime(),e=[g].concat(e),u=null)))}u&&ue(u,p,n.getTime(),a),e.length>0&&(H=e.concat(H)),he(l,8004,o)}),(function(){return{batches:se(s),retryCount:i,isTeardown:r,isSynchronous:c,sendReason:a,useSendBeacon:ie(o),sendType:o}}),!c)}catch(e){n._throwInternal(l.diagLog(),2,48,"Unexpected Exception sending batch: "+n.dumpObj(e))}}}function ce(e,t,i){e[t]=e[t]||{},e[t][l.identifier]=i}function ue(t,i,o,a){if(t&&t.payloadBlob&&t.payloadBlob.length>0){var s=!!e.sendHook,c=d[t.sendType];!ie(t.sendType)&&t.isBeacon&&2===t.sendReason&&(c=d[2]||d[3]||c);var u=Z;(t.isBeacon||3===c._transport)&&(u=!1);var v=function(e,t){var i={url:w,hdrs:{},useHdrs:!1};t?(i.hdrs=n.extend(i.hdrs,q),i.useHdrs=n.objKeys(i.hdrs).length>0):n.objForEachKey(q,(function(e,t){j[e]?K(i,j[e],t,!1):(i.hdrs[e]=t,i.useHdrs=!0)})),K(i,f,"NO_AUTH",t),K(i,S,n.FullVersionString,t);var r="";n.arrForEach(e.apiKeys,(function(e){r.length>0&&(r+=","),r+=e})),K(i,C,r,t),K(i,T,n.dateNow().toString(),t);var o=function(e){for(var t=0;t<e.batches.length;t++){var i=e.batches[t].Msfpc();if(i)return encodeURIComponent(i)}return""}(e);if(n.isValueAssigned(o)&&(i.url+="&ext.intweb.msfpc="+o),N.shouldAddClockSkewHeaders()&&K(i,E,N.getClockSkewHeaderValue(),t),y.getWParam){var a=y.getWParam();a>=0&&(i.url+="&w="+a)}for(var s=0;s<B.length;s++)i.url+="&"+B[s].name+"="+B[s].value;return i}(t,u);u=u||v.useHdrs;var R=n.getTime();n.doPerf(y,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var d=0;d<t.batches.length;d++)for(var S=t.batches[d].events(),f=0;f<S.length;f++){var E=S[f];if(Y){var T=E.timings=E.timings||{};ce(T,"sendEventStart",R),ce(T,"serializationStart",i),ce(T,"serializationCompleted",o)}E[F]>0?E[F]++:E[F]=1}he(t.batches,1e3+(a||0),t.sendType,!0);var C={data:t.payloadBlob,urlString:v.url,headers:v.hdrs,_thePayload:t,_sendReason:a,timeout:A};n.isUndefined(I)||(C.disableXhrSync=!!I),u&&(W(C.headers,h)||(C.headers[h]="no-cache, no-store"),W(C.headers,_)||(C.headers[_]=p));var w=null;c&&(w=function(i){N.firstRequestSent();var o=function(i,o){!function(t,i,o,a){var s=9e3,c=null,u=!1,d=!1;try{var p=!0;if(typeof t!==n.strUndefined){if(i){N.setClockSkew(i[m]);var h=i[g]||i["kill-duration-seconds"];n.arrForEach(O.setKillSwitchTenants(i["kill-tokens"],h),(function(e){n.arrForEach(o.batches,(function(t){if(t.iKey()===e){c=c||[];var i=t.split(0);o.numEvents-=i.count(),c.push(i)}}))}))}if(200==t||204==t)return void(s=200);(!function(e){return!(e>=300&&e<500&&408!=e&&429!=e||501==e||505==e)}(t)||o.numEvents<=0)&&(p=!1),s=9e3+t%1e3}if(p){s=100;var _=o.retryCnt;0===o.sendType&&(_<r?(u=!0,de((function(){0===o.sendType&&M--,le(o.batches,_+1,o.isTeardown,$?2:o.sendType,5)}),$,x(_))):(d=!0,$&&(s=8001)))}}finally{u||(N.setClockSkew(),function(t,i,r,o){try{o&&l._backOffTransmission(),200===i&&(!o&&!t.isSync&&l._clearBackOff(),function(e){if(Y){var t=n.getTime();n.arrForEach(e,(function(e){e&&e.count()>0&&function(e,t){Y&&n.arrForEach(e,(function(e){ce(e.timings=e.timings||{},"sendEventCompleted",t)}))}(e.events(),t)}))}}(t.batches)),he(t.batches,i,t.sendType,!0)}finally{0===t.sendType&&(M--,5!==r&&e.sendQueuedRequests(t.sendType,r))}}(o,s,a,d)),he(c,8004,o.sendType)}}(i,o,t,a)},s=t.isTeardown||t.isSync;try{c.sendPOST(i,o,s),e.sendListener&&e.sendListener(C,i,s,t.isBeacon)}catch(e){l.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+n.dumpObj(e)),ee(o,0,{})}}),n.doPerf(y,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(w)if(0===t.sendType&&M++,s&&!t.isBeacon&&3!==c._transport){var i={data:C.data,urlString:C.urlString,headers:n.extend({},C.headers),timeout:C.timeout,disableXhrSync:C.disableXhrSync},r=!1;n.doPerf(y,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(i,(function(e){r=!0,!P&&!e._thePayload&&(e._thePayload=e._thePayload||C._thePayload,e._sendReason=e._sendReason||C._sendReason),w(e)}),t.isSync||t.isTeardown)}catch{r||w(C)}}))}else w(C)}))}),(function(){return{thePayload:t,serializationStart:i,serializationCompleted:o,sendReason:a}}),t.isSync)}t.sizeExceed&&t.sizeExceed.length>0&&he(t.sizeExceed,8003,t.sendType),t.failedEvts&&t.failedEvts.length>0&&he(t.failedEvts,8002,t.sendType)}function de(e,t,i){t?e():s.set(e,i)}function pe(t){var i=e._responseHandlers;try{for(var r=0;r<i.length;r++)try{i[r](t)}catch(e){n._throwInternal(l.diagLog(),1,519,"Response handler failed: "+e)}if(t){var o=JSON.parse(t);n.isValueAssigned(o.webResult)&&n.isValueAssigned(o.webResult[R])&&v.set("MSFPC",o.webResult[R],31536e3)}}catch{}}function he(e,t,i,r){if(e&&e.length>0&&a){var o=a[function(e){var t=V[e];return n.isValueAssigned(t)||(t="oth",e>=9e3&&e<=9999?t="rspFail":e>=8e3&&e<=8999?t=u:e>=1e3&&e<=1999&&(t="send")),t}(t)];if(o){var s=0!==i;n.doPerf(y,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){de((function(){try{o.call(a,e,t,s,i)}catch(e){n._throwInternal(l.diagLog(),1,74,"send request notification failed: "+e)}}),r||s,0)}),(function(){return{batches:se(e),reason:t,isSync:s,sendSync:r,sendType:i}}),!s)}}}e.initialize=function(e,t,i,r,a){var s;a||(a={}),w=e+w,Z=!!n.isUndefined(a.avoidOptions)||!a.avoidOptions,y=t,v=t.getCookieMgr(),Y=!y.config.disableEventTimings;var c=!!y.config.enableCompoundKey;l=i;var u=a.valueSanitizer,p=a.stringifyObjects;n.isUndefined(a.enableCompoundKey)||(c=!!a.enableCompoundKey),A=a.xhrTimeout,I=a.disableXhrSync,D=!n.isReactNative(),Q=new L(y,u,p,c);var h=r,_=a.alwaysUseXhrOverride?r:null,g=a.alwaysUseXhrOverride?r:null;if(!r){P=!1;var m=n.getLocation();m&&m.protocol&&"file:"===m.protocol.toLowerCase()&&(o=!1);var S=[];S=n.isReactNative()?[2,1]:[1,2,3];var f=a.transports;f&&(n.isNumber(f)?S=[f].concat(S):n.isArray(f)&&(S=f.concat(S))),r=k(S,!1),h=k(S,!0),r||l.diagLog().warnToConsole("No available transport to send events")}(s={})[0]=r,s[1]=h||k([1,2,3],!0),s[2]=_||k([3,2],!0)||h||k([1],!0),s[3]=g||k([2,3],!0)||h||k([1],!0),d=s},e._getDbgPlgTargets=function(){return[d[0],O,Q,d]},e.addQueryStringParameter=function(e,t){for(var i=0;i<B.length;i++)if(B[i].name===e)return void(B[i].value=t);B.push({name:e,value:t})},e.addHeader=function(e,t){q[e]=t},e.canSendRequest=function(){return re()&&N.allowRequestSending()},e.sendQueuedRequests=function(e,t){n.isUndefined(e)&&(e=0),$&&(e=ne(e),t=2),ae(H,e,0)&&le(oe(),0,!1,e,t||0)},e.isCompletelyIdle=function(){return!b&&0===M&&0===H.length},e.setUnloading=function(e){$=e},e.addBatch=function(e){if(e&&e.count()>0){if(O.isTenantKilled(e.iKey()))return!1;H.push(e)}return!0},e.teardown=function(){H.length>0&&le(oe(),0,!0,2,2)},e.pause=function(){b=!0},e.resume=function(){b=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,t,i){e&&e.count()>0&&(n.isNullOrUndefined(t)&&(t=1),$&&(t=ne(t),i=2),le([e],0,!1,t,i||0))}}))};function Y(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return setTimeout(e,t,i)}function $(e){clearTimeout(e)}function Z(e,t){return{set:e||Y,clear:t||$}}var X="eventsDiscarded",J="overrideInstrumentationKey",ee="maxEventRetryAttempts",te="maxUnloadEventRetryAttempts",ie=function(e){function i(){var t=e.call(this)||this;t.identifier="PostChannel",t.priority=1011,t.version="3.2.3";var r,c,u,d,p,h,_,g,m=!1,S=[],f=null,E=!1,T=0,C=500,v=0,R=1e4,A={},I=a,O=null,b=null,N=0,D=0,M={},L=-1,P=!0,B=!1,k=6,U=2;return o(i,t,(function(e,t){function i(e){"beforeunload"!==(e||n.getWindow().event).type&&(B=!0,u.setUnloading(B)),W(2,2)}function o(e){B=!1,u.setUnloading(B)}function F(e,t){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext.trace&&delete e.ext.trace,e.ext&&e.ext.user&&e.ext.user.id&&delete e.ext.user.id,P&&(e.ext=n.optimizeObject(e.ext),e.baseData&&(e.baseData=n.optimizeObject(e.baseData)),e.data&&(e.data=n.optimizeObject(e.data))),e.sync)if(N||E)e.latency=3,e.sync=!1;else if(u)return P&&(e=n.optimizeObject(e)),void u.sendSynchronousBatch(w.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var i=e.latency,r=v,o=R;4===i&&(r=T,o=C);var a=!1;if(r<o)a=!$(e,t);else{var s=1,l=20;4===i&&(s=4,l=1),a=!0,function(e,t,i,r){for(;i<=t;){var o=K(e,t,!0);if(o&&o.count()>0){var a=o.split(0,r),s=a.count();if(s>0)return 4===i?T-=s:v-=s,ue(X,[a],n.EventsDiscardedReason.QueueFull),!0}i++}return ie(),!1}(e.iKey,e.latency,s,l)&&(a=!$(e,t))}a&&ce(X,[e],n.EventsDiscardedReason.QueueFull)}function G(e,t,i){var n=ne(e,t,i);return u.sendQueuedRequests(t,i),n}function V(){return v>0}function q(){if(L>=0&&ne(L,0,h)&&u.sendQueuedRequests(0,h),T>0&&!b&&!E){var e=A[I][2];e>=0&&(b=H((function(){b=null,G(4,0,1),q()}),e))}var t=A[I][1];!O&&!f&&t>=0&&!E&&(V()?O=H((function(){O=null,G(0===D?3:1,0,1),D++,D%=2,q()}),t):D=0)}function j(){r=null,m=!1,S=[],f=null,E=!1,T=0,C=500,v=0,R=1e4,A={},I=a,O=null,b=null,N=0,D=0,c=null,M={},d=void 0,p=0,L=-1,h=null,P=!0,B=!1,k=6,U=2,_=null,g=Z(),u=new Q(500,2,1,{requeue:se,send:de,sent:pe,drop:he,rspFail:_e,oth:ge},g),ae(),M[4]={batches:[],iKeyMap:{}},M[3]={batches:[],iKeyMap:{}},M[2]={batches:[],iKeyMap:{}},M[1]={batches:[],iKeyMap:{}},me()}function H(e,t){0===t&&N&&(t=1);var i=1e3;return N&&(i=x(N-1)),g.set(e,t*i)}function z(){return null!==O&&(g.clear(O),O=null,D=0,!0)}function W(e,t){z(),f&&(g.clear(f),f=null),E||G(1,e,t)}function K(e,t,i){var n=M[t];n||(n=M[t=1]);var r=n.iKeyMap[e];return!r&&i&&(r=w.create(e),n.batches.push(r),n.iKeyMap[e]=r),r}function Y(t,i){u.canSendRequest()&&!N&&(d>0&&v>d&&(i=!0),i&&null==f&&e.flush(t,null,20))}function $(e,t){P&&(e=n.optimizeObject(e));var i=e.latency,r=K(e.iKey,i,!0);return!!r.addEvent(e)&&(4!==i?(v++,t&&0===e.sendAttempt&&Y(!e.sync,p>0&&r.count()>=p)):T++,!0)}function ie(){for(var e=0,t=0,i=function(i){var r=M[i];r&&r.batches&&n.arrForEach(r.batches,(function(n){4===i?e+=n.count():t+=n.count()}))},r=1;r<=4;r++)i(r);v=t,T=e}function ne(t,i,r){var o=!1,a=0===i;return!a||u.canSendRequest()?n.doPerf(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],i=4;i>=t;){var r=M[i];r&&r.batches&&r.batches.length>0&&(n.arrForEach(r.batches,(function(t){u.addBatch(t)?o=o||t&&t.count()>0:e=e.concat(t.events()),4===i?T-=t.count():v-=t.count()})),r.batches=[],r.iKeyMap={}),i--}e.length>0&&ce(X,e,n.EventsDiscardedReason.KillSwitch),o&&L>=t&&(L=-1,h=0)}),(function(){return{latency:t,sendType:i,sendReason:r}}),!a):(L=L>=0?Math.min(L,t):t,h=Math.max(h,r)),o}function re(e,t){G(1,0,t),ie(),oe((function(){e&&e(),S.length>0?f=H((function(){f=null,re(S.shift(),t)}),0):(f=null,q())}))}function oe(e){u.isCompletelyIdle()?e():f=H((function(){f=null,oe(e)}),.25)}function ae(){(A={})[a]=[2,1,0],A[s]=[6,3,0],A[l]=[18,9,0]}function se(t,i){var r=[],o=k;B&&(o=U),n.arrForEach(t,(function(t){t&&t.count()>0&&n.arrForEach(t.events(),(function(t){t&&(t.sync&&(t.latency=4,t.sync=!1),t.sendAttempt<o?(n.setProcessTelemetryTimings(t,e.identifier),F(t,!1)):r.push(t))}))})),r.length>0&&ce(X,r,n.EventsDiscardedReason.NonRetryableStatus),B&&W(2,2)}function le(t,i){var r=e._notificationManager||{},o=r[t];if(o)try{o.apply(r,i)}catch(i){n._throwInternal(e.diagLog(),1,74,t+" notification failed: "+i)}}function ce(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];t&&t.length>0&&le(e,[t].concat(i))}function ue(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];t&&t.length>0&&n.arrForEach(t,(function(t){t&&t.count()>0&&le(e,[t.events()].concat(i))}))}function de(e,t,i){e&&e.length>0&&le("eventsSendRequest",[t>=1e3&&t<=1999?t-1e3:0,!0!==i])}function pe(e,t){ue("eventsSent",e,t),q()}function he(e,t){ue(X,e,t>=8e3&&t<=8999?t-8e3:n.EventsDiscardedReason.Unknown)}function _e(e){ue(X,e,n.EventsDiscardedReason.NonRetryableStatus),q()}function ge(e,t){ue(X,e,n.EventsDiscardedReason.Unknown),q()}function me(){p=r&&r.disableAutoBatchFlushLimit?0:Math.max(1500,R/6)}j(),e._getDbgPlgTargets=function(){return[u]},e.initialize=function(a,s,l){n.doPerf(s,(function(){return"PostChannel:initialize"}),(function(){var p=s;t.initialize(a,s,l);try{s.addUnloadCb,_=n.mergeEvtNamespace(n.createUniqueNamespace(e.identifier),s.evtNamespace&&s.evtNamespace());var h=e._getTelCtx();a.extensionConfig[e.identifier]=a.extensionConfig[e.identifier]||{},r=h.getExtCfg(e.identifier),g=Z(r.setTimeoutOverride,r.clearTimeoutOverride),P=!r.disableOptimizeObj&&n.isChromium(),function(e){var t=e.getWParam;e.getWParam=function(){var e=0;return r.ignoreMc1Ms0CookieProcessing&&(e|=2),e|t()}}(p),r.eventsLimitInMem>0&&(R=r.eventsLimitInMem),r.immediateEventLimit>0&&(C=r.immediateEventLimit),r.autoFlushEventsLimit>0&&(d=r.autoFlushEventsLimit),n.isNumber(r[ee])&&(k=r[ee]),n.isNumber(r[te])&&(U=r[te]),me(),r.httpXHROverride&&r.httpXHROverride.sendPOST&&(c=r.httpXHROverride),n.isValueAssigned(a.anonCookieName)&&u.addQueryStringParameter("anoncknm",a.anonCookieName),u.sendHook=r.payloadPreprocessor,u.sendListener=r.payloadListener;var m=r.overrideEndpointUrl?r.overrideEndpointUrl:a.endpointUrl;e._notificationManager=a.extensionConfig.NotificationManager,u.initialize(m,e.core,e,c,r);var S=a.disablePageUnloadEvents||[];n.addPageUnloadEventListener(i,S,_),n.addPageHideEventListener(i,S,_),n.addPageShowEventListener(o,a.disablePageShowEvents,_)}catch(t){throw e.setInitialized(!1),t}}),(function(){return{coreConfig:a,core:s,extensions:l}}))},e.processTelemetry=function(t,i){n.setProcessTelemetryTimings(t,e.identifier);var o=(i=e._getTelCtx(i)).getExtCfg(e.identifier),a=!!r.disableTelemetry;o&&(a=a||!!o.disableTelemetry);var s=t;!a&&!m&&(r[J]&&(s.iKey=r[J]),o&&o[J]&&(s.iKey=o[J]),F(s,!0),B?W(2,2):q()),e.processNext(s,i)},e._doTeardown=function(e,t){W(2,2),m=!0,u.teardown(),n.removePageUnloadEventListener(null,_),n.removePageHideEventListener(null,_),n.removePageShowEventListener(null,_),j()},e.setEventQueueLimits=function(e,t){R=e>0?e:1e4,d=t>0?t:0,me();var i=v>e;if(!i&&p>0)for(var r=1;!i&&r<=3;r++){var o=M[r];o&&o.batches&&n.arrForEach(o.batches,(function(e){e&&e.count()>=p&&(i=!0)}))}Y(!0,i)},e.pause=function(){z(),E=!0,u.pause()},e.resume=function(){E=!1,u.resume(),q()},e.addResponseHandler=function(e){u._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){z(),ae(),I=a,q(),n.objForEachKey(e,(function(e,t){var i=t.length;if(i>=2){var n=i>2?t[2]:0;if(t.splice(0,i-2),t[1]<0&&(t[0]=-1),t[1]>0&&t[0]>0){var r=t[0]/t[1];t[0]=Math.ceil(r)*t[1]}n>=0&&t[1]>=0&&n>t[1]&&(n=t[1]),t.push(n),A[e]=t}}))},e.flush=function(e,t,i){if(void 0===e&&(e=!0),!E)if(i=i||1,e)null==f?(z(),ne(1,0,i),f=H((function(){f=null,re(t,i)}),0)):S.push(t);else{var n=z();G(1,1,i),null!=t&&t(),n&&q()}},e.setMsaAuthTicket=function(e){u.addHeader(y,e)},e.hasEvents=V,e._setTransmitProfile=function(e){I!==e&&void 0!==A[e]&&(z(),I=e,q())},e._backOffTransmission=function(){N<4&&(N++,z(),q())},e._clearBackOff=function(){N&&(N=0,z(),q())},n.objDefineAccessors(e,"_setTimeoutOverride",(function(){return g.set}),(function(e){g=Z(e,g.clear)})),n.objDefineAccessors(e,"_clearTimeoutOverride",(function(){return g.clear}),(function(e){g=Z(g.set,e)}))})),t}return t.__extendsFn(i,e),i}(n.BaseTelemetryPlugin);e.BE_PROFILE=l,e.NRT_PROFILE=s,e.PostChannel=ie,e.RT_PROFILE=a,function(e,t,i){var n=Object.defineProperty;if(n)try{return n(e,t,i)}catch{}i&&void 0!==typeof i.value&&(e[t]=i.value)}(e,"__esModule",{value:!0})},"object"==typeof a&&typeof s<"u"?l(a,w(),A(),I()):(r=[t,i(623),i(2314),i(9644)],void 0===(o="function"==typeof(n=l)?n.apply(t,r):n)||(e.exports=o))})),b=T(((e,t)=>{"use strict";var i=function(){function e(){}return e.info=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,i)},e.warn=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,i)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();t.exports=i})),N=T((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var n=In(),r=i(2361),o=function(){function e(){}return e.prototype.active=function(){var e=this,i=n.CorrelationContextManager.getCurrentContext();return t(t({},i),{getValue:function(t){return e._activeSymbol?t===e._activeSymbol&&i:(e._activeSymbol=t,i)},setValue:function(){}})},e.prototype.with=function(t,i){var r=t.parentSpanId,o=t.name,a=e._spanToContext(t,r,o);return n.CorrelationContextManager.runWithContext(a,i)()},e.prototype.bind=function(e){return"function"==typeof e?n.CorrelationContextManager.wrapCallback(e):(e instanceof r.EventEmitter&&n.CorrelationContextManager.wrapEmitter(e),e)},e.prototype.enable=function(){return n.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return n.CorrelationContextManager.disable(),this},e._spanToContext=function(e,i,r){var o=i?"|"+e.spanContext().traceId+"."+i+".":e.spanContext().traceId,a=t(t({},e.spanContext()),{traceFlags:e.spanContext().traceFlags});return n.CorrelationContextManager.spanToContextObject(a,o,r)},e}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o})),D=T(((e,t)=>{var i;e=t.exports=K,i="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],a=e.src=[],s=0,l=s++;a[l]="0|[1-9]\\d*";var c=s++;a[c]="[0-9]+";var u=s++;a[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=s++;a[d]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=s++;a[p]="("+a[c]+")\\.("+a[c]+")\\.("+a[c]+")";var h=s++;a[h]="(?:"+a[l]+"|"+a[u]+")";var _=s++;a[_]="(?:"+a[c]+"|"+a[u]+")";var g=s++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var m=s++;a[m]="(?:-?("+a[_]+"(?:\\."+a[_]+")*))";var S=s++;a[S]="[0-9A-Za-z-]+";var f=s++;a[f]="(?:\\+("+a[S]+"(?:\\."+a[S]+")*))";var E=s++,T="v?"+a[d]+a[g]+"?"+a[f]+"?";a[E]="^"+T+"$";var C="[v=\\s]*"+a[p]+a[m]+"?"+a[f]+"?",y=s++;a[y]="^"+C+"$";var v=s++;a[v]="((?:<|>)?=?)";var R=s++;a[R]=a[c]+"|x|X|\\*";var A=s++;a[A]=a[l]+"|x|X|\\*";var I=s++;a[I]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[f]+"?)?)?";var w=s++;a[w]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[m]+")?"+a[f]+"?)?)?";var O=s++;a[O]="^"+a[v]+"\\s*"+a[I]+"$";var b=s++;a[b]="^"+a[v]+"\\s*"+a[w]+"$";var N=s++;a[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=s++;a[D]="(?:~>?)";var M=s++;a[M]="(\\s*)"+a[D]+"\\s+",o[M]=new RegExp(a[M],"g");var L=s++;a[L]="^"+a[D]+a[I]+"$";var P=s++;a[P]="^"+a[D]+a[w]+"$";var x=s++;a[x]="(?:\\^)";var B=s++;a[B]="(\\s*)"+a[x]+"\\s+",o[B]=new RegExp(a[B],"g");var k=s++;a[k]="^"+a[x]+a[I]+"$";var U=s++;a[U]="^"+a[x]+a[w]+"$";var F=s++;a[F]="^"+a[v]+"\\s*("+C+")$|^$";var G=s++;a[G]="^"+a[v]+"\\s*("+T+")$|^$";var V=s++;a[V]="(\\s*)"+a[v]+"\\s*("+C+"|"+a[I]+")",o[V]=new RegExp(a[V],"g");var q=s++;a[q]="^\\s*("+a[I]+")\\s+-\\s+("+a[I]+")\\s*$";var j=s++;a[j]="^\\s*("+a[w]+")\\s+-\\s+("+a[w]+")\\s*$";var H,z=s++;for(a[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)i(H,a[H]),o[H]||(o[H]=new RegExp(a[H]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?o[y]:o[E]).test(e))return null;try{return new K(e,t)}catch{return null}}function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof K))return new K(e,t);i("SemVer",e,t),this.options=t,this.loose=!!t.loose;var a=e.trim().match(t.loose?o[y]:o[E]);if(!a)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var i=W(e,t);return i?i.version:null},e.clean=function(e,t){var i=W(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null},e.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return i("SemVer.compare",this.version,this.options,e),e instanceof K||(e=new K(e,this.options)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.options)),Y(this.major,e.major)||Y(this.minor,e.minor)||Y(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Y(n,r)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,i,n){"string"==typeof i&&(n=i,i=void 0);try{return new K(e,i).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(J(e,t))return null;var i=W(e),n=W(t),r="";if(i.prerelease.length||n.prerelease.length){r="pre";var o="prerelease"}for(var a in i)if(("major"===a||"minor"===a||"patch"===a)&&i[a]!==n[a])return r+a;return o},e.compareIdentifiers=Y;var Q=/^[0-9]+$/;function Y(e,t){var i=Q.test(e),n=Q.test(t);return i&&n&&(e=+e,t=+t),e===t?0:i&&!n?-1:n&&!i?1:e<t?-1:1}function $(e,t,i){return new K(e,i).compare(new K(t,i))}function Z(e,t,i){return $(e,t,i)>0}function X(e,t,i){return $(e,t,i)<0}function J(e,t,i){return 0===$(e,t,i)}function ee(e,t,i){return 0!==$(e,t,i)}function te(e,t,i){return $(e,t,i)>=0}function ie(e,t,i){return $(e,t,i)<=0}function ne(e,t,i,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e===i;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e!==i;case"":case"=":case"==":return J(e,i,n);case"!=":return ee(e,i,n);case">":return Z(e,i,n);case">=":return te(e,i,n);case"<":return X(e,i,n);case"<=":return ie(e,i,n);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);i("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}e.rcompareIdentifiers=function(e,t){return Y(t,e)},e.major=function(e,t){return new K(e,t).major},e.minor=function(e,t){return new K(e,t).minor},e.patch=function(e,t){return new K(e,t).patch},e.compare=$,e.compareLoose=function(e,t){return $(e,t,!0)},e.rcompare=function(e,t,i){return $(t,e,i)},e.sort=function(t,i){return t.sort((function(t,n){return e.compare(t,n,i)}))},e.rsort=function(t,i){return t.sort((function(t,n){return e.rcompare(t,n,i)}))},e.gt=Z,e.lt=X,e.eq=J,e.neq=ee,e.gte=te,e.lte=ie,e.cmp=ne,e.Comparator=re;var oe={};function ae(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ae(e.raw,t);if(e instanceof re)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function le(e,t,i,n,r,o,a,s,l,c,u,d,p){return((t=se(i)?"":se(n)?">="+i+".0.0":se(r)?">="+i+"."+n+".0":">="+t)+" "+(s=se(l)?"":se(c)?"<"+(+l+1)+".0.0":se(u)?"<"+l+"."+(+c+1)+".0":d?"<="+l+"."+c+"."+u+"-"+d:"<="+s)).trim()}function ce(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++)if(i(e[r].semver),e[r].semver!==oe&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,i){try{t=new ae(t,i)}catch{return!1}return t.test(e)}function de(e,t,i,n){var r,o,a,s,l;switch(e=new K(e,n),t=new ae(t,n),i){case">":r=Z,o=ie,a=X,s=">",l=">=";break;case"<":r=X,o=te,a=Z,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],d=null,p=null;if(u.forEach((function(e){e.semver===oe&&(e=new re(">=0.0.0")),d=d||e,p=p||e,r(e.semver,d.semver,n)?d=e:a(e.semver,p.semver,n)&&(p=e)})),d.operator===s||d.operator===l||(!p.operator||p.operator===s)&&o(e,p.semver))return!1;if(p.operator===l&&a(e,p.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?o[F]:o[G],i=e.match(t);if(!i)throw new TypeError("Invalid comparator: "+e);this.operator=i[1],"="===this.operator&&(this.operator=""),i[2]?this.semver=new K(i[2],this.options.loose):this.semver=oe},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return i("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new K(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var i;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return i=new ae(e.value,t),ue(this.value,i,t);if(""===e.operator)return i=new ae(this.value,t),ue(e.semver,i,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||o&&a||s||l},e.Range=ae,ae.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[j]:o[q];e=e.replace(n,le),i("hyphen replace",e),e=e.replace(o[V],"$1$2$3"),i("comparator trim",e,o[V]),e=(e=(e=e.replace(o[M],"$1~")).replace(o[B],"$1^")).split(/\s+/).join(" ");var r=t?o[F]:o[G],a=e.split(" ").map((function(e){return function(e,t){return i("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){i("caret",e,t);var n=t.loose?o[U]:o[k];return e.replace(n,(function(t,n,r,o,a){var s;return i("caret",e,t,n,r,o,a),se(n)?s="":se(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":a?(i("replaceCaret pr",a),s="0"===n?"0"===r?">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(i("no pr"),s="0"===n?"0"===r?">="+n+"."+r+"."+o+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+" <"+(+n+1)+".0.0"),i("caret return",s),s}))}(e,t)})).join(" ")}(e,t),i("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[P]:o[L];return e.replace(n,(function(t,n,r,o,a){var s;return i("tilde",e,t,n,r,o,a),se(n)?s="":se(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":a?(i("replaceTilde pr",a),s=">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0"):s=">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0",i("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),i("tildes",e),e=function(e,t){return i("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[b]:o[O];return e.replace(n,(function(t,n,r,o,a,s){i("xRange",e,t,n,r,o,a,s);var l=se(r),c=l||se(o),u=c||se(a);return"="===n&&u&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(c&&(o=0),a=0,">"===n?(n=">=",c?(r=+r+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",c?r=+r+1:o=+o+1),t=n+r+"."+o+"."+a):c?t=">="+r+".0.0 <"+(+r+1)+".0.0":u&&(t=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0"),i("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),i("xrange",e),e=function(e,t){return i("replaceStars",e,t),e.trim().replace(o[z],"")}(e,t),i("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(r)}))),a.map((function(e){return new re(e,this.options)}),this)},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some((function(i){return i.every((function(i){return e.set.some((function(e){return e.every((function(e){return i.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new ae(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new K(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},e.satisfies=ue,e.maxSatisfying=function(e,t,i){var n=null,r=null;try{var o=new ae(t,i)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||-1===r.compare(e))&&(r=new K(n=e,i))})),n},e.minSatisfying=function(e,t,i){var n=null,r=null;try{var o=new ae(t,i)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||1===r.compare(e))&&(r=new K(n=e,i))})),n},e.minVersion=function(e,t){e=new ae(e,t);var i=new K("0.0.0");if(e.test(i)||(i=new K("0.0.0-0"),e.test(i)))return i;i=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new K(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!i||Z(i,t))&&(i=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return i&&e.test(i)?i:null},e.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,i){return de(e,t,"<",i)},e.gtr=function(e,t,i){return de(e,t,">",i)},e.outside=de,e.prerelease=function(e,t){var i=W(e,t);return i&&i.prerelease.length?i.prerelease:null},e.intersects=function(e,t,i){return e=new ae(e,i),t=new ae(t,i),e.intersects(t)},e.coerce=function(e){if(e instanceof K)return e;if("string"!=typeof e)return null;var t=e.match(o[N]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),M=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=i(1017),n=D(),r=i(8188),o=Object.keys(process.binding("natives")),a=r.prototype.require;e.makePatchingRequire=function(e){var i={};return function(s){var l=a.apply(this,arguments);if(e[s]){var c=r._resolveFilename(s,this);if(i.hasOwnProperty(c))return i[c];var u=void 0;if(o.indexOf(s)<0)try{u=a.call(this,t.join(s,"package.json")).version}catch{return l}else u=process.version.substring(1);var d=u.indexOf("-");d>=0&&(u=u.substring(0,d));for(var p=l,h=0,_=e[s];h<_.length;h++){var g=_[h];n.satisfies(u,g.versionSpecifier)&&(p=g.patch(p,c))}return i[c]=p}return l}}})),L=T(((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}})),P=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=M(),n=M();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return n.makePatchingRequire}});var r=function(e){return!0},o=function(){function e(){this.version=L().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var i=this.subscribers[e];if(i){var n={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,i.forEach((function(e){var t=e.listener,i=e.filter;try{i&&i(!0)&&t(n)}catch{}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,i){void 0===i&&(i=r),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:i})},e.prototype.unsubscribe=function(e,t,i){void 0===i&&(i=r);var n=this.subscribers[e];if(n)for(var o=0;o<n.length;++o)if(n[o].listener===t&&n[o].filter===i)return n.splice(o,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(i){return e(t(i))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new o,i(8188).prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),e.channel=global.diagnosticsSource})),x=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),B=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis="object"==typeof globalThis?globalThis:global})),k=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(B(),e)})),U=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(k(),e)})),F=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"})),G=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=F(),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(e){var t=new Set([e]),n=new Set,r=e.match(i);if(!r)return function(){return!1};var o=+r[1],a=+r[2],s=+r[3];if(null!=r[4])return function(t){return t===e};function l(e){return n.add(e),!1}function c(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(i);if(!r)return l(e);var u=+r[1],d=+r[2],p=+r[3];return null!=r[4]||o!==u?l(e):0===o?a===d&&s<=p?c(e):l(e):a<=d?c(e):l(e)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)})),V=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=U(),i=F(),n=G(),r=i.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+r),a=t._globalThis;e.registerGlobal=function(e,t,n,r){var s;void 0===r&&(r=!1);var l=a[o]=null!==(s=a[o])&&void 0!==s?s:{version:i.VERSION};if(!r&&l[e]){var c=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(c.stack||c.message),!1}return l.version!==i.VERSION?(c=new Error("@opentelemetry/api: All API registration versions must match"),n.error(c.stack||c.message),!1):(l[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+i.VERSION+"."),!0)},e.getGlobal=function(e){var t,i,r=null===(t=a[o])||void 0===t?void 0:t.version;if(r&&n.isCompatible(r))return null===(i=a[o])||void 0===i?void 0:i[e]},e.unregisterGlobal=function(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+i.VERSION+".");var n=a[o];n&&delete n[e]}})),q=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=V(),i=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n("verbose",this._namespace,e)},e}();function n(e,i,n){var r=t.getGlobal("diag");if(r)return n.unshift(i),r[e].apply(r,n)}e.DiagComponentLogger=i})),j=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0,(t=e.DiagLogLevel||(e.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})),H=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=j();e.createLogLevelDiagLogger=function(e,i){function n(t,n){var r=i[t];return"function"==typeof r&&e>=n?r.bind(i):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),i=i||{},{error:n("error",t.DiagLogLevel.ERROR),warn:n("warn",t.DiagLogLevel.WARN),info:n("info",t.DiagLogLevel.INFO),debug:n("debug",t.DiagLogLevel.DEBUG),verbose:n("verbose",t.DiagLogLevel.VERBOSE)}}})),z=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=q(),i=H(),n=j(),r=V(),o=function(){function e(){function e(e){return function(){var t=r.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var o=this;o.setLogger=function(e,t){var a,s;if(void 0===t&&(t=n.DiagLogLevel.INFO),e===o){var l=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return o.error(null!==(a=l.stack)&&void 0!==a?a:l.message),!1}var c=r.getGlobal("diag"),u=i.createLogLevelDiagLogger(t,e);if(c){var d=null!==(s=(new Error).stack)&&void 0!==s?s:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+d),u.warn("Current logger will overwrite one already registered from "+d)}return r.registerGlobal("diag",u,o,!0)},o.disable=function(){r.unregisterGlobal("diag",o)},o.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},o.verbose=e("verbose"),o.debug=e("debug"),o.info=e("info"),o.warn=e("warn"),o.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();e.DiagAPI=o})),W=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,i){var n=new e(this._entries);return n._entries.set(t,i),n},e.prototype.removeEntry=function(t){var i=new e(this._entries);return i._entries.delete(t),i},e.prototype.removeEntries=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var n=new e(this._entries),r=0,o=t;r<o.length;r++){var a=o[r];n._entries.delete(a)}return n},e.prototype.clear=function(){return new e},e}();e.BaggageImpl=t})),K=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")})),Q=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=z(),i=W(),n=K(),r=t.DiagAPI.instance();e.createBaggage=function(e){return void 0===e&&(e={}),new i.BaggageImpl(new Map(Object.entries(e)))},e.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(r.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return e}}}})),Y=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Z=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];e.DiagConsoleLogger=function(){function e(e){return function(){var t=arguments;if(console){var i=console[e];if("function"!=typeof i&&(i=console.log),"function"==typeof i)return i.apply(console,t)}}}for(var i=0;i<t.length;i++)this[t[i].n]=e(t[i].c)}})),X=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Z(),e),i(j(),e)})),J=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},e.defaultTextMapSetter={set:function(e,t,i){null!=e&&(e[t]=i)}}})),ee=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),te=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ie=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0,e.createContextKey=function(e){return Symbol.for(e)};e.ROOT_CONTEXT=new function e(t){var i=this;i._currentContext=t?new Map(t):new Map,i.getValue=function(e){return i._currentContext.get(e)},i.setValue=function(t,n){var r=new e(i._currentContext);return r._currentContext.set(t,n),r},i.deleteValue=function(t){var n=new e(i._currentContext);return n._currentContext.delete(t),n}}})),ne=T((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var i=ie(),n=function(){function e(){}return e.prototype.active=function(){return i.ROOT_CONTEXT},e.prototype.with=function(e,i,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return i.call.apply(i,t([n],r))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();e.NoopContextManager=n})),re=T((e=>{"use strict";var t=e&&e.__spreadArray||function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var i=ne(),n=V(),r=z(),o="context",a=new i.NoopContextManager,s=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return n.registerGlobal(o,e,r.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,i,n){for(var r,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return(r=this._getContextManager()).with.apply(r,t([e,i,n],o))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return n.getGlobal(o)||a},e.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(o,r.DiagAPI.instance())},e}();e.ContextAPI=s})),oe=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0,(t=e.TraceFlags||(e.TraceFlags={}))[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})),ae=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=oe();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}})),se=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=ae(),i=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();e.NonRecordingSpan=i})),le=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=ie(),i=se(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function r(e){return e.getValue(n)||void 0}function o(e,t){return e.setValue(n,t)}e.getSpan=r,e.setSpan=o,e.deleteSpan=function(e){return e.deleteValue(n)},e.setSpanContext=function(e,t){return o(e,new i.NonRecordingSpan(t))},e.getSpanContext=function(e){var t;return null===(t=r(e))||void 0===t?void 0:t.spanContext()}})),ce=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=ae(),i=se(),n=/^([0-9a-f]{32})$/i,r=/^[0-9a-f]{16}$/i;function o(e){return n.test(e)&&e!==t.INVALID_TRACEID}function a(e){return r.test(e)&&e!==t.INVALID_SPANID}e.isValidTraceId=o,e.isValidSpanId=a,e.isSpanContextValid=function(e){return o(e.traceId)&&a(e.spanId)},e.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}})),ue=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=re(),i=le(),n=se(),r=ce(),o=t.ContextAPI.getInstance(),a=function(){function e(){}return e.prototype.startSpan=function(e,t,o){if(Boolean(null==t?void 0:t.root))return new n.NonRecordingSpan;var a=o&&i.getSpanContext(o);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(a)&&r.isSpanContextValid(a)?new n.NonRecordingSpan(a):new n.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,n,r){var a,s,l;if(!(arguments.length<2)){2===arguments.length?l=t:3===arguments.length?(a=t,l=n):(a=t,s=n,l=r);var c=s??o.active(),u=this.startSpan(e,a,c),d=i.setSpan(c,u);return o.with(d,l,void 0,u)}},e}();e.NoopTracer=a})),de=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=new(ue().NoopTracer),i=function(){function e(e,t,i){this._provider=e,this.name=t,this.version=i}return e.prototype.startSpan=function(e,t,i){return this._getTracer().startSpan(e,t,i)},e.prototype.startActiveSpan=function(e,t,i,n){var r=this._getTracer();return Reflect.apply(r.startActiveSpan,r,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):t},e}();e.ProxyTracer=i})),pe=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=ue(),i=function(){function e(){}return e.prototype.getTracer=function(e,i){return new t.NoopTracer},e}();e.NoopTracerProvider=i})),he=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=de(),i=new(pe().NoopTracerProvider),n=function(){function e(){}return e.prototype.getTracer=function(e,i){var n;return null!==(n=this.getDelegateTracer(e,i))&&void 0!==n?n:new t.ProxyTracer(this,e,i)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:i},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var i;return null===(i=this._delegate)||void 0===i?void 0:i.getTracer(e,t)},e}();e.ProxyTracerProvider=n})),_e=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ge=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0,(t=e.SamplingDecision||(e.SamplingDecision={}))[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})),me=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Se=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0,(t=e.SpanKind||(e.SpanKind={}))[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})),fe=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ee=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Te=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0,(t=e.SpanStatusCode||(e.SpanStatusCode={}))[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})),Ce=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ye=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ve=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Re=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ae=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=V(),i=he(),n=ce(),r=le(),o=z(),a="trace",s=function(){function e(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=r.deleteSpan,this.getSpan=r.getSpan,this.getSpanContext=r.getSpanContext,this.setSpan=r.setSpan,this.setSpanContext=r.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var i=t.registerGlobal(a,this._proxyTracerProvider,o.DiagAPI.instance());return i&&this._proxyTracerProvider.setDelegate(e),i},e.prototype.getTracerProvider=function(){return t.getGlobal(a)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){t.unregisterGlobal(a,o.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider},e}();e.TraceAPI=s})),Ie=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();e.NoopTextMapPropagator=t})),we=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=ie().createContextKey("OpenTelemetry Baggage Key");e.getBaggage=function(e){return e.getValue(t)||void 0},e.setBaggage=function(e,i){return e.setValue(t,i)},e.deleteBaggage=function(e){return e.deleteValue(t)}})),Oe=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=V(),i=Ie(),n=J(),r=we(),o=Q(),a=z(),s="propagation",l=new i.NoopTextMapPropagator,c=function(){function e(){this.createBaggage=o.createBaggage,this.getBaggage=r.getBaggage,this.setBaggage=r.setBaggage,this.deleteBaggage=r.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return t.registerGlobal(s,e,a.DiagAPI.instance())},e.prototype.inject=function(e,t,i){return void 0===i&&(i=n.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,i)},e.prototype.extract=function(e,t,i){return void 0===i&&(i=n.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,i)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){t.unregisterGlobal(s,a.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return t.getGlobal(s)||l},e}();e.PropagationAPI=c})),be=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,i(x(),e);var n=Q();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),i(Y(),e),i($(),e),i(X(),e),i(J(),e),i(ee(),e),i(te(),e),i(de(),e),i(he(),e),i(_e(),e),i(ge(),e),i(me(),e),i(Se(),e),i(fe(),e),i(Ee(),e),i(Te(),e),i(oe(),e),i(Ce(),e),i(ye(),e),i(ve(),e);var r=ce();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return r.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return r.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return r.isValidSpanId}});var o=ae();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return o.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return o.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return o.INVALID_SPAN_CONTEXT}}),i(ie(),e),i(Re(),e);var a=re();e.context=a.ContextAPI.getInstance();var s=Ae();e.trace=s.TraceAPI.getInstance();var l=Oe();e.propagation=l.PropagationAPI.getInstance();var c=z();e.diag=c.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}})),Ne=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=be().createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");e.suppressTracing=function(e){return e.setValue(t,!0)},e.unsuppressTracing=function(e){return e.deleteValue(t)},e.isTracingSuppressed=function(e){return!0===e.getValue(t)}})),De=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192})),Me=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=be(),i=De();e.serializeKeyPairs=e=>e.reduce(((e,t)=>{let n=`${e}${""!==e?i.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return n.length>i.BAGGAGE_MAX_TOTAL_LENGTH?e:n}),""),e.getKeyPairs=e=>e.getAllEntries().map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`)),e.parsePairKeyValue=e=>{let n=e.split(i.BAGGAGE_PROPERTIES_SEPARATOR);if(n.length<=0)return;let r=n.shift();if(!r)return;let o=r.split(i.BAGGAGE_KEY_PAIR_SEPARATOR);if(2!==o.length)return;let a,s=decodeURIComponent(o[0].trim()),l=decodeURIComponent(o[1].trim());return n.length>0&&(a=t.baggageEntryMetadataFromString(n.join(i.BAGGAGE_PROPERTIES_SEPARATOR))),{key:s,value:l,metadata:a}},e.parseKeyPairsIntoRecord=t=>"string"!=typeof t||0===t.length?{}:t.split(i.BAGGAGE_ITEMS_SEPARATOR).map((t=>e.parsePairKeyValue(t))).filter((e=>void 0!==e&&e.value.length>0)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})})),Le=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=be(),i=Ne(),n=De(),r=Me();e.HttpBaggagePropagator=class{inject(e,o,a){let s=t.propagation.getBaggage(e);if(!s||i.isTracingSuppressed(e))return;let l=r.getKeyPairs(s).filter((e=>e.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),c=r.serializeKeyPairs(l);c.length>0&&a.set(o,n.BAGGAGE_HEADER,c)}extract(e,i,o){let a=o.get(i,n.BAGGAGE_HEADER);if(!a)return e;let s={};return 0===a.length||(a.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach((e=>{let t=r.parsePairKeyValue(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),s[t.key]=e}})),0===Object.entries(s).length)?e:t.propagation.setBaggage(e,t.propagation.createBaggage(s))}fields(){return[n.BAGGAGE_HEADER]}}})),Pe=T((e=>{"use strict";function t(e){return null==e||(Array.isArray(e)?function(e){let t;for(let n of e)if(null!=n){if(!t){if(i(n)){t=typeof n;continue}return!1}if(typeof n!==t)return!1}return!0}(e):i(e))}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0,e.sanitizeAttributes=function(e){let i={};if(null==e||"object"!=typeof e)return i;for(let[n,r]of Object.entries(e))t(r)&&(Array.isArray(r)?i[n]=r.slice():i[n]=r);return i},e.isAttributeValue=t})),xe=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=be();e.loggingErrorHandler=function(){return e=>{t.diag.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){let t={},i=e;for(;null!==i;)Object.getOwnPropertyNames(i).forEach((e=>{if(t[e])return;let n=i[e];n&&(t[e]=String(n))})),i=Object.getPrototypeOf(i);return t}(e))}(e))}}})),Be=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=xe().loggingErrorHandler();e.setGlobalErrorHandler=function(e){t=e},e.globalErrorHandler=e=>{try{t(e)}catch{}}})),ke=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})),Ue=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=be(),i=ke(),n=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function r(e){return n.indexOf(e)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function a(e){return o.indexOf(e)>-1}function s(e,t,i,n=-1/0,r=1/0){if(typeof i[e]<"u"){let o=Number(i[e]);isNaN(o)||(t[e]=o<n?n:o>r?r:o)}}function l(e,t,i,n=","){let r=i[e];"string"==typeof r&&(t[e]=r.split(n).map((e=>e.trim())))}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:i.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};var c={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function u(e,t,i){let n=i[e];if("string"==typeof n){let i=c[n.toUpperCase()];null!=i&&(t[e]=i)}}e.parseEnvironment=function(t){let i={};for(let n in e.DEFAULT_ENVIRONMENT){let e=n;if("OTEL_LOG_LEVEL"===e)u(e,i,t);else if(r(e))s(e,i,t);else if(a(e))l(e,i,t);else{let n=t[e];typeof n<"u"&&null!==n&&(i[e]=String(n))}}return i}})),Fe=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=i(2037),n=Ue();e.getEnv=function(){let e=n.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},n.DEFAULT_ENVIRONMENT,e)}})),Ge=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0,e.hexToBase64=function(e){let t=e.length,i="";for(let n=0;n<t;n+=2){let t=e.substring(n,n+2),r=parseInt(t,16);i+=String.fromCharCode(r)}return Buffer.from(i,"ascii").toString("base64")}})),Ve=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0,e.RandomIdGenerator=class{constructor(){this.generateTraceId=i(16),this.generateSpanId=i(8)}};var t=Buffer.allocUnsafe(16);function i(e){return function(){for(let i=0;i<e/4;i++)t.writeUInt32BE(Math.random()*2**32>>>0,4*i);for(let i=0;i<e&&!(t[i]>0);i++)i===e-1&&(t[e-1]=1);return t.toString("hex",0,e)}}})),qe=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=i(4074);e.otperformance=t.performance})),je=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"})),He=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"},(t=e.DbSystemValues||(e.DbSystemValues={})).OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch",t.MEMCACHED="memcached",t.COCKROACHDB="cockroachdb",function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"}(e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={})),function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"}(e.FaasTriggerValues||(e.FaasTriggerValues={})),function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"}(e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={})),function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"}(e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={})),function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"}(e.NetTransportValues||(e.NetTransportValues={})),function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"}(e.HttpFlavorValues||(e.HttpFlavorValues={})),function(e){e.QUEUE="queue",e.TOPIC="topic"}(e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={})),function(e){e.RECEIVE="receive",e.PROCESS="process"}(e.MessagingOperationValues||(e.MessagingOperationValues={})),function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))})),ze=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(He(),e)})),We=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},(t=e.CloudProviderValues||(e.CloudProviderValues={})).AWS="aws",t.AZURE="azure",t.GCP="gcp",function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"}(e.CloudPlatformValues||(e.CloudPlatformValues={})),function(e){e.EC2="ec2",e.FARGATE="fargate"}(e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={})),function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"}(e.HostArchValues||(e.HostArchValues={})),function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"}(e.OsTypeValues||(e.OsTypeValues={})),function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"}(e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))})),Ke=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(We(),e)})),Qe=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(ze(),e),i(Ke(),e)})),Ye=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=je(),i=Qe();e.SDK_INFO={[i.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[i.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[i.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:i.TelemetrySdkLanguageValues.NODEJS,[i.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}})),$e=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0,e.unrefTimer=function(e){e.unref()}})),Ze=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Fe(),e),i(Ge(),e),i(Ve(),e),i(qe(),e),i(Ye(),e),i($e(),e)})),Xe=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Ze(),e)})),Je=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=Xe(),i=9,n=Math.pow(10,i);function r(e){let t=e/1e3,r=Math.trunc(t);return[r,Number((t-r).toFixed(i))*n]}function o(){let e=t.otperformance.timeOrigin;if("number"!=typeof e){let i=t.otperformance;e=i.timing&&i.timing.fetchStart}return e}function a(e){let i=r(o()),a=r("number"==typeof e?e:t.otperformance.now()),s=i[0]+a[0],l=i[1]+a[1];return l>n&&(l-=n,s+=1),[s,l]}function s(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}e.hrTime=a,e.timeInputToHrTime=function(e){if(s(e))return e;if("number"==typeof e)return e<o()?a(e):r(e);if(e instanceof Date)return r(e.getTime());throw TypeError("Invalid input type")},e.hrTimeDuration=function(e,t){let i=t[0]-e[0],r=t[1]-e[1];return r<0&&(i-=1,r+=n),[i,r]},e.hrTimeToTimeStamp=function(e){let t=i,n=`${"0".repeat(t)}${e[1]}Z`,r=n.substr(n.length-t-1);return new Date(1e3*e[0]).toISOString().replace("000Z",r)},e.hrTimeToNanoseconds=function(e){return e[0]*n+e[1]},e.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},e.hrTimeToMicroseconds=function(e){return Math.round(1e6*e[0]+e[1]/1e3)},e.isTimeInputHrTime=s,e.isTimeInput=function(e){return s(e)||"number"==typeof e||e instanceof Date}})),et=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),tt=T((e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0,(t=e.ExportResultCode||(e.ExportResultCode={}))[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})),it=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=be();e.CompositePropagator=class{constructor(e={}){var t;this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((e=>"function"==typeof e.fields?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,i,n){for(let r of this._propagators)try{r.inject(e,i,n)}catch(e){t.diag.warn(`Failed to inject with ${r.constructor.name}. Err: ${e.message}`)}}extract(e,i,n){return this._propagators.reduce(((e,r)=>{try{return r.extract(e,i,n)}catch(e){t.diag.warn(`Failed to inject with ${r.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}})),nt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",i=new RegExp(`^(?:[a-z]${t}{0,255}|[a-z0-9]${t}{0,240}@[a-z]${t}{0,13})$`),n=/^[ -~]{0,255}[!-~]$/,r=/,|=/;e.validateKey=function(e){return i.test(e)},e.validateValue=function(e){return n.test(e)&&!r.test(e)}})),rt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=nt(),i=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let i=this._clone();return i._internalState.has(e)&&i._internalState.delete(e),i._internalState.set(e,t),i}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>(e.push(t+"="+this.get(t)),e)),[]).join(",")}_parse(e){e.length>512||(this._internalState=e.split(",").reverse().reduce(((e,i)=>{let n=i.trim(),r=n.indexOf("=");if(-1!==r){let o=n.slice(0,r),a=n.slice(r+1,i.length);t.validateKey(o)&&t.validateValue(a)&&e.set(o,a)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}};e.TraceState=i})),ot=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=be(),i=Ne(),n=rt();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var r=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function o(e){let t=r.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}e.parseTraceParent=o,e.HttpTraceContextPropagator=class{inject(n,r,o){let a=t.trace.getSpanContext(n);if(!a||i.isTracingSuppressed(n)||!t.isSpanContextValid(a))return;let s=`00-${a.traceId}-${a.spanId}-0${Number(a.traceFlags||t.TraceFlags.NONE).toString(16)}`;o.set(r,e.TRACE_PARENT_HEADER,s),a.traceState&&o.set(r,e.TRACE_STATE_HEADER,a.traceState.serialize())}extract(i,r,a){let s=a.get(r,e.TRACE_PARENT_HEADER);if(!s)return i;let l=Array.isArray(s)?s[0]:s;if("string"!=typeof l)return i;let c=o(l);if(!c)return i;c.isRemote=!0;let u=a.get(r,e.TRACE_STATE_HEADER);if(u){let e=Array.isArray(u)?u.join(","):u;c.traceState=new n.TraceState("string"==typeof e?e:void 0)}return t.trace.setSpanContext(i,c)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}}})),at=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),st=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=be().createContextKey("OpenTelemetry SDK Context Key RPC_METADATA");(e.RPCType||(e.RPCType={})).HTTP="http",e.setRPCMetadata=function(e,i){return e.setValue(t,i)},e.deleteRPCMetadata=function(e){return e.deleteValue(t)},e.getRPCMetadata=function(e){return e.getValue(t)}})),lt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=be();e.AlwaysOffSampler=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}})),ct=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=be();e.AlwaysOnSampler=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}})),ut=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=be(),i=Be(),n=lt(),r=ct();e.ParentBasedSampler=class{constructor(e){var t,o,a,s;this._root=e.root,this._root||(i.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new r.AlwaysOnSampler),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new r.AlwaysOnSampler,this._remoteParentNotSampled=null!==(o=e.remoteParentNotSampled)&&void 0!==o?o:new n.AlwaysOffSampler,this._localParentSampled=null!==(a=e.localParentSampled)&&void 0!==a?a:new r.AlwaysOnSampler,this._localParentNotSampled=null!==(s=e.localParentNotSampled)&&void 0!==s?s:new n.AlwaysOffSampler}shouldSample(e,i,n,r,o,a){let s=t.trace.getSpanContext(e);return s&&t.isSpanContextValid(s)?s.isRemote?s.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,i,n,r,o,a):this._remoteParentNotSampled.shouldSample(e,i,n,r,o,a):s.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,i,n,r,o,a):this._localParentNotSampled.shouldSample(e,i,n,r,o,a):this._root.shouldSample(e,i,n,r,o,a)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}})),dt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=be();e.TraceIdRatioBasedSampler=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}shouldSample(e,i){return{decision:t.isValidTraceId(i)&&this._accumulate(i)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let i=0;i<e.length/8;i++){let n=8*i;t=(t^parseInt(e.slice(n,n+8),16))>>>0}return t}}})),pt=T((e=>{"use strict";function t(e,t){return"string"==typeof t?e===t:t.test(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0,e.urlMatches=t,e.isUrlIgnored=function(e,i){if(!i)return!1;for(let n of i)if(t(e,n))return!0;return!1}})),ht=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0,e.isWrapped=function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}})),_t=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,i(Le(),e),i(Pe(),e),i(Be(),e),i(xe(),e),i(Je(),e),i(et(),e),i(tt(),e),i(je(),e),e.baggageUtils=Me(),i(Xe(),e),i(it(),e),i(ot(),e),i(at(),e),i(st(),e),i(lt(),e),i(ct(),e),i(ut(),e),i(dt(),e),i(Ne(),e),i(rt(),e),i(Ue(),e),i(ke(),e),i(pt(),e),i(ht(),e),i(je(),e)})),gt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"})),mt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=be(),i=_t(),n=Qe(),r=gt();e.Span=class{constructor(e,n,r,o,a,s,l=[],c=i.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=r,this._spanContext=o,this.parentSpanId=s,this.kind=a,this.links=l,this.startTime=i.timeInputToHrTime(c),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}spanContext(){return this._spanContext}setAttribute(e,n){return null==n||this._isSpanEnded()?this:0===e.length?(t.diag.warn(`Invalid attribute key: ${e}`),this):i.isAttributeValue(n)?(Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=n),this):(t.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[t,i]of Object.entries(e))this.setAttribute(t,i);return this}addEvent(e,n,r){return this._isSpanEnded()||(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),i.isTimeInput(n)&&(typeof r>"u"&&(r=n),n=void 0),typeof r>"u"&&(r=i.hrTime()),this.events.push({name:e,attributes:n,time:i.timeInputToHrTime(r)})),this}setStatus(e){return this._isSpanEnded()||(this.status=e),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e=i.hrTime()){this._isSpanEnded()?t.diag.error("You can only call end() on a span once."):(this._ended=!0,this.endTime=i.timeInputToHrTime(e),this._duration=i.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this))}isRecording(){return!1===this._ended}recordException(e,o=i.hrTime()){let a={};"string"==typeof e?a[n.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?a[n.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(a[n.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(a[n.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(a[n.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),a[n.SemanticAttributes.EXCEPTION_TYPE]||a[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(r.ExceptionEventName,a,o):t.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}}})),St=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=be(),i=_t(),n=i.getEnv(),r=i.TracesSamplerValues.AlwaysOn;function o(e=i.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case i.TracesSamplerValues.AlwaysOn:return new i.AlwaysOnSampler;case i.TracesSamplerValues.AlwaysOff:return new i.AlwaysOffSampler;case i.TracesSamplerValues.ParentBasedAlwaysOn:return new i.ParentBasedSampler({root:new i.AlwaysOnSampler});case i.TracesSamplerValues.ParentBasedAlwaysOff:return new i.ParentBasedSampler({root:new i.AlwaysOffSampler});case i.TracesSamplerValues.TraceIdRatio:return new i.TraceIdRatioBasedSampler(s(e));case i.TracesSamplerValues.ParentBasedTraceIdRatio:return new i.ParentBasedSampler({root:new i.TraceIdRatioBasedSampler(s(e))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${r}".`),new i.AlwaysOnSampler}}e.DEFAULT_CONFIG={sampler:o(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:i.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:i.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:i.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}},e.buildSamplerFromEnv=o;var a=1;function s(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${a}.`),a;let i=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(i)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${a}.`),a):i<0||i>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${a}.`),a):i}})),ft=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=St();e.mergeConfig=function(e){let i={sampler:t.buildSamplerFromEnv()},n=Object.assign({},t.DEFAULT_CONFIG,i,e);return n.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),n}})),Et=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=be(),i=_t(),n=mt(),r=ft();e.Tracer=class{constructor(e,t,n){this._tracerProvider=n;let o=r.mergeConfig(t);this._sampler=o.sampler,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new i.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=e}startSpan(e,r={},o=t.context.active()){var a,s;if(i.isTracingSuppressed(o))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let l,c,u,d=function(e,i){if(!e.root)return t.trace.getSpanContext(i)}(r,o),p=this._idGenerator.generateSpanId();d&&t.trace.isSpanContextValid(d)?(l=d.traceId,c=d.traceState,u=d.spanId):l=this._idGenerator.generateTraceId();let h=null!==(a=r.kind)&&void 0!==a?a:t.SpanKind.INTERNAL,_=null!==(s=r.links)&&void 0!==s?s:[],g=i.sanitizeAttributes(r.attributes),m=this._sampler.shouldSample(r.root?t.trace.setSpanContext(o,t.INVALID_SPAN_CONTEXT):o,l,e,h,g,_),S={traceId:l,spanId:p,traceFlags:m.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,traceState:c};if(m.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(S);let f=new n.Span(this,o,e,S,h,u,_,r.startTime);return f.setAttributes(Object.assign(g,m.attributes)),f}startActiveSpan(e,i,n,r){let o,a,s;if(arguments.length<2)return;2===arguments.length?s=i:3===arguments.length?(o=i,s=n):(o=i,a=n,s=r);let l=a??t.context.active(),c=this.startSpan(e,o,l),u=t.trace.setSpan(l,c);return t.context.with(u,s,void 0,c)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}}})),Tt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0,e.defaultServiceName=function(){return`unknown_service:${process.argv0}`}})),Ct=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=wt(),n=be(),r=i(3837);e.detectResources=async(e={})=>{let i=Object.assign(e),r=await Promise.all((i.detectors||[]).map((async e=>{try{let t=await e.detect(i);return n.diag.debug(`${e.constructor.name} found resource.`,t),t}catch(i){return n.diag.debug(`${e.constructor.name} failed: ${i.message}`),t.Resource.empty()}})));return o(r),r.reduce(((e,t)=>e.merge(t)),t.Resource.empty())};var o=e=>{e.forEach((e=>{if(Object.keys(e.attributes).length>0){let t=r.inspect(e.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});n.diag.verbose(t)}}))}})),yt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=be(),i=_t(),n=Qe(),r=Nt();e.envDetector=new class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){let o={},a=i.getEnv(),s=a.OTEL_RESOURCE_ATTRIBUTES,l=a.OTEL_SERVICE_NAME;if(s)try{let e=this._parseResourceAttributes(s);Object.assign(o,e)}catch(e){t.diag.debug(`EnvDetector failed: ${e.message}`)}return l&&(o[n.ResourceAttributes.SERVICE_NAME]=l),new r.Resource(o)}_parseResourceAttributes(e){if(!e)return{};let t={},i=e.split(this._COMMA_SEPARATOR,-1);for(let e of i){let i=e.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(2!==i.length)continue;let[n,r]=i;if(n=n.trim(),r=r.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(n))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(r))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);t[n]=r}return t}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let t=0;t<e.length;t++){let i=e.charAt(t);if(i<=" "||i>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}}})),vt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=be(),i=Qe(),n=Nt();e.processDetector=new class{async detect(e){let t={[i.ResourceAttributes.PROCESS_PID]:process.pid,[i.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[i.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[i.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(t,e)}_getResourceAttributes(e,r){return""===e[i.ResourceAttributes.PROCESS_EXECUTABLE_NAME]||""===e[i.ResourceAttributes.PROCESS_EXECUTABLE_PATH]||""===e[i.ResourceAttributes.PROCESS_COMMAND]||""===e[i.ResourceAttributes.PROCESS_COMMAND_LINE]?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},e))}}})),Rt=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(yt(),e),i(vt(),e)})),At=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Tt(),e),i(Ct(),e),i(Rt(),e)})),It=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(At(),e)})),wt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Qe(),i=_t(),n=It(),r=class{constructor(e){this.attributes=e}static empty(){return r.EMPTY}static default(){return new r({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:i.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:i.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:i.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let t=Object.assign({},this.attributes,e.attributes);return new r(t)}};e.Resource=r,r.EMPTY=new r({})})),Ot=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),bt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Nt=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(wt(),e),i(It(),e),i(Ot(),e),i(bt(),e)})),Dt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=_t();e.MultiSpanProcessor=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let t of this._spanProcessors)e.push(t.forceFlush());return new Promise((i=>{Promise.all(e).then((()=>{i()})).catch((e=>{t.globalErrorHandler(e||new Error("MultiSpanProcessor: forceFlush failed")),i()}))}))}onStart(e,t){for(let i of this._spanProcessors)i.onStart(e,t)}onEnd(e){for(let t of this._spanProcessors)t.onEnd(e)}shutdown(){let e=[];for(let t of this._spanProcessors)e.push(t.shutdown());return new Promise(((t,i)=>{Promise.all(e).then((()=>{t()}),i)}))}}})),Mt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0,e.NoopSpanProcessor=class{onStart(e,t){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}}})),Lt=T(((e,t)=>{var i="__lodash_hash_undefined__",n=9007199254740991,r="[object Arguments]",o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Null]",c="[object Object]",u="[object Proxy]",d="[object Undefined]",p=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[r]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_[a]=_["[object Map]"]=_["[object Number]"]=_[c]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1;var g,m="object"==typeof global&&global&&global.Object===Object&&global,S="object"==typeof self&&self&&self.Object===Object&&self,f=m||S||Function("return this")(),E="object"==typeof e&&e&&!e.nodeType&&e,T=E&&"object"==typeof t&&t&&!t.nodeType&&t,C=T&&T.exports===E,y=C&&m.process,v=function(){try{return T&&T.require&&T.require("util").types||y&&y.binding&&y.binding("util")}catch{}}(),R=v&&v.isTypedArray,A=Array.prototype,I=Function.prototype,w=Object.prototype,O=f["__core-js_shared__"],b=I.toString,N=w.hasOwnProperty,D=(g=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",M=w.toString,L=b.call(Object),P=RegExp("^"+b.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=C?f.Buffer:void 0,B=f.Symbol,k=f.Uint8Array,U=(x&&x.allocUnsafe,function(e,t){return function(i){return e(t(i))}}(Object.getPrototypeOf,Object)),F=Object.create,G=w.propertyIsEnumerable,V=A.splice,q=B?B.toStringTag:void 0,j=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch{}}(),H=x?x.isBuffer:void 0,z=Math.max,W=Date.now,K=ue(f,"Map"),Q=ue(Object,"create"),Y=function(){function e(){}return function(t){if(!ye(t))return{};if(F)return F(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function $(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function X(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function J(e){var t=this.__data__=new Z(e);this.size=t.size}function ee(e,t,i){(void 0!==i&&!ge(e[t],i)||void 0===i&&!(t in e))&&ne(e,t,i)}function te(e,t,i){var n=e[t];(!N.call(e,t)||!ge(n,i)||void 0===i&&!(t in e))&&ne(e,t,i)}function ie(e,t){for(var i=e.length;i--;)if(ge(e[i][0],t))return i;return-1}function ne(e,t,i){"__proto__"==t&&j?j(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}$.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},$.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$.prototype.get=function(e){var t=this.__data__;if(Q){var n=t[e];return n===i?void 0:n}return N.call(t,e)?t[e]:void 0},$.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:N.call(t,e)},$.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Q&&void 0===t?i:t,this},Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(e){var t=this.__data__,i=ie(t,e);return!(i<0||(i==t.length-1?t.pop():V.call(t,i,1),--this.size,0))},Z.prototype.get=function(e){var t=this.__data__,i=ie(t,e);return i<0?void 0:t[i][1]},Z.prototype.has=function(e){return ie(this.__data__,e)>-1},Z.prototype.set=function(e,t){var i=this.__data__,n=ie(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},X.prototype.clear=function(){this.size=0,this.__data__={hash:new $,map:new(K||Z),string:new $}},X.prototype.delete=function(e){var t=ce(this,e).delete(e);return this.size-=t?1:0,t},X.prototype.get=function(e){return ce(this,e).get(e)},X.prototype.has=function(e){return ce(this,e).has(e)},X.prototype.set=function(e,t){var i=ce(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},J.prototype.clear=function(){this.__data__=new Z,this.size=0},J.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},J.prototype.get=function(e){return this.__data__.get(e)},J.prototype.has=function(e){return this.__data__.has(e)},J.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Z){var n=i.__data__;if(!K||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new X(n)}return i.set(e,t),this.size=i.size,this};var re=function(e,t,i){for(var n=-1,r=Object(e),o=i(e),a=o.length;a--;){var s=o[++n];if(!1===t(r[s],s,r))break}return e};function oe(e){return null==e?void 0===e?d:l:q&&q in Object(e)?function(e){var t=N.call(e,q),i=e[q];try{e[q]=void 0;var n=!0}catch{}var r=M.call(e);return n&&(t?e[q]=i:delete e[q]),r}(e):function(e){return M.call(e)}(e)}function ae(e){return ve(e)&&oe(e)==r}function se(e,t,i,n,r){e!==t&&re(t,(function(o,a){if(r||(r=new J),ye(o))!function(e,t,i,n,r,o,a){var s=he(e,i),l=he(t,i),u=a.get(l);if(u)ee(e,i,u);else{var d=o?o(s,l,i+"",e,t,a):void 0,p=void 0===d;if(p){var h=Se(l),_=!h&&Ee(l),g=!h&&!_&&Re(l);d=l,h||_||g?Se(s)?d=s:function(e){return ve(e)&&fe(e)}(s)?d=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}(s):_?(p=!1,d=function(e,t){return e.slice()}(l)):g?(p=!1,d=function(e,t){var i=function(e){var t=new e.constructor(e.byteLength);return new k(t).set(new k(e)),t}(e.buffer);return new e.constructor(i,e.byteOffset,e.length)}(l)):d=[]:function(e){if(!ve(e)||oe(e)!=c)return!1;var t=U(e);if(null===t)return!0;var i=N.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&b.call(i)==L}(l)||me(l)?(d=s,me(s)?d=function(e){return function(e,t,i,n){var r=!i;i||(i={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=void 0;void 0===l&&(l=e[s]),r?ne(i,s,l):te(i,s,l)}return i}(e,Ae(e))}(s):(!ye(s)||Te(s))&&(d=function(e){return"function"!=typeof e.constructor||pe(e)?{}:Y(U(e))}(l))):p=!1}p&&(a.set(l,d),r(d,l,n,o,a),a.delete(l)),ee(e,i,d)}}(e,t,a,i,se,n,r);else{var s=n?n(he(e,a),o,a+"",e,t,r):void 0;void 0===s&&(s=o),ee(e,a,s)}}),Ae)}var le=j?function(e,t){return j(e,"toString",{configurable:!0,enumerable:!1,value:we(t),writable:!0})}:Oe;function ce(e,t){var i=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?i["string"==typeof t?"string":"hash"]:i.map}function ue(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ye(e)||function(e){return!!D&&D in e}(e))&&(Te(e)?P:p).test(function(e){if(null!=e){try{return b.call(e)}catch{}try{return e+""}catch{}}return""}(e))}(i)?i:void 0}function de(e,t){var i=typeof e;return!!(t=t??n)&&("number"==i||"symbol"!=i&&h.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||w)}function he(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var _e=function(e){var t=0,i=0;return function(){var n=W(),r=16-(n-i);if(i=n,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(le);function ge(e,t){return e===t||e!=e&&t!=t}var me=ae(function(){return arguments}())?ae:function(e){return ve(e)&&N.call(e,"callee")&&!G.call(e,"callee")},Se=Array.isArray;function fe(e){return null!=e&&Ce(e.length)&&!Te(e)}var Ee=H||function(){return!1};function Te(e){if(!ye(e))return!1;var t=oe(e);return t==a||t==s||t==o||t==u}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function ye(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ve(e){return null!=e&&"object"==typeof e}var Re=R?function(e){return function(t){return e(t)}}(R):function(e){return ve(e)&&Ce(e.length)&&!!_[oe(e)]};function Ae(e){return fe(e)?function(e,t){var i=Se(e),n=!i&&me(e),r=!i&&!n&&Ee(e),o=!i&&!n&&!r&&Re(e),a=i||n||r||o,s=a?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],l=s.length;for(var c in e)(t||N.call(e,c))&&(!a||!("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||de(c,l)))&&s.push(c);return s}(e,!0):function(e){if(!ye(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=pe(e),i=[];for(var n in e)"constructor"==n&&(t||!N.call(e,n))||i.push(n);return i}(e)}var Ie=function(e){return function(e,t){return _e(function(e,t,i){return t=z(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,o=z(n.length-t,0),a=Array(o);++r<o;)a[r]=n[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=n[r];return s[t]=i(a),function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}(e,this,s)}}(e,t,Oe),e+"")}((function(t,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,a&&function(e,t,i){if(!ye(i))return!1;var n=typeof t;return!!("number"==n?fe(i)&&de(t,i.length):"string"==n&&t in i)&&ge(i[t],e)}(i[0],i[1],a)&&(o=r<3?void 0:o,r=1),t=Object(t);++n<r;){var s=i[n];s&&e(t,s,n)}return t}))}((function(e,t,i){se(e,t,i)}));function we(e){return function(){return e}}function Oe(e){return e}t.exports=Ie})),Pt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=be(),i=_t();e.BatchSpanProcessorBase=class{constructor(e,t){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=i.getEnv();this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise(((e,t)=>{let i=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)i.push(this._flushOneBatch());Promise.all(i).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,n)=>{let r=setTimeout((()=>{n(new Error("Timeout"))}),this._exportTimeoutMillis);t.context.with(i.suppressTracing(t.context.active()),(()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),(t=>{var o;clearTimeout(r),t.code===i.ExportResultCode.SUCCESS?e():n(null!==(o=t.error)&&void 0!==o?o:new Error("BatchSpanProcessor: span export failed"))}))}))}))}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout((()=>{this._flushOneBatch().then((()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{i.globalErrorHandler(e)}))}),this._scheduledDelayMillis),i.unrefTimer(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}}})),xt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=Pt(),i=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=i})),Bt=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(xt(),e)})),kt=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Bt(),e)})),Ut=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t,i,n=be(),r=_t(),o=Nt(),a=Kt(),s=St(),l=Dt(),c=Mt(),u=Lt(),d=kt();(i=t=e.ForceFlushState||(e.ForceFlushState={}))[i.resolved=0]="resolved",i[i.timeout=1]="timeout",i[i.error=2]="error",i[i.unresolved=3]="unresolved";var p=class{constructor(e={}){var t;this._registeredSpanProcessors=[],this._tracers=new Map;let i=u({},s.DEFAULT_CONFIG,e);this.resource=null!==(t=i.resource)&&void 0!==t?t:o.Resource.empty(),this.resource=o.Resource.default().merge(this.resource),this._config=Object.assign({},i,{resource:this.resource});let n=this._buildExporterFromEnv();if(void 0!==n){let e=new d.BatchSpanProcessor(n);this.activeSpanProcessor=e}else this.activeSpanProcessor=new c.NoopSpanProcessor}getTracer(e,t){let i=`${e}@${t||""}`;return this._tracers.has(i)||this._tracers.set(i,new a.Tracer({name:e,version:t},this._config,this)),this._tracers.get(i)}addSpanProcessor(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((e=>n.diag.error("Error while trying to shutdown current span processor",e))),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new l.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){n.trace.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&n.context.setGlobalContextManager(e.contextManager),e.propagator&&n.propagation.setGlobalPropagator(e.propagator)}forceFlush(){let e=this._config.forceFlushTimeoutMillis,i=this._registeredSpanProcessors.map((i=>new Promise((n=>{let r,o=setTimeout((()=>{n(new Error(`Span processor did not completed within timeout period of ${e} ms`)),r=t.timeout}),e);i.forceFlush().then((()=>{clearTimeout(o),r!==t.timeout&&(r=t.resolved,n(r))})).catch((e=>{clearTimeout(o),r=t.error,n(e)}))}))));return new Promise(((e,n)=>{Promise.all(i).then((i=>{let r=i.filter((e=>e!==t.resolved));r.length>0?n(r):e()})).catch((e=>n([e])))}))}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var t;return null===(t=p._registeredPropagators.get(e))||void 0===t?void 0:t()}_getSpanExporter(e){var t;return null===(t=p._registeredExporters.get(e))||void 0===t?void 0:t()}_buildPropagatorFromEnv(){let e=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),t=e.map((e=>{let t=this._getPropagator(e);return t||n.diag.warn(`Propagator "${e}" requested through environment variable is unavailable.`),t})).reduce(((e,t)=>(t&&e.push(t),e)),[]);if(0!==t.length)return 1===e.length?t[0]:new r.CompositePropagator({propagators:t})}_buildExporterFromEnv(){let e=r.getEnv().OTEL_TRACES_EXPORTER;if("none"===e)return;let t=this._getSpanExporter(e);return t||n.diag.error(`Exporter "${e}" requested through environment variable is unavailable.`),t}};e.BasicTracerProvider=p,p._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),p._registeredExporters=new Map})),Ft=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=_t();e.ConsoleSpanExporter=class{export(e,t){return this._sendSpans(e,t)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext().traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:t.hrTimeToMicroseconds(e.startTime),duration:t.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,i){for(let t of e)console.log(this._exportInfo(t));if(i)return i({code:t.ExportResultCode.SUCCESS})}}})),Gt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=_t();e.InMemorySpanExporter=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,i){if(this._stopped)return i({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout((()=>i({code:t.ExportResultCode.SUCCESS})),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}}})),Vt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),qt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=be(),i=_t();e.SimpleSpanProcessor=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||t.context.with(i.suppressTracing(t.context.active()),(()=>{this._exporter.export([e],(e=>{var t;e.code!==i.ExportResultCode.SUCCESS&&i.globalErrorHandler(null!==(t=e.error)&&void 0!==t?t:new Error(`SimpleSpanProcessor: span export failed (status ${e})`))}))}))}shutdown(){return this._isShutdown||(this._isShutdown=!0,this._shuttingDownPromise=new Promise(((e,t)=>{Promise.resolve().then((()=>this._exporter.shutdown())).then(e).catch((e=>{t(e)}))}))),this._shuttingDownPromise}}})),jt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ht=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),zt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Wt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Kt=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Et(),e),i(Ut(),e),i(kt(),e),i(Ft(),e),i(Gt(),e),i(Vt(),e),i(qt(),e),i(jt(),e),i(Mt(),e),i(mt(),e),i(Ht(),e),i(zt(),e),i(Wt(),e)})),Qt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=P();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var i=!1;e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(n){if(i)return n;try{var r=Kt(),o=be(),a=(new r.BasicTracerProvider).getTracer("applicationinsights tracer"),s=n.setTracer;n.setTracer=function(i){var n=i.startSpan;i.startSpan=function(e,i,r){var o=n.call(this,e,i,r),a=o.end;return o.end=function(){var e=a.apply(this,arguments);return t.channel.publish("azure-coretracing",o),e},o},i[e.AzureMonitorSymbol]=!0,s.call(this,i)},o.trace.getSpan(o.context.active()),n.setTracer(a),i=!0}catch{}return n}},e.enable=function(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}})),Yt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=P();e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var i=e.prototype._emit;return e.prototype._emit=function(e,n){var r=i.apply(this,arguments);if(!n){var o=r;o||(o=i.call(this,e,!0)),t.channel.publish("bunyan",{level:e.level,result:o})}return r},e}},e.enable=function(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}})),$t=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=P(),n=i(2781);e.console={versionSpecifier:">= 4.0.0",patch:function(e){var i=new n.Writable,r=new n.Writable;i.write=function(e){if(!e)return!0;var i=e.toString();return t.channel.publish("console",{message:i}),!0},r.write=function(e){if(!e)return!0;var i=e.toString();return t.channel.publish("console",{message:i,stderr:!0}),!0};for(var o=new e.Console(i,r),a=function(t){var i=e[t];i&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch{}return i.apply(e,arguments)})},s=0,l=["log","info","warn","error","dir","time","timeEnd","trace","assert"];s<l.length;s++)a(l[s]);return e}},e.enable=function(){t.channel.registerMonkeyPatch("console",e.console),i(6206)}})),Zt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=P();e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var i=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=i.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=t.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var r=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=t.channel.bindToContext(arguments[1])),r.apply(this,arguments)},e},e}},e.enable=function(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}})),Xt=T((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var i=P();e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var n=e.instrument({operationIdGenerator:{next:function(){return i.channel.bindToContext((function(e){return e()}))}}}),r={};return n.on("started",(function(e){r[e.requestId]||(r[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),n.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var n=e.instrument(),r={},o={};return n.on("started",(function(e){r[e.requestId]||(o[e.requestId]=i.channel.bindToContext((function(e){return e()})),r[e.requestId]=t(t({},e),{time:new Date}))})),n.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),n.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=i.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var r=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=i.channel.bindToContext(arguments[1])),r.apply(this,arguments)},e}}(e);var t=e.instrument(),n={},r={};return t.on("started",(function(e){n[e.requestId]||(r[e.requestId]=i.channel.bindToContext((function(e){return e()})),n[e.requestId]=e)})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof r[e.requestId]&&(r[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete r[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof r[e.requestId]&&(r[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete r[e.requestId])})),e}},e.enable=function(){i.channel.registerMonkeyPatch("mongodb",e.mongo2),i.channel.registerMonkeyPatch("mongodb",e.mongo3),i.channel.registerMonkeyPatch("mongodb",e.mongo330)}})),Jt=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=P(),n=i(1017);e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,r){var o=function(e,i){return function(i,n){var r=e[i];r&&(e[i]=function(){for(var e=arguments.length-1,i=arguments.length-1;i>=0;--i){if("function"==typeof arguments[i]){e=i;break}if(typeof arguments[i]<"u")break}var o=arguments[e],a={result:null,startTime:null,startDate:null};"function"==typeof o&&(n?(a.startTime=process.hrtime(),a.startDate=new Date,arguments[e]=t.channel.bindToContext(n(a,o))):arguments[e]=t.channel.bindToContext(o));var s=r.apply(this,arguments);return a.result=s,s})}},a=function(e,t){return o(e.prototype)},s=i(5029)(n.dirname(r)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return a(s)(e)})),o(s)("createQuery",(function(e,i){return function(n){var r=process.hrtime(e.startTime),o=1e3*r[0]+r[1]/1e6|0;t.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o,time:e.startDate}),i.apply(this,arguments)}}));var l=i(3437)(n.dirname(r)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return a(l)(e)})),e}},e.enable=function(){t.channel.registerMonkeyPatch("mysql",e.mysql)}})),ei=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=P();e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var i=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=t.channel.bindToContext(e)),i.apply(this,arguments)},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}})),ti=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=P(),n=i(2361);e.postgres6={versionSpecifier:"6.*",patch:function(e,i){var r=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,i,a){var s,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},c=process.hrtime();function u(e){e&&e[o]&&(e=e[o]);var i=t.channel.bindToContext((function(i,r){var o=process.hrtime(c);if(l.result=r&&{rowCount:r.rowCount,command:r.command},l.error=i,l.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",l),i){if(e)return e.apply(this,arguments);s&&s instanceof n.EventEmitter&&s.emit("error",i)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(i,o,{value:e}),i}catch{return e}}try{"string"==typeof e?i instanceof Array?(l.query.preparable={text:e,args:i},a=u(a)):(l.query.text=e,a?a=u(a):i=u(i)):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,a?a=u(a):i?i=u(i):e.callback=u(e.callback))}catch{return r.apply(this,arguments)}return arguments[0]=e,arguments[1]=i,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,s=r.apply(this,arguments)},e}},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,i){var r=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,i,a){var s,l=this,c=!!a,u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime();function p(e){e&&e[o]&&(e=e[o]);var i=t.channel.bindToContext((function(i,r){var o=process.hrtime(d);if(u.result=r&&{rowCount:r.rowCount,command:r.command},u.error=i,u.duration=Math.ceil(1e3*o[0]+o[1]/1e6),t.channel.publish("postgres",u),i){if(e)return e.apply(this,arguments);s&&s instanceof n.EventEmitter&&s.emit("error",i)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(i,o,{value:e}),i}catch{return e}}try{"string"==typeof e?i instanceof Array?(u.query.preparable={text:e,args:i},a=(c="function"==typeof a)?p(a):a):(u.query.text=e,a?a=(c="function"==typeof a)?p(a):a:i=(c="function"==typeof i)?p(i):i):("string"==typeof e.name?u.query.plan=e.name:e.values instanceof Array?u.query.preparable={text:e.text,args:e.values}:u.query.text=e.text,a?(c="function"==typeof a,a=p(a)):i?i=(c="function"==typeof i)?p(i):i:(c="function"==typeof e.callback,e.callback=c?p(e.callback):e.callback))}catch{return r.apply(this,arguments)}return arguments[0]=e,arguments[1]=i,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,s=r.apply(this,arguments),c?s:s.then((function(e){return p()(void 0,e),new l._Promise((function(t,i){t(e)}))})).catch((function(e){return p()(e,void 0),new l._Promise((function(t,i){i(e)}))}))},e}},e.enable=function(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}})),ii=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=P();e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var i=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var r=this.address,o=process.hrtime(),a=new Date;e.callback=t.channel.bindToContext((function(i,s){var l=process.hrtime(o),c=1e3*l[0]+l[1]/1e6|0;t.channel.publish("redis",{duration:c,address:r,commandObj:e,err:i,result:s,time:a}),"function"==typeof n&&n.apply(this,arguments)})),e.callback.pubsubBound=!0}}return i.call(this,e)},e}},e.enable=function(){t.channel.registerMonkeyPatch("redis",e.redis)}})),ni=T((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var i=P();e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var n=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){var e,r,o,a=arguments[0];arguments[0].callback=(e=a.callback,r=process.hrtime(),o={query:{},database:{host:null,port:null},result:null,error:null,duration:0},i.channel.bindToContext((function(n,a,s){var l=process.hrtime(r);o=t(t({},o),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!n&&{rowCount:a,rows:s},query:{text:this.parametersByName.statement.value},error:n,duration:Math.ceil(1e3*l[0]+l[1]/1e6)}),i.channel.publish("tedious",o),e.call(this,n,a,s)}))),n.apply(this,arguments)},e}},e.enable=function(){i.channel.registerMonkeyPatch("tedious",e.tedious)}})),ri=T((e=>{"use strict";var t,i=e&&e.__extends||(t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},t(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),n=e&&e.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var r=P();e.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,i){var n=e.call(this,i)||this;return n.winston=t,n}return i(t,e),t.prototype.log=function(e,t){var i=e.message,o=e.level,a=e.meta,s=n(e,["message","level","meta"]);o="function"==typeof Symbol.for?e[Symbol.for("level")]:o,i=e instanceof Error?e:i;var l=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,o);for(var c in a=a||{},s)s.hasOwnProperty(c)&&(a[c]=s[c]);r.channel.publish("winston",{message:i,level:o,levelKind:l,meta:a}),t()},t}(e.Transport);function o(){var i,n=arguments[0].levels||e.config.npm.levels;for(var r in n)n.hasOwnProperty(r)&&(i=void 0===i||n[r]>n[i]?r:i);this.add(new t(e,{level:i}))}var a=e.createLogger;e.createLogger=function(){var i,n=arguments[0].levels||e.config.npm.levels;for(var r in n)n.hasOwnProperty(r)&&(i=void 0===i||n[r]>n[i]?r:i);var s=a.apply(this,arguments);s.add(new t(e,{level:i}));var l=s.configure;return s.configure=function(){l.apply(this,arguments),o.apply(this,arguments)},s};var s=e.configure;return e.configure=function(){s.apply(this,arguments),o.apply(this,arguments)},e.add(new t(e)),e}},e.winston2={versionSpecifier:"2.x",patch:function(e){var t,i=e.Logger.prototype.log,n=function(i,n,o){var a;return a=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",r.channel.publish("winston",{level:i,message:n,meta:o,levelKind:a}),n};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter((function(e){return e!==n})),this.filters.push(n)):this.filters=[n],i.apply(this,arguments)},e}},e.enable=function(){r.channel.registerMonkeyPatch("winston",e.winston2),r.channel.registerMonkeyPatch("winston",e.winston3)}})),oi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=Qt();e.azuresdk=t;var i=Yt();e.bunyan=i;var n=$t();e.console=n;var r=Zt();e.mongodbCore=r;var o=Xt();e.mongodb=o;var a=Jt();e.mysql=a;var s=ei();e.pgPool=s;var l=ti();e.pg=l;var c=ii();e.redis=c;var u=ni();e.tedious=u;var d=ri();e.winston=d,e.enable=function(){i.enable(),n.enable(),r.enable(),o.enable(),a.enable(),l.enable(),s.enable(),c.enable(),d.enable(),t.enable(),u.enable()}})),ai=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=N(),i=b();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n,r,o,a,s="DiagnosticChannel";if(e.IsInitialized){for(a in n=oi(),r=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:n.bunyan,console:n.console,mongodb:n.mongodb,mongodbCore:n.mongodbCore,mysql:n.mysql,redis:n.redis,pg:n.pg,pgPool:n.pgPool,winston:n.winston,azuresdk:n.azuresdk})-1===r.indexOf(a)&&(o[a].enable(),i.info(s,"Subscribed to "+a+" events"));r.length>0&&i.info(s,"Some modules will not be patched",r)}else i.info(s,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");e.registerContextPreservation=function(i){if(e.IsInitialized){var n=P();n.channel.addContextPreservation(i),n.channel.spanContextPropagator=t.AsyncScopeManager}}})),si=T(((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}})),li=T(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},r=i(3685),o=i(5687),a=i(7310),s=i(2057),l=b(),c=si(),u=function(){function e(){}return e.getCookie=function(t,i){var n="";if(t&&t.length&&"string"==typeof i)for(var r=t+"=",o=i.split(";"),a=0;a<o.length;a++)if(i=o[a],(i=e.trim(i))&&0===i.indexOf(r)){n=i.substring(r.length,o[a].length);break}return n},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},i=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),n=(Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary")).toString("base64");return n.substr(0,n.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=i[15&(t=e.random32())]+i[t>>4&15]+i[t>>8&15]+i[t>>12&15]+i[t>>16&15]+i[t>>20&15]+i[t>>24&15]+i[t>>28&15];var o=i[8+4*Math.random()|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+o+n.substr(16,3)+n.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),i=""+Math.floor(e/6e4)%60,n=""+Math.floor(e/36e5)%24,r=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,i=i.length<2?"0"+i:i,(r>0?r+".":"")+(n=n.length<2?"0"+n:n)+":"+i+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var i={};for(var n in t){var r="",o=t[n],a=typeof o;if(e.isPrimitive(o))r=o.toString();else if(null===o||"undefined"===a)r="";else{if("function"===a){l.info("key: "+n+" was function; will not serialize");continue}var s=e.isArray(o)?o:e.extractObject(o);try{r=e.isPrimitive(s)?s:JSON.stringify(s)}catch(e){r=o.constructor.name.toString()+" (Error: "+e.message+")",l.info("key: "+n+", could not be serialized")}}i[n]=r.substring(0,e.MAX_PROPERTY_LENGTH)}return i}l.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var i=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!i||0==i.length||!t)return!0;for(var n=0;n<i.length;n++)if(new RegExp(i[n].replace(/\./g,".").replace(/\*/g,".*")).test(a.parse(t).hostname))return!1;return!0},e.getCorrelationContextTarget=function(e,t){var i=e.headers&&e.headers[c.requestContextHeader];if(i)for(var n=i.split(","),r=0;r<n.length;++r){var o=n[r].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,i,s,c){i&&0===i.indexOf("//")&&(i="https:"+i);var u=a.parse(i),d=n(n({},s),{host:u.hostname,port:u.port,path:u.pathname}),p=void 0;if("https:"===u.protocol&&(p=t.proxyHttpsUrl||void 0),"http:"===u.protocol&&(p=t.proxyHttpUrl||void 0),p){0===p.indexOf("//")&&(p="http:"+p);var h=a.parse(p);"https:"===h.protocol?(l.info("Proxies that use HTTPS are not supported"),p=void 0):d=n(n({},d),{host:h.hostname,port:h.port||"80",path:i,headers:n(n({},d.headers),{Host:u.hostname})})}var _="https:"===u.protocol&&!p;return _&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:_||void 0===t.httpAgent?_&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,_?o.request(d,c):r.request(d,c)},e.safeIncludeCorrelationHeader=function(t,i,n){var r;if("string"==typeof n)r=n;else if(n instanceof Array)r=n.join(",");else if(n&&"function"==typeof n.toString)try{r=n.toString()}catch(e){l.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,n)}r?e.addCorrelationIdHeaderFromString(t,i,r):i.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(e){var t=Object.prototype.toString.call(e);return t+("[object Error]"===t?"{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":JSON.stringify(e))},e.addCorrelationIdHeaderFromString=function(e,t,i){var n=i.split(","),r=c.requestContextSourceKey+"=";n.some((function(e){return e.substring(0,r.length)===r}))||t.setHeader(c.requestContextHeader,i+","+c.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),e}();t.exports=u})),ci=T(((e,t)=>{"use strict";var i=li(),n=b(),r=function(){function e(){}return e.queryCorrelationId=function(t,r){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))r(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(r);else{e.pendingLookups[o]=[r];var a=function(){if(e.pendingLookups[o]){var r={method:"GET",disableAppInsightsAutoCollection:!0};n.info(e.TAG,r);var s=i.makeRequest(t,o,r,(function(i){if(200===i.statusCode){var r="";i.setEncoding("utf-8"),i.on("data",(function(e){r+=e})),i.on("end",(function(){n.info(e.TAG,r);var t=e.correlationIdPrefix+r;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach((function(e){return e(t)})),delete e.pendingLookups[o]}))}else i.statusCode>=400&&i.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(a,t.correlationIdRetryIntervalMs)}));s&&(s.on("error",(function(t){n.warn(e.TAG,t)})),s.end())}};setTimeout(a,0)}},e.cancelCorrelationIdQuery=function(t,i){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",r=e.pendingLookups[n];r&&(e.pendingLookups[n]=r.filter((function(e){return e!=i})),0==e.pendingLookups[n].length&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var i=(e.currentRootId++).toString(16);return e.appendSuffix(t,i,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var i="|"===e[0]?1:0;return e.substring(i,t)},e.generateRootId=function(){return"|"+i.w3cTraceId()+"."},e.appendSuffix=function(t,n,r){if(t.length+n.length<e.requestIdMaxLength)return t+n+r;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var a=t[o-1];if("."===a||"_"===a)break}if(o<=1)return e.generateRootId();for(n=i.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=i.randomu32(),e}();t.exports=r})),ui=T(((e,t)=>{"use strict";var i=li(),n=ci(),r=function(){function e(t,r){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),a=o.length;a>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=i.w3cTraceId()),"00"===this.version&&4!==a&&(this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=i.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=i.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=i.w3cTraceId().substr(0,16),this.traceId=i.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var s=n.getRootId(r);e.isValidTraceId(s)||(this.legacyRootId=s,s=i.w3cTraceId()),-1!==r.indexOf("|")&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=s,this.spanId=r}else this.traceId=i.w3cTraceId(),this.spanId=i.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.formatOpenTelemetryTraceFlags=function(e){var t="0"+e.toString(16);return t.substring(t.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=i.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();t.exports=r})),di=T(((e,t)=>{"use strict";var i=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var i=t[0].trim(),n=t[1].trim(),r=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return r&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var i=[],n={},r=t.split(",");if(r.length>32)return null;for(var o=0,a=r;o<a.length;o++){var s=a[o].trim();if(0!==s.length){var l=s.split("=");if(2!==l.length||!e.validateKeyChars(l[0])||n[l[0]])return null;n[l[0]]=!0,i.push(s)}}return i},e.strict=!0,e}();t.exports=i})),pi=T(((e,t)=>{"use strict";t.exports=function(){}})),hi=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(pi());t.exports=r})),_i=T(((e,t)=>{"use strict";t.exports=function(){}})),gi=T(((e,t)=>{"use strict";t.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}})),mi=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){return e.call(this)||this}return n(t,e),t}(_i());t.exports=r})),Si=T(((e,t)=>{"use strict";var i,n;(n=i||(i={}))[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation",t.exports=i})),fi=T(((e,t)=>{"use strict";var i=Si();t.exports=function(){this.kind=i.Measurement}})),Ei=T(((e,t)=>{"use strict";t.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),Ti=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(pi());t.exports=r})),Ci=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return n(t,e),t}(pi());t.exports=r})),yi=T(((e,t)=>{"use strict";t.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}})),vi=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return n(t,e),t}(pi());t.exports=r})),Ri=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return n(t,e),t}(pi());t.exports=r})),Ai=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(Ti());t.exports=r})),Ii=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return n(t,e),t}(pi());t.exports=r})),wi=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return n(t,e),t}(pi());t.exports=r})),Oi=T(((e,t)=>{"use strict";var i,n;(n=i||(i={}))[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical",t.exports=i})),bi=T(((e,t)=>{"use strict";t.exports=function(){}})),Ni=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=hi(),e.Base=_i(),e.ContextTagKeys=gi(),e.Data=mi(),e.DataPoint=fi(),e.DataPointType=Si(),e.Domain=pi(),e.Envelope=Ei(),e.EventData=Ti(),e.ExceptionData=Ci(),e.ExceptionDetails=yi(),e.MessageData=vi(),e.MetricData=Ri(),e.PageViewData=Ai(),e.RemoteDependencyData=Ii(),e.RequestData=wi(),e.SeverityLevel=Oi(),e.StackFrame=bi()})),Di=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=Ni(),i=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();e.RemoteDependencyDataConstants=i,e.domainSupportsProperties=function(e){return"properties"in e||e instanceof t.EventData||e instanceof t.ExceptionData||e instanceof t.MessageData||e instanceof t.MetricData||e instanceof t.PageViewData||e instanceof t.RemoteDependencyData||e instanceof t.RequestData}})),Mi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Li=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Pi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),xi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Bi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ki=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ui=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Fi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Gi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Vi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),qi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),ji=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Hi=T((e=>{"use strict";var t,i;Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0,e.telemetryTypeToBaseType=function(e){switch(e){case t.Event:return"EventData";case t.Exception:return"ExceptionData";case t.Trace:return"MessageData";case t.Metric:return"MetricData";case t.Request:return"RequestData";case t.Dependency:return"RemoteDependencyData";case t.Availability:return"AvailabilityData";case t.PageView:return"PageViewData"}},e.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return t.Event;case"ExceptionData":return t.Exception;case"MessageData":return t.Trace;case"MetricData":return t.Metric;case"RequestData":return t.Request;case"RemoteDependencyData":return t.Dependency;case"AvailabilityData":return t.Availability;case"PageViewData":return t.PageView}},e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"},(i=t=e.TelemetryType||(e.TelemetryType={}))[i.Event=0]="Event",i[i.Exception=1]="Exception",i[i.Trace=2]="Trace",i[i.Metric=3]="Metric",i[i.Request=4]="Request",i[i.Dependency=5]="Dependency",i[i.Availability=6]="Availability",i[i.PageView=7]="PageView"})),zi=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Mi(),e),i(Li(),e),i(Pi(),e),i(xi(),e),i(Bi(),e),i(ki(),e),i(Ui(),e),i(Fi(),e),i(Gi(),e),i(Vi(),e),i(qi(),e),i(ji(),e),i(Hi(),e)})),Wi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ki=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Qi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Yi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),$i=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Zi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Xi=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),Ji=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),en=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Wi(),e),i(Ki(),e),i(Qi(),e),i(Yi(),e),i($i(),e),i(Zi(),e),i(Xi(),e),i(Ji(),e)})),tn=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(Di(),e),i(Ni(),e),i(zi(),e),i(en(),e)})),nn=T(((e,t)=>{"use strict";var i=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var i=+new Date;this.duration=i-this.startTime,this.statusCode=e;var n=this.properties||{};if(t)if("string"==typeof t)n.error=t;else if(t instanceof Error)n.error=t.message;else if("object"==typeof t)for(var r in t)n[r]=t[r]&&t[r].toString&&t[r].toString();this.properties=n},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();t.exports=i})),rn=T(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=i(7310),a=tn(),s=li(),l=si(),c=nn(),u=ci(),d=di(),p=ui(),h=function(e){function t(t,i){var n=e.call(this)||this;return t&&(n.method=t.method,n.url=n._getAbsoluteUrl(t),n.startTime=+new Date,n.socketRemoteAddress=t.socket&&t.socket.remoteAddress,n.parseHeaders(t,i),t.connection&&(n.connectionRemoteAddress=t.connection.remoteAddress,n.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),n}return r(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e&&e.time?t.time=e.time:this.startTime&&(t.time=new Date(this.startTime)),e){for(var i in e)t[i]||(t[i]=e[i]);if(e.properties)for(var i in e.properties)t.properties[i]=e.properties[i]}return t},t.prototype.getRequestTags=function(e){var i={};for(var n in e)i[n]=e[n];return i[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),i[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),i[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),i[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),i[t.keys.operationName]=this.getOperationName(e),i[t.keys.operationParentId]=this.getOperationParentId(e),i[t.keys.operationId]=this.getOperationId(e),i},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+o.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,i=o.parse(e.url),n=i.pathname,r=i.search,a=t||"https"==e.headers["x-forwarded-proto"]?"https":"http";return o.format({protocol:a,host:e.headers.host,pathname:n,search:r})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var i=e.exec(t);if(i)return i[0]},i=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(i="127.0.0.1"),i},t.prototype._getId=function(e){var i=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(s.getCookie(e,i))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=s.getCorrelationContextTarget(e,l.requestContextSourceKey),e.headers){var i=e.headers[l.traceStateHeader]?e.headers[l.traceStateHeader].toString():null,n=e.headers[l.traceparentHeader]?e.headers[l.traceparentHeader].toString():null,r=e.headers[l.requestIdHeader]?e.headers[l.requestIdHeader].toString():null,o=e.headers[l.parentIdHeader]?e.headers[l.parentIdHeader].toString():null,a=e.headers[l.rootIdHeader]?e.headers[l.rootIdHeader].toString():null;this.correlationContextHeader=e.headers[l.correlationContextHeader]?e.headers[l.correlationContextHeader].toString():null,u.w3cEnabled&&(n||i)?(this.traceparent=new p(n?n.toString():null),this.tracestate=n&&i&&new d(i?i.toString():null),this.setBackCompatFromThisTraceContext()):r?u.w3cEnabled?(this.traceparent=new p(null,r),this.setBackCompatFromThisTraceContext()):(this.parentId=r,this.requestId=u.generateRequestId(this.parentId),this.operationId=u.getRootId(this.requestId)):u.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=o,this.traceparent.legacyRootId=a||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=u.generateRequestId(a||this.parentId),this.correlationContextHeader=null,this.operationId=u.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=u.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new a.ContextTagKeys,t}(c);t.exports=h})),on=T(((e,t)=>{var i;e=t.exports=K,i="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],a=e.src=[],s=0,l=s++;a[l]="0|[1-9]\\d*";var c=s++;a[c]="[0-9]+";var u=s++;a[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=s++;a[d]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=s++;a[p]="("+a[c]+")\\.("+a[c]+")\\.("+a[c]+")";var h=s++;a[h]="(?:"+a[l]+"|"+a[u]+")";var _=s++;a[_]="(?:"+a[c]+"|"+a[u]+")";var g=s++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var m=s++;a[m]="(?:-?("+a[_]+"(?:\\."+a[_]+")*))";var S=s++;a[S]="[0-9A-Za-z-]+";var f=s++;a[f]="(?:\\+("+a[S]+"(?:\\."+a[S]+")*))";var E=s++,T="v?"+a[d]+a[g]+"?"+a[f]+"?";a[E]="^"+T+"$";var C="[v=\\s]*"+a[p]+a[m]+"?"+a[f]+"?",y=s++;a[y]="^"+C+"$";var v=s++;a[v]="((?:<|>)?=?)";var R=s++;a[R]=a[c]+"|x|X|\\*";var A=s++;a[A]=a[l]+"|x|X|\\*";var I=s++;a[I]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[f]+"?)?)?";var w=s++;a[w]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[m]+")?"+a[f]+"?)?)?";var O=s++;a[O]="^"+a[v]+"\\s*"+a[I]+"$";var b=s++;a[b]="^"+a[v]+"\\s*"+a[w]+"$";var N=s++;a[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=s++;a[D]="(?:~>?)";var M=s++;a[M]="(\\s*)"+a[D]+"\\s+",o[M]=new RegExp(a[M],"g");var L=s++;a[L]="^"+a[D]+a[I]+"$";var P=s++;a[P]="^"+a[D]+a[w]+"$";var x=s++;a[x]="(?:\\^)";var B=s++;a[B]="(\\s*)"+a[x]+"\\s+",o[B]=new RegExp(a[B],"g");var k=s++;a[k]="^"+a[x]+a[I]+"$";var U=s++;a[U]="^"+a[x]+a[w]+"$";var F=s++;a[F]="^"+a[v]+"\\s*("+C+")$|^$";var G=s++;a[G]="^"+a[v]+"\\s*("+T+")$|^$";var V=s++;a[V]="(\\s*)"+a[v]+"\\s*("+C+"|"+a[I]+")",o[V]=new RegExp(a[V],"g");var q=s++;a[q]="^\\s*("+a[I]+")\\s+-\\s+("+a[I]+")\\s*$";var j=s++;a[j]="^\\s*("+a[w]+")\\s+-\\s+("+a[w]+")\\s*$";var H,z=s++;for(a[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)i(H,a[H]),o[H]||(o[H]=new RegExp(a[H]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?o[y]:o[E]).test(e))return null;try{return new K(e,t)}catch{return null}}function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof K))return new K(e,t);i("SemVer",e,t),this.options=t,this.loose=!!t.loose;var a=e.trim().match(t.loose?o[y]:o[E]);if(!a)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var i=W(e,t);return i?i.version:null},e.clean=function(e,t){var i=W(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null},e.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return i("SemVer.compare",this.version,this.options,e),e instanceof K||(e=new K(e,this.options)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.options)),Y(this.major,e.major)||Y(this.minor,e.minor)||Y(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Y(n,r)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,i,n){"string"==typeof i&&(n=i,i=void 0);try{return new K(e,i).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(J(e,t))return null;var i=W(e),n=W(t),r="";if(i.prerelease.length||n.prerelease.length){r="pre";var o="prerelease"}for(var a in i)if(("major"===a||"minor"===a||"patch"===a)&&i[a]!==n[a])return r+a;return o},e.compareIdentifiers=Y;var Q=/^[0-9]+$/;function Y(e,t){var i=Q.test(e),n=Q.test(t);return i&&n&&(e=+e,t=+t),e===t?0:i&&!n?-1:n&&!i?1:e<t?-1:1}function $(e,t,i){return new K(e,i).compare(new K(t,i))}function Z(e,t,i){return $(e,t,i)>0}function X(e,t,i){return $(e,t,i)<0}function J(e,t,i){return 0===$(e,t,i)}function ee(e,t,i){return 0!==$(e,t,i)}function te(e,t,i){return $(e,t,i)>=0}function ie(e,t,i){return $(e,t,i)<=0}function ne(e,t,i,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e===i;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e!==i;case"":case"=":case"==":return J(e,i,n);case"!=":return ee(e,i,n);case">":return Z(e,i,n);case">=":return te(e,i,n);case"<":return X(e,i,n);case"<=":return ie(e,i,n);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);i("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}e.rcompareIdentifiers=function(e,t){return Y(t,e)},e.major=function(e,t){return new K(e,t).major},e.minor=function(e,t){return new K(e,t).minor},e.patch=function(e,t){return new K(e,t).patch},e.compare=$,e.compareLoose=function(e,t){return $(e,t,!0)},e.rcompare=function(e,t,i){return $(t,e,i)},e.sort=function(t,i){return t.sort((function(t,n){return e.compare(t,n,i)}))},e.rsort=function(t,i){return t.sort((function(t,n){return e.rcompare(t,n,i)}))},e.gt=Z,e.lt=X,e.eq=J,e.neq=ee,e.gte=te,e.lte=ie,e.cmp=ne,e.Comparator=re;var oe={};function ae(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ae(e.raw,t);if(e instanceof re)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function le(e,t,i,n,r,o,a,s,l,c,u,d,p){return((t=se(i)?"":se(n)?">="+i+".0.0":se(r)?">="+i+"."+n+".0":">="+t)+" "+(s=se(l)?"":se(c)?"<"+(+l+1)+".0.0":se(u)?"<"+l+"."+(+c+1)+".0":d?"<="+l+"."+c+"."+u+"-"+d:"<="+s)).trim()}function ce(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++)if(i(e[r].semver),e[r].semver!==oe&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,i){try{t=new ae(t,i)}catch{return!1}return t.test(e)}function de(e,t,i,n){var r,o,a,s,l;switch(e=new K(e,n),t=new ae(t,n),i){case">":r=Z,o=ie,a=X,s=">",l=">=";break;case"<":r=X,o=te,a=Z,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],d=null,p=null;if(u.forEach((function(e){e.semver===oe&&(e=new re(">=0.0.0")),d=d||e,p=p||e,r(e.semver,d.semver,n)?d=e:a(e.semver,p.semver,n)&&(p=e)})),d.operator===s||d.operator===l||(!p.operator||p.operator===s)&&o(e,p.semver))return!1;if(p.operator===l&&a(e,p.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?o[F]:o[G],i=e.match(t);if(!i)throw new TypeError("Invalid comparator: "+e);this.operator=i[1],"="===this.operator&&(this.operator=""),i[2]?this.semver=new K(i[2],this.options.loose):this.semver=oe},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return i("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new K(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var i;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return i=new ae(e.value,t),ue(this.value,i,t);if(""===e.operator)return i=new ae(this.value,t),ue(e.semver,i,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||o&&a||s||l},e.Range=ae,ae.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[j]:o[q];e=e.replace(n,le),i("hyphen replace",e),e=e.replace(o[V],"$1$2$3"),i("comparator trim",e,o[V]),e=(e=(e=e.replace(o[M],"$1~")).replace(o[B],"$1^")).split(/\s+/).join(" ");var r=t?o[F]:o[G],a=e.split(" ").map((function(e){return function(e,t){return i("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){i("caret",e,t);var n=t.loose?o[U]:o[k];return e.replace(n,(function(t,n,r,o,a){var s;return i("caret",e,t,n,r,o,a),se(n)?s="":se(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":a?(i("replaceCaret pr",a),s="0"===n?"0"===r?">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(i("no pr"),s="0"===n?"0"===r?">="+n+"."+r+"."+o+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+" <"+(+n+1)+".0.0"),i("caret return",s),s}))}(e,t)})).join(" ")}(e,t),i("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[P]:o[L];return e.replace(n,(function(t,n,r,o,a){var s;return i("tilde",e,t,n,r,o,a),se(n)?s="":se(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":a?(i("replaceTilde pr",a),s=">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0"):s=">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0",i("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),i("tildes",e),e=function(e,t){return i("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[b]:o[O];return e.replace(n,(function(t,n,r,o,a,s){i("xRange",e,t,n,r,o,a,s);var l=se(r),c=l||se(o),u=c||se(a);return"="===n&&u&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(c&&(o=0),a=0,">"===n?(n=">=",c?(r=+r+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",c?r=+r+1:o=+o+1),t=n+r+"."+o+"."+a):c?t=">="+r+".0.0 <"+(+r+1)+".0.0":u&&(t=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0"),i("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),i("xrange",e),e=function(e,t){return i("replaceStars",e,t),e.trim().replace(o[z],"")}(e,t),i("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(r)}))),a.map((function(e){return new re(e,this.options)}),this)},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some((function(i){return i.every((function(i){return e.set.some((function(e){return e.every((function(e){return i.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new ae(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new K(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},e.satisfies=ue,e.maxSatisfying=function(e,t,i){var n=null,r=null;try{var o=new ae(t,i)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||-1===r.compare(e))&&(r=new K(n=e,i))})),n},e.minSatisfying=function(e,t,i){var n=null,r=null;try{var o=new ae(t,i)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||1===r.compare(e))&&(r=new K(n=e,i))})),n},e.minVersion=function(e,t){e=new ae(e,t);var i=new K("0.0.0");if(e.test(i)||(i=new K("0.0.0-0"),e.test(i)))return i;i=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new K(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!i||Z(i,t))&&(i=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return i&&e.test(i)?i:null},e.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,i){return de(e,t,"<",i)},e.gtr=function(e,t,i){return de(e,t,">",i)},e.outside=de,e.prerelease=function(e,t){var i=W(e,t);return i&&i.prerelease.length?i.prerelease:null},e.intersects=function(e,t,i){return e=new ae(e,i),t=new ae(t,i),e.intersects(t)},e.coerce=function(e){if(e instanceof K)return e;if("string"!=typeof e)return null;var t=e.match(o[N]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),an=T(((e,t)=>{"use strict";function i(e){return"function"==typeof e}var n=console.error.bind(console);function r(e,t,i){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:i})}function o(e){e&&e.logger&&(i(e.logger)?n=e.logger:n("new logger isn't a function, not replacing"))}function a(e,t,o){if(e&&e[t]){if(!o)return n("no wrapper function"),void n((new Error).stack);if(i(e[t])&&i(o)){var a=e[t],s=o(a,t);return r(s,"__original",a),r(s,"__unwrap",(function(){e[t]===s&&r(e,t,a)})),r(s,"__wrapped",!0),r(e,t,s),s}n("original object and wrapper must be functions")}else n("no original function "+t+" to wrap")}function s(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void n("no original to unwrap to -- has "+t+" already been unwrapped?"):(n("no function to unwrap."),void n((new Error).stack))}o.wrap=a,o.massWrap=function(e,t,i){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t,i)}))})):n("must provide one or more functions to wrap on modules")},o.unwrap=s,o.massUnwrap=function(e,t){if(!e)return n("must provide one or more modules to patch"),void n((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){s(e,t)}))})):n("must provide one or more functions to unwrap on modules")},t.exports=o})),sn=T(((e,t)=>{"use strict";var i=an(),n=i.wrap,r=i.unwrap,o="wrap@before";function a(e,t,i){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:i})}function s(e,t){var i;return i=e._events&&e._events[t],Array.isArray(i)||(i=i?[i]:[]),i}function l(e,t){if(e){var i=e;if("function"==typeof e)i=t(e);else if(Array.isArray(e)){i=[];for(var n=0;n<e.length;n++)i[n]=t(e[n])}return i}}t.exports=function(e,t,i){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!i)throw new Error("must have function to wrap listeners when emitting");function c(e){return function(t,i){var r=s(this,t).slice();try{var a=e.call(this,t,i);return function(e,t,i){var n=s(e,t).filter((function(e){return-1===i.indexOf(e)}));n.length>0&&function(e,t){for(var i=t.length,n=0;n<i;n++){var r=t[n],a=e[o];if("function"==typeof a)a(r);else if(Array.isArray(a))for(var s=a.length,l=0;l<s;l++)a[l](r)}}(e,n)}(this,t,r),a}finally{this.on.__wrapped||n(this,"on",c),this.addListener.__wrapped||n(this,"addListener",c)}}}e[o]?"function"==typeof e[o]?a(e,o,[e[o],t]):Array.isArray(e[o])&&e[o].push(t):a(e,o,t),e.__wrapped||(n(e,"addListener",c),n(e,"on",c),n(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var o=this._events[t];n(this,"removeListener",(function(e){return function(){this._events[t]=o;try{return e.apply(this,arguments)}finally{o=this._events[t],this._events[t]=l(o,i)}}}));try{return this._events[t]=l(o,i),e.apply(this,arguments)}finally{r(this,"removeListener"),this._events[t]=o}}})),a(e,"__unwrap",(function(){r(e,"addListener"),r(e,"on"),r(e,"emit"),delete e[o],delete e.__wrapped})),a(e,"__wrapped",!0))}})),ln=T(((e,t)=>{"use strict";var n=i(3837),r=i(9491),o=sn(),a=i(852),s="cls@contexts",l="error@context",c=process.env.DEBUG_CLS_HOOKED,u=-1;function d(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function p(e){return process.namespaces[e]}function h(e){let t=p(e);r.ok(t,"can't delete nonexistent namespace! \""+e+'"'),r.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function _(...e){c&&process._rawDebug(`${n.format(...e)}`)}t.exports={getNamespace:p,createNamespace:function(e){r.ok(e,"namespace must be given a name."),c&&_(`NS-CREATING NAMESPACE (${e})`);let t=new d(e);return t.id=u,a.createHook({init(i,r,o,s){if(u=a.executionAsyncId(),t.active)t._contexts.set(i,t.active),c&&_(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${r}] (${e}) asyncId:${i} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`);else if(0===u){let o=a.triggerAsyncId(),l=t._contexts.get(o);l?(t._contexts.set(i,l),c&&_(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${r}] (${e}) asyncId:${i} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)):c&&_(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${r}] (${e}) asyncId:${i} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}if(c&&"PROMISE"===r){_(n.inspect(s,{showHidden:!0}));let a=s.parentId;_(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${r}] (${e}) parentId:${a} asyncId:${i} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(i){let r;if(u=a.executionAsyncId(),r=t._contexts.get(i)||t._contexts.get(u),r){if(c){let o=a.triggerAsyncId();_(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${i} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(r)}`),t._indent+=2}t.enter(r)}else if(c){let r=a.triggerAsyncId();_(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${i} currentUid:${u} triggerId:${r} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${n.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(i){let r;if(u=a.executionAsyncId(),r=t._contexts.get(i)||t._contexts.get(u),r){if(c){let o=a.triggerAsyncId();t._indent-=2,_(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${i} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(r)}`)}t.exit(r)}else if(c){let o=a.triggerAsyncId();t._indent-=2,_(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${i} currentUid:${u} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(r)}`)}},destroy(i){if(u=a.executionAsyncId(),c){let r=a.triggerAsyncId();_(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${u} asyncId:${i} triggerId:${r} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(t._contexts.get(u))}`)}t._contexts.delete(i)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:l},d.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,c&&_(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+u+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},d.prototype.get=function(e){if(this.active){if(c){let t=a.executionAsyncId(),i=a.triggerAsyncId(),r=" ".repeat(this._indent<0?0:this._indent);_(r+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+u+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),_(`${r}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${u} asyncHooksCurrentId:${t} triggerId:${i} len:${this._set.length} active:${n.inspect(this.active)}`)}return this.active[e]}if(c){let t=a.currentId(),i=a.triggerAsyncId();_(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${u} asyncHooksCurrentId:${t} triggerId:${i} len:${this._set.length}`)}},d.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=u,c){let t=a.executionAsyncId(),i=a.triggerAsyncId();_(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${u} asyncHooksCurrentId:${t} triggerId:${i} len:${this._set.length} context:${n.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},d.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(c){let e=a.triggerAsyncId(),i=a.executionAsyncId();_(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${i} len:${this._set.length} context:${n.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[l]=t),e}finally{if(c){let e=a.triggerAsyncId(),i=a.executionAsyncId();_(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${u} triggerId:${e} asyncHooksCurrentId:${i} len:${this._set.length} ${n.inspect(t)}`)}this.exit(t)}},d.prototype.runAndReturn=function(e){let t;return this.run((function(i){t=e(i)})),t},d.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let i=e(t);if(!i||!i.then||!i.catch)throw new Error("fn must return a promise.");return c&&_("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+n.inspect(t)),i.then((e=>(c&&_("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[l]=t,c&&_("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+u+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},d.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let i=this;return function(){i.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[l]=t),e}finally{i.exit(t)}}},d.prototype.enter=function(e){if(r.ok(e,"context must be provided for entering"),c){let t=a.executionAsyncId(),i=a.triggerAsyncId();_(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${u} triggerId:${i} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}this._set.push(this.active),this.active=e},d.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),c){let t=a.executionAsyncId(),i=a.triggerAsyncId();_(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${u} triggerId:${i} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}if(this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(c&&_("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),r.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(r.ok(t,"can't remove top context"),this._set.splice(t,1))},d.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,i="context@"+this.name;o(e,(function(e){!e||(e[s]||(e[s]=Object.create(null)),e[s][i]={namespace:t,context:t.active})}),(function(e){if(!e||!e[s])return e;let t=e,i=e[s];return Object.keys(i).forEach((function(e){let n=i[e];t=n.namespace.bind(t,n.context)})),t}))},d.prototype.fromException=function(e){return e[l]},process.namespaces={}})),cn=T(((e,t)=>{"use strict";function i(){}t.exports=function(){let e=this._hooks,t=this._state,n=process.nextTick;process.nextTick=function(){if(!t.enabled)return n.apply(process,arguments);let r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];let o=r[0];if("function"!=typeof o)throw new TypeError("callback is not a function");let a=new i,s=--t.counter;return e.init.call(a,s,0,null,null),r[0]=function(){e.pre.call(a,s);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(a,s,!0),e.destroy.call(null,s)}))}e.post.call(a,s,!1),e.destroy.call(null,s)},n.apply(process,r)}}})),un=T(((e,t)=>{"use strict";function i(){}t.exports=function(){let e=this._hooks,t=this._state,n=global.Promise,r=n.prototype.then;function o(t,i,n,r){return"function"!=typeof t?r?function(t){return function(i){return e.destroy.call(null,t),i}}(n):function(t){return function(i){throw e.destroy.call(null,t),i}}(n):function(){e.pre.call(i,n);try{return t.apply(this,arguments)}finally{e.post.call(i,n,!1),e.destroy.call(null,n)}}}n.prototype.then=function(n,a){if(!t.enabled)return r.call(this,n,a);let s=new i,l=--t.counter;return e.init.call(s,l,0,null,null),r.call(this,o(n,s,l,!0),o(a,s,l,!1))}}})),dn=T(((e,t)=>{"use strict";var n=i(9512);function r(){}function o(){}function a(){}var s=new Map,l=new Map,c=new Map,u=null,d=!1;function p(e,t,i,r,o,a,s){let l=n[i],c=n[r];n[i]=function(){if(!t.enabled)return l.apply(n,arguments);let i=new Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];let r=i[0];if("function"!=typeof r)throw new TypeError('"callback" argument must be a function');let c,p=new o,h=--t.counter;return e.init.call(p,h,0,null,null),i[0]=function(){u=c,e.pre.call(p,h);let t=!0;try{r.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(p,h,!0),a.delete(c),e.destroy.call(null,h)}))}e.post.call(p,h,!1),u=null,(s||d)&&(d=!1,a.delete(c),e.destroy.call(null,h))},c=l.apply(n,i),a.set(c,h),c},n[r]=function(t){if(u===t&&null!==t)d=!0;else if(a.has(t)){let i=a.get(t);a.delete(t),e.destroy.call(null,i)}c.apply(n,arguments)}}t.exports=function(){p(this._hooks,this._state,"setTimeout","clearTimeout",r,s,!0),p(this._hooks,this._state,"setInterval","clearInterval",o,l,!1),p(this._hooks,this._state,"setImmediate","clearImmediate",a,c,!0),global.setTimeout=n.setTimeout,global.setInterval=n.setInterval,global.setImmediate=n.setImmediate,global.clearTimeout=n.clearTimeout,global.clearInterval=n.clearInterval,global.clearImmediate=n.clearImmediate}})),pn=T(((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}})),hn=T(((e,t)=>{"use strict";var i=process.binding("async_wrap"),n=i.Providers.TIMERWRAP,r={nextTick:cn(),promise:un(),timers:dn()},o=new Set;function a(){this.enabled=!1,this.counter=0}function s(){let e=this.initFns=[],t=this.preFns=[],i=this.postFns=[],r=this.destroyFns=[];this.init=function(t,i,r,a){if(i!==n)for(let n of e)n(t,this,i,r,a);else o.add(t)},this.pre=function(e){if(!o.has(e))for(let i of t)i(e,this)},this.post=function(e,t){if(!o.has(e))for(let n of i)n(e,this,t)},this.destroy=function(e){if(o.has(e))o.delete(e);else for(let t of r)t(e)}}function l(e,t){let i=e.indexOf(t);-1!==i&&e.splice(i,1)}function c(){this._state=new a,this._hooks=new s,this.version=pn().version,this.providers=i.Providers;for(let e of Object.keys(r))r[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),i.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}s.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},s.prototype.remove=function(e){e.init&&l(this.initFns,e.init),e.pre&&l(this.preFns,e.pre),e.post&&l(this.postFns,e.post),e.destroy&&l(this.destroyFns,e.destroy)},t.exports=c,c.prototype.addHooks=function(e){this._hooks.add(e)},c.prototype.removeHooks=function(e){this._hooks.remove(e)},c.prototype.enable=function(){this._state.enabled=!0,i.enable()},c.prototype.disable=function(){this._state.enabled=!1,i.disable()}})),_n=T(((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}})),gn=T(((e,t)=>{t.exports=function(e,t){var i=[];i.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}(e));for(var n=0;n<t.length;n++){var r,o=t[n];try{r=o.toString()}catch(e){try{r="<error: "+e+">"}catch{r="<error>"}}i.push("    at "+r)}return i.join("\n")}})),mn=T(((e,t)=>{var i=gn();function n(){this.extend=new a,this.filter=new a,this.format=new s,this.version=_n().version}var r=!1;n.prototype.callSite=function e(t){t||(t={}),r=!0;var i={};Error.captureStackTrace(i,e);var n=i.stack;return r=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(i,n)),t.filter&&(n=this.filter._modify(i,n)),n};var o=new n;function a(){this._modifiers=[]}function s(){this._formater=i,this._previous=void 0}a.prototype._modify=function(e,t){for(var i=0,n=this._modifiers.length;i<n;i++)t=this._modifiers[i](e,t);return t},a.prototype.attach=function(e){this._modifiers.push(e)},a.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},s.prototype.replace=function(e){e?this._formater=e:this.restore()},s.prototype.restore=function(){this._formater=i,this._previous=void 0},s.prototype._backup=function(){this._previous=this._formater},s.prototype._roolback=function(){this._previous===i?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&o.format.replace(Error.prepareStackTrace);var l=!1;function c(e,t){if(r)return t;if(l)return i(e,t);var n=t.concat();n=o.extend._modify(e,n),n=(n=o.filter._modify(e,n)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:n}),l=!0;var a=o.format._formater(e,n);return l=!1,a}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return c},set:function(e){e===c?o.format._roolback():(o.format._backup(),o.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),t.exports=o})),Sn=T(((e,t)=>{if(global._stackChain){if(global._stackChain.version!==_n().version)throw new Error("Conflicting version of stack-chain found");t.exports=global._stackChain}else t.exports=global._stackChain=mn()})),fn=T(((e,t)=>{"use strict";var i=hn();if(global._asyncHook){if(global._asyncHook.version!==pn().version)throw new Error("Conflicting version of async-hook-jl found");t.exports=global._asyncHook}else Sn().filter.attach((function(e,t){return t.filter((function(e){let t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),t.exports=global._asyncHook=new i})),En=T(((e,t)=>{"use strict";var n=i(3837),r=i(9491),o=sn(),a=fn(),s="cls@contexts",l="error@context",c=[];for(let e in a.providers)c[a.providers[e]]=e;var u,d,p=process.env.DEBUG_CLS_HOOKED,h=-1;function _(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function g(e){return process.namespaces[e]}function m(e){let t=g(e);r.ok(t,"can't delete nonexistent namespace! \""+e+'"'),r.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function S(e){process.env.DEBUG&&process._rawDebug(e)}function f(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(t.exports={getNamespace:g,createNamespace:function(e){r.ok(e,"namespace must be given a name."),p&&S("CREATING NAMESPACE "+e);let t=new _(e);return t.id=h,a.addHooks({init(i,r,o,a,s){h=i,a?(t._contexts.set(i,t._contexts.get(a)),p&&S("PARENTID: "+e+" uid:"+i+" parent:"+a+" provider:"+o)):t._contexts.set(h,t.active),p&&S("INIT "+e+" uid:"+i+" parent:"+a+" provider:"+c[o]+" active:"+n.inspect(t.active,!0))},pre(i,r){h=i;let o=t._contexts.get(i);o?(p&&S(" PRE "+e+" uid:"+i+" handle:"+f(r)+" context:"+n.inspect(o)),t.enter(o)):p&&S(" PRE MISSING CONTEXT "+e+" uid:"+i+" handle:"+f(r))},post(i,r){h=i;let o=t._contexts.get(i);o?(p&&S(" POST "+e+" uid:"+i+" handle:"+f(r)+" context:"+n.inspect(o)),t.exit(o)):p&&S(" POST MISSING CONTEXT "+e+" uid:"+i+" handle:"+f(r))},destroy(i){h=i,p&&S("DESTROY "+e+" uid:"+i+" context:"+n.inspect(t._contexts.get(h))+" active:"+n.inspect(t.active,!0)),t._contexts.delete(i)}}),process.namespaces[e]=t,t},destroyNamespace:m,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){m(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:l},_.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return p&&S("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+h+" active:"+n.inspect(this.active,!0)),this.active[e]=t,t},_.prototype.get=function(e){if(this.active)return p&&S("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+h+" active:"+n.inspect(this.active,!0)),this.active[e];p&&S("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+h+" active:"+n.inspect(this.active,!0))},_.prototype.createContext=function(){p&&S("   CREATING Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  active:"+n.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=h,p&&S("   CREATED Context: "+this.name+" uid:"+h+" len:"+this._set.length+"  context:"+n.inspect(e,!0,2,!0)),e},_.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return p&&S(" BEFORE RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),e(t),t}catch(e){throw e&&(e[l]=t),e}finally{p&&S(" AFTER RUN: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t)}},_.prototype.runAndReturn=function(e){var t;return this.run((function(i){t=e(i)})),t},_.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let i=e(t);if(!i||!i.then||!i.catch)throw new Error("fn must return a promise.");return p&&S(" BEFORE runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),i.then((e=>(p&&S(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[l]=t,p&&S(" AFTER runPromise: "+this.name+" uid:"+h+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},_.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let i=this;return function(){i.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[l]=t),e}finally{i.exit(t)}}},_.prototype.enter=function(e){r.ok(e,"context must be provided for entering"),p&&S("  ENTER "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+n.inspect(e)),this._set.push(this.active),this.active=e},_.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),p&&S("  EXIT "+this.name+" uid:"+h+" len:"+this._set.length+" context: "+n.inspect(e)),this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(p&&S("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),r.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(r.ok(t,"can't remove top context"),this._set.splice(t,1))},_.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,i="context@"+this.name;o(e,(function(e){!e||(e[s]||(e[s]=Object.create(null)),e[s][i]={namespace:t,context:t.active})}),(function(e){if(!e||!e[s])return e;let t=e,i=e[s];return Object.keys(i).forEach((function(e){let n=i[e];t=n.namespace.bind(t,n.context)})),t}))},_.prototype.fromException=function(e){return e[l]},process.namespaces={},a._state&&!a._state.enabled&&a.enable(),p)for(d in(u=Sn()).filter._modifiers)u.filter.deattach(d)})),Tn=T(((e,t)=>{"use strict";var i=on();process&&i.gte(process.versions.node,"8.0.0")?t.exports=ln():t.exports=En()})),Cn=T(((e,t)=>{var i;e=t.exports=K,i="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],a=e.src=[],s=0,l=s++;a[l]="0|[1-9]\\d*";var c=s++;a[c]="[0-9]+";var u=s++;a[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=s++;a[d]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var p=s++;a[p]="("+a[c]+")\\.("+a[c]+")\\.("+a[c]+")";var h=s++;a[h]="(?:"+a[l]+"|"+a[u]+")";var _=s++;a[_]="(?:"+a[c]+"|"+a[u]+")";var g=s++;a[g]="(?:-("+a[h]+"(?:\\."+a[h]+")*))";var m=s++;a[m]="(?:-?("+a[_]+"(?:\\."+a[_]+")*))";var S=s++;a[S]="[0-9A-Za-z-]+";var f=s++;a[f]="(?:\\+("+a[S]+"(?:\\."+a[S]+")*))";var E=s++,T="v?"+a[d]+a[g]+"?"+a[f]+"?";a[E]="^"+T+"$";var C="[v=\\s]*"+a[p]+a[m]+"?"+a[f]+"?",y=s++;a[y]="^"+C+"$";var v=s++;a[v]="((?:<|>)?=?)";var R=s++;a[R]=a[c]+"|x|X|\\*";var A=s++;a[A]=a[l]+"|x|X|\\*";var I=s++;a[I]="[v=\\s]*("+a[A]+")(?:\\.("+a[A]+")(?:\\.("+a[A]+")(?:"+a[g]+")?"+a[f]+"?)?)?";var w=s++;a[w]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[m]+")?"+a[f]+"?)?)?";var O=s++;a[O]="^"+a[v]+"\\s*"+a[I]+"$";var b=s++;a[b]="^"+a[v]+"\\s*"+a[w]+"$";var N=s++;a[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=s++;a[D]="(?:~>?)";var M=s++;a[M]="(\\s*)"+a[D]+"\\s+",o[M]=new RegExp(a[M],"g");var L=s++;a[L]="^"+a[D]+a[I]+"$";var P=s++;a[P]="^"+a[D]+a[w]+"$";var x=s++;a[x]="(?:\\^)";var B=s++;a[B]="(\\s*)"+a[x]+"\\s+",o[B]=new RegExp(a[B],"g");var k=s++;a[k]="^"+a[x]+a[I]+"$";var U=s++;a[U]="^"+a[x]+a[w]+"$";var F=s++;a[F]="^"+a[v]+"\\s*("+C+")$|^$";var G=s++;a[G]="^"+a[v]+"\\s*("+T+")$|^$";var V=s++;a[V]="(\\s*)"+a[v]+"\\s*("+C+"|"+a[I]+")",o[V]=new RegExp(a[V],"g");var q=s++;a[q]="^\\s*("+a[I]+")\\s+-\\s+("+a[I]+")\\s*$";var j=s++;a[j]="^\\s*("+a[w]+")\\s+-\\s+("+a[w]+")\\s*$";var H,z=s++;for(a[z]="(<|>)?=?\\s*\\*",H=0;H<35;H++)i(H,a[H]),o[H]||(o[H]=new RegExp(a[H]));function W(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K)return e;if("string"!=typeof e||e.length>n)return null;if(!(t.loose?o[y]:o[E]).test(e))return null;try{return new K(e,t)}catch{return null}}function K(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof K){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof K))return new K(e,t);i("SemVer",e,t),this.options=t,this.loose=!!t.loose;var a=e.trim().match(t.loose?o[y]:o[E]);if(!a)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}e.parse=W,e.valid=function(e,t){var i=W(e,t);return i?i.version:null},e.clean=function(e,t){var i=W(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null},e.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return i("SemVer.compare",this.version,this.options,e),e instanceof K||(e=new K(e,this.options)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.options)),Y(this.major,e.major)||Y(this.minor,e.minor)||Y(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Y(n,r)}while(++t)},K.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},e.inc=function(e,t,i,n){"string"==typeof i&&(n=i,i=void 0);try{return new K(e,i).inc(t,n).version}catch{return null}},e.diff=function(e,t){if(J(e,t))return null;var i=W(e),n=W(t),r="";if(i.prerelease.length||n.prerelease.length){r="pre";var o="prerelease"}for(var a in i)if(("major"===a||"minor"===a||"patch"===a)&&i[a]!==n[a])return r+a;return o},e.compareIdentifiers=Y;var Q=/^[0-9]+$/;function Y(e,t){var i=Q.test(e),n=Q.test(t);return i&&n&&(e=+e,t=+t),e===t?0:i&&!n?-1:n&&!i?1:e<t?-1:1}function $(e,t,i){return new K(e,i).compare(new K(t,i))}function Z(e,t,i){return $(e,t,i)>0}function X(e,t,i){return $(e,t,i)<0}function J(e,t,i){return 0===$(e,t,i)}function ee(e,t,i){return 0!==$(e,t,i)}function te(e,t,i){return $(e,t,i)>=0}function ie(e,t,i){return $(e,t,i)<=0}function ne(e,t,i,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e===i;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e!==i;case"":case"=":case"==":return J(e,i,n);case"!=":return ee(e,i,n);case">":return Z(e,i,n);case">=":return te(e,i,n);case"<":return X(e,i,n);case"<=":return ie(e,i,n);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);i("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}e.rcompareIdentifiers=function(e,t){return Y(t,e)},e.major=function(e,t){return new K(e,t).major},e.minor=function(e,t){return new K(e,t).minor},e.patch=function(e,t){return new K(e,t).patch},e.compare=$,e.compareLoose=function(e,t){return $(e,t,!0)},e.rcompare=function(e,t,i){return $(t,e,i)},e.sort=function(t,i){return t.sort((function(t,n){return e.compare(t,n,i)}))},e.rsort=function(t,i){return t.sort((function(t,n){return e.rcompare(t,n,i)}))},e.gt=Z,e.lt=X,e.eq=J,e.neq=ee,e.gte=te,e.lte=ie,e.cmp=ne,e.Comparator=re;var oe={};function ae(e,t){if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),e instanceof ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ae(e.raw,t);if(e instanceof re)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function le(e,t,i,n,r,o,a,s,l,c,u,d,p){return((t=se(i)?"":se(n)?">="+i+".0.0":se(r)?">="+i+"."+n+".0":">="+t)+" "+(s=se(l)?"":se(c)?"<"+(+l+1)+".0.0":se(u)?"<"+l+"."+(+c+1)+".0":d?"<="+l+"."+c+"."+u+"-"+d:"<="+s)).trim()}function ce(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++)if(i(e[r].semver),e[r].semver!==oe&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,i){try{t=new ae(t,i)}catch{return!1}return t.test(e)}function de(e,t,i,n){var r,o,a,s,l;switch(e=new K(e,n),t=new ae(t,n),i){case">":r=Z,o=ie,a=X,s=">",l=">=";break;case"<":r=X,o=te,a=Z,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],d=null,p=null;if(u.forEach((function(e){e.semver===oe&&(e=new re(">=0.0.0")),d=d||e,p=p||e,r(e.semver,d.semver,n)?d=e:a(e.semver,p.semver,n)&&(p=e)})),d.operator===s||d.operator===l||(!p.operator||p.operator===s)&&o(e,p.semver))return!1;if(p.operator===l&&a(e,p.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?o[F]:o[G],i=e.match(t);if(!i)throw new TypeError("Invalid comparator: "+e);this.operator=i[1],"="===this.operator&&(this.operator=""),i[2]?this.semver=new K(i[2],this.options.loose):this.semver=oe},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return i("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new K(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var i;if((!t||"object"!=typeof t)&&(t={loose:!!t,includePrerelease:!1}),""===this.operator)return i=new ae(e.value,t),ue(this.value,i,t);if(""===e.operator)return i=new ae(this.value,t),ue(e.semver,i,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||o&&a||s||l},e.Range=ae,ae.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[j]:o[q];e=e.replace(n,le),i("hyphen replace",e),e=e.replace(o[V],"$1$2$3"),i("comparator trim",e,o[V]),e=(e=(e=e.replace(o[M],"$1~")).replace(o[B],"$1^")).split(/\s+/).join(" ");var r=t?o[F]:o[G],a=e.split(" ").map((function(e){return function(e,t){return i("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){i("caret",e,t);var n=t.loose?o[U]:o[k];return e.replace(n,(function(t,n,r,o,a){var s;return i("caret",e,t,n,r,o,a),se(n)?s="":se(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":a?(i("replaceCaret pr",a),s="0"===n?"0"===r?">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(i("no pr"),s="0"===n?"0"===r?">="+n+"."+r+"."+o+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+" <"+(+n+1)+".0.0"),i("caret return",s),s}))}(e,t)})).join(" ")}(e,t),i("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[P]:o[L];return e.replace(n,(function(t,n,r,o,a){var s;return i("tilde",e,t,n,r,o,a),se(n)?s="":se(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":se(o)?s=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":a?(i("replaceTilde pr",a),s=">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0"):s=">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0",i("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),i("tildes",e),e=function(e,t){return i("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[b]:o[O];return e.replace(n,(function(t,n,r,o,a,s){i("xRange",e,t,n,r,o,a,s);var l=se(r),c=l||se(o),u=c||se(a);return"="===n&&u&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(c&&(o=0),a=0,">"===n?(n=">=",c?(r=+r+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",c?r=+r+1:o=+o+1),t=n+r+"."+o+"."+a):c?t=">="+r+".0.0 <"+(+r+1)+".0.0":u&&(t=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0"),i("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),i("xrange",e),e=function(e,t){return i("replaceStars",e,t),e.trim().replace(o[z],"")}(e,t),i("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(r)}))),a.map((function(e){return new re(e,this.options)}),this)},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some((function(i){return i.every((function(i){return e.set.some((function(e){return e.every((function(e){return i.intersects(e,t)}))}))}))}))},e.toComparators=function(e,t){return new ae(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new K(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},e.satisfies=ue,e.maxSatisfying=function(e,t,i){var n=null,r=null;try{var o=new ae(t,i)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||-1===r.compare(e))&&(r=new K(n=e,i))})),n},e.minSatisfying=function(e,t,i){var n=null,r=null;try{var o=new ae(t,i)}catch{return null}return e.forEach((function(e){o.test(e)&&(!n||1===r.compare(e))&&(r=new K(n=e,i))})),n},e.minVersion=function(e,t){e=new ae(e,t);var i=new K("0.0.0");if(e.test(i)||(i=new K("0.0.0-0"),e.test(i)))return i;i=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new K(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!i||Z(i,t))&&(i=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return i&&e.test(i)?i:null},e.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch{return null}},e.ltr=function(e,t,i){return de(e,t,"<",i)},e.gtr=function(e,t,i){return de(e,t,">",i)},e.outside=de,e.prerelease=function(e,t){var i=W(e,t);return i&&i.prerelease.length?i.prerelease:null},e.intersects=function(e,t,i){return e=new ae(e,i),t=new ae(t,i),e.intersects(t)},e.coerce=function(e){if(e instanceof K)return e;if("string"!=typeof e)return null;var t=e.match(o[N]);return null==t?null:W(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}})),yn=T(((e,t)=>{var i,n,r,o,a,s=an().wrap,l=1,c=2,u=4,d=8,p=[],h=0,_=!1,g=[];function m(e,t){var i=e.length,n=t.length,r=[];if(0===i&&0===n)return r;for(var o=0;o<i;o++)r[o]=e[o];if(0===n)return r;for(var a=0;a<n;a++){var s=!0;for(o=0;o<i;o++)if(e[o].uid===t[a].uid){s=!1;break}s&&r.push(t[a])}return r}function S(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=l),"function"==typeof e.before&&(this.before=e.before,this.flags|=c),"function"==typeof e.after&&(this.after=e.after,this.flags|=u),"function"==typeof e.error&&(this.error=e.error,this.flags|=d),this.uid=++h,this.data=void 0===t?null:t}function f(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof S?e:new S(e,t)}process._fatalException?(r=!1,i=function(e){var t=p.length;if(r||0===t)return!1;var i=!1;r=!0;for(var n=0;n<t;++n){var a=p[n];if(0!=(a.flags&d)){var s=o&&o[a.uid];i=a.error(s,e)||i}}return r=!1,g.length>0&&(p=g.pop()),o=void 0,i&&!_},n=function(e,t,i){var n=[];_=!0;for(var r=0;r<i;++r){var a=t[r];if(n[a.uid]=a.data,0!=(a.flags&l)){var s=a.create(a.data);void 0!==s&&(n[a.uid]=s)}}return _=!1,function(){o=n,g.push(p),p=m(t,p),_=!0;for(var r=0;r<i;++r)(t[r].flags&c)>0&&t[r].before(this,n[t[r].uid]);_=!1;var a=e.apply(this,arguments);for(_=!0,r=0;r<i;++r)(t[r].flags&u)>0&&t[r].after(this,n[t[r].uid]);return _=!1,p=g.pop(),o=void 0,a}},s(process,"_fatalException",(function(e){return function(t){return i(t)||e(t)}}))):(a=!1,i=function(e){if(a)throw e;for(var t=!1,i=p.length,n=0;n<i;++n){var r=p[n];0!=(r.flags&d)&&(t=r.error(null,e)||t)}if(!t&&_)throw e},n=function(e,t,n){var r=[];_=!0;for(var o=0;o<n;++o){var s=t[o];if(r[s.uid]=s.data,0!=(s.flags&l)){var h=s.create(s.data);void 0!==h&&(r[s.uid]=h)}}return _=!1,function(){var o,s=!1,l=!1;g.push(p),p=m(t,p),_=!0;for(var h=0;h<n;++h)(t[h].flags&c)>0&&t[h].before(this,r[t[h].uid]);_=!1;try{o=e.apply(this,arguments)}catch(e){for(s=!0,h=0;h<n;++h)if(0!=(p[h].flags&d))try{l=p[h].error(r[t[h].uid],e)||l}catch(e){throw a=!0,e}if(!l)throw process.removeListener("uncaughtException",i),process._originalNextTick((function(){process.addListener("uncaughtException",i)})),e}finally{if(!s||l){for(_=!0,h=0;h<n;++h)(t[h].flags&u)>0&&t[h].after(this,r[t[h].uid]);_=!1}p=g.pop()}return o}},process.addListener("uncaughtException",i)),S.prototype.create=void 0,S.prototype.before=void 0,S.prototype.after=void 0,S.prototype.error=void 0,S.prototype.data=void 0,S.prototype.uid=0,S.prototype.flags=0,process.createAsyncListener=f,process.addAsyncListener=function(e,t){var i;i=e instanceof S?e:f(e,t);for(var n=!1,r=0;r<p.length;r++)if(i===p[r]){n=!0;break}return n||p.push(i),i},process.removeAsyncListener=function(e){for(var t=0;t<p.length;t++)if(e===p[t]){p.splice(t,1);break}},t.exports=function(e){var t=p.length;if(0===t)return e;for(var i=p.slice(),r=0;r<t;++r)if(i[r].flags>0)return n(e,i,t);return function(e,t,i){_=!0;for(var n=0;n<i;++n){var r=t[n];r.create&&r.create(r.data)}return _=!1,function(){g.push(p),p=m(t,p);var i=e.apply(this,arguments);return p=g.pop(),i}}(e,i,t)}})),vn=T(((e,t)=>{"use strict";t.exports=(e,t)=>class extends e{constructor(e){var i,n;super((function(e,o){i=this,n=[function(i){return t(r,!1),e(i)},function(e){return t(r,!1),o(e)}]}));var r=this;try{e.apply(i,n)}catch(e){n[1](e)}return r}}})),Rn=T((()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=an(),t=Cn(),n=e.wrap,r=e.massWrap,o=yn(),a=i(3837),s=t.gte(process.version,"6.0.0"),l=t.gte(process.version,"7.0.0"),c=t.gte(process.version,"8.0.0"),u=t.gte(process.version,"11.0.0"),d=i(1808);function p(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=o(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function h(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=o(t._originalOnread)}}l&&!d._normalizeArgs?d._normalizeArgs=function(e){if(0===e.length)return[{},null];var t=e[0],i={};"object"==typeof t&&null!==t?i=t:function(e){return"string"==typeof e&&!1===function(e){return(e=Number(e))>=0&&e}(e)}(t)?i.path=t:(i.port=t,e.length>1&&"string"==typeof e[1]&&(i.host=e[1]));var n=e[e.length-1];return"function"!=typeof n?[i,null]:[i,n]}:!l&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(e){var t={};"object"==typeof e[0]&&null!==e[0]?t=e[0]:"string"==typeof e[0]&&!1===function(e){return(e=Number(e))>=0&&e}(e[0])?t.path=e[0]:(t.port=e[0],"string"==typeof e[1]&&(t.host=e[1]));var i=e[e.length-1];return"function"==typeof i?[t,i]:[t]}),"_setUpListenHandle"in d.Server.prototype?n(d.Server.prototype,"_setUpListenHandle",p):n(d.Server.prototype,"_listen2",p),n(d.Socket.prototype,"connect",(function(e){return function(){var t;(t=c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:l?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments))[1]&&(t[1]=o(t[1]));var i=e.apply(this,t);return h(this),i}}));var _=i(3685);n(_.Agent.prototype,"addRequest",(function(e){return function(t){var i=t.onSocket;return t.onSocket=o((function(e){return h(e),i.apply(this,arguments)})),e.apply(this,arguments)}}));var g=i(2081);function m(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=o(e._handle.onread),n(e._handle,"close",N))})),e._handle&&(e._handle.onexit=o(e._handle.onexit))}g.ChildProcess?n(g.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return m(this),t}})):r(g,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return m(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var S=[];process._nextDomainTick&&S.push("_nextDomainTick"),process._tickDomainCallback&&S.push("_tickDomainCallback"),r(process,S,b),n(process,"nextTick",N);var f=["setTimeout","setInterval"];global.setImmediate&&f.push("setImmediate");var E=i(9512),T=global.setTimeout===E.setTimeout;r(E,f,N),T&&r(global,f,N);var C=i(9523);r(C,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],b),C.resolveNaptr&&n(C,"resolveNaptr",b);var y,v,R,A=i(7147);r(A,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],b),A.lchown&&n(A,"lchown",b),A.lchmod&&n(A,"lchmod",b),A.ftruncate&&n(A,"ftruncate",b);try{y=i(9796)}catch{}y&&y.Deflate&&y.Deflate.prototype&&((v=Object.getPrototypeOf(y.Deflate.prototype))._transform?n(v,"_transform",b):v.write&&v.flush&&v.end&&r(v,["write","flush","end"],b));try{R=i(6113)}catch{}R&&(I=["pbkdf2","randomBytes"],u||I.push("pseudoRandomBytes"),r(R,I,b));var I,w,O=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();function b(e){var t=function(){var t,i=arguments.length-1;if("function"==typeof arguments[i]){t=Array(arguments.length);for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n];t[i]=o(arguments[i])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(i){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,i))};case 2:return function(i,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=o(n)),e.call(this,i,n))};case 3:return function(i,n,r){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=o(r)),e.call(this,i,n,r))};case 4:return function(i,n,r,a){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=o(a)),e.call(this,i,n,r,a))};case 5:return function(i,n,r,a,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=o(s)),e.call(this,i,n,r,a,s))};case 6:return function(i,n,r,a,s,l){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof l&&(l=o(l)),e.call(this,i,n,r,a,s,l))};default:return t}}function N(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=o(arguments[0]);for(var i=1;i<arguments.length;i++)t[i]=arguments[i]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(i){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,i))};case 2:return function(i,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,i,n))};case 3:return function(i,n,r){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,i,n,r))};case 4:return function(i,n,r,a){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,i,n,r,a))};case 5:return function(i,n,r,a,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,i,n,r,a,s))};case 6:return function(i,n,r,a,s,l){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=o(i)),e.call(this,i,n,r,a,s,l))};default:return t}}O&&(w=process.addAsyncListener({create:function(){O=!1}}),global.Promise.resolve(!0).then((function(){O=!1})),process.removeAsyncListener(w)),O&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var r,o,a=new e((function(e,t){r=this,o=[function(t){return i(a,!1),e(t)},function(e){return i(a,!1),t(e)}]}));a.__proto__=t.prototype;try{n.apply(r,o)}catch(e){o[1](e)}return a}function i(e,t){(!e.__asl_wrapper||t)&&(e.__asl_wrapper=o(r))}function r(t,n,o,a){var s;try{return{returnVal:s=n.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{s instanceof e?a.__asl_wrapper=function(){return(s.__asl_wrapper||r).apply(this,arguments)}:i(a,!0)}}function l(e){return function(){var t=this,i=e.apply(t,Array.prototype.map.call(arguments,(function(e){return"function"!=typeof e?e:o((function(n){var o=(t.__asl_wrapper||r)(this,e,n,i);if(o.error)throw o.errorVal;return o.returnVal}))})));return i.__asl_wrapper=function(e,n,o,a){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,i),i.__asl_wrapper(e,n,o,a)):r(e,n,o,a)},i}}a.inherits(t,e),n(e.prototype,"then",l),e.prototype.chain&&n(e.prototype,"chain",l),s?global.Promise=vn()(e,i):(["all","race","reject","resolve","accept","defer"].forEach((function(i){"function"==typeof e[i]&&(t[i]=e[i])})),global.Promise=t)}()})),An=T(((e,t)=>{"use strict";var n=i(9491),r=sn(),o="cls@contexts",a="error@context";function s(e){this.name=e,this.active=null,this._set=[],this.id=null}function l(e){return process.namespaces[e]}function c(e){var t=l(e);n.ok(t,"can't delete nonexistent namespace!"),n.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function u(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){c(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||Rn(),s.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},s.prototype.get=function(e){if(this.active)return this.active[e]},s.prototype.createContext=function(){return Object.create(this.active)},s.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[a]=t),e}finally{this.exit(t)}},s.prototype.runAndReturn=function(e){var t;return this.run((function(i){t=e(i)})),t},s.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var i=this;return function(){i.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[a]=t),e}finally{i.exit(t)}}},s.prototype.enter=function(e){n.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},s.prototype.exit=function(e){if(n.ok(e,"context must be provided for exiting"),this.active===e)return n.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);n.ok(t>=0,"context not currently entered; can't exit"),n.ok(t,"can't remove top context"),this._set.splice(t,1)},s.prototype.bindEmitter=function(e){n.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,i="context@"+this.name;r(e,(function(e){!e||(e[o]||(e[o]=Object.create(null)),e[o][i]={namespace:t,context:t.active})}),(function(e){if(!e||!e[o])return e;var t=e,i=e[o];return Object.keys(i).forEach((function(e){var n=i[e];t=n.namespace.bind(t,n.context)})),t}))},s.prototype.fromException=function(e){return e[a]},process.namespaces||u(),t.exports={getNamespace:l,createNamespace:function(e){n.ok(e,"namespace must be given a name!");var t=new s(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,i){i&&t.enter(i)},after:function(e,i){i&&t.exit(i)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:c,reset:u}})),In=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=b(),i=ai(),n=ui(),r=di(),o=rn(),a=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,i,n,r,o){return t=t||e,this.enabled?{operation:{name:i,id:e,parentId:t,traceparent:r,tracestate:o},customProperties:new s(n)}:null},e.spanToContextObject=function(t,i,r){var o=new n;return o.traceId=t.traceId,o.spanId=t.spanId,o.traceFlag=n.formatOpenTelemetryTraceFlags(t.traceFlags)||n.DEFAULT_TRACE_FLAG,o.parentId=i,e.generateContextObject(o.traceId,o.parentId,r,null,o)},e.runWithContext=function(t,i){var n;return e.enabled?e.session.bind(i,((n={})[e.CONTEXT_NAME]=t,n))():i()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,i){var n;return e.enabled?e.session.bind(t,i?((n={})[e.CONTEXT_NAME]=i,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible())return void(this.enabled=!1);e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls>"u"&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=Tn():this.cls=An()),e.session=this.cls.createNamespace("AI-CLS-Session"),i.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0}},e.startOperation=function(i,a){var s=i&&i.traceContext||null,l=i&&i.traceId?i:null,c=i&&i.headers;if(l){var u=new n("00-"+l.traceId+"-"+l.spanId+"-01"),d=new r(l.traceState?l.traceState.serialize():null);return e.generateContextObject(l.traceId,"|"+l.traceId+"."+l.spanId+".","string"==typeof a?a:"",void 0,u,d)}if(s){u=new n(s.traceparent),d=new r(s.tracestate);var p="object"==typeof a?new o(a):null;return e.generateContextObject(u.traceId,u.parentId,"string"==typeof a?a:p.getOperationName({}),p&&p.getCorrelationContextHeader()||void 0,u,d)}return c?(u=new n(c.traceparent?c.traceparent.toString():null),d=new r(c.tracestate?c.tracestate.toString():null),p=new o(i),e.generateContextObject(u.traceId,u.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),u,d)):(t.warn("startOperation was called with invalid arguments",arguments),null)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,i=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,n=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&i)&&n},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();e.CorrelationContextManager=a;var s=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var i=this.props[t];if(i.key===e)return i.value}},e.prototype.setProperty=function(i,n){if(e.bannedCharacters.test(i)||e.bannedCharacters.test(n))t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+i+" and value: "+n);else{for(var r=0;r<this.props.length;++r){var o=this.props[r];if(o.key===i)return void(o.value=n)}this.props.push({key:i,value:n})}},e.bannedCharacters=/[,=]/,e}()})),wn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=tn(),i=P(),n=[],r=function(e){var i=e.data.message;n.forEach((function(n){i instanceof Error?n.trackException({exception:i}):(i.lastIndexOf("\n")==i.length-1&&(i=i.substring(0,i.length-1)),n.trackTrace({message:i,severity:e.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))}))};e.enable=function(e,t){e?(0===n.length&&i.channel.subscribe("console",r),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&i.channel.unsubscribe("console",r)},e.dispose=function(){i.channel.unsubscribe("console",r),n=[]}})),On=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=tn(),i=P(),n=[],r={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},o=function(e){var t=e.data.result;n.forEach((function(i){var n=r[e.data.level];t instanceof Error?i.trackException({exception:t}):i.trackTrace({message:t,severity:n})}))};e.enable=function(e,t){e?(0===n.length&&i.channel.subscribe("bunyan",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&i.channel.unsubscribe("bunyan",o)},e.dispose=function(){i.channel.unsubscribe("bunyan",o),n=[]}})),bn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=tn(),i=P(),n=[],r={syslog:function(e){var i={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return void 0===i[e]?t.SeverityLevel.Information:i[e]},npm:function(e){var i={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return void 0===i[e]?t.SeverityLevel.Information:i[e]},unknown:function(e){return t.SeverityLevel.Information}},o=function(e){var t=e.data.message;n.forEach((function(i){if(t instanceof Error)i.trackException({exception:t,properties:e.data.meta});else{var n=r[e.data.levelKind](e.data.level);i.trackTrace({message:t,severity:n,properties:e.data.meta})}}))};e.enable=function(e,t){e?(0===n.length&&i.channel.subscribe("winston",o),n.push(t)):0===(n=n.filter((function(e){return e!=t}))).length&&i.channel.unsubscribe("winston",o)},e.dispose=function(){i.channel.unsubscribe("winston",o),n=[]}})),Nn=T(((e,t)=>{"use strict";var i=ai(),n=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){i.IsInitialized&&(wn().enable(e&&t,this._client),On().enable(e,this._client),bn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();t.exports=n})),Dn=T(((e,t)=>{"use strict";var i=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var i=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(i[0])>13||13===parseInt(i[0])&&parseInt(i[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var i=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(t,n,r){void 0===r&&(r=new Error(e._FALLBACK_ERROR_MESSAGE)),i._client.trackException({exception:r}),i._client.flush({isAppCrashing:!0}),t&&n&&1===process.listeners(n).length&&(console.error(r),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();t.exports=i})),Mn=T((e=>{"use strict";var t,i,n,r;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",(n=i=e.QuickPulseCounter||(e.QuickPulseCounter={})).COMMITTED_BYTES="\\Memory\\Committed Bytes",n.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",n.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",n.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",n.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",n.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",n.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",n.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",n.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec",function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(r=e.PerformanceCounter||(e.PerformanceCounter={})),function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"}(e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=((t={})[r.PROCESSOR_TIME]=i.PROCESSOR_TIME,t[r.REQUEST_RATE]=i.REQUEST_RATE,t[r.REQUEST_DURATION]=i.REQUEST_DURATION,t[i.COMMITTED_BYTES]=i.COMMITTED_BYTES,t[i.REQUEST_FAILURE_RATE]=i.REQUEST_FAILURE_RATE,t[i.DEPENDENCY_RATE]=i.DEPENDENCY_RATE,t[i.DEPENDENCY_FAILURE_RATE]=i.DEPENDENCY_FAILURE_RATE,t[i.DEPENDENCY_DURATION]=i.DEPENDENCY_DURATION,t[i.EXCEPTION_RATE]=i.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"})),Ln=T(((e,t)=>{"use strict";var n=i(2037),r=Mn(),o=function(){function e(t,i,n){void 0===i&&(i=6e4),void 0===n&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=i,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,i){var r=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=n.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=i||this._collectionInterval,this._handle=setInterval((function(){return r.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,i){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalRequestExecutionTime+=n,!1===i&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,i){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalDependencyExecutionTime+=n,!1===i&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=n.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,i=0,o=0,a=0,s=0,l=0;e&&l<e.length;l++){var c=e[l],u=this._lastCpus[l],d=(c.model,c.speed,c.times),p=u.times;t+=d.user-p.user||0,i+=d.sys-p.sys||0,o+=d.nice-p.nice||0,a+=d.idle-p.idle||0,s+=d.irq-p.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var _=process.cpuUsage(),g=process.hrtime(),m=_.user-this._lastAppCpuUsage.user+(_.system-this._lastAppCpuUsage.system)||0;typeof this._lastHrtime<"u"&&2===this._lastHrtime.length&&(h=100*m/((1e6*(g[0]-this._lastHrtime[0])+(g[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=_,this._lastHrtime=g}var S=t+i+o+a+s||1;this._client.trackMetric({name:r.PerformanceCounter.PROCESSOR_TIME,value:(S-a)/S*100}),this._client.trackMetric({name:r.PerformanceCounter.PROCESS_TIME,value:h||t/S*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=n.freemem(),t=process.memoryUsage().rss,i=n.totalmem()-e;this._client.trackMetric({name:r.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:r.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:r.QuickPulseCounter.COMMITTED_BYTES,value:i})},e.prototype._trackNetwork=function(){var t=this._lastRequests,i={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=i.totalRequestCount-t.totalRequestCount||0,o=i.totalFailedRequestCount-t.totalFailedRequestCount||0,a=i.time-t.time,s=a/1e3,l=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,a>0){var c=n/s,u=o/s;this._client.trackMetric({name:r.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:r.PerformanceCounter.REQUEST_DURATION,value:l}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:r.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=i},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,i={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=i.totalDependencyCount-t.totalDependencyCount||0,o=i.totalFailedDependencyCount-t.totalFailedDependencyCount||0,a=i.time-t.time,s=a/1e3,l=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,a>0){var c=n/s,u=o/s;this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:r.QuickPulseCounter.DEPENDENCY_DURATION,value:l})}this._lastDependencies=i}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,i={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=i.totalExceptionCount-t.totalExceptionCount||0,o=i.time-t.time;if(o>0){var a=n/(o/1e3);this._client.trackMetric({name:r.QuickPulseCounter.EXCEPTION_RATE,value:a})}this._lastExceptions=i}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();t.exports=o})),Pn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;e.AggregatedMetricCounter=function(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}})),xn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}})),Bn=T(((e,t)=>{"use strict";var i=e&&e.__assign||function(){return i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},n=Mn(),r=Pn(),o=xn(),a=function(){function e(t,i){void 0===i&&(i=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=i}return e.prototype.enable=function(e,t){var i=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=t||this._collectionInterval,this._handle=setInterval((function(){return i.trackPreAggregatedMetrics()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._exceptionCountersCollection).totalCount++},e.countTrace=function(t){e.isEnabled()&&e._getAggregatedCounter(t,this._traceCountersCollection).totalCount++},e.countRequest=function(t,i){if(e.isEnabled()){var n,r=e._getAggregatedCounter(i,this._requestCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}r.intervalExecutionTime+=n,r.totalCount++}},e.countDependency=function(t,i){if(e.isEnabled()){var n,r=e._getAggregatedCounter(i,this._dependencyCountersCollection);if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}r.intervalExecutionTime+=n,r.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(e,t){for(var i=!1,n=0;n<t.length;n++){if(e===t[n].dimensions)return t[n];if(Object.keys(e).length===Object.keys(t[n].dimensions).length){for(var o in e)if(e[o]!=t[n].dimensions[o]){i=!0;break}if(!i)return t[n];i=!1}}var a=new r.AggregatedMetricCounter(e);return t.push(a),a},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var i=e._requestCountersCollection[t];i.time=+new Date;var r=i.totalCount-i.lastTotalCount||0,o=i.time-i.lastTime,a=(i.intervalExecutionTime-i.lastIntervalExecutionTime)/r||0;i.lastIntervalExecutionTime=i.intervalExecutionTime,o>0&&r>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:i.dimensions,value:a,count:r,aggregationInterval:o,metricType:n.MetricId.REQUESTS_DURATION}),i.lastTotalCount=i.totalCount,i.lastTime=i.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var i=e._dependencyCountersCollection[t];i.time=+new Date;var r=i.totalCount-i.lastTotalCount||0,o=i.time-i.lastTime,a=(i.intervalExecutionTime-i.lastIntervalExecutionTime)/r||0;i.lastIntervalExecutionTime=i.intervalExecutionTime,o>0&&r>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:i.dimensions,value:a,count:r,aggregationInterval:o,metricType:n.MetricId.DEPENDENCIES_DURATION}),i.lastTotalCount=i.totalCount,i.lastTime=i.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var i=e._exceptionCountersCollection[t],r=i.totalCount-i.lastTotalCount||0,o=i.time-i.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:i.dimensions,value:r,count:r,aggregationInterval:o,metricType:n.MetricId.EXCEPTIONS_COUNT}),i.lastTotalCount=i.totalCount,i.lastTime=i.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var i=e._traceCountersCollection[t],r=i.totalCount-i.lastTotalCount||0,o=i.time-i.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:i.dimensions,value:r,count:r,aggregationInterval:o,metricType:n.MetricId.TRACES_COUNT}),i.lastTotalCount=i.totalCount,i.lastTime=i.time}},e.prototype._trackPreAggregatedMetric=function(e){var t={};for(var n in e.dimensions)t[o.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];t=i(i({},t),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var r={name:e.name,value:e.value,count:e.count,properties:t,kind:"Aggregation"};this._client.trackMetric(r)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();t.exports=a})),kn=T(((e,t)=>{"use strict";var n=i(2037),r=i(7147),o=i(1017),a=tn(),s=b(),l=function(){function e(e){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var i=JSON.parse(r.readFileSync(t,"utf8"));i&&"string"==typeof i.version&&(e.appVersion[t]=i.version)}catch(e){s.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=n&&n.hostname(),this.tags[this.keys.deviceOSVersion]=n&&n.type()+" "+n.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},e.prototype._loadInternalContext=function(){var t=o.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var i=JSON.parse(r.readFileSync(t,"utf8"));i&&"string"==typeof i.version&&(e.sdkVersion=i.version)}catch(e){s.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();t.exports=l})),Un=T(((e,t)=>{"use strict";var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=i(7310),a=tn(),s=li(),l=si(),c=nn(),u=ci(),d=function(e){function t(i,n){var r=e.call(this)||this;return n&&n.method&&i&&(r.method=n.method,r.url=t._getUrlFromRequestOptions(i,n),r.startTime=+new Date),r}return r(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=s.getCorrelationContextTarget(e,l.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var i=o.parse(this.url);i.search=void 0,i.hash=void 0;var n=this.method.toUpperCase()+" "+i.pathname,r=a.RemoteDependencyDataConstants.TYPE_HTTP,s=i.hostname;i.port&&(s+=":"+i.port),this.correlationId?(r=a.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==u.correlationIdPrefix&&(s+=" | "+this.correlationId)):r=a.RemoteDependencyDataConstants.TYPE_HTTP;var l={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:r,target:s};if(e&&e.time?l.time=e.time:this.startTime&&(l.time=new Date(this.startTime)),e){for(var c in e)l[c]||(l[c]=e[c]);if(e.properties)for(var c in e.properties)l.properties[c]=e.properties[c]}return l},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)if(0===e.indexOf("http://")||0===e.indexOf("https://"))e=o.parse(e);else{var i=o.parse(e);e="443"===i.host?o.parse("https://"+e):o.parse("http://"+e)}else{if(e&&"function"==typeof o.URL&&e instanceof o.URL)return o.format(e);var n=e;e={},n&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}if(e.path){var r=o.parse(e.path);e.pathname=r.pathname,e.search=r.search}return e.host&&e.port&&!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host),e.protocol=e.protocol||t.agent&&t.agent.protocol||t.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(c);t.exports=d})),Fn=T((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var i=be(),n=Mn();function r(e){var i=t({},e);return Object.keys(n.SpanAttribute).forEach((function(e){delete i[e]})),i}e.spanToTelemetryContract=function(e){var o="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",a=Math.round(1e3*e._duration[0]+e._duration[1]/1e6),s=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",l=e.attributes.component?e.attributes.component.toString():"",c=l.toUpperCase()===n.DependencyTypeName.Http||!!e.attributes[n.SpanAttribute.HttpUrl],u=l.toLowerCase()===n.DependencyTypeName.Grpc;if(c){var d=e.attributes[n.SpanAttribute.HttpMethod]||"GET",p=new URL(e.attributes[n.SpanAttribute.HttpUrl].toString()),h=e.attributes[n.SpanAttribute.HttpHost]||p.host,_=e.attributes[n.SpanAttribute.HttpPort]||p.port||null,g=d+" "+(p.pathname||"/"),m=n.DependencyTypeName.Http,S=_?(h+":"+_).toString():h.toString(),f=p.toString(),E=e.attributes[n.SpanAttribute.HttpStatusCode]||e.status.code||0;return{id:o,name:g,dependencyTypeName:m,target:S,data:f,success:E<400,duration:a,url:f,resultCode:String(E),properties:r(e.attributes)}}if(u){d=e.attributes[n.SpanAttribute.GrpcMethod]||"rpc";var T=e.attributes[n.SpanAttribute.GrpcService],C=T?d+" "+T:e.name;return{id:o,duration:a,name:C,target:T.toString(),data:T.toString()||C,url:T.toString()||C,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:0===e.status.code,properties:r(e.attributes)}}var y=e.name,v=e.links&&e.links.map((function(e){return{operation_Id:e.context.traceId,id:e.context.spanId}}));return{id:o,duration:a,name:y,target:s,data:s||y,url:s||y,dependencyTypeName:e.kind===i.SpanKind.INTERNAL?n.DependencyTypeName.InProc:l||e.name,resultCode:String(e.status.code||0),success:0===e.status.code,properties:t(t({},r(e.attributes)),{"_MS.links":v||void 0})}}})),Gn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=be(),i=P(),n=ui(),r=Fn(),o=N(),a=[];e.subscriber=function(e){var i=e.data,s=r.spanToTelemetryContract(i),l=i.spanContext(),c=new n;c.traceId=l.traceId,c.spanId=l.spanId,c.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags),c.parentId=i.parentSpanId?"|"+l.traceId+"."+i.parentSpanId+".":null,o.AsyncScopeManager.with(i,(function(){a.forEach((function(e){i.kind===t.SpanKind.SERVER?e.trackRequest(s):(i.kind===t.SpanKind.CLIENT||i.kind===t.SpanKind.INTERNAL)&&e.trackDependency(s)}))}))},e.enable=function(t,n){t?(0===a.length&&i.channel.subscribe("azure-coretracing",e.subscriber),a.push(n)):0===(a=a.filter((function(e){return e!=n}))).length&&i.channel.unsubscribe("azure-coretracing",e.subscriber)}})),Vn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=P(),i=[];e.subscriber=function(e){"ismaster"!==e.data.event.commandName&&i.forEach((function(t){var i=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:i,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})}))},e.enable=function(n,r){n?(0===i.length&&t.channel.subscribe("mongodb",e.subscriber),i.push(r)):0===(i=i.filter((function(e){return e!=r}))).length&&t.channel.unsubscribe("mongodb",e.subscriber)}})),qn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=P(),i=[];e.subscriber=function(e){i.forEach((function(t){var i=e.data.query||{},n=i.sql||"Unknown query",r=!e.data.err,o=(i._connection||{}).config||{},a=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:a,data:n,name:n,duration:e.data.duration,success:r,resultCode:r?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})}))},e.enable=function(n,r){n?(0===i.length&&t.channel.subscribe("mysql",e.subscriber),i.push(r)):0===(i=i.filter((function(e){return e!=r}))).length&&t.channel.unsubscribe("mysql",e.subscriber)}})),jn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=P(),i=[];e.subscriber=function(e){i.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})}))},e.enable=function(n,r){n?(0===i.length&&t.channel.subscribe("redis",e.subscriber),i.push(r)):0===(i=i.filter((function(e){return e!=r}))).length&&t.channel.unsubscribe("redis",e.subscriber)}})),Hn=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=P(),i=[];e.subscriber=function(e){i.forEach((function(t){var i=e.data.query,n=i.preparable&&i.preparable.text||i.plan||i.text||"unknown query",r=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:n,name:n,duration:e.data.duration,success:r,resultCode:r?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})}))},e.enable=function(n,r){n?(0===i.length&&t.channel.subscribe("postgres",e.subscriber),i.push(r)):0===(i=i.filter((function(e){return e!=r}))).length&&t.channel.unsubscribe("postgres",e.subscriber)}})),zn=T(((e,t)=>{"use strict";var n=e&&e.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)n[r]=o[a];return n},r=i(3685),o=i(5687),a=b(),s=li(),l=si(),c=Un(),u=In(),d=ci(),p=ui(),h=ai(),_=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),h.IsInitialized&&(Gn().enable(!0,this._client),Vn().enable(e,this._client),qn().enable(e,this._client),jn().enable(e,this._client),Hn().enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var i=r.request,a=o.request,s=function(i,n){var r=!n[e.disableCollectionRequestOption]&&!i[e.alreadyAutoCollectedFlag];n.headers&&n.headers["user-agent"]&&-1!==n.headers["user-agent"].toString().indexOf("azsdk-js")&&(r=!1),i[e.alreadyAutoCollectedFlag]=!0,i&&n&&r&&(u.CorrelationContextManager.wrapEmitter(i),e.trackRequest(t._client,{options:n,request:i}))};r.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var a=i.call.apply(i,n([r,e],t));return s(a,e),a},o.request=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var r=a.call.apply(a,n([o,e],t));return s(r,e),r},r.get=function(e){for(var t,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(t=r.request).call.apply(t,n([r,e],i));return a.end(),a},o.get=function(e){for(var t,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var a=(t=o.request).call.apply(t,n([o,e],i));return a.end(),a}},e.trackRequest=function(t,i){if(i.options&&i.request&&t){var n,r,o=new c(i.options,i.request),h=u.CorrelationContextManager.getCurrentContext();if(h&&h.operation&&h.operation.traceparent&&p.isValidTraceId(h.operation.traceparent.traceId)?(h.operation.traceparent.updateSpanId(),n=h.operation.traceparent.getBackCompatRequestId()):d.w3cEnabled?(r=(g=new p).toString(),n=g.getBackCompatRequestId()):n=h&&h.operation&&h.operation.parentId+e.requestNumber+++".",s.canIncludeCorrelationHeader(t,o.getUrl())&&i.request.getHeader&&i.request.setHeader&&t.config&&t.config.correlationId){var _=i.request.getHeader(l.requestContextHeader);try{s.safeIncludeCorrelationHeader(t,i.request,_)}catch(e){a.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(h&&h.operation)try{if(i.request.setHeader(l.requestIdHeader,n),t.config.ignoreLegacyHeaders||(i.request.setHeader(l.parentIdHeader,h.operation.id),i.request.setHeader(l.rootIdHeader,n)),r||h.operation.traceparent)i.request.setHeader(l.traceparentHeader,r||h.operation.traceparent.toString());else if(d.w3cEnabled){var g=(new p).toString();i.request.setHeader(l.traceparentHeader,g)}if(h.operation.tracestate){var m=h.operation.tracestate.toString();m&&i.request.setHeader(l.traceStateHeader,m)}var S=h.customProperties.serializeToHeader();S&&i.request.setHeader(l.correlationContextHeader,S)}catch(e){a.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}i.request.on&&(i.request.on("response",(function(e){o.onResponse(e);var r=o.getDependencyTelemetry(i,n);r.contextObjects=r.contextObjects||{},r.contextObjects["http.RequestOptions"]=i.options,r.contextObjects["http.ClientRequest"]=i.request,r.contextObjects["http.ClientResponse"]=e,t.trackDependency(r)})),i.request.on("error",(function(e){o.onError(e);var r=o.getDependencyTelemetry(i,n);r.contextObjects=r.contextObjects||{},r.contextObjects["http.RequestOptions"]=i.options,r.contextObjects["http.ClientRequest"]=i.request,r.contextObjects.Error=e,t.trackDependency(r)})),i.request.on("abort",(function(){o.onError(new Error);var e=o.getDependencyTelemetry(i,n);e.contextObjects=e.contextObjects||{},e.contextObjects["http.RequestOptions"]=i.options,e.contextObjects["http.ClientRequest"]=i.request,t.trackDependency(e)})))}else a.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!i.options,!i.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=_})),Wn=T(((e,t)=>{"use strict";var n=i(2037),r=Mn(),o=li(),a=kn(),s=zn(),l=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(e,t){var i=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval((function(){return i.trackHeartBeat(t,(function(){}))}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(e,t){var i=this,o=!1,s={},l=a.sdkVersion;s.sdk=l,s.osType=n.type(),process.env.WEBSITE_SITE_NAME?(s.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",s.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",s.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?s.azfunction_appId=process.env.WEBSITE_HOSTNAME:e&&(void 0===this._isVM?(o=!0,this._getAzureComputeMetadata(e,(function(){i._isVM&&Object.keys(i._vmData).length>0&&(s.azInst_vmId=i._vmData.vmId||"",s.azInst_subscriptionId=i._vmData.subscriptionId||"",s.azInst_osType=i._vmData.osType||"",i._azInst_vmId=i._vmData.vmId||"",i._azInst_subscriptionId=i._vmData.subscriptionId||"",i._azInst_osType=i._vmData.osType||""),i._client.trackMetric({name:r.HeartBeatMetricName,value:0,properties:s}),t()}))):this._isVM&&(s.azInst_vmId=this._azInst_vmId,s.azInst_subscriptionId=this._azInst_subscriptionId,s.azInst_osType=this._azInst_osType)),o||(this._client.trackMetric({name:r.HeartBeatMetricName,value:0,properties:s}),t())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(e,t){var i,n=this,r=((i={method:"GET"})[s.disableCollectionRequestOption]=!0,i.headers={Metadata:"True"},i),a=o.makeRequest(e,"http://169.254.169.254/metadata/instance/compute?api-version=2017-12-01&format=json",r,(function(e){if(200===e.statusCode){n._isVM=!0;var i="";e.on("data",(function(e){i+=e})),e.on("end",(function(){n._vmData=n._isJSON(i)?JSON.parse(i):{},t()}))}else t()}));a&&(a.on("error",(function(e){e&&e.message&&e.message.indexOf("ENETUNREACH")>-1&&(n._isVM=!1),t()})),a.end())},e.prototype._isJSON=function(e){try{return JSON.parse(e)&&!!e}catch{return!1}},e}();t.exports=l})),Kn=T(((e,t)=>{"use strict";var n=i(3685),r=i(5687),o=b(),a=li(),s=si(),l=rn(),c=In(),u=Ln(),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var i=function(i){if(i){if("function"!=typeof i)throw new Error("onRequest handler must be a function");return function(n,r){c.CorrelationContextManager.wrapEmitter(n),c.CorrelationContextManager.wrapEmitter(r);var o=n&&!n[e.alreadyAutoCollectedFlag];if(n&&o){var a=new l(n),s=t._generateCorrelationContext(a);c.CorrelationContextManager.runWithContext(s,(function(){t._isEnabled&&(n[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:n,response:r},a)),"function"==typeof i&&i(n,r)}))}else"function"==typeof i&&i(n,r)}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,n){switch(e){case"request":case"checkContinue":return t(e,i(n));default:return t(e,n)}},e.on=e.addListener},a=n.createServer;n.createServer=function(e,t){if(t&&"function"==typeof t){var n=a(e,i(t));return o(n),n}return n=a(i(e)),o(n),n};var s=r.createServer;r.createServer=function(e,t){var n=s(e,i(t));return o(n),n}},e.trackRequestSync=function(t,i){if(i.request&&i.response&&t){e.addResponseCorrelationIdHeader(t,i.response);var n=c.CorrelationContextManager.getCurrentContext(),r=new l(i.request,n&&n.operation.parentId);n&&(n.operation.id=r.getOperationId(t.context.tags)||n.operation.id,n.operation.name=r.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=r.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(r.getCorrelationContextHeader())),e.endRequest(t,r,i,i.duration,i.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!i.request,!i.response,!t)},e.trackRequest=function(t,i,n){if(i.request&&i.response&&t){var r=c.CorrelationContextManager.getCurrentContext(),s=n||new l(i.request,r&&r.operation.parentId);a.canIncludeCorrelationHeader(t,s.getUrl())&&e.addResponseCorrelationIdHeader(t,i.response),r&&!n&&(r.operation.id=s.getOperationId(t.context.tags)||r.operation.id,r.operation.name=s.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=s.getOperationParentId(t.context.tags)||r.operation.parentId,r.customProperties.addHeaderData(s.getCorrelationContextHeader())),i.response.once&&i.response.once("finish",(function(){e.endRequest(t,s,i,null,null)})),i.request.on&&i.request.on("error",(function(n){e.endRequest(t,s,i,null,n)})),i.request.on&&i.request.on("aborted",(function(){e.endRequest(t,s,i,null,"The request has been aborted and the network socket has closed.")}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!i.request,!i.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var i=t.getHeader(s.requestContextHeader);a.safeIncludeCorrelationHeader(e,t,i)}},e.endRequest=function(e,t,i,n,r){r?t.onError(r,n):t.onResponse(i.response,n);var o=t.getRequestTelemetry(i);if(o.tagOverrides=t.getRequestTags(e.context.tags),i.tagOverrides)for(var a in i.tagOverrides)o.tagOverrides[a]=i.tagOverrides[a];var s=t.getLegacyRootId();s&&(o.properties.ai_legacyRootId=s),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=i.request,o.contextObjects["http.ServerResponse"]=i.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();t.exports=d})),Qn=T(((e,t)=>{"use strict";var n=e&&e.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},r=i(2037),o=tn(),a=Mn(),s=li(),l=b(),c=s.w3cTraceId(),u=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,i,n){var o=r&&"function"==typeof r.hostname&&r.hostname()||"Unknown",a=n.tags&&n.keys&&n.keys.cloudRoleInstance&&n.tags[n.keys.cloudRoleInstance]||o,s=n.tags&&n.keys&&n.keys.cloudRole&&n.tags[n.keys.cloudRole]||null;return{Documents:t.length>0?t:null,InstrumentationKey:i.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:n.tags[n.keys.internalSdkVersion],StreamId:c,MachineName:o,Instance:a,RoleName:s}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var i=e.createQuickPulseDocument(t),r=t.data.baseData.name;return n(n({},i),{Name:r})},e.createQuickPulseTraceDocument=function(t){var i=e.createQuickPulseDocument(t),r=t.data.baseData.severityLevel||0;return n(n({},i),{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[r]})},e.createQuickPulseExceptionDocument=function(t){var i=e.createQuickPulseDocument(t),r=t.data.baseData.exceptions,o="",a="",s="";return r&&r.length>0&&(r[0].parsedStack&&r[0].parsedStack.length>0?r[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):r[0].stack&&r[0].stack.length>0&&(o=r[0].stack),a=r[0].message,s=r[0].typeName),n(n({},i),{Exception:o,ExceptionMessage:a,ExceptionType:s})},e.createQuickPulseRequestDocument=function(t){var i=e.createQuickPulseDocument(t),r=t.data.baseData;return n(n({},i),{Name:r.name,Success:r.success,Duration:r.duration,ResponseCode:r.responseCode,OperationName:r.name})},e.createQuickPulseDependencyDocument=function(t){var i=e.createQuickPulseDocument(t),r=t.data.baseData;return n(n({},i),{Name:r.name,Target:r.target,Success:r.success,Duration:r.duration,ResultCode:r.resultCode,CommandName:r.data,OperationName:i.OperationId,DependencyTypeName:r.type})},e.createQuickPulseDocument=function(t){var i,n;return t.data.baseType?(n=a.TelemetryTypeStringToQuickPulseType[t.data.baseType],i=a.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):l.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:i,__type:n,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],i=e.data.baseData.measurements||{};for(var n in i)if(i.hasOwnProperty(n)){var r={key:n,value:i[n]};t.push(r)}var o=e.data.baseData.properties||{};for(var n in o)o.hasOwnProperty(n)&&(r={key:n,value:o[n]},t.push(r));return t},e.keys=new o.ContextTagKeys,e}();t.exports=u})),Yn=T(((e,t)=>{"use strict";t.exports={getTransmissionTime:function(){return 1e4*(Date.now()+621355968e5)}}})),$n=T(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=i(5687),a=zn(),s=b(),l=Yn(),c=li(),u="x-ms-qps-service-polling-interval-hint",d="x-ms-qps-service-endpoint-redirect",p=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t,i){var n=[{name:"x-ms-qps-stream-id",value:e.StreamId},{name:"x-ms-qps-machine-name",value:e.MachineName},{name:"x-ms-qps-role-name",value:e.RoleName},{name:"x-ms-qps-instance-name",value:e.Instance},{name:"x-ms-qps-invariant-version",value:e.InvariantVersion.toString()}];this._submitData(e,t,i,"ping",n)},e.prototype.post=function(e,t,i){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,this._submitData([e],t,i,"post")];case 1:return n.sent(),[2]}}))}))},e.prototype._submitData=function(e,t,i,s,p){return n(this,void 0,void 0,(function(){var n,h,_,g,m,S=this;return r(this,(function(r){return n=JSON.stringify(e),(g={})[a.disableCollectionRequestOption]=!0,g.host=t&&t.length>0?t:this._config.quickPulseHost,g.method="POST",g.path="/QuickPulseService.svc/"+s+"?ikey="+this._config.instrumentationKey,g.headers=((m={Expect:"100-continue"})["x-ms-qps-transmission-time"]=l.getTransmissionTime(),m["Content-Type"]="application/json",m["Content-Length"]=Buffer.byteLength(n),m),h=g,p&&p.length>0&&p.forEach((function(e){return h.headers[e.name]=e.value})),this._config.httpsAgent?h.agent=this._config.httpsAgent:h.agent=c.tlsRestrictedAgent,(_=o.request(h,(function(e){if(200==e.statusCode){var t="true"===e.headers["x-ms-qps-subscribed"],n=e.headers[d]?e.headers[d].toString():null,r=e.headers[u]?parseInt(e.headers[u].toString()):null;S._consecutiveErrors=0,i(t,e,n,r)}else S._onError("StatusCode:"+e.statusCode+" StatusMessage:"+e.statusMessage),i()}))).on("error",(function(e){S._onError(e),i()})),_.write(n),_.end(),[2]}))}))},e.prototype._onError=function(t){this._consecutiveErrors++;var i="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(i="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",s.warn(e.TAG,i,t)):s.info(e.TAG,i,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();t.exports=p})),Zn=T(((e,t)=>{"use strict";var i=e&&e.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},r=b(),o=Qn(),a=$n(),s=Mn(),l=kn(),c=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=t||new l,this._sender=new a(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=o.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,i=e.count||1,n=s.PerformanceToQuickPulseCounter[e.name];n&&(this._metrics[n]?(this._metrics[n].Value=(this._metrics[n].Value*this._metrics[n].Weight+t*i)/(this._metrics[n].Weight+i),this._metrics[n].Weight+=i):(this._metrics[n]=o.createQuickPulseMetric(e),this._metrics[n].Name=n,this._metrics[n].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return i(this,void 0,void 0,(function(){var t,i,r,a,s=this;return n(this,(function(n){switch(n.label){case 0:return t=Object.keys(this._metrics).map((function(e){return s._metrics[e]})),i=o.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(i)]:[3,2];case 1:return n.sent(),[3,3];case 2:this._ping(i),n.label=3;case 3:return r=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,a=this._isCollectingData?e.POST_INTERVAL:r,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,a=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(a=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),a),this._handle.unref(),[2]}}))}))},e.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return t.sent(),[2]}}))}))},e.prototype._quickPulseDone=function(e,t,i,n){null!=e?(this._isCollectingData!==e&&(r.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,i&&i.length>0&&(this._redirectedHost=i,r.info("Redirecting endpoint to: ",i)),n&&n>0&&(this._pollingIntervalHint=n),t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();t.exports=c})),Xn=T(((e,t)=>{"use strict";var i=Mn(),n=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,i){var n=i.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===n.length){var r=n[0].toLowerCase(),o=n[1];t[r]=o}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+r+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+r+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||i.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||i.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();t.exports=n})),Jn=T(((e,t)=>{"use strict";var n=ci(),r=Xn(),o=(b(),Mn()),a=i(7310),s=function(){function e(t){var i=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],s=r.parse(t),l=r.parse(n),c=!s.instrumentationkey&&Object.keys(s).length>0?null:t;this.instrumentationKey=s.instrumentationkey||c||l.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(s.ingestionendpoint||l.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return i.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=s.ingestionendpoint||l.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=s.liveendpoint||l.liveendpoint||process.env[e.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=a.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){n.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=n.correlationIdPrefix,n.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();t.exports=s})),er=T((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var n=Jn(),r=kn(),o=b(),a=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,n,r){var a=this;if(void 0===n&&(n={}),void 0===r&&(r=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var s=i(9166);e._emitter=new s,e._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=n,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,r),this._handle||(this._handle=setInterval((function(){return a._trackNativeMetrics()}),r),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var i=process.env[n.ENV_nativeMetricsDisableAll],r=process.env[n.ENV_nativeMetricsDisablers];if(i)return{isEnabled:!1,disabledMetrics:{}};if(r){var o=r.split(","),a={};if(o.length>0)for(var s=0,l=o;s<l.length;s++)a[l[s]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:t(t({},e),a)}:{isEnabled:e,disabledMetrics:a}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var i=e._emitter.getGCData();for(var n in i){var o=i[n].metrics,a=n+" Garbage Collection Duration",s=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:a,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var i=e._emitter.getLoopData().loopUsage;if(0!=i.count){var n=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:i.total,count:i.count,min:i.min,max:i.max,stdDev:n,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var e,t,i;if(!this._disabledMetrics.heap){var n=process.memoryUsage(),o=n.heapUsed,a=n.heapTotal,s=n.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:a,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:s-a,count:1,tagOverrides:(i={},i[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+r.sdkVersion,i)})}},e}();e.AutoCollectNativePerformance=a})),tr=T(((e,t)=>{"use strict";var i=b(),n=function(){function e(e,t,i,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=i,this._sender=n}return e.prototype.setUseDiskRetryCaching=function(e,t,i){this._sender.setDiskRetryMode(e,t,i)},e.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e)return void i.warn("Cannot send null/undefined telemetry");if(this._buffer.push(e),this._buffer.length>=this._getBatchSize())return void this.triggerSend(!1);!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(e,t){var i=this._buffer.length<1;i||(e?(this._sender.saveOnCrash(this._buffer),"function"==typeof t&&t("data saved on crash")):this._sender.send(this._buffer,t)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,i&&"function"==typeof t&&t("no data to send")},e}();t.exports=n})),ir=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0,e.azureRoleEnvironmentTelemetryProcessor=function(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}})),nr=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=tn();function i(e){var t=2147483647,i=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)i=((i<<5)+i|0)+e.charCodeAt(n)|0;return(i=i<=-2147483648?t:Math.abs(i))/t*100}e.samplingTelemetryProcessor=function(e,n){var r=e.sampleRate;return!!(null==r||r>=100||e.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(e.data.baseType))||(n.correlationContext&&n.correlationContext.operation?i(n.correlationContext.operation.id)<r:100*Math.random()<r)},e.getSamplingHashCode=i})),rr=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=Ln(),i=tn();e.performanceMetricsTelemetryProcessor=function(e,n){switch(n&&n.addDocument(e),e.data.baseType){case i.TelemetryTypeString.Exception:t.countException();break;case i.TelemetryTypeString.Request:var r=e.data.baseData;t.countRequest(r.duration,r.success);break;case i.TelemetryTypeString.Dependency:var o=e.data.baseData;t.countDependency(o.duration,o.success)}return!0}})),or=T((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var i=tn(),n=Bn(),r=tn();e.preAggregatedMetricsTelemetryProcessor=function(e,o){if(n.isEnabled())switch(e.data.baseType){case r.TelemetryTypeString.Exception:var a=e.data.baseData;a.properties=t(t({},a.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var s={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole]};n.countException(s);break;case r.TelemetryTypeString.Trace:var l=e.data.baseData;l.properties=t(t({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var c={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],traceSeverityLevel:i.SeverityLevel[l.severity]};n.countTrace(c);break;case r.TelemetryTypeString.Request:var u=e.data.baseData;u.properties=t(t({},u.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],requestSuccess:u.success,requestResultCode:u.responseCode};n.countRequest(u.duration,d);break;case r.TelemetryTypeString.Dependency:var p=e.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var h={cloudRoleInstance:e.tags[o.keys.cloudRoleInstance],cloudRoleName:e.tags[o.keys.cloudRole],operationSynthetic:e.tags[o.keys.operationSyntheticSource],dependencySuccess:p.success,dependencyType:p.type,dependencyTarget:p.target,dependencyResultCode:p.resultCode};n.countDependency(p.duration,h)}return!0}})),ar=T((e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),i=e&&e.__exportStar||function(e,i){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(i,n)&&t(i,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(ir(),e),i(nr(),e),i(rr(),e),i(or(),e)})),sr=T(((e,t)=>{"use strict";var n=e&&e.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=i(7147),a=i(2037),s=i(1017),l=i(9796),c=i(2081),u=b(),d=zn(),p=li(),h=function(){function e(t,i,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=i,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=s.join(a.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=o.existsSync(e.ICACLS_PATH)}catch{}e.OS_PROVIDES_FILE_PROTECTION||u.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,i,n){var r=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof i&&i>=0&&(this._resendInterval=Math.floor(i)),"number"==typeof n&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout((function(){r._fileCleanupTask()}),e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,i){return n(this,void 0,void 0,(function(){var n,o,a,s,c=this;return r(this,(function(r){return t&&(n=this._redirectedHost||this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},a="",t.forEach((function(e){var t=c._stringify(e);"string"==typeof t&&(a+=t+"\n")})),a.length>0&&(a=a.substring(0,a.length-1)),s=Buffer.from?Buffer.from(a):new Buffer(a),l.gzip(s,(function(r,a){var l=a;r?(u.warn(r),l=s,o.headers["Content-Length"]=s.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=a.length.toString()),u.info(e.TAG,o),o[d.disableCollectionRequestOption]=!0;var h=p.makeRequest(c._config,n,o,(function(n){n.setEncoding("utf-8");var r="";n.on("data",(function(e){r+=e})),n.on("end",(function(){if(c._numConsecutiveFailures=0,c._enableDiskRetryMode)if(200===n.statusCode)c._resendTimer||(c._resendTimer=setTimeout((function(){c._resendTimer=null,c._sendFirstFileOnDisk()}),c._resendInterval),c._resendTimer.unref());else if(c._isRetriable(n.statusCode))try{var o=JSON.parse(r),a=[];o.errors.forEach((function(e){c._isRetriable(e.statusCode)&&a.push(t[e.index])})),a.length>0&&c._storeToDisk(a)}catch{c._storeToDisk(t)}if(307===n.statusCode||308===n.statusCode)if(c._numConsecutiveRedirects++,c._numConsecutiveRedirects<10){var s=n.headers.location?n.headers.location.toString():null;s&&(c._redirectedHost=s,c.send(t,i))}else"function"==typeof i&&i("Error sending telemetry because of circular redirects.");else c._numConsecutiveRedirects=0,"function"==typeof i&&i(r),u.info(e.TAG,r),"function"==typeof c._onSuccess&&c._onSuccess(r)}))}));h.on("error",(function(n){if(c._numConsecutiveFailures++,!c._enableDiskRetryMode||c._numConsecutiveFailures>0&&c._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var r="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";c._enableDiskRetryMode&&(r="Ingestion endpoint could not be reached "+c._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(e.TAG,r,p.dumpObj(n))}else r="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",u.info(e.TAG,r,p.dumpObj(n));c._onErrorHelper(n),"function"==typeof i&&(n&&i(p.dumpObj(n)),i("Error sending telemetry")),c._enableDiskRetryMode&&c._storeToDisk(t)})),h.write(l),h.end()}))),[2]}))}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(e))},e.prototype._isRetriable=function(e){return 206===e||408===e||429===e||439===e||500===e||503===e},e.prototype._runICACLS=function(t,i){var n=c.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",(function(e){return i(e)})),n.on("close",(function(e,t){return i(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!c.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var i=c.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(i.error)throw i.error;if(0!==i.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var i=c.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";i.stdout.on("data",(function(e){return n+=e})),i.on("error",(function(e){return t(e,null)})),i.on("close",(function(i,r){return e.ACL_IDENTITY=n&&n.trim(),t(0===i?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(c.spawnSync){var t=c.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,i){var n=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?i(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(r,o){if(r)return e.ACLED_DIRECTORIES[t]=!1,i(r);n._runICACLS(n._getACLArguments(t,o),(function(n){return e.ACLED_DIRECTORIES[t]=!n,i(n)}))}))):i(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var i=this;o.lstat(e,(function(n,r){n&&"ENOENT"===n.code?o.mkdir(e,(function(n){n&&"EEXIST"!==n.code?t(n):i._applyACLRules(e,t)})):!n&&r.isDirectory()?i._applyACLRules(e,t):t(n||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){o.readdir(e,(function(i,n){if(i)return t(i,-1);var r=null,a=0,l=0;if(0!==n.length)for(var c=0;c<n.length;c++)o.stat(s.join(e,n[c]),(function(e,i){l++,e?r=e:i.isFile()&&(a+=i.size),l===n.length&&t(r,r?-1:a)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=o.readdirSync(e),i=0,n=0;n<t.length;n++)i+=o.statSync(s.join(e,t[n])).size;return i},e.prototype._storeToDisk=function(t){var i=this;u.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,(function(n){if(n)return u.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),void i._onErrorHelper(n);i._getShallowDirectorySize(i._tempDir,(function(n,r){if(n||r<0)return u.warn(e.TAG,"Error while checking directory size: "+(n&&n.message)),void i._onErrorHelper(n);if(r>i._maxBytesOnDisk)u.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);else{var a=(new Date).getTime()+".ai.json",l=s.join(i._tempDir,a);u.info(e.TAG,"saving data to disk at: "+l),o.writeFile(l,i._stringify(t),{mode:384},(function(e){return i._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){try{u.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var i=this._getShallowDirectorySizeSync(this._tempDir);if(i>this._maxBytesOnDisk)return void u.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+i);var n=(new Date).getTime()+".ai.json",r=s.join(this._tempDir,n);u.info(e.TAG,"saving data before crash to disk at: "+r),o.writeFileSync(r,t,{mode:384})}catch(t){u.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var e=this;o.exists(this._tempDir,(function(t){t&&o.readdir(e._tempDir,(function(t,i){if(t)e._onErrorHelper(t);else if((i=i.filter((function(e){return s.basename(e).indexOf(".ai.json")>-1}))).length>0){var n=i[0],r=s.join(e._tempDir,n);o.readFile(r,(function(t,i){t?e._onErrorHelper(t):o.unlink(r,(function(t){if(t)e._onErrorHelper(t);else try{var n=JSON.parse(i.toString());e.send(n)}catch(e){u.warn("Failed to read persisted file",e)}}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){u.warn("Failed to serialize payload",t,e)}},e.prototype._fileCleanupTask=function(){var t=this;o.exists(this._tempDir,(function(i){i&&o.readdir(t._tempDir,(function(i,n){i?t._onErrorHelper(i):(n=n.filter((function(e){return s.basename(e).indexOf(".ai.json")>-1}))).length>0&&n.forEach((function(i){var n=new Date(parseInt(i.split(".ai.json")[0]));if(new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>n){var r=s.join(t._tempDir,i);o.unlink(r,(function(e){e&&t._onErrorHelper(e)}))}}))}))}))},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=52428800,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=36e5,e.FILE_RETEMPTION_PERIOD=6048e5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===a.type(),e}();t.exports=h})),lr=T(((e,t)=>{"use strict";var i=tn(),n=li(),r=In(),o=function(){function e(){}return e.createEnvelope=function(t,r,o,a,s){var l=null;switch(r){case i.TelemetryType.Trace:l=e.createTraceData(t);break;case i.TelemetryType.Dependency:l=e.createDependencyData(t);break;case i.TelemetryType.Event:l=e.createEventData(t);break;case i.TelemetryType.Exception:l=e.createExceptionData(t);break;case i.TelemetryType.Request:l=e.createRequestData(t);break;case i.TelemetryType.Metric:l=e.createMetricData(t);break;case i.TelemetryType.Availability:l=e.createAvailabilityData(t);break;case i.TelemetryType.PageView:l=e.createPageViewData(t)}if(o&&i.domainSupportsProperties(l.baseData)){if(l&&l.baseData)if(l.baseData.properties)for(var c in o)l.baseData.properties[c]||(l.baseData.properties[c]=o[c]);else l.baseData.properties=o;l.baseData.properties=n.validateStringMap(l.baseData.properties)}var u=s&&s.instrumentationKey||"",d=new i.Envelope;return d.data=l,d.iKey=u,d.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+l.baseType.substr(0,l.baseType.length-4),d.tags=this.getTags(a,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=s?s.samplingPercentage:100,r===i.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new i.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=i.SeverityLevel.Information:t.severityLevel=e.severity;var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new i.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=n.w3cTraceId();var r=new i.Data;return r.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Dependency),r.baseData=t,r},e.createEventData=function(e){var t=new i.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new i.Data;return n.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new i.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=i.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var r=e.exception.stack,o=new i.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(r),o.hasFullStack=n.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var a=new i.Data;return a.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Exception),a.baseData=t,a},e.createRequestData=function(e){var t=new i.RequestData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=n.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var r=new i.Data;return r.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Request),r.baseData=t,r},e.createMetricData=function(e){var t=new i.MetricData;t.metrics=[];var n=new i.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=i.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var r=new i.Data;return r.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Metric),r.baseData=t,r},e.createAvailabilityData=function(e){var t=new i.AvailabilityData;e.id?t.id=e.id:t.id=n.w3cTraceId(),t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var r=new i.Data;return r.baseType=i.telemetryTypeToBaseType(i.TelemetryType.Availability),r.baseData=t,r},e.createPageViewData=function(e){var t=new i.PageViewData;t.name=e.name,t.duration=n.msToTimeSpan(e.duration),t.url=e.url,t.measurements=e.measurements,t.properties=e.properties;var r=new i.Data;return r.baseType=i.telemetryTypeToBaseType(i.TelemetryType.PageView),r.baseData=t,r},e.getTags=function(e,t){var i=r.CorrelationContextManager.getCurrentContext(),n={};if(e&&e.tags)for(var o in e.tags)n[o]=e.tags[o];if(t)for(var o in t)n[o]=t[o];return i&&(n[e.keys.operationId]=n[e.keys.operationId]||i.operation.id,n[e.keys.operationName]=n[e.keys.operationName]||i.operation.name,n[e.keys.operationParentId]=n[e.keys.operationParentId]||i.operation.parentId),n},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var i=e.split("\n");t=[];for(var n=0,r=0,o=0;o<=i.length;o++){var s=i[o];if(a.regex.test(s)){var l=new a(i[o],n++);r+=l.sizeInBytes,t.push(l)}}if(r>32768)for(var c=0,u=t.length-1,d=0,p=c,h=u;c<u;){if((d+=t[c].sizeInBytes+t[u].sizeInBytes)>32768){var _=h-p+1;t.splice(p,_);break}p=c,h=u,c++,u--}}return t},e}(),a=function(){function e(t,i){this.sizeInBytes=0,this.level=i,this.method="<no_method>",this.assembly=n.trim(t);var r=t.match(e.regex);r&&r.length>=5&&(this.method=n.trim(r[2])||this.method,this.fileName=n.trim(r[4])||"<no_filename>",this.line=parseInt(r[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();t.exports=o})),cr=T(((e,t)=>{"use strict";var n=i(7310),r=Jn(),o=kn(),a=tn(),s=tr(),l=ar(),c=In(),u=sr(),d=li(),p=b(),h=lr(),_=function(){function e(e){this._telemetryProcessors=[],this._enableAzureProperties=!1;var t=new r(e);this.config=t,this.context=new o,this.commonProperties={};var i=new u(this.config);this.channel=new s((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),i)}return e.prototype.trackAvailability=function(e){this.track(e,a.TelemetryType.Availability)},e.prototype.trackPageView=function(e){this.track(e,a.TelemetryType.PageView)},e.prototype.trackTrace=function(e){this.track(e,a.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,a.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,a.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,a.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,a.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=n.parse(e.data).host),this.track(e,a.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&a.telemetryTypeToBaseType(t)){var i=h.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(i.time=e.time.toISOString()),this._enableAzureProperties&&l.azureRoleEnvironmentTelemetryProcessor(i,this.context);var n=this.runTelemetryProcessors(i,e.contextObjects);n=n&&l.samplingTelemetryProcessor(i,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),l.preAggregatedMetricsTelemetryProcessor(i,this.context),n&&(l.performanceMetricsTelemetryProcessor(i,this.quickPulseClient),this.channel.send(i))}else p.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(e){this._enableAzureProperties=e},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var i=!0,n=this._telemetryProcessors.length;if(0===n)return i;(t=t||{}).correlationContext=c.CorrelationContextManager.getCurrentContext();for(var r=0;r<n;++r)try{var o=this._telemetryProcessors[r];if(o&&!1===o.apply(null,[e,t])){i=!1;break}}catch(t){i=!0,p.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return i&&(e&&e.tags&&(e.tags=d.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=d.validateStringMap(e.data.baseData.properties))),i},e}();t.exports=_})),ur=T(((e,t)=>{"use strict";var i,n=e&&e.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=cr(),o=Kn(),a=zn(),s=b(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?o.trackRequestSync(this,e):s.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&s.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?o.trackRequest(this,e):s.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?a.trackRequest(this,e):s.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(r);t.exports=l})),dr=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})})),pr=T((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t,i,n=In(),r=Nn(),o=Dn(),a=Ln(),s=Bn(),l=Wn(),c=zn(),u=Kn(),d=ci(),p=b(),h=Zn(),_=er();e.TelemetryClient=ur(),e.Contracts=tn(),e.azureFunctionsTypes=dr(),(i=t=e.DistributedTracingModes||(e.DistributedTracingModes={}))[i.AI=0]="AI",i[i.AI_AND_W3C=1]="AI_AND_W3C";var g,m,S,f,E,T,C,y,v,R,A,I=!0,w=!1,O=!0,N=!0,D=!0,M=!1,L=!0,P=!0,x=!0,B=!0,k=!1,U=!0,F=void 0,G=void 0,V=!1;function q(){return e.defaultClient?(V=!0,S.enable(I,w),f.enable(O),E.enable(N),T.enable(D),C.enable(M,e.defaultClient.config),y.enable(U,m),v.useAutoCorrelation(B,g),v.enable(L),R.enable(P),e.liveMetricsClient&&k&&e.liveMetricsClient.enable(k)):p.warn("Start cannot be called before setup"),j}e.setup=function(t){return e.defaultClient?p.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(t),S=new r(e.defaultClient),f=new o(e.defaultClient),E=new a(e.defaultClient),T=new s(e.defaultClient),C=new l(e.defaultClient),v=new u(e.defaultClient),R=new c(e.defaultClient),y||(y=new _.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(x,F,G),j},e.start=q,e.getCorrelationContext=function(){return B?n.CorrelationContextManager.getCurrentContext():null},e.startOperation=function(e,t){return n.CorrelationContextManager.startOperation(e,t)},e.wrapWithCorrelationContext=function(e,t){return n.CorrelationContextManager.wrapCallback(e,t)};var j=function(){function i(){}return i.setDistributedTracingMode=function(e){return d.w3cEnabled=e===t.AI_AND_W3C,i},i.setAutoCollectConsole=function(e,t){return void 0===t&&(t=!1),I=e,w=t,V&&S.enable(e,t),i},i.setAutoCollectExceptions=function(e){return O=e,V&&f.enable(e),i},i.setAutoCollectPerformance=function(e,t){void 0===t&&(t=!0),N=e;var n=_.AutoCollectNativePerformance.parseEnabled(t);return U=n.isEnabled,m=n.disabledMetrics,V&&(E.enable(e),y.enable(n.isEnabled,n.disabledMetrics)),i},i.setAutoCollectPreAggregatedMetrics=function(e){return D=e,V&&T.enable(e),i},i.setAutoCollectHeartbeat=function(t){return M=t,V&&C.enable(t,e.defaultClient.config),i},i.setAutoCollectRequests=function(e){return L=e,V&&v.enable(e),i},i.setAutoCollectDependencies=function(e){return P=e,V&&R.enable(e),i},i.setAutoDependencyCorrelation=function(e,t){return B=e,g=t,V&&v.useAutoCorrelation(e,t),i},i.setUseDiskRetryCaching=function(t,n,r){return x=t,F=n,G=r,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(t,n,r),i},i.setInternalLogging=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),p.enableDebug=e,p.disableWarnings=!t,i},i.setSendLiveMetrics=function(t){return void 0===t&&(t=!1),e.defaultClient?(!e.liveMetricsClient&&t?(e.liveMetricsClient=new h(e.defaultClient.config,null),A=new a(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(A),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(t),k=t,i):(p.warn("Live metrics client cannot be setup without the default client"),i)},i.start=q,i}();e.Configuration=j,e.dispose=function(){d.w3cEnabled=!0,e.defaultClient=null,V=!1,S&&S.dispose(),f&&f.dispose(),E&&E.dispose(),T&&T.dispose(),C&&C.dispose(),y&&y.dispose(),v&&v.dispose(),R&&R.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),k=!1,e.liveMetricsClient=void 0)}})),hr={};((e,t)=>{for(var i in t)l(e,i,{get:t[i],enumerable:!0})})(hr,{default:()=>Er}),e.exports=(a=hr,C(l({},"__esModule",{value:!0}),a));var _r=y(i(2037)),gr=y(i(9496)),mr=y(i(5687)),Sr=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){try{let e=this.vscodeAPI.env.telemetryConfiguration;return e.isUsageEnabled&&e.isErrorsEnabled&&e.isCrashEnabled?"on":e.isErrorsEnabled&&e.isCrashEnabled?"error":"off"}catch{return void 0!==this.vscodeAPI.env.isTelemetryEnabled?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}}static applyReplacements(e,t){for(let i of Object.keys(e))for(let n of t)n.lookup.test(i)&&(void 0!==n.replacementString?e[i]=n.replacementString:delete e[i])}static shouldUseOneDataSystemSDK(e){return 74===e.length&&"-"===e[32]&&"-"===e[41]&&"-"===e[46]&&"-"===e[51]&&"-"===e[56]&&"-"===e[69]}static getInstance(e){return Sr._instance||(Sr._instance=new Sr(e)),Sr._instance}},fr=class{constructor(e,t,i,n,r,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=i,this.osShim=n,this.vscodeAPI=r,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),void 0!==r.env.onDidChangeTelemetryEnabled?(this.disposables.push(r.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(r.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(r.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=Sr.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((i=>{0===e.indexOf(`${i}`)&&(t=i)})),t}get extension(){return void 0===this._extension&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let i={};for(let n in e)i[n]=t(n,e[n]);return i}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&this.vscodeAPI.env.remoteName&&"other"===this.cleanRemoteName(this.vscodeAPI.env.remoteName))}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,t){let i;if(null==e)return"";let n=[];""!==this.vscodeAPI.env.appRoot&&n.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let r=e;if(t){let t=[];for(let r of n)for(;(i=r.exec(e))&&i;)t.push([i.index,r.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,s=0;for(r="";(i=a.exec(e))&&i;)i[0]&&!o.test(i[0])&&t.every((([e,t])=>i.index<e||i.index>=t))&&(r+=e.substring(s,i.index)+"<REDACTED: user-file-path>",s=a.lastIndex);s<e.length&&(r+=e.substr(s))}for(let e of n)r=r.replace(e,"");return r}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t={};for(let i of Object.keys(e)){let n=e[i];if(!n)continue;let r=/@[a-zA-Z0-9-.]+/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(n.toLowerCase())?t[i]="<REDACTED: secret>":r.test(n)?t[i]="<REDACTED: email>":o.test(n)?t[i]="<REDACTED: token>":t[i]=n}return t}get telemetryLevel(){switch(Sr.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,t,i,n,r){if((this.userOptIn||r)&&""!==e){if(t=f(f({},t),this.getCommonProperties()),n){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},i=i??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:i})}}sendTelemetryEvent(e,t,i){this.internalSendTelemetryEvent(e,t,i,!0,!1)}sendRawTelemetryEvent(e,t,i){this.internalSendTelemetryEvent(e,t,i,!1,!1)}sendDangerousTelemetryEvent(e,t,i,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,t,i,n,!0)}internalSendTelemetryErrorEvent(e,t,i,n,r){if((this.shouldSendErrorTelemetry()||r)&&""!==e){if(t=f(f({},t),this.getCommonProperties()),n){let e=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));t=this.removePropertiesWithPossibleUserInfo(e)}t=t??{},i=i??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:t,measurements:i})}}sendTelemetryErrorEvent(e,t,i){this.internalSendTelemetryErrorEvent(e,t,i,!0,!1)}sendDangerousTelemetryErrorEvent(e,t,i,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,t,i,n,!0)}internalSendTelemetryException(e,t,i,n,r){if((this.shouldSendErrorTelemetry()||r)&&e){if(t=f(f({},t),this.getCommonProperties()),n){let i=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),t=this.removePropertiesWithPossibleUserInfo(i)}t=t??{},i=i??{},this.telemetryAppender.logException(e,{properties:t,measurements:i})}}sendTelemetryException(e,t,i){this.internalSendTelemetryException(e,t,i,!0,!1)}sendDangerousTelemetryException(e,t,i,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,t,i,n,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}},Er=class extends fr{constructor(e,t,i,n,r){let o=e=>(async(e,t)=>{let i;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let t=await Promise.resolve().then((()=>y(pr())));t.defaultClient?(i=new t.TelemetryClient(e),i.channel.setUseDiskRetryCaching(!0)):(t.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),i=t.defaultClient),gr&&gr.env&&(i.context.tags[i.context.keys.userId]=gr.env.machineId,i.context.tags[i.context.keys.sessionId]=gr.env.sessionId,i.context.tags[i.context.keys.cloudRole]=gr.env.appName,i.context.tags[i.context.keys.cloudRoleInstance]=gr.env.appName),e&&0===e.indexOf("AIF-")&&(i.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(e){return Promise.reject("Failed to initialize app insights!\n"+e.message)}return null!=t&&t.length&&function(e,t){e.addTelemetryProcessor((e=>(Array.isArray(e.tags)?e.tags.forEach((e=>Sr.applyReplacements(e,t))):e.tags&&Sr.applyReplacements(e.tags,t),e.data.baseData&&Sr.applyReplacements(e.data.baseData,t),!0)))}(i,t),{logEvent:(e,t)=>{try{null==i||i.trackEvent({name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{try{null==i||i.trackException({exception:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements})}catch(e){throw new Error("Failed to log exception to app insights!\n"+e.message)}},flush:async()=>{try{null==i||i.flush()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,r);Sr.shouldUseOneDataSystemSDK(i)&&(o=e=>(async(e,t,i)=>{let n=await(async(e,t,i)=>{let n=await Promise.resolve().then((()=>y(I()))),r=await Promise.resolve().then((()=>y(O()))),o=new n.AppInsightsCore,a=new r.PostChannel,s={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(i){s.extensionConfig={};let e={alwaysUseXhrOverride:!0,httpXHROverride:i};s.extensionConfig[a.identifier]=e}let l=t.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(s,[]),o.addTelemetryInitializer((e=>{!l||(e.ext=e.ext??{},e.ext.utc=e.ext.utc??{},e.ext.utc.flags=8462029)})),o})(e,t,i);return{logEvent:(e,t)=>{try{null==n||n.track({name:e,baseData:{name:e,properties:null==t?void 0:t.properties,measurements:null==t?void 0:t.measurements}})}catch(e){throw new Error("Failed to log event to app insights!\n"+e.message)}},logException:(e,t)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{null==n||n.unload()}catch(e){throw new Error("Failed to flush app insights!\n"+e.message)}}}})(e,gr,{sendPOST:(e,t)=>{let i={method:"POST",headers:E(f({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let n=mr.request(e.urlString,i,(e=>{e.on("data",(function(i){t(e.statusCode??200,e.headers,i.toString())})),e.on("error",(function(){t(0,{})}))}));n.write(e.data),n.end()}catch{t(0,{})}}}));let a=new class{constructor(e,t){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):2!==this._instantiationStatus&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):2!==this._instantiationStatus&&this._exceptionQueue.push({exception:e,data:t})}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){0===this._instantiationStatus&&(this._instantiationStatus=1,this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()})).catch((e=>{console.error(e),this._instantiationStatus=2})))}}(i,o);i&&(0===i.indexOf("AIF-")||Sr.shouldUseOneDataSystemSDK(i))&&(n=!0),super(e,t,a,{release:_r.release(),platform:_r.platform(),architecture:_r.arch()},gr,n)}}},5029:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5029,e.exports=t},3437:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3437,e.exports=t},8054:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=i(2361),o=n(i(5158)),a=n(i(6304)),s=o.default("agent-base");function l(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some((e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:")))}function c(e,t){return new c.Agent(e,t)}!function(e){class t extends r.EventEmitter{constructor(e,t){super();let i=t;"function"==typeof e?this.callback=e:e&&(i=e),this.timeout=null,i&&"number"==typeof i.timeout&&(this.timeout=i.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:l()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:l()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,i){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const i=Object.assign({},t);"boolean"!=typeof i.secureEndpoint&&(i.secureEndpoint=l()),null==i.host&&(i.host="localhost"),null==i.port&&(i.port=i.secureEndpoint?443:80),null==i.protocol&&(i.protocol=i.secureEndpoint?"https:":"http:"),i.host&&i.path&&delete i.path,delete i.agent,delete i.hostname,delete i._defaultAgent,delete i.defaultPort,delete i.createConnection,e._last=!0,e.shouldKeepAlive=!1;let n=!1,r=null;const o=i.timeout||this.timeout,c=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},u=()=>{r=null,n=!0;const e=new Error(`A "socket" was not created for HTTP request before ${o}ms`);e.code="ETIMEOUT",c(e)},d=e=>{n||(null!==r&&(clearTimeout(r),r=null),c(e))},p=t=>{if(n)return;if(null!=r&&(clearTimeout(r),r=null),o=t,Boolean(o)&&"function"==typeof o.addRequest)return s("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,i);var o;if(t)return t.once("free",(()=>{this.freeSocket(t,i)})),void e.onSocket(t);const a=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);c(a)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(s("Converting legacy callback function to promise"),this.promisifiedCallback=a.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof o&&o>0&&(r=setTimeout(u,o)),"port"in i&&"number"!=typeof i.port&&(i.port=Number(i.port));try{s("Resolving socket for %o request: %o",i.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,i)).then(p,d)}catch(e){Promise.reject(e).catch(d)}}else c(new Error("`callback` is not defined"))}freeSocket(e,t){s("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){s("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(c||(c={})),e.exports=c},6304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,i){return new Promise(((n,r)=>{e.call(this,t,i,((e,t)=>{e?r(e):n(t)}))}))}}},2047:(e,t,i)=>{var n=i(9353);e.exports=function(e,t){return new Promise((function(i,r){var o,a=t||{};function s(e){r(e||new Error("Aborted"))}function l(e,t){e.bail?s(e):o.retry(e)?a.onRetry&&a.onRetry(e,t):r(o.mainError())}"randomize"in a||(a.randomize=!0),(o=n.operation(a)).attempt((function(t){var n;try{n=e(s,t)}catch(e){return void l(e,t)}Promise.resolve(n).then(i).catch((function(e){l(e,t)}))}))}))}},2779:(e,t,i)=>{var n=i(8709).Buffer,r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function o(e){if(n.isBuffer(e))return e;var t="function"==typeof n.alloc&&"function"==typeof n.from;if("number"==typeof e)return t?n.alloc(e):new n(e);if("string"==typeof e)return t?n.from(e):new n(e);throw new Error("input must be buffer, number, or string, received "+typeof e)}function a(e,t){e=o(e),n.isBuffer(t)&&(t=t.readUInt32BE(0));for(var i=-1^~~t,a=0;a<e.length;a++)i=r[255&(i^e[a])]^i>>>8;return-1^i}function s(){return e=a.apply(null,arguments),(t=o(4)).writeInt32BE(e,0),t;var e,t}"undefined"!=typeof Int32Array&&(r=new Int32Array(r)),s.signed=function(){return a.apply(null,arguments)},s.unsigned=function(){return a.apply(null,arguments)>>>0},e.exports=s},9019:(e,t,i)=>{"use strict";const n=i(7147),r=i(1017),o=n.lchown?"lchown":"chown",a=n.lchownSync?"lchownSync":"chownSync",s=n.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),l=(e,t,i)=>{try{return n[a](e,t,i)}catch(e){if("ENOENT"!==e.code)throw e}},c=s?(e,t,i,r)=>o=>{o&&"EISDIR"===o.code?n.chown(e,t,i,r):r(o)}:(e,t,i,n)=>n,u=s?(e,t,i)=>{try{return l(e,t,i)}catch(r){if("EISDIR"!==r.code)throw r;((e,t,i)=>{try{return n.chownSync(e,t,i)}catch(e){if("ENOENT"!==e.code)throw e}})(e,t,i)}}:(e,t,i)=>l(e,t,i),d=process.version;let p=(e,t,i)=>n.readdir(e,t,i);/^v4\./.test(d)&&(p=(e,t,i)=>n.readdir(e,i));const h=(e,t,i,r)=>{n[o](e,t,i,c(e,t,i,(e=>{r(e&&"ENOENT"!==e.code?e:null)})))},_=(e,t,i,o,a)=>{if("string"==typeof t)return n.lstat(r.resolve(e,t),((n,r)=>{if(n)return a("ENOENT"!==n.code?n:null);r.name=t,_(e,r,i,o,a)}));if(t.isDirectory())g(r.resolve(e,t.name),i,o,(n=>{if(n)return a(n);const s=r.resolve(e,t.name);h(s,i,o,a)}));else{const n=r.resolve(e,t.name);h(n,i,o,a)}},g=(e,t,i,n)=>{p(e,{withFileTypes:!0},((r,o)=>{if(r){if("ENOENT"===r.code)return n();if("ENOTDIR"!==r.code&&"ENOTSUP"!==r.code)return n(r)}if(r||!o.length)return h(e,t,i,n);let a=o.length,s=null;const l=r=>{if(!s)return r?n(s=r):0==--a?h(e,t,i,n):void 0};o.forEach((n=>_(e,n,t,i,l)))}))},m=(e,t,i)=>{let o;try{o=((e,t)=>n.readdirSync(e,{withFileTypes:!0}))(e)}catch(n){if("ENOENT"===n.code)return;if("ENOTDIR"===n.code||"ENOTSUP"===n.code)return u(e,t,i);throw n}return o&&o.length&&o.forEach((o=>((e,t,i,o)=>{if("string"==typeof t)try{const i=n.lstatSync(r.resolve(e,t));i.name=t,t=i}catch(e){if("ENOENT"===e.code)return;throw e}t.isDirectory()&&m(r.resolve(e,t.name),i,o),u(r.resolve(e,t.name),i,o)})(e,o,t,i))),u(e,t,i)};e.exports=g,g.sync=m},9293:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.c2p=void 0;const n=i(9072);t.c2p={asConnectionParams:function(e,t){return{ownerUri:e,connection:{options:t.options}}},asExecutionPlanOptions:function(e){return{includeEstimatedExecutionPlanXml:e?e.displayEstimatedQueryPlan:void 0,includeActualExecutionPlanXml:e?e.displayActualQueryPlan:void 0}},asScriptingParams:function(e,t,i,r){let o={type:i.metadataTypeName,schema:i.schema,name:i.name,parentName:i.parentName,parentTypeName:i.parentTypeName},a=r.targetDatabaseEngineEdition,s=r.targetDatabaseEngineType,l=r.scriptCompatibilityOption,c={scriptCreateDrop:t===n.ScriptOperation.Delete?"ScriptDrop":t===n.ScriptOperation.Select?"ScriptSelect":"ScriptCreate",typeOfDataToScript:"SchemaOnly",scriptStatistics:"ScriptStatsNone",targetDatabaseEngineEdition:a||"SqlServerEnterpriseEdition",targetDatabaseEngineType:s||"SingleInstance",scriptCompatibilityOption:l||"Script140Compat"};return{connectionString:null,filePath:r.filePath,scriptingObjects:[o],scriptDestination:"ToEditor",includeObjectCriteria:null,excludeObjectCriteria:null,includeSchemas:null,excludeSchemas:null,includeTypes:null,excludeTypes:null,scriptOptions:c,connectionDetails:null,selectScript:null,ownerURI:e,operation:t}}}},5868:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseService=t.SqlOpsDataClient=t.FileBrowserFeature=t.TaskServicesFeature=t.ScriptingFeature=t.ObjectExplorerFeature=t.RestoreFeature=t.BackupFeature=t.AdminServicesFeature=t.MetadataFeature=t.QueryFeature=t.ConnectionFeature=t.CapabilitiesFeature=t.SqlOpsFeature=void 0;const n=i(3056),r=i(2097),o=i(2884),a=i(9072),s=i(9496),l=i(9293),c=i(632),u=i(4003);function d(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class p{constructor(e,t){this._client=e,this._message=t,this._providers=new Map,this._disposables=[]}get messages(){return this._message}register(e,t){if(r.array(this.messages)&&r.array(e)){let t=e.every((e=>!!this.messages.find((t=>t.method===e.method))));if(!t)throw new Error("Register called on wrong feature.")}else if(r.array(this.messages)&&!r.array(e)){if(!this.messages.find((t=>t.method===e.method)))throw new Error("Register called on wrong feature.")}else if(!r.array(this.messages)&&!r.array(e)&&this.messages.method!==e.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);let i=this.registerProvider(t.registerOptions);i&&this._providers.set(t.id,i)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach((e=>{e.dispose()})),this._disposables.forEach((e=>e.dispose())),this._providers.clear(),this._disposables=[]}registerNotificationEmitter(e){const t=new s.EventEmitter;return this._disposables.push(t),this._client.onNotification(e,(e=>{t.fire(e)})),t}}t.SqlOpsFeature=p;class h extends p{constructor(e){super(e,h.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"capabilities").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return a.dataprotocol.registerCapabilitiesServiceProvider({providerId:t.providerId,getServerCapabilities:e=>t.sendRequest(c.CapabiltiesDiscoveryRequest.type,e).then(t.sqlp2c.asServerCapabilities,(e=>(t.logFailedRequest(c.CapabiltiesDiscoveryRequest.type,e),Promise.resolve(void 0))))})}}t.CapabilitiesFeature=h,h.messagesTypes=[c.CapabiltiesDiscoveryRequest.type];class _ extends p{constructor(e){super(e,_.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"connection").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,i=this.registerNotificationEmitter(c.ConnectionCompleteNotification.type),n=this.registerNotificationEmitter(c.IntelliSenseReadyNotification.type),r=this.registerNotificationEmitter(c.ConnectionChangedNotification.type);return a.dataprotocol.onDidChangeLanguageFlavor((e=>{t.sendNotification(c.LanguageFlavorChangedNotification.type,e)})),a.dataprotocol.registerConnectionProvider({providerId:t.providerId,connect:(e,i)=>t.sendRequest(c.ConnectionRequest.type,t.sqlc2p.asConnectionParams(e,i)).then((e=>e),(e=>(t.logFailedRequest(c.ConnectionRequest.type,e),Promise.resolve(!1)))),disconnect:e=>{let i={ownerUri:e};return t.sendRequest(c.DisconnectRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(c.DisconnectRequest.type,e),Promise.resolve(!1))))},cancelConnect:e=>{let i={ownerUri:e};return t.sendRequest(c.CancelConnectRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(c.CancelConnectRequest.type,e),Promise.resolve(!1))))},changeDatabase:(e,i)=>{let n={ownerUri:e,newDatabase:i};return t.sendRequest(c.ChangeDatabaseRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.ChangeDatabaseRequest.type,e),Promise.resolve(!1))))},changePassword:(e,i,n)=>{let r={ownerUri:e,connection:{options:i.options},newPassword:n};return t.sendRequest(c.ChangePasswordRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(c.ChangePasswordRequest.type,e),Promise.resolve(!1))))},listDatabases:e=>{let i={ownerUri:e};return t.sendRequest(c.ListDatabasesRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(c.ListDatabasesRequest.type,e),Promise.resolve(void 0))))},getConnectionString:(e,i)=>{let n={ownerUri:e,includePassword:i};return t.sendRequest(c.GetConnectionStringRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.GetConnectionStringRequest.type,e),Promise.resolve(void 0))))},buildConnectionInfo:e=>t.sendRequest(c.BuildConnectionInfoRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.BuildConnectionInfoRequest.type,e),Promise.resolve(e)))),rebuildIntelliSenseCache:e=>{let i={ownerUri:e};return t.sendNotification(c.RebuildIntelliSenseNotification.type,i),Promise.resolve()},registerOnConnectionChanged:e=>r.event((t=>e({connectionUri:t.ownerUri,connection:t.connection}))),registerOnIntelliSenseCacheComplete:e=>n.event((t=>e(t.ownerUri))),registerOnConnectionComplete:e=>i.event(e)})}}t.ConnectionFeature=_,_.messagesTypes=[c.ConnectionRequest.type,c.ConnectionCompleteNotification.type,c.ConnectionChangedNotification.type,c.DisconnectRequest.type,c.CancelConnectRequest.type,c.ChangeDatabaseRequest.type,c.ListDatabasesRequest.type,c.GetConnectionStringRequest.type,c.LanguageFlavorChangedNotification.type,c.ChangePasswordRequest.type];class g extends p{constructor(e){super(e,g.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"query").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,i=this.registerNotificationEmitter(c.QueryExecuteCompleteNotification.type),n=this.registerNotificationEmitter(c.QueryExecuteBatchStartNotification.type),r=this.registerNotificationEmitter(c.QueryExecuteBatchCompleteNotification.type),o=this.registerNotificationEmitter(c.QueryExecuteResultSetAvailableNotification.type),s=this.registerNotificationEmitter(c.QueryExecuteResultSetUpdatedNotification.type),l=this.registerNotificationEmitter(c.QueryExecuteMessageNotification.type),u=this.registerNotificationEmitter(c.EditSessionReadyNotification.type);return a.dataprotocol.registerQueryProvider({providerId:t.providerId,cancelQuery:e=>{let i={ownerUri:e};return t.sendRequest(c.QueryCancelRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(c.QueryCancelRequest.type,e),Promise.reject(e))))},commitEdit:e=>{let i={ownerUri:e};return t.sendRequest(c.EditCommitRequest.type,i).then((e=>{}),(e=>(t.logFailedRequest(c.EditCommitRequest.type,e),Promise.reject(e))))},createRow:e=>{let i={ownerUri:e};return t.sendRequest(c.EditCreateRowRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(c.EditCreateRowRequest.type,e),Promise.reject(e))))},deleteRow:(e,i)=>{let n={ownerUri:e,rowId:i};return t.sendRequest(c.EditDeleteRowRequest.type,n).then((e=>{}),(e=>(t.logFailedRequest(c.EditDeleteRowRequest.type,e),Promise.reject(e))))},disposeEdit:e=>{let i={ownerUri:e};return t.sendRequest(c.EditDisposeRequest.type,i).then((e=>{}),(e=>(t.logFailedRequest(c.EditDisposeRequest.type,e),Promise.reject(e))))},disposeQuery:e=>{let i={ownerUri:e};return t.sendRequest(c.QueryDisposeRequest.type,i).then((e=>{}),(e=>(t.logFailedRequest(c.QueryDisposeRequest.type,e),Promise.reject(e))))},connectionUriChanged:(e,i)=>{let n={newOwnerUri:e,originalOwnerUri:i};return t.sendNotification(c.ConnectionUriChangedNotification.type,n),Promise.resolve()},getEditRows:e=>t.sendRequest(c.EditSubsetRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.EditSubsetRequest.type,e),Promise.reject(e)))),getQueryRows:e=>t.sendRequest(c.QueryExecuteSubsetRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.QueryExecuteSubsetRequest.type,e),Promise.reject(e)))),setQueryExecutionOptions:(e,i)=>{let n={ownerUri:e,options:i};return t.sendRequest(c.QueryExecutionOptionsRequest.type,n).then((e=>{}),(e=>(t.logFailedRequest(c.QueryExecutionOptionsRequest.type,e),Promise.reject(e))))},initializeEdit:(e,i,n,r,o,a)=>{let s={ownerUri:e,schemaName:i,objectName:n,objectType:r,filters:{LimitResults:o},queryString:a};return t.sendRequest(c.EditInitializeRequest.type,s).then((e=>{}),(e=>(t.logFailedRequest(c.EditInitializeRequest.type,e),Promise.reject(e))))},registerOnBatchComplete:e=>r.event(e),registerOnBatchStart:e=>n.event(e),registerOnEditSessionReady:e=>u.event((t=>e(t.ownerUri,t.success,t.message))),registerOnMessage:e=>l.event(e),registerOnQueryComplete:e=>i.event(e),registerOnResultSetAvailable:e=>o.event(e),registerOnResultSetUpdated:e=>s.event(e),revertCell:(e,i,n)=>{let r={ownerUri:e,rowId:i,columnId:n};return t.sendRequest(c.EditRevertCellRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(c.EditRevertCellRequest.type,e),Promise.reject(e))))},revertRow:(e,i)=>{let n={ownerUri:e,rowId:i};return t.sendRequest(c.EditRevertRowRequest.type,n).then((e=>{}),(e=>(t.logFailedRequest(c.EditRevertRowRequest.type,e),Promise.reject(e))))},runQuery:(e,i,n)=>{let r={ownerUri:e,querySelection:i,executionPlanOptions:t.sqlc2p.asExecutionPlanOptions(n)};return t.sendRequest(c.QueryExecuteRequest.type,r).then((e=>{}),(e=>(t.logFailedRequest(c.QueryExecuteRequest.type,e),Promise.reject(e))))},runQueryAndReturn:(e,i)=>{let n={ownerUri:e,queryString:i};return t.sendRequest(c.SimpleExecuteRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.SimpleExecuteRequest.type,e),Promise.reject(e))))},parseSyntax:(e,i)=>{let n={ownerUri:e,query:i};return t.sendRequest(c.SyntaxParseRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.SyntaxParseRequest.type,e),Promise.reject(e))))},runQueryStatement:(e,i,n)=>{let r={ownerUri:e,line:i,column:n};return t.sendRequest(c.QueryExecuteStatementRequest.type,r).then((e=>{}),(e=>(t.logFailedRequest(c.QueryExecuteStatementRequest.type,e),Promise.reject(e))))},runQueryString:(e,i)=>{let n={ownerUri:e,query:i};return t.sendRequest(c.QueryExecuteStringRequest.type,n).then((e=>{}),(e=>(t.logFailedRequest(c.QueryExecuteStringRequest.type,e),Promise.reject(e))))},saveResults:e=>{switch(e.resultFormat){case"csv":return t.sendRequest(c.SaveResultsAsCsvRequest.type,e).then(void 0,(e=>(t.logFailedRequest(c.SaveResultsAsCsvRequest.type,e),Promise.reject(e))));case"json":return t.sendRequest(c.SaveResultsAsJsonRequest.type,e).then(void 0,(e=>(t.logFailedRequest(c.SaveResultsAsJsonRequest.type,e),Promise.reject(e))));case"markdown":return t.sendRequest(c.SaveResultsAsMarkdownRequest.type,e).then(void 0,(e=>(t.logFailedRequest(c.SaveResultsAsMarkdownRequest.type,e),Promise.reject(e))));case"excel":return t.sendRequest(c.SaveResultsAsExcelRequest.type,e).then(void 0,(e=>(t.logFailedRequest(c.SaveResultsAsExcelRequest.type,e),Promise.reject(e))));case"xml":return t.sendRequest(c.SaveResultsAsXmlRequest.type,e).then(void 0,(e=>(t.logFailedRequest(c.SaveResultsAsXmlRequest.type,e),Promise.reject(e))));default:return Promise.reject("unsupported format")}},updateCell:(e,i,n,r)=>{let o={ownerUri:e,rowId:i,columnId:n,newValue:r};return t.sendRequest(c.EditUpdateCellRequest.type,o).then((e=>e),(e=>(t.logFailedRequest(c.EditUpdateCellRequest.type,e),Promise.reject(e))))},copyResults:e=>t.sendRequest(c.CopyResultsRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.CopyResultsRequest.type,e),Promise.reject(e))))})}}t.QueryFeature=g,g.messagesTypes=[c.QueryExecuteRequest.type,c.QueryCancelRequest.type,c.QueryExecuteStatementRequest.type,c.QueryExecuteStringRequest.type,c.SimpleExecuteRequest.type,c.QueryExecuteSubsetRequest.type,c.QueryDisposeRequest.type,c.ConnectionUriChangedNotification.type,c.QueryExecuteCompleteNotification.type,c.QueryExecuteBatchStartNotification.type,c.QueryExecuteBatchCompleteNotification.type,c.QueryExecuteResultSetAvailableNotification.type,c.QueryExecuteResultSetUpdatedNotification.type,c.QueryExecuteMessageNotification.type,c.QueryExecutionOptionsRequest.type,c.SaveResultsAsCsvRequest.type,c.SaveResultsAsJsonRequest.type,c.SaveResultsAsMarkdownRequest.type,c.SaveResultsAsExcelRequest.type,c.SaveResultsAsXmlRequest.type,c.CopyResultsRequest.type,c.EditCommitRequest.type,c.EditCreateRowRequest.type,c.EditDeleteRowRequest.type,c.EditDisposeRequest.type,c.EditInitializeRequest.type,c.EditRevertCellRequest.type,c.EditRevertRowRequest.type,c.EditUpdateCellRequest.type,c.EditSubsetRequest.type,c.EditSessionReadyNotification.type];class m extends p{constructor(e){super(e,m.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"metadata").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return a.dataprotocol.registerMetadataProvider({providerId:t.providerId,getDatabases:e=>{let i={ownerUri:e,includeDetails:!0};return t.sendRequest(c.ListDatabasesRequest.type,i).then((e=>e.databaseNames?e.databaseNames:e.databases),(e=>(t.logFailedRequest(c.ListDatabasesRequest.type,e),Promise.resolve(void 0))))},getMetadata:e=>{let i={ownerUri:e};return t.sendRequest(c.MetadataQueryRequest.type,i).then(t.sqlp2c.asProviderMetadata,(e=>(t.logFailedRequest(c.MetadataQueryRequest.type,e),Promise.resolve(void 0))))},getTableInfo:(e,i)=>{let n={objectName:i.name,ownerUri:e,schema:i.schema};return t.sendRequest(c.TableMetadataRequest.type,n).then((e=>e.columns),(e=>(t.logFailedRequest(c.TableMetadataRequest.type,e),Promise.resolve(void 0))))},getViewInfo:(e,i)=>{let n={objectName:i.name,ownerUri:e,schema:i.schema};return t.sendRequest(c.ViewMetadataRequest.type,n).then((e=>e.columns),(e=>(t.logFailedRequest(c.ViewMetadataRequest.type,e),Promise.resolve(void 0))))}})}}t.MetadataFeature=m,m.messagesTypes=[c.MetadataQueryRequest.type,c.ListDatabasesRequest.type,c.TableMetadataRequest.type,c.ViewMetadataRequest.type];class S extends p{constructor(e){super(e,S.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"adminServices").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return a.dataprotocol.registerAdminServicesProvider({providerId:t.providerId,createDatabase:(e,i)=>{let n={ownerUri:e,databaseInfo:i};return t.sendRequest(c.CreateDatabaseRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.CreateDatabaseRequest.type,e),Promise.resolve(void 0))))},createLogin:(e,i)=>{let n={ownerUri:e,loginInfo:i};return t.sendRequest(c.CreateLoginRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.CreateLoginRequest.type,e),Promise.resolve(void 0))))},getDatabaseInfo:e=>{let i={ownerUri:e};return t.sendRequest(c.GetDatabaseInfoRequest.type,i).then((e=>e.databaseInfo),(e=>(t.logFailedRequest(c.GetDatabaseInfoRequest.type,e),Promise.reject(e))))},getDefaultDatabaseInfo:e=>{let i={ownerUri:e};return t.sendRequest(c.DefaultDatabaseInfoRequest.type,i).then((e=>e.defaultDatabaseInfo),(e=>(t.logFailedRequest(c.DefaultDatabaseInfoRequest.type,e),Promise.resolve(void 0))))}})}}t.AdminServicesFeature=S,S.messagesTypes=[c.CreateDatabaseRequest.type,c.DefaultDatabaseInfoRequest.type,c.GetDatabaseInfoRequest.type,c.CreateLoginRequest.type];class f extends p{constructor(e){super(e,f.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"backup").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return a.dataprotocol.registerBackupProvider({providerId:t.providerId,backup:(e,i,n)=>{let r={ownerUri:e,backupInfo:i,taskExecutionMode:n};return t.sendRequest(c.BackupRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(c.BackupRequest.type,e),Promise.resolve(void 0))))},getBackupConfigInfo:e=>{let i={ownerUri:e};return t.sendRequest(c.BackupConfigInfoRequest.type,i).then((e=>e.backupConfigInfo),(e=>(t.logFailedRequest(c.BackupConfigInfoRequest.type,e),Promise.resolve(void 0))))}})}}t.BackupFeature=f,f.messagesTypes=[c.BackupRequest.type,c.BackupConfigInfoRequest.type];class E extends p{constructor(e){super(e,E.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"restore").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client;return a.dataprotocol.registerRestoreProvider({providerId:t.providerId,cancelRestorePlan:(e,i)=>{let n={options:i.options,ownerUri:e,taskExecutionMode:i.taskExecutionMode};return t.sendRequest(c.CancelRestorePlanRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.CancelRestorePlanRequest.type,e),Promise.resolve(void 0))))},getRestoreConfigInfo:e=>{let i={ownerUri:e};return t.sendRequest(c.RestoreConfigInfoRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(c.RestoreConfigInfoRequest.type,e),Promise.resolve(void 0))))},getRestorePlan:(e,i)=>{let n={options:i.options,ownerUri:e,taskExecutionMode:i.taskExecutionMode};return t.sendRequest(c.RestorePlanRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.RestorePlanRequest.type,e),Promise.resolve(void 0))))},restore:(e,i)=>{let n={options:i.options,ownerUri:e,taskExecutionMode:i.taskExecutionMode};return t.sendRequest(c.RestoreRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.RestoreRequest.type,e),Promise.resolve(void 0))))}})}}t.RestoreFeature=E,E.messagesTypes=[c.RestorePlanRequest.type,c.RestoreRequest.type,c.RestoreConfigInfoRequest.type,c.CancelRestorePlanRequest.type];class T extends p{constructor(e){super(e,T.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"objectExplorer").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,i=this.registerNotificationEmitter(c.ObjectExplorerCreateSessionCompleteNotification.type),n=this.registerNotificationEmitter(c.ObjectExplorerSessionDisconnectedNotification.type),r=this.registerNotificationEmitter(c.ObjectExplorerExpandCompleteNotification.type);return a.dataprotocol.registerObjectExplorerProvider({providerId:t.providerId,closeSession:e=>t.sendRequest(c.ObjectExplorerCloseSessionRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.ObjectExplorerCloseSessionRequest.type,e),Promise.resolve(void 0)))),createNewSession:e=>t.sendRequest(c.ObjectExplorerCreateSessionRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.ObjectExplorerCreateSessionRequest.type,e),Promise.resolve(void 0)))),expandNode:e=>t.sendRequest(c.ObjectExplorerExpandRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.ObjectExplorerExpandRequest.type,e),Promise.resolve(void 0)))),refreshNode:e=>t.sendRequest(c.ObjectExplorerRefreshRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.ObjectExplorerRefreshRequest.type,e),Promise.resolve(void 0)))),findNodes:e=>t.sendRequest(c.ObjectExplorerFindNodesRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.ObjectExplorerFindNodesRequest.type,e),Promise.resolve(void 0)))),registerOnExpandCompleted:e=>r.event(e),registerOnSessionCreated:e=>i.event(e),registerOnSessionDisconnected:e=>n.event(e)})}}t.ObjectExplorerFeature=T,T.messagesTypes=[c.ObjectExplorerCreateSessionRequest.type,c.ObjectExplorerExpandRequest.type,c.ObjectExplorerRefreshRequest.type,c.ObjectExplorerCloseSessionRequest.type,c.ObjectExplorerCreateSessionCompleteNotification.type,c.ObjectExplorerExpandCompleteNotification.type,c.ObjectExplorerFindNodesRequest.type];class C extends p{constructor(e){super(e,C.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"scripting").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,i=this.registerNotificationEmitter(c.ScriptingCompleteNotification.type);return a.dataprotocol.registerScriptingProvider({providerId:t.providerId,registerOnScriptingComplete:e=>i.event(e),scriptAsOperation:(e,i,n,r)=>t.sendRequest(c.ScriptingRequest.type,t.sqlc2p.asScriptingParams(e,i,n,r)).then((e=>e),(e=>(t.logFailedRequest(c.ScriptingRequest.type,e),Promise.reject(e))))})}}t.ScriptingFeature=C,C.messagesTypes=[c.ScriptingRequest.type,c.ScriptingCompleteNotification.type];class y extends p{constructor(e){super(e,y.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"taskServices").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,i=this.registerNotificationEmitter(c.TaskCreatedNotification.type),n=this.registerNotificationEmitter(c.TaskStatusChangedNotification.type);return a.dataprotocol.registerTaskServicesProvider({providerId:t.providerId,cancelTask:e=>t.sendRequest(c.CancelTaskRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.CancelTaskRequest.type,e),Promise.resolve(void 0)))),getAllTasks:e=>t.sendRequest(c.ListTasksRequest.type,e).then((e=>e),(e=>(t.logFailedRequest(c.ListTasksRequest.type,e),Promise.resolve(void 0)))),registerOnTaskCreated:e=>i.event(e),registerOnTaskStatusChanged:e=>n.event(e)})}}t.TaskServicesFeature=y,y.messagesTypes=[c.ListTasksRequest.type,c.CancelTaskRequest.type,c.TaskCreatedNotification.type,c.TaskStatusChangedNotification.type];class v extends p{constructor(e){super(e,v.messagesTypes)}fillClientCapabilities(e){d(d(e,"connection"),"fileBrowser").dynamicRegistration=!0}initialize(e){this.register(this.messages,{id:o.generateUuid(),registerOptions:void 0})}registerProvider(e){const t=this._client,i=this.registerNotificationEmitter(c.FileBrowserOpenedNotification.type),n=this.registerNotificationEmitter(c.FileBrowserExpandedNotification.type),r=this.registerNotificationEmitter(c.FileBrowserValidatedNotification.type);return a.dataprotocol.registerFileBrowserProvider({providerId:t.providerId,closeFileBrowser:e=>{let i={ownerUri:e};return t.sendRequest(c.FileBrowserCloseRequest.type,i).then((e=>e),(e=>(t.logFailedRequest(c.FileBrowserCloseRequest.type,e),Promise.resolve(void 0))))},expandFolderNode:(e,i)=>{let n={ownerUri:e,expandPath:i};return t.sendRequest(c.FileBrowserExpandRequest.type,n).then((e=>e),(e=>(t.logFailedRequest(c.FileBrowserExpandRequest.type,e),Promise.resolve(void 0))))},openFileBrowser:(e,i,n,r,o)=>{let a={ownerUri:e,expandPath:i,fileFilters:n,changeFilter:r,showFoldersOnly:o};return t.sendRequest(c.FileBrowserOpenRequest.type,a).then((e=>e),(e=>(t.logFailedRequest(c.FileBrowserOpenRequest.type,e),Promise.resolve(void 0))))},registerOnFileBrowserOpened:e=>i.event(e),registerOnFilePathsValidated:e=>r.event(e),registerOnFolderNodeExpanded:e=>n.event(e),validateFilePaths:(e,i,n)=>{let r={ownerUri:e,serviceType:i,selectedFiles:n};return t.sendRequest(c.FileBrowserValidateRequest.type,r).then((e=>e),(e=>(t.logFailedRequest(c.FileBrowserValidateRequest.type,e),Promise.resolve(void 0))))}})}}t.FileBrowserFeature=v,v.messagesTypes=[c.FileBrowserOpenRequest.type,c.FileBrowserOpenedNotification.type,c.FileBrowserExpandRequest.type,c.FileBrowserExpandedNotification.type,c.FileBrowserValidateRequest.type,c.FileBrowserValidatedNotification.type,c.FileBrowserCloseRequest.type];class R extends n.LanguageClient{constructor(e,t,i,n,o){let a;r.string(t)?(super(e,t,i,n,o),this._providerId=n.providerId,a=n.features):(super(e,t,i,n),this._providerId=i.providerId,a=i.features),this._sqlc2p=l.c2p,this._sqlp2c=u.p2c,this.registerSqlopsFeatures(a||R.defaultFeatures)}get sqlc2p(){return this._sqlc2p}get sqlp2c(){return this._sqlp2c}get providerId(){return this._providerId}registerSqlopsFeatures(e){e.map((e=>{this.registerFeature(new e(this))}))}}t.SqlOpsDataClient=R,R.defaultFeatures=[_,h,g,m,S,f,E,T,C,y,v],t.BaseService=class{constructor(e){this.client=e}runWithErrorHandling(e,t){return this.client.sendRequest(e,t).then((e=>e),(t=>(this.client.logFailedRequest(e,t),Promise.reject(t))))}}},632:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataQueryRequest=t.QueryExecutionOptionsRequest=t.QueryExecuteStringRequest=t.SimpleExecuteRequest=t.SyntaxParseRequest=t.CopyResultsRequest=t.SaveResultsAsXmlRequest=t.SaveResultsAsExcelRequest=t.SaveResultsAsMarkdownRequest=t.SaveResultsAsJsonRequest=t.SaveResultsAsCsvRequest=t.QueryExecuteStatementRequest=t.QueryExecuteSubsetRequest=t.QueryExecuteRequest=t.QueryExecuteMessageNotification=t.QueryExecuteResultSetUpdatedNotification=t.QueryExecuteResultSetAvailableNotification=t.QueryExecuteBatchCompleteNotification=t.QueryExecuteBatchStartNotification=t.QueryExecuteCompleteNotification=t.ConnectionUriChangedParams=t.ConnectionUriChangedNotification=t.QueryDisposeRequest=t.QueryCancelRequest=t.CapabiltiesDiscoveryRequest=t.CapabiltiesDiscoveryParams=t.IntelliSenseReadyNotification=t.ViewMetadataRequest=t.TableMetadataRequest=t.TableMetadataResult=t.TableMetadataParams=t.LanguageFlavorChangedNotification=t.BuildConnectionInfoRequest=t.GetConnectionStringRequest=t.GetConnectionStringParams=t.ListDatabasesRequest=t.ListDatabasesParams=t.ChangeDatabaseRequest=t.ChangeDatabaseParams=t.CancelConnectRequest=t.CancelConnectParams=t.DisconnectRequest=t.DisconnectParams=t.ChangePasswordRequest=t.ConnectionChangedNotification=t.ConnectionChangedParams=t.ConnectionCompleteNotification=t.ConnectionRequest=t.RebuildIntelliSenseParams=t.RebuildIntelliSenseNotification=void 0,t.FileBrowserCloseRequest=t.FileBrowserValidatedNotification=t.FileBrowserValidateRequest=t.FileBrowserExpandedNotification=t.FileBrowserExpandRequest=t.FileBrowserOpenedNotification=t.FileBrowserOpenRequest=t.RestoreConfigInfoRequest=t.CancelRestorePlanRequest=t.RestorePlanRequest=t.RestoreRequest=t.BackupConfigInfoRequest=t.BackupRequest=t.GetDatabaseInfoRequest=t.CreateLoginRequest=t.DefaultDatabaseInfoRequest=t.CreateDatabaseRequest=t.TaskCreatedNotification=t.TaskStatusChangedNotification=t.CancelTaskRequest=t.ListTasksRequest=t.ObjectExplorerExpandCompleteNotification=t.ObjectExplorerSessionDisconnectedNotification=t.ObjectExplorerCreateSessionCompleteNotification=t.ObjectExplorerFindNodesRequest=t.ObjectExplorerCloseSessionRequest=t.ObjectExplorerRefreshRequest=t.ObjectExplorerExpandRequest=t.ObjectExplorerCreateSessionRequest=t.EditSubsetRequest=t.EditUpdateCellRequest=t.EditSessionReadyNotification=t.EditRevertRowRequest=t.EditRevertCellRequest=t.EditInitializeRequest=t.EditDisposeRequest=t.EditDeleteRowRequest=t.EditCreateRowRequest=t.EditCommitRequest=t.ScriptingCompleteNotification=t.ScriptingRequest=void 0;const n=i(3056);(t.RebuildIntelliSenseNotification||(t.RebuildIntelliSenseNotification={})).type=new n.NotificationType("textDocument/rebuildIntelliSense"),t.RebuildIntelliSenseParams=class{},(t.ConnectionRequest||(t.ConnectionRequest={})).type=new n.RequestType("connection/connect"),(t.ConnectionCompleteNotification||(t.ConnectionCompleteNotification={})).type=new n.NotificationType("connection/complete"),t.ConnectionChangedParams=class{},(t.ConnectionChangedNotification||(t.ConnectionChangedNotification={})).type=new n.NotificationType("connection/connectionchanged"),(t.ChangePasswordRequest||(t.ChangePasswordRequest={})).type=new n.RequestType("connection/changepassword"),t.DisconnectParams=class{},(t.DisconnectRequest||(t.DisconnectRequest={})).type=new n.RequestType("connection/disconnect"),t.CancelConnectParams=class{},(t.CancelConnectRequest||(t.CancelConnectRequest={})).type=new n.RequestType("connection/cancelconnect"),t.ChangeDatabaseParams=class{},(t.ChangeDatabaseRequest||(t.ChangeDatabaseRequest={})).type=new n.RequestType("connection/changedatabase"),t.ListDatabasesParams=class{},(t.ListDatabasesRequest||(t.ListDatabasesRequest={})).type=new n.RequestType("connection/listdatabases"),t.GetConnectionStringParams=class{},(t.GetConnectionStringRequest||(t.GetConnectionStringRequest={})).type=new n.RequestType("connection/getconnectionstring"),(t.BuildConnectionInfoRequest||(t.BuildConnectionInfoRequest={})).type=new n.RequestType("connection/buildconnectioninfo"),(t.LanguageFlavorChangedNotification||(t.LanguageFlavorChangedNotification={})).type=new n.NotificationType("connection/languageflavorchanged"),t.TableMetadataParams=class{},t.TableMetadataResult=class{},(t.TableMetadataRequest||(t.TableMetadataRequest={})).type=new n.RequestType("metadata/table"),(t.ViewMetadataRequest||(t.ViewMetadataRequest={})).type=new n.RequestType("metadata/view"),(t.IntelliSenseReadyNotification||(t.IntelliSenseReadyNotification={})).type=new n.NotificationType("textDocument/intelliSenseReady"),t.CapabiltiesDiscoveryParams=class{},(t.CapabiltiesDiscoveryRequest||(t.CapabiltiesDiscoveryRequest={})).type=new n.RequestType("capabilities/list"),(t.QueryCancelRequest||(t.QueryCancelRequest={})).type=new n.RequestType("query/cancel"),(t.QueryDisposeRequest||(t.QueryDisposeRequest={})).type=new n.RequestType("query/dispose"),(t.ConnectionUriChangedNotification||(t.ConnectionUriChangedNotification={})).type=new n.NotificationType("query/connectionUriChanged"),t.ConnectionUriChangedParams=class{},(t.QueryExecuteCompleteNotification||(t.QueryExecuteCompleteNotification={})).type=new n.NotificationType("query/complete"),(t.QueryExecuteBatchStartNotification||(t.QueryExecuteBatchStartNotification={})).type=new n.NotificationType("query/batchStart"),(t.QueryExecuteBatchCompleteNotification||(t.QueryExecuteBatchCompleteNotification={})).type=new n.NotificationType("query/batchComplete"),(t.QueryExecuteResultSetAvailableNotification||(t.QueryExecuteResultSetAvailableNotification={})).type=new n.NotificationType("query/resultSetAvailable"),(t.QueryExecuteResultSetUpdatedNotification||(t.QueryExecuteResultSetUpdatedNotification={})).type=new n.NotificationType("query/resultSetUpdated"),(t.QueryExecuteMessageNotification||(t.QueryExecuteMessageNotification={})).type=new n.NotificationType("query/message"),(t.QueryExecuteRequest||(t.QueryExecuteRequest={})).type=new n.RequestType("query/executeDocumentSelection"),(t.QueryExecuteSubsetRequest||(t.QueryExecuteSubsetRequest={})).type=new n.RequestType("query/subset"),(t.QueryExecuteStatementRequest||(t.QueryExecuteStatementRequest={})).type=new n.RequestType("query/executedocumentstatement"),(t.SaveResultsAsCsvRequest||(t.SaveResultsAsCsvRequest={})).type=new n.RequestType("query/saveCsv"),(t.SaveResultsAsJsonRequest||(t.SaveResultsAsJsonRequest={})).type=new n.RequestType("query/saveJson"),(t.SaveResultsAsMarkdownRequest||(t.SaveResultsAsMarkdownRequest={})).type=new n.RequestType("query/saveMarkdown"),(t.SaveResultsAsExcelRequest||(t.SaveResultsAsExcelRequest={})).type=new n.RequestType("query/saveExcel"),(t.SaveResultsAsXmlRequest||(t.SaveResultsAsXmlRequest={})).type=new n.RequestType("query/saveXml"),(t.CopyResultsRequest||(t.CopyResultsRequest={})).type=new n.RequestType("query/copy"),(t.SyntaxParseRequest||(t.SyntaxParseRequest={})).type=new n.RequestType("query/syntaxparse"),(t.SimpleExecuteRequest||(t.SimpleExecuteRequest={})).type=new n.RequestType("query/simpleexecute"),(t.QueryExecuteStringRequest||(t.QueryExecuteStringRequest={})).type=new n.RequestType("query/executeString"),(t.QueryExecutionOptionsRequest||(t.QueryExecutionOptionsRequest={})).type=new n.RequestType("query/setexecutionoptions"),(t.MetadataQueryRequest||(t.MetadataQueryRequest={})).type=new n.RequestType("metadata/list"),(t.ScriptingRequest||(t.ScriptingRequest={})).type=new n.RequestType("scripting/script"),(t.ScriptingCompleteNotification||(t.ScriptingCompleteNotification={})).type=new n.NotificationType("scripting/scriptComplete"),(t.EditCommitRequest||(t.EditCommitRequest={})).type=new n.RequestType("edit/commit"),(t.EditCreateRowRequest||(t.EditCreateRowRequest={})).type=new n.RequestType("edit/createRow"),(t.EditDeleteRowRequest||(t.EditDeleteRowRequest={})).type=new n.RequestType("edit/deleteRow"),(t.EditDisposeRequest||(t.EditDisposeRequest={})).type=new n.RequestType("edit/dispose"),(t.EditInitializeRequest||(t.EditInitializeRequest={})).type=new n.RequestType("edit/initialize"),(t.EditRevertCellRequest||(t.EditRevertCellRequest={})).type=new n.RequestType("edit/revertCell"),(t.EditRevertRowRequest||(t.EditRevertRowRequest={})).type=new n.RequestType("edit/revertRow"),(t.EditSessionReadyNotification||(t.EditSessionReadyNotification={})).type=new n.NotificationType("edit/sessionReady"),(t.EditUpdateCellRequest||(t.EditUpdateCellRequest={})).type=new n.RequestType("edit/updateCell"),(t.EditSubsetRequest||(t.EditSubsetRequest={})).type=new n.RequestType("edit/subset"),(t.ObjectExplorerCreateSessionRequest||(t.ObjectExplorerCreateSessionRequest={})).type=new n.RequestType("objectexplorer/createsession"),(t.ObjectExplorerExpandRequest||(t.ObjectExplorerExpandRequest={})).type=new n.RequestType("objectexplorer/expand"),(t.ObjectExplorerRefreshRequest||(t.ObjectExplorerRefreshRequest={})).type=new n.RequestType("objectexplorer/refresh"),(t.ObjectExplorerCloseSessionRequest||(t.ObjectExplorerCloseSessionRequest={})).type=new n.RequestType("objectexplorer/closesession"),(t.ObjectExplorerFindNodesRequest||(t.ObjectExplorerFindNodesRequest={})).type=new n.RequestType("objectexplorer/findnodes"),(t.ObjectExplorerCreateSessionCompleteNotification||(t.ObjectExplorerCreateSessionCompleteNotification={})).type=new n.NotificationType("objectexplorer/sessioncreated"),(t.ObjectExplorerSessionDisconnectedNotification||(t.ObjectExplorerSessionDisconnectedNotification={})).type=new n.NotificationType("objectexplorer/sessiondisconnected"),(t.ObjectExplorerExpandCompleteNotification||(t.ObjectExplorerExpandCompleteNotification={})).type=new n.NotificationType("objectexplorer/expandCompleted"),(t.ListTasksRequest||(t.ListTasksRequest={})).type=new n.RequestType("tasks/listtasks"),(t.CancelTaskRequest||(t.CancelTaskRequest={})).type=new n.RequestType("tasks/canceltask"),(t.TaskStatusChangedNotification||(t.TaskStatusChangedNotification={})).type=new n.NotificationType("tasks/statuschanged"),(t.TaskCreatedNotification||(t.TaskCreatedNotification={})).type=new n.NotificationType("tasks/newtaskcreated"),(t.CreateDatabaseRequest||(t.CreateDatabaseRequest={})).type=new n.RequestType("admin/createdatabase"),(t.DefaultDatabaseInfoRequest||(t.DefaultDatabaseInfoRequest={})).type=new n.RequestType("admin/defaultdatabaseinfo"),(t.CreateLoginRequest||(t.CreateLoginRequest={})).type=new n.RequestType("admin/createlogin"),(t.GetDatabaseInfoRequest||(t.GetDatabaseInfoRequest={})).type=new n.RequestType("admin/getdatabaseinfo"),(t.BackupRequest||(t.BackupRequest={})).type=new n.RequestType("backup/backup"),(t.BackupConfigInfoRequest||(t.BackupConfigInfoRequest={})).type=new n.RequestType("backup/backupconfiginfo"),(t.RestoreRequest||(t.RestoreRequest={})).type=new n.RequestType("restore/restore"),(t.RestorePlanRequest||(t.RestorePlanRequest={})).type=new n.RequestType("restore/restoreplan"),(t.CancelRestorePlanRequest||(t.CancelRestorePlanRequest={})).type=new n.RequestType("restore/cancelrestoreplan"),(t.RestoreConfigInfoRequest||(t.RestoreConfigInfoRequest={})).type=new n.RequestType("restore/restoreconfiginfo"),(t.FileBrowserOpenRequest||(t.FileBrowserOpenRequest={})).type=new n.RequestType("filebrowser/open"),(t.FileBrowserOpenedNotification||(t.FileBrowserOpenedNotification={})).type=new n.NotificationType("filebrowser/opencomplete"),(t.FileBrowserExpandRequest||(t.FileBrowserExpandRequest={})).type=new n.RequestType("filebrowser/expand"),(t.FileBrowserExpandedNotification||(t.FileBrowserExpandedNotification={})).type=new n.NotificationType("filebrowser/expandcomplete"),(t.FileBrowserValidateRequest||(t.FileBrowserValidateRequest={})).type=new n.RequestType("filebrowser/validate"),(t.FileBrowserValidatedNotification||(t.FileBrowserValidatedNotification={})).type=new n.NotificationType("filebrowser/validatecomplete"),(t.FileBrowserCloseRequest||(t.FileBrowserCloseRequest={})).type=new n.RequestType("filebrowser/close")},4003:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.p2c=void 0;const n=i(9072);function r(e){return"string"===e?n.ServiceOptionType.string:"multistring"===e?n.ServiceOptionType.multistring:"password"===e?n.ServiceOptionType.password:"number"===e?n.ServiceOptionType.number:"boolean"===e?n.ServiceOptionType.boolean:"category"===e?n.ServiceOptionType.category:"object"===e?n.ServiceOptionType.object:n.ServiceOptionType.string}function o(e){return{name:e.name,displayName:e.displayName?e.displayName:e.name,description:e.description,groupName:e.groupName,defaultValue:e.defaultValue,categoryValues:e.categoryValues,isRequired:e.isRequired,isArray:e.isArray,objectType:e.objectType,valueType:r(e.valueType)}}t.p2c={asProviderMetadata:function(e){let t=[];if(!e.metadata||!e.metadata.length)return{objectMetadata:t};for(let i=0;i<e.metadata.length;++i){let r,o=e.metadata[i];r=o.metadataTypeName?o.metadataTypeName:o.metadataType===n.MetadataType.View?"View":o.metadataType===n.MetadataType.SProc?"StoredProcedure":o.metadataType===n.MetadataType.Function?"Function":"Table",t.push({metadataTypeName:r,metadataType:o.metadataType,name:o.name,schema:o.schema,urn:o.urn})}return{objectMetadata:t}},asServerCapabilities:function(e){let t={protocolVersion:e.capabilities.protocolVersion,providerName:e.capabilities.providerName,providerDisplayName:e.capabilities.providerDisplayName,connectionProvider:void 0,adminServicesProvider:void 0,features:[]};if(e.capabilities.adminServicesProvider){if(t.adminServicesProvider={databaseInfoOptions:new Array,databaseFileInfoOptions:new Array,fileGroupInfoOptions:new Array},e.capabilities.adminServicesProvider.databaseInfoOptions&&e.capabilities.adminServicesProvider.databaseInfoOptions.length>0)for(let i=0;i<e.capabilities.adminServicesProvider.databaseInfoOptions.length;++i){let n=o(e.capabilities.adminServicesProvider.databaseInfoOptions[i]);t.adminServicesProvider.databaseInfoOptions.push(n)}if(e.capabilities.adminServicesProvider.databaseFileInfoOptions&&e.capabilities.adminServicesProvider.databaseFileInfoOptions.length>0)for(let i=0;i<e.capabilities.adminServicesProvider.databaseFileInfoOptions.length;++i){let n=o(e.capabilities.adminServicesProvider.databaseFileInfoOptions[i]);t.adminServicesProvider.databaseFileInfoOptions.push(n)}if(e.capabilities.adminServicesProvider.fileGroupInfoOptions&&e.capabilities.adminServicesProvider.fileGroupInfoOptions.length>0)for(let i=0;i<e.capabilities.adminServicesProvider.fileGroupInfoOptions.length;++i){let n=o(e.capabilities.adminServicesProvider.fileGroupInfoOptions[i]);t.adminServicesProvider.fileGroupInfoOptions.push(n)}}if(e.capabilities.connectionProvider&&e.capabilities.connectionProvider.options&&e.capabilities.connectionProvider.options.length>0){t.connectionProvider={options:new Array};for(let i=0;i<e.capabilities.connectionProvider.options.length;++i){let o=e.capabilities.connectionProvider.options[i],a={name:o.name,displayName:o.displayName?o.displayName:o.name,description:o.description,groupName:o.groupName,defaultValue:o.defaultValue,categoryValues:o.categoryValues,isIdentity:o.isIdentity,isRequired:o.isRequired,valueType:r(o.valueType),specialValueType:void 0};"serverName"===o.specialValueType?a.specialValueType=n.ConnectionOptionSpecialType.serverName:"databaseName"===o.specialValueType?a.specialValueType=n.ConnectionOptionSpecialType.databaseName:"authType"===o.specialValueType?a.specialValueType=n.ConnectionOptionSpecialType.authType:"userName"===o.specialValueType?a.specialValueType=n.ConnectionOptionSpecialType.userName:"password"===o.specialValueType?a.specialValueType=n.ConnectionOptionSpecialType.password:"appName"===o.specialValueType&&(a.specialValueType=n.ConnectionOptionSpecialType.appName),t.connectionProvider.options.push(a)}}return e.capabilities.features&&e.capabilities.features.length>0&&e.capabilities.features.forEach((e=>{let i={enabled:e.enabled,featureName:e.featureName,optionsMetadata:[]};t.features.push(i),e.optionsMetadata&&e.optionsMetadata.forEach((e=>{i.optionsMetadata.push(o(e))}))})),t}}},1227:(e,t,i)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;t.splice(1,0,i,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(r=n))})),t.splice(r,0,i)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=i(2447)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,i)=>{e.exports=function(e){function t(e){let i,r,o,a=null;function s(...e){if(!s.enabled)return;const n=s,r=Number(new Date),o=r-(i||r);n.diff=o,n.prev=i,n.curr=r,i=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((i,r)=>{if("%%"===i)return"%";a++;const o=t.formatters[r];if("function"==typeof o){const t=e[a];i=o.call(n,t),e.splice(a,1),a--}return i})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==t.namespaces&&(r=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,i){const n=t(this.namespace+(void 0===i?":":i)+e);return n.log=this.log,n}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let i;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let i,n;for(i=0,n=t.skips.length;i<n;i++)if(t.skips[i].test(e))return!1;for(i=0,n=t.names.length;i<n;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((i=>{t[i]=e[i]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let i=0;for(let t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t}},5158:(e,t,i)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=i(1227):e.exports=i(39)},39:(e,t,i)=>{const n=i(6224),r=i(3837);t.init=function(e){e.inspectOpts={};const i=Object.keys(t.inspectOpts);for(let n=0;n<i.length;n++)e.inspectOpts[i[n]]=t.inspectOpts[i[n]]},t.log=function(...e){return process.stderr.write(r.format(...e)+"\n")},t.formatArgs=function(i){const{namespace:n,useColors:r}=this;if(r){const t=this.color,r="[3"+(t<8?t:"8;5;"+t),o=`  ${r};1m${n} [0m`;i[0]=o+i[0].split("\n").join("\n"+o),i.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else i[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+i[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=i(7013);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const i=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[i]=n,e}),{}),e.exports=i(2447)(t);const{formatters:o}=e.exports;o.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},o.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}},6387:(e,t,i)=>{var n;!function(r){var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=10;function s(){this._events={},this._conf&&l.call(this,this._conf)}function l(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==r?e.maxListeners:a,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=a}function c(e,t){var i="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(i+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var n=new Error(i);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,process.emitWarning(n)}else console.error(i),console.trace&&console.trace()}function u(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,l.call(this,e)}function d(e,t,i,n){if(!i)return[];var r,o,a,s,l,c,u,p=[],h=t.length,_=t[n],g=t[n+1];if(n===h&&i._listeners){if("function"==typeof i._listeners)return e&&e.push(i._listeners),[i];for(r=0,o=i._listeners.length;r<o;r++)e&&e.push(i._listeners[r]);return[i]}if("*"===_||"**"===_||i[_]){if("*"===_){for(a in i)"_listeners"!==a&&i.hasOwnProperty(a)&&(p=p.concat(d(e,t,i[a],n+1)));return p}if("**"===_){for(a in(u=n+1===h||n+2===h&&"*"===g)&&i._listeners&&(p=p.concat(d(e,t,i,h))),i)"_listeners"!==a&&i.hasOwnProperty(a)&&("*"===a||"**"===a?(i[a]._listeners&&!u&&(p=p.concat(d(e,t,i[a],h))),p=p.concat(d(e,t,i[a],n))):p=a===g?p.concat(d(e,t,i[a],n+2)):p.concat(d(e,t,i[a],n)));return p}p=p.concat(d(e,t,i[_],n+1))}if((s=i["*"])&&d(e,t,s,n+1),l=i["**"])if(n<h)for(a in l._listeners&&d(e,t,l,h),l)"_listeners"!==a&&l.hasOwnProperty(a)&&(a===g?d(e,t,l[a],n+2):a===_?d(e,t,l[a],n+1):((c={})[a]=l[a],d(e,t,{"**":c},n+1)));else l._listeners?d(e,t,l,h):l["*"]&&l["*"]._listeners&&d(e,t,l["*"],h);return p}function p(e,t){for(var i=0,n=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;i+1<n;i++)if("**"===e[i]&&"**"===e[i+1])return;for(var o=this.listenerTree,a=e.shift();a!==r;){if(o[a]||(o[a]={}),o=o[a],0===e.length)return o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(t),!o._listeners.warned&&this._maxListeners>0&&o._listeners.length>this._maxListeners&&(o._listeners.warned=!0,c.call(this,o._listeners.length,a))):o._listeners=t,!0;a=e.shift()}return!0}u.EventEmitter2=u,u.prototype.delimiter=".",u.prototype.setMaxListeners=function(e){e!==r&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},u.prototype.event="",u.prototype.once=function(e,t){return this._once(e,t,!1)},u.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},u.prototype._once=function(e,t,i){return this._many(e,1,t,i),this},u.prototype.many=function(e,t,i){return this._many(e,t,i,!1)},u.prototype.prependMany=function(e,t,i){return this._many(e,t,i,!0)},u.prototype._many=function(e,t,i,n){var r=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&r.off(e,o),i.apply(this,arguments)}return o._origin=i,this._on(e,o,n),r},u.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,i,n,r,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];for(n=0,i=o.length;n<i;n++)switch(this.event=e,a){case 1:o[n].call(this,e);break;case 2:o[n].call(this,e,arguments[1]);break;case 3:o[n].call(this,e,arguments[1],arguments[2]);break;default:o[n].apply(this,t)}}if(this.wildcard){o=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,l,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];for(n=0,i=o.length;n<i;n++)switch(this.event=e,a){case 1:o[n].call(this);break;case 2:o[n].call(this,arguments[1]);break;case 3:o[n].call(this,arguments[1],arguments[2]);break;default:o[n].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},u.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,i,n,r,o,a=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),r=1;r<l;r++)t[r]=arguments[r];for(n=0,i=this._all.length;n<i;n++)switch(this.event=e,l){case 1:a.push(this._all[n].call(this,e));break;case 2:a.push(this._all[n].call(this,e,arguments[1]));break;case 3:a.push(this._all[n].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[n].apply(this,t))}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,c,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,l){case 1:a.push(o.call(this));break;case 2:a.push(o.call(this,arguments[1]));break;case 3:a.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];a.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),l>3)for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];for(n=0,i=o.length;n<i;n++)switch(this.event=e,l){case 1:a.push(o[n].call(this));break;case 2:a.push(o[n].call(this,arguments[1]));break;case 3:a.push(o[n].call(this,arguments[1],arguments[2]));break;default:a.push(o[n].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},u.prototype.on=function(e,t){return this._on(e,t,!1)},u.prototype.prependListener=function(e,t){return this._on(e,t,!0)},u.prototype.onAny=function(e){return this._onAny(e,!1)},u.prototype.prependAny=function(e){return this._onAny(e,!0)},u.prototype.addListener=u.prototype.on,u.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},u.prototype._on=function(e,t,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(p.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},u.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var i,n=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();n=d.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;i=this._events[e],n.push({_listeners:i})}for(var s=0;s<n.length;s++){var l=n[s];if(i=l._listeners,o(i)){for(var c=-1,u=0,p=i.length;u<p;u++)if(i[u]===t||i[u].listener&&i[u].listener===t||i[u]._origin&&i[u]._origin===t){c=u;break}if(c<0)continue;return this.wildcard?l._listeners.splice(c,1):this._events[e].splice(c,1),0===i.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(i===t||i.listener&&i.listener===t||i._origin&&i._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(t!==r){var i=Object.keys(t);for(var n in i){var o=i[n],a=t[o];a instanceof Function||"object"!=typeof a||null===a||(Object.keys(a).length>0&&e(t[o]),0===Object.keys(a).length&&delete t[o])}}}(this.listenerTree),this},u.prototype.offAny=function(e){var t,i=0,n=0;if(e&&this._all&&this._all.length>0){for(i=0,n=(t=this._all).length;i<n;i++)if(e===t[i])return t.splice(i,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(i=0,n=t.length;i<n;i++)this.emit("removeListenerAny",t[i]);this._all=[]}return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(e){if(e===r)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),i=d.call(this,null,t,this.listenerTree,0),n=0;n<i.length;n++)i[n]._listeners=null;else this._events&&(this._events[e]=null);return this},u.prototype.listeners=function(e){if(this.wildcard){var t=[],i="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,i,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},u.prototype.eventNames=function(){return Object.keys(this._events)},u.prototype.listenerCount=function(e){return this.listeners(e).length},u.prototype.listenersAny=function(){return this._all?this._all:[]},(n=function(){return u}.call(t,i,t,e))===r||(e.exports=n)}()},8913:(e,t,i)=>{var n=i(7147),r=i(3837),o=i(2781),a=o.Readable,s=o.Writable,l=o.PassThrough,c=i(9916),u=i(2361).EventEmitter;function d(e,t){t=t||{},u.call(this),this.fd=e,this.pend=new c,this.pend.max=1,this.refCount=0,this.autoClose=!!t.autoClose}function p(e,t){t=t||{},a.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=t.end,this.pos=this.start,this.destroyed=!1}function h(e,t){t=t||{},s.call(this,t),this.context=e,this.context.ref(),this.start=t.start||0,this.endOffset=null==t.end?1/0:+t.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function _(e,t){u.call(this),t=t||{},this.refCount=0,this.buffer=e,this.maxChunkSize=t.maxChunkSize||Number.MAX_SAFE_INTEGER}t.createFromBuffer=function(e,t){return new _(e,t)},t.createFromFd=function(e,t){return new d(e,t)},t.BufferSlicer=_,t.FdSlicer=d,r.inherits(d,u),d.prototype.read=function(e,t,i,r,o){var a=this;a.pend.go((function(s){n.read(a.fd,e,t,i,r,(function(e,t,i){s(),o(e,t,i)}))}))},d.prototype.write=function(e,t,i,r,o){var a=this;a.pend.go((function(s){n.write(a.fd,e,t,i,r,(function(e,t,i){s(),o(e,t,i)}))}))},d.prototype.createReadStream=function(e){return new p(this,e)},d.prototype.createWriteStream=function(e){return new h(this,e)},d.prototype.ref=function(){this.refCount+=1},d.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.autoClose&&n.close(e.fd,(function(t){t?e.emit("error",t):e.emit("close")}))}},r.inherits(p,a),p.prototype._read=function(e){var t=this;if(!t.destroyed){var i=Math.min(t._readableState.highWaterMark,e);if(null!=t.endOffset&&(i=Math.min(i,t.endOffset-t.pos)),i<=0)return t.destroyed=!0,t.push(null),void t.context.unref();t.context.pend.go((function(e){if(t.destroyed)return e();var r=new Buffer(i);n.read(t.context.fd,r,0,i,t.pos,(function(i,n){i?t.destroy(i):0===n?(t.destroyed=!0,t.push(null),t.context.unref()):(t.pos+=n,t.push(r.slice(0,n))),e()}))}))}},p.prototype.destroy=function(e){this.destroyed||(e=e||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",e),this.context.unref())},r.inherits(h,s),h.prototype._write=function(e,t,i){var r=this;if(!r.destroyed){if(r.pos+e.length>r.endOffset){var o=new Error("maximum file length exceeded");return o.code="ETOOBIG",r.destroy(),void i(o)}r.context.pend.go((function(t){if(r.destroyed)return t();n.write(r.context.fd,e,0,e.length,r.pos,(function(e,n){e?(r.destroy(),t(),i(e)):(r.bytesWritten+=n,r.pos+=n,r.emit("progress"),t(),i())}))}))}},h.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},r.inherits(_,u),_.prototype.read=function(e,t,i,n,r){var o=n+i,a=o-this.buffer.length,s=a>0?a:i;this.buffer.copy(e,t,n,o),setImmediate((function(){r(null,s)}))},_.prototype.write=function(e,t,i,n,r){e.copy(this.buffer,n,t,t+i),setImmediate((function(){r(null,i,e)}))},_.prototype.createReadStream=function(e){var t=new l(e=e||{});t.destroyed=!1,t.start=e.start||0,t.endOffset=e.end,t.pos=t.endOffset||this.buffer.length;for(var i=this.buffer.slice(t.start,t.pos),n=0;;){var r=n+this.maxChunkSize;if(r>=i.length){n<i.length&&t.write(i.slice(n,i.length));break}t.write(i.slice(n,r)),n=r}return t.end(),t.destroy=function(){t.destroyed=!0},t},_.prototype.createWriteStream=function(e){var t=this,i=new s(e=e||{});return i.start=e.start||0,i.endOffset=null==e.end?this.buffer.length:+e.end,i.bytesWritten=0,i.pos=i.start,i.destroyed=!1,i._write=function(e,n,r){if(!i.destroyed){var o=i.pos+e.length;if(o>i.endOffset){var a=new Error("maximum file length exceeded");return a.code="ETOOBIG",i.destroyed=!0,void r(a)}e.copy(t.buffer,i.pos,0,e.length),i.bytesWritten+=e.length,i.pos=o,i.emit("progress"),r()}},i.destroy=function(){i.destroyed=!0},i},_.prototype.ref=function(){this.refCount+=1},_.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")}},292:(e,t,i)=>{"use strict";const n=i(5736),r=i(2361).EventEmitter,o=i(7147);let a=o.writev;if(!a){const e=process.binding("fs"),t=e.FSReqWrap||e.FSReqCallback;a=(i,n,r,o)=>{const a=new t;a.oncomplete=(e,t)=>o(e,t,n),e.writeBuffers(i,n,r,a)}}const s=Symbol("_autoClose"),l=Symbol("_close"),c=Symbol("_ended"),u=Symbol("_fd"),d=Symbol("_finished"),p=Symbol("_flags"),h=Symbol("_flush"),_=Symbol("_handleChunk"),g=Symbol("_makeBuf"),m=Symbol("_mode"),S=Symbol("_needDrain"),f=Symbol("_onerror"),E=Symbol("_onopen"),T=Symbol("_onread"),C=Symbol("_onwrite"),y=Symbol("_open"),v=Symbol("_path"),R=Symbol("_pos"),A=Symbol("_queue"),I=Symbol("_read"),w=Symbol("_readSize"),O=Symbol("_reading"),b=Symbol("_remain"),N=Symbol("_size"),D=Symbol("_write"),M=Symbol("_writing"),L=Symbol("_defaultFlag"),P=Symbol("_errored");class x extends n{constructor(e,t){if(super(t=t||{}),this.readable=!0,this.writable=!1,"string"!=typeof e)throw new TypeError("path must be a string");this[P]=!1,this[u]="number"==typeof t.fd?t.fd:null,this[v]=e,this[w]=t.readSize||16777216,this[O]=!1,this[N]="number"==typeof t.size?t.size:1/0,this[b]=this[N],this[s]="boolean"!=typeof t.autoClose||t.autoClose,"number"==typeof this[u]?this[I]():this[y]()}get fd(){return this[u]}get path(){return this[v]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[y](){o.open(this[v],"r",((e,t)=>this[E](e,t)))}[E](e,t){e?this[f](e):(this[u]=t,this.emit("open",t),this[I]())}[g](){return Buffer.allocUnsafe(Math.min(this[w],this[b]))}[I](){if(!this[O]){this[O]=!0;const e=this[g]();if(0===e.length)return process.nextTick((()=>this[T](null,0,e)));o.read(this[u],e,0,e.length,null,((e,t,i)=>this[T](e,t,i)))}}[T](e,t,i){this[O]=!1,e?this[f](e):this[_](t,i)&&this[I]()}[l](){if(this[s]&&"number"==typeof this[u]){const e=this[u];this[u]=null,o.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}[f](e){this[O]=!0,this[l](),this.emit("error",e)}[_](e,t){let i=!1;return this[b]-=e,e>0&&(i=super.write(e<t.length?t.slice(0,e):t)),(0===e||this[b]<=0)&&(i=!1,this[l](),super.end()),i}emit(e,t){switch(e){case"prefinish":case"finish":break;case"drain":"number"==typeof this[u]&&this[I]();break;case"error":if(this[P])return;return this[P]=!0,super.emit(e,t);default:return super.emit(e,t)}}}class B extends r{constructor(e,t){super(t=t||{}),this.readable=!1,this.writable=!0,this[P]=!1,this[M]=!1,this[c]=!1,this[S]=!1,this[A]=[],this[v]=e,this[u]="number"==typeof t.fd?t.fd:null,this[m]=void 0===t.mode?438:t.mode,this[R]="number"==typeof t.start?t.start:null,this[s]="boolean"!=typeof t.autoClose||t.autoClose;const i=null!==this[R]?"r+":"w";this[L]=void 0===t.flags,this[p]=this[L]?i:t.flags,null===this[u]&&this[y]()}emit(e,t){if("error"===e){if(this[P])return;this[P]=!0}return super.emit(e,t)}get fd(){return this[u]}get path(){return this[v]}[f](e){this[l](),this[M]=!0,this.emit("error",e)}[y](){o.open(this[v],this[p],this[m],((e,t)=>this[E](e,t)))}[E](e,t){this[L]&&"r+"===this[p]&&e&&"ENOENT"===e.code?(this[p]="w",this[y]()):e?this[f](e):(this[u]=t,this.emit("open",t),this[h]())}end(e,t){return e&&this.write(e,t),this[c]=!0,this[M]||this[A].length||"number"!=typeof this[u]||this[C](null,0),this}write(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),this[c]?(this.emit("error",new Error("write() after end()")),!1):null===this[u]||this[M]||this[A].length?(this[A].push(e),this[S]=!0,!1):(this[M]=!0,this[D](e),!0)}[D](e){o.write(this[u],e,0,e.length,this[R],((e,t)=>this[C](e,t)))}[C](e,t){e?this[f](e):(null!==this[R]&&(this[R]+=t),this[A].length?this[h]():(this[M]=!1,this[c]&&!this[d]?(this[d]=!0,this[l](),this.emit("finish")):this[S]&&(this[S]=!1,this.emit("drain"))))}[h](){if(0===this[A].length)this[c]&&this[C](null,0);else if(1===this[A].length)this[D](this[A].pop());else{const e=this[A];this[A]=[],a(this[u],e,this[R],((e,t)=>this[C](e,t)))}}[l](){if(this[s]&&"number"==typeof this[u]){const e=this[u];this[u]=null,o.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}}t.ReadStream=x,t.ReadStreamSync=class extends x{[y](){let e=!0;try{this[E](null,o.openSync(this[v],"r")),e=!1}finally{e&&this[l]()}}[I](){let e=!0;try{if(!this[O]){for(this[O]=!0;;){const e=this[g](),t=0===e.length?0:o.readSync(this[u],e,0,e.length,null);if(!this[_](t,e))break}this[O]=!1}e=!1}finally{e&&this[l]()}}[l](){if(this[s]&&"number"==typeof this[u]){const e=this[u];this[u]=null,o.closeSync(e),this.emit("close")}}},t.WriteStream=B,t.WriteStreamSync=class extends B{[y](){let e;if(this[L]&&"r+"===this[p])try{e=o.openSync(this[v],this[p],this[m])}catch(e){if("ENOENT"===e.code)return this[p]="w",this[y]();throw e}else e=o.openSync(this[v],this[p],this[m]);this[E](null,e)}[l](){if(this[s]&&"number"==typeof this[u]){const e=this[u];this[u]=null,o.closeSync(e),this.emit("close")}}[D](e){let t=!0;try{this[C](null,o.writeSync(this[u],e,0,e.length,this[R])),t=!1}finally{if(t)try{this[l]()}catch(e){}}}}},8370:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(1808)),a=r(i(4404)),s=r(i(7310)),l=r(i(5158)),c=r(i(2046)),u=i(8054),d=(0,l.default)("http-proxy-agent");class p extends u.Agent{constructor(e){let t;if(t="string"==typeof e?s.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");d("Creating new HttpProxyAgent instance: %o",t),super(t);const i=Object.assign({},t);var n;this.secureProxy=t.secureProxy||"string"==typeof(n=i.protocol)&&/^https:?$/i.test(n),i.host=i.hostname||i.host,"string"==typeof i.port&&(i.port=parseInt(i.port,10)),!i.port&&i.host&&(i.port=this.secureProxy?443:80),i.host&&i.path&&(delete i.path,delete i.pathname),this.proxy=i}callback(e,t){return n(this,void 0,void 0,(function*(){const{proxy:i,secureProxy:n}=this,r=s.default.parse(e.path);let l;if(r.protocol||(r.protocol="http:"),r.hostname||(r.hostname=t.hostname||t.host||null),null==r.port&&(t.port,1)&&(r.port=String(t.port)),"80"===r.port&&(r.port=""),e.path=s.default.format(r),i.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(i.auth).toString("base64")}`),n?(d("Creating `tls.Socket`: %o",i),l=a.default.connect(i)):(d("Creating `net.Socket`: %o",i),l=o.default.connect(i)),e._header){let t,i;d("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(d("Patching connection write() output buffer with updated header"),t=e.output[0],i=t.indexOf("\r\n\r\n")+4,e.output[0]=e._header+t.substring(i),d("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(d("Patching connection write() output buffer with updated header"),t=e.outputData[0].data,i=t.indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+t.substring(i),d("Output buffer: %o",e.outputData[0].data))}return yield(0,c.default)(l,"connect"),l}))}}t.default=p},9201:function(e,t,i){"use strict";const n=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(i(8370));function r(e){return new n.default(e)}!function(e){e.HttpProxyAgent=n.default,e.prototype=n.default.prototype}(r||(r={})),e.exports=r},9146:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(i(1808)),a=r(i(4404)),s=r(i(7310)),l=r(i(9491)),c=r(i(5158)),u=i(8054),d=r(i(9829)),p=c.default("https-proxy-agent:agent");class h extends u.Agent{constructor(e){let t;if(t="string"==typeof e?s.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");p("creating new HttpsProxyAgent instance: %o",t),super(t);const i=Object.assign({},t);var n;this.secureProxy=t.secureProxy||"string"==typeof(n=i.protocol)&&/^https:?$/i.test(n),i.host=i.hostname||i.host,"string"==typeof i.port&&(i.port=parseInt(i.port,10)),!i.port&&i.host&&(i.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in i)&&(i.ALPNProtocols=["http 1.1"]),i.host&&i.path&&(delete i.path,delete i.pathname),this.proxy=i}callback(e,t){return n(this,void 0,void 0,(function*(){const{proxy:i,secureProxy:n}=this;let r;n?(p("Creating `tls.Socket`: %o",i),r=a.default.connect(i)):(p("Creating `net.Socket`: %o",i),r=o.default.connect(i));const s=Object.assign({},i.headers);let c=`CONNECT ${t.host}:${t.port} HTTP/1.1\r\n`;i.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(i.auth).toString("base64")}`);let{host:u,port:h,secureEndpoint:g}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(h,g)||(u+=`:${h}`),s.Host=u,s.Connection="close";for(const e of Object.keys(s))c+=`${e}: ${s[e]}\r\n`;const m=d.default(r);r.write(`${c}\r\n`);const{statusCode:S,buffered:f}=yield m;if(200===S){if(e.once("socket",_),t.secureEndpoint){p("Upgrading socket connection to TLS");const e=t.servername||t.host;return a.default.connect(Object.assign(Object.assign({},function(e,...t){const i={};let n;for(n in e)t.includes(n)||(i[n]=e[n]);return i}(t,"host","hostname","path","port")),{socket:r,servername:e}))}return r}r.destroy();const E=new o.default.Socket({writable:!1});return E.readable=!0,e.once("socket",(e=>{p("replaying proxy buffer for failed request"),l.default(e.listenerCount("data")>0),e.push(f),e.push(null)})),E}))}}function _(e){e.resume()}t.default=h},6018:function(e,t,i){"use strict";const n=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(i(9146));function r(e){return new n.default(e)}!function(e){e.HttpsProxyAgent=n.default,e.prototype=n.default.prototype}(r||(r={})),e.exports=r},9829:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(i(5158)).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise(((t,i)=>{let n=0;const o=[];function a(){const i=e.read();i?function(e){o.push(e),n+=e.length;const i=Buffer.concat(o,n);if(-1===i.indexOf("\r\n\r\n"))return r("have not received end of HTTP headers yet..."),void a();const s=i.toString("ascii",0,i.indexOf("\r\n")),l=+s.split(" ")[1];r("got proxy server response: %o",s),t({statusCode:l,buffered:i})}(i):e.once("readable",a)}function s(e){r("onclose had error %o",e)}function l(){r("onend")}e.on("error",(function t(n){e.removeListener("end",l),e.removeListener("error",t),e.removeListener("close",s),e.removeListener("readable",a),r("onerror %o",n),i(n)})),e.on("close",s),e.on("end",l),a()}))}},5736:(e,t,i)=>{"use strict";const n="object"==typeof process&&process?process:{stdout:null,stderr:null},r=i(2361),o=i(2781),a=i(1576).StringDecoder,s=Symbol("EOF"),l=Symbol("maybeEmitEnd"),c=Symbol("emittedEnd"),u=Symbol("emittingEnd"),d=Symbol("emittedError"),p=Symbol("closed"),h=Symbol("read"),_=Symbol("flush"),g=Symbol("flushChunk"),m=Symbol("encoding"),S=Symbol("decoder"),f=Symbol("flowing"),E=Symbol("paused"),T=Symbol("resume"),C=Symbol("bufferLength"),y=Symbol("bufferPush"),v=Symbol("bufferShift"),R=Symbol("objectMode"),A=Symbol("destroyed"),I=Symbol("emitData"),w=Symbol("emitEnd"),O=Symbol("emitEnd2"),b=Symbol("async"),N=e=>Promise.resolve().then(e),D="1"!==global._MP_NO_ITERATOR_SYMBOLS_,M=D&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),L=D&&Symbol.iterator||Symbol("iterator not implemented");class P{constructor(e,t,i){this.src=e,this.dest=t,this.opts=i,this.ondrain=()=>e[T](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class x extends P{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,i){super(e,t,i),this.proxyErrors=e=>t.emit("error",e),e.on("error",this.proxyErrors)}}e.exports=class e extends o{constructor(e){super(),this[f]=!1,this[E]=!1,this.pipes=[],this.buffer=[],this[R]=e&&e.objectMode||!1,this[R]?this[m]=null:this[m]=e&&e.encoding||null,"buffer"===this[m]&&(this[m]=null),this[b]=e&&!!e.async||!1,this[S]=this[m]?new a(this[m]):null,this[s]=!1,this[c]=!1,this[u]=!1,this[p]=!1,this[d]=null,this.writable=!0,this.readable=!0,this[C]=0,this[A]=!1}get bufferLength(){return this[C]}get encoding(){return this[m]}set encoding(e){if(this[R])throw new Error("cannot set encoding in objectMode");if(this[m]&&e!==this[m]&&(this[S]&&this[S].lastNeed||this[C]))throw new Error("cannot change encoding");this[m]!==e&&(this[S]=e?new a(e):null,this.buffer.length&&(this.buffer=this.buffer.map((e=>this[S].write(e))))),this[m]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[R]}set objectMode(e){this[R]=this[R]||!!e}get async(){return this[b]}set async(e){this[b]=this[b]||!!e}write(e,t,i){if(this[s])throw new Error("write after end");if(this[A])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof t&&(i=t,t="utf8"),t||(t="utf8");const n=this[b]?N:e=>e();var r;return this[R]||Buffer.isBuffer(e)||(r=e,!Buffer.isBuffer(r)&&ArrayBuffer.isView(r)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(e=>e instanceof ArrayBuffer||"object"==typeof e&&e.constructor&&"ArrayBuffer"===e.constructor.name&&e.byteLength>=0)(e)?e=Buffer.from(e):"string"!=typeof e&&(this.objectMode=!0)),this[R]?(this.flowing&&0!==this[C]&&this[_](!0),this.flowing?this.emit("data",e):this[y](e),0!==this[C]&&this.emit("readable"),i&&n(i),this.flowing):e.length?("string"!=typeof e||t===this[m]&&!this[S].lastNeed||(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[m]&&(e=this[S].write(e)),this.flowing&&0!==this[C]&&this[_](!0),this.flowing?this.emit("data",e):this[y](e),0!==this[C]&&this.emit("readable"),i&&n(i),this.flowing):(0!==this[C]&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[A])return null;if(0===this[C]||0===e||e>this[C])return this[l](),null;this[R]&&(e=null),this.buffer.length>1&&!this[R]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[C])]);const t=this[h](e||null,this.buffer[0]);return this[l](),t}[h](e,t){return e===t.length||null===e?this[v]():(this.buffer[0]=t.slice(e),t=t.slice(0,e),this[C]-=e),this.emit("data",t),this.buffer.length||this[s]||this.emit("drain"),t}end(e,t,i){return"function"==typeof e&&(i=e,e=null),"function"==typeof t&&(i=t,t="utf8"),e&&this.write(e,t),i&&this.once("end",i),this[s]=!0,this.writable=!1,!this.flowing&&this[E]||this[l](),this}[T](){this[A]||(this[E]=!1,this[f]=!0,this.emit("resume"),this.buffer.length?this[_]():this[s]?this[l]():this.emit("drain"))}resume(){return this[T]()}pause(){this[f]=!1,this[E]=!0}get destroyed(){return this[A]}get flowing(){return this[f]}get paused(){return this[E]}[y](e){this[R]?this[C]+=1:this[C]+=e.length,this.buffer.push(e)}[v](){return this.buffer.length&&(this[R]?this[C]-=1:this[C]-=this.buffer[0].length),this.buffer.shift()}[_](e){do{}while(this[g](this[v]()));e||this.buffer.length||this[s]||this.emit("drain")}[g](e){return!!e&&(this.emit("data",e),this.flowing)}pipe(e,t){if(this[A])return;const i=this[c];return t=t||{},e===n.stdout||e===n.stderr?t.end=!1:t.end=!1!==t.end,t.proxyErrors=!!t.proxyErrors,i?t.end&&e.end():(this.pipes.push(t.proxyErrors?new x(this,e,t):new P(this,e,t)),this[b]?N((()=>this[T]())):this[T]()),e}unpipe(e){const t=this.pipes.find((t=>t.dest===e));t&&(this.pipes.splice(this.pipes.indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){const i=super.on(e,t);return"data"!==e||this.pipes.length||this.flowing?"readable"===e&&0!==this[C]?super.emit("readable"):(e=>"end"===e||"finish"===e||"prefinish"===e)(e)&&this[c]?(super.emit(e),this.removeAllListeners(e)):"error"===e&&this[d]&&(this[b]?N((()=>t.call(this,this[d]))):t.call(this,this[d])):this[T](),i}get emittedEnd(){return this[c]}[l](){this[u]||this[c]||this[A]||0!==this.buffer.length||!this[s]||(this[u]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[p]&&this.emit("close"),this[u]=!1)}emit(e,t,...i){if("error"!==e&&"close"!==e&&e!==A&&this[A])return;if("data"===e)return!!t&&(this[b]?N((()=>this[I](t))):this[I](t));if("end"===e)return this[w]();if("close"===e){if(this[p]=!0,!this[c]&&!this[A])return;const e=super.emit("close");return this.removeAllListeners("close"),e}if("error"===e){this[d]=t;const e=super.emit("error",t);return this[l](),e}if("resume"===e){const e=super.emit("resume");return this[l](),e}if("finish"===e||"prefinish"===e){const t=super.emit(e);return this.removeAllListeners(e),t}const n=super.emit(e,t,...i);return this[l](),n}[I](e){for(const t of this.pipes)!1===t.dest.write(e)&&this.pause();const t=super.emit("data",e);return this[l](),t}[w](){this[c]||(this[c]=!0,this.readable=!1,this[b]?N((()=>this[O]())):this[O]())}[O](){if(this[S]){const e=this[S].end();if(e){for(const t of this.pipes)t.dest.write(e);super.emit("data",e)}}for(const e of this.pipes)e.end();const e=super.emit("end");return this.removeAllListeners("end"),e}collect(){const e=[];this[R]||(e.dataLength=0);const t=this.promise();return this.on("data",(t=>{e.push(t),this[R]||(e.dataLength+=t.length)})),t.then((()=>e))}concat(){return this[R]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((e=>this[R]?Promise.reject(new Error("cannot concat in objectMode")):this[m]?e.join(""):Buffer.concat(e,e.dataLength)))}promise(){return new Promise(((e,t)=>{this.on(A,(()=>t(new Error("stream destroyed")))),this.on("error",(e=>t(e))),this.on("end",(()=>e()))}))}[M](){return{next:()=>{const e=this.read();if(null!==e)return Promise.resolve({done:!1,value:e});if(this[s])return Promise.resolve({done:!0});let t=null,i=null;const n=e=>{this.removeListener("data",r),this.removeListener("end",o),i(e)},r=e=>{this.removeListener("error",n),this.removeListener("end",o),this.pause(),t({value:e,done:!!this[s]})},o=()=>{this.removeListener("error",n),this.removeListener("data",r),t({done:!0})},a=()=>n(new Error("stream destroyed"));return new Promise(((e,s)=>{i=s,t=e,this.once(A,a),this.once("error",n),this.once("end",o),this.once("data",r)}))}}}[L](){return{next:()=>{const e=this.read();return{value:e,done:null===e}}}}destroy(e){return this[A]?(e?this.emit("error",e):this.emit(A),this):(this[A]=!0,this.buffer.length=0,this[C]=0,"function"!=typeof this.close||this[p]||this.close(),e?this.emit("error",e):this.emit(A),this)}static isStream(t){return!!t&&(t instanceof e||t instanceof o||t instanceof r&&("function"==typeof t.pipe||"function"==typeof t.write&&"function"==typeof t.end))}}},883:(e,t,i)=>{const n=i(9796).constants||{ZLIB_VERNUM:4736};e.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},n))},1650:(e,t,i)=>{"use strict";const n=i(9491),r=i(8709).Buffer,o=i(9796),a=t.constants=i(883),s=i(5736),l=r.concat,c=Symbol("_superWrite");class u extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}}const d=Symbol("opts"),p=Symbol("flushFlag"),h=Symbol("finishFlushFlag"),_=Symbol("fullFlushFlag"),g=Symbol("handle"),m=Symbol("onError"),S=Symbol("sawError"),f=Symbol("level"),E=Symbol("strategy"),T=Symbol("ended");Symbol("_defaultFullFlush");class C extends s{constructor(e,t){if(!e||"object"!=typeof e)throw new TypeError("invalid options for ZlibBase constructor");super(e),this[S]=!1,this[T]=!1,this[d]=e,this[p]=e.flush,this[h]=e.finishFlush;try{this[g]=new o[t](e)}catch(e){throw new u(e)}this[m]=e=>{this[S]||(this[S]=!0,this.close(),this.emit("error",e))},this[g].on("error",(e=>this[m](new u(e)))),this.once("end",(()=>this.close))}close(){this[g]&&(this[g].close(),this[g]=null,this.emit("close"))}reset(){if(!this[S])return n(this[g],"zlib binding closed"),this[g].reset()}flush(e){this.ended||("number"!=typeof e&&(e=this[_]),this.write(Object.assign(r.alloc(0),{[p]:e})))}end(e,t,i){return e&&this.write(e,t),this.flush(this[h]),this[T]=!0,super.end(null,null,i)}get ended(){return this[T]}write(e,t,i){if("function"==typeof t&&(i=t,t="utf8"),"string"==typeof e&&(e=r.from(e,t)),this[S])return;n(this[g],"zlib binding closed");const o=this[g]._handle,a=o.close;o.close=()=>{};const s=this[g].close;let d,h;this[g].close=()=>{},r.concat=e=>e;try{const t="number"==typeof e[p]?e[p]:this[p];d=this[g]._processChunk(e,t),r.concat=l}catch(e){r.concat=l,this[m](new u(e))}finally{this[g]&&(this[g]._handle=o,o.close=a,this[g].close=s,this[g].removeAllListeners("error"))}if(this[g]&&this[g].on("error",(e=>this[m](new u(e)))),d)if(Array.isArray(d)&&d.length>0){h=this[c](r.from(d[0]));for(let e=1;e<d.length;e++)h=this[c](d[e])}else h=this[c](r.from(d));return i&&i(),h}[c](e){return super.write(e)}}class y extends C{constructor(e,t){(e=e||{}).flush=e.flush||a.Z_NO_FLUSH,e.finishFlush=e.finishFlush||a.Z_FINISH,super(e,t),this[_]=a.Z_FULL_FLUSH,this[f]=e.level,this[E]=e.strategy}params(e,t){if(!this[S]){if(!this[g])throw new Error("cannot switch params when binding is closed");if(!this[g].params)throw new Error("not supported in this implementation");if(this[f]!==e||this[E]!==t){this.flush(a.Z_SYNC_FLUSH),n(this[g],"zlib binding closed");const i=this[g].flush;this[g].flush=(e,t)=>{this.flush(e),t()};try{this[g].params(e,t)}finally{this[g].flush=i}this[g]&&(this[f]=e,this[E]=t)}}}}const v=Symbol("_portable");class R extends C{constructor(e,t){(e=e||{}).flush=e.flush||a.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||a.BROTLI_OPERATION_FINISH,super(e,t),this[_]=a.BROTLI_OPERATION_FLUSH}}t.Deflate=class extends y{constructor(e){super(e,"Deflate")}},t.Inflate=class extends y{constructor(e){super(e,"Inflate")}},t.Gzip=class extends y{constructor(e){super(e,"Gzip"),this[v]=e&&!!e.portable}[c](e){return this[v]?(this[v]=!1,e[9]=255,super[c](e)):super[c](e)}},t.Gunzip=class extends y{constructor(e){super(e,"Gunzip")}},t.DeflateRaw=class extends y{constructor(e){super(e,"DeflateRaw")}},t.InflateRaw=class extends y{constructor(e){super(e,"InflateRaw")}},t.Unzip=class extends y{constructor(e){super(e,"Unzip")}},"function"==typeof o.BrotliCompress?(t.BrotliCompress=class extends R{constructor(e){super(e,"BrotliCompress")}},t.BrotliDecompress=class extends R{constructor(e){super(e,"BrotliDecompress")}}):t.BrotliCompress=t.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}},1890:(e,t,i)=>{const n=i(4231),r=i(3610),{mkdirpNative:o,mkdirpNativeSync:a}=i(9378),{mkdirpManual:s,mkdirpManualSync:l}=i(8600),{useNative:c,useNativeSync:u}=i(6167),d=(e,t)=>(e=r(e),t=n(t),c(t)?o(e,t):s(e,t));d.sync=(e,t)=>(e=r(e),t=n(t),u(t)?a(e,t):l(e,t)),d.native=(e,t)=>o(r(e),n(t)),d.manual=(e,t)=>s(r(e),n(t)),d.nativeSync=(e,t)=>a(r(e),n(t)),d.manualSync=(e,t)=>l(r(e),n(t)),e.exports=d},8812:(e,t,i)=>{const{dirname:n}=i(1017),r=(e,t,i=void 0)=>i===t?Promise.resolve():e.statAsync(t).then((e=>e.isDirectory()?i:void 0),(i=>"ENOENT"===i.code?r(e,n(t),t):void 0)),o=(e,t,i=void 0)=>{if(i!==t)try{return e.statSync(t).isDirectory()?i:void 0}catch(i){return"ENOENT"===i.code?o(e,n(t),t):void 0}};e.exports={findMade:r,findMadeSync:o}},8600:(e,t,i)=>{const{dirname:n}=i(1017),r=(e,t,i)=>{t.recursive=!1;const o=n(e);return o===e?t.mkdirAsync(e,t).catch((e=>{if("EISDIR"!==e.code)throw e})):t.mkdirAsync(e,t).then((()=>i||e),(n=>{if("ENOENT"===n.code)return r(o,t).then((i=>r(e,t,i)));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;return t.statAsync(e).then((e=>{if(e.isDirectory())return i;throw n}),(()=>{throw n}))}))},o=(e,t,i)=>{const r=n(e);if(t.recursive=!1,r===e)try{return t.mkdirSync(e,t)}catch(e){if("EISDIR"!==e.code)throw e;return}try{return t.mkdirSync(e,t),i||e}catch(n){if("ENOENT"===n.code)return o(e,t,o(r,t,i));if("EEXIST"!==n.code&&"EROFS"!==n.code)throw n;try{if(!t.statSync(e).isDirectory())throw n}catch(e){throw n}}};e.exports={mkdirpManual:r,mkdirpManualSync:o}},9378:(e,t,i)=>{const{dirname:n}=i(1017),{findMade:r,findMadeSync:o}=i(8812),{mkdirpManual:a,mkdirpManualSync:s}=i(8600);e.exports={mkdirpNative:(e,t)=>(t.recursive=!0,n(e)===e?t.mkdirAsync(e,t):r(t,e).then((i=>t.mkdirAsync(e,t).then((()=>i)).catch((i=>{if("ENOENT"===i.code)return a(e,t);throw i}))))),mkdirpNativeSync:(e,t)=>{if(t.recursive=!0,n(e)===e)return t.mkdirSync(e,t);const i=o(t,e);try{return t.mkdirSync(e,t),i}catch(i){if("ENOENT"===i.code)return s(e,t);throw i}}}},4231:(e,t,i)=>{const{promisify:n}=i(3837),r=i(7147);e.exports=e=>{if(e)if("object"==typeof e)e={mode:511,fs:r,...e};else if("number"==typeof e)e={mode:e,fs:r};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8),fs:r}}else e={mode:511,fs:r};return e.mkdir=e.mkdir||e.fs.mkdir||r.mkdir,e.mkdirAsync=n(e.mkdir),e.stat=e.stat||e.fs.stat||r.stat,e.statAsync=n(e.stat),e.statSync=e.statSync||e.fs.statSync||r.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||r.mkdirSync,e}},3610:(e,t,i)=>{const n=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:r,parse:o}=i(1017);e.exports=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=r(e),"win32"===n){const t=/[*|"<>?:]/,{root:i}=o(e);if(t.test(e.substr(i.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e}},6167:(e,t,i)=>{const n=i(7147),r=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),o=+r[0]>10||10==+r[0]&&+r[1]>=12,a=o?e=>e.mkdir===n.mkdir:()=>!1,s=o?e=>e.mkdirSync===n.mkdirSync:()=>!1;e.exports={useNative:a,useNativeSync:s}},7824:e=>{var t=1e3,i=60*t,n=60*i,r=24*n;function o(e,t,i,n){var r=t>=1.5*i;return Math.round(e/i)+" "+n+(r?"s":"")}e.exports=function(e,a){a=a||{};var s,l,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===c&&isFinite(e))return a.long?(s=e,(l=Math.abs(s))>=r?o(s,l,r,"day"):l>=n?o(s,l,n,"hour"):l>=i?o(s,l,i,"minute"):l>=t?o(s,l,t,"second"):s+" ms"):function(e){var o=Math.abs(e);return o>=r?Math.round(e/r)+"d":o>=n?Math.round(e/n)+"h":o>=i?Math.round(e/i)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},5339:e=>{"use strict";var t="win32"===process.platform,i=t?/[^:]\\$/:/.\/$/;e.exports=function(){var e;return e=t?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",i.test(e)&&(e=e.slice(0,-1)),e}},9916:e=>{function t(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function i(e){e.pending+=1;var t=!1;return function(r){if(t)throw new Error("callback called twice");if(t=!0,e.error=e.error||r,e.pending-=1,e.waiting.length>0&&e.pending<e.max)n(e,e.waiting.shift());else if(0===e.pending){var o=e.listeners;e.listeners=[],o.forEach(i)}};function i(t){t(e.error)}}function n(e,t){t(i(e))}e.exports=t,t.prototype.go=function(e){this.pending<this.max?n(this,e):this.waiting.push(e)},t.prototype.wait=function(e){0===this.pending?e(this.error):this.listeners.push(e)},t.prototype.hold=function(){return i(this)}},9353:(e,t,i)=>{e.exports=i(1846)},1846:(e,t,i)=>{var n=i(1960);t.operation=function(e){var i=t.timeouts(e);return new n(i,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in e)t[i]=e[i];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],r=0;r<t.retries;r++)n.push(this.createTimeout(r,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(r,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var i=t.randomize?Math.random()+1:1,n=Math.round(i*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(n,t.maxTimeout)},t.wrap=function(e,i,n){if(i instanceof Array&&(n=i,i=null),!n)for(var r in n=[],e)"function"==typeof e[r]&&n.push(r);for(var o=0;o<n.length;o++){var a=n[o],s=e[a];e[a]=function(n){var r=t.operation(i),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push((function(e){r.retry(e)||(e&&(arguments[0]=r.mainError()),a.apply(this,arguments))})),r.attempt((function(){n.apply(e,o)}))}.bind(e,s),e[a].options=i}}},1960:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(void 0===i){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),i),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){i._operationTimeoutCb()}),i._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,i=0,n=0;n<this._errors.length;n++){var r=this._errors[n],o=r.message,a=(e[o]||0)+1;e[o]=a,a>=i&&(t=r,i=a)}return t}},6625:(e,t)=>{var i;t=e.exports=X,i="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,o=n-6,a=t.re=[],s=t.safeRe=[],l=t.src=[],c=0,u="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",n],[u,o]];function p(e){for(var t=0;t<d.length;t++){var i=d[t][0],n=d[t][1];e=e.split(i+"*").join(i+"{0,"+n+"}").split(i+"+").join(i+"{1,"+n+"}")}return e}var h=c++;l[h]="0|[1-9]\\d*";var _=c++;l[_]="\\d+";var g=c++;l[g]="\\d*[a-zA-Z-]"+u+"*";var m=c++;l[m]="("+l[h]+")\\.("+l[h]+")\\.("+l[h]+")";var S=c++;l[S]="("+l[_]+")\\.("+l[_]+")\\.("+l[_]+")";var f=c++;l[f]="(?:"+l[h]+"|"+l[g]+")";var E=c++;l[E]="(?:"+l[_]+"|"+l[g]+")";var T=c++;l[T]="(?:-("+l[f]+"(?:\\."+l[f]+")*))";var C=c++;l[C]="(?:-?("+l[E]+"(?:\\."+l[E]+")*))";var y=c++;l[y]=u+"+";var v=c++;l[v]="(?:\\+("+l[y]+"(?:\\."+l[y]+")*))";var R=c++,A="v?"+l[m]+l[T]+"?"+l[v]+"?";l[R]="^"+A+"$";var I="[v=\\s]*"+l[S]+l[C]+"?"+l[v]+"?",w=c++;l[w]="^"+I+"$";var O=c++;l[O]="((?:<|>)?=?)";var b=c++;l[b]=l[_]+"|x|X|\\*";var N=c++;l[N]=l[h]+"|x|X|\\*";var D=c++;l[D]="[v=\\s]*("+l[N]+")(?:\\.("+l[N]+")(?:\\.("+l[N]+")(?:"+l[T]+")?"+l[v]+"?)?)?";var M=c++;l[M]="[v=\\s]*("+l[b]+")(?:\\.("+l[b]+")(?:\\.("+l[b]+")(?:"+l[C]+")?"+l[v]+"?)?)?";var L=c++;l[L]="^"+l[O]+"\\s*"+l[D]+"$";var P=c++;l[P]="^"+l[O]+"\\s*"+l[M]+"$";var x=c++;l[x]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var B=c++;l[B]="(?:~>?)";var k=c++;l[k]="(\\s*)"+l[B]+"\\s+",a[k]=new RegExp(l[k],"g"),s[k]=new RegExp(p(l[k]),"g");var U=c++;l[U]="^"+l[B]+l[D]+"$";var F=c++;l[F]="^"+l[B]+l[M]+"$";var G=c++;l[G]="(?:\\^)";var V=c++;l[V]="(\\s*)"+l[G]+"\\s+",a[V]=new RegExp(l[V],"g"),s[V]=new RegExp(p(l[V]),"g");var q=c++;l[q]="^"+l[G]+l[D]+"$";var j=c++;l[j]="^"+l[G]+l[M]+"$";var H=c++;l[H]="^"+l[O]+"\\s*("+I+")$|^$";var z=c++;l[z]="^"+l[O]+"\\s*("+A+")$|^$";var W=c++;l[W]="(\\s*)"+l[O]+"\\s*("+I+"|"+l[D]+")",a[W]=new RegExp(l[W],"g"),s[W]=new RegExp(p(l[W]),"g");var K=c++;l[K]="^\\s*("+l[D]+")\\s+-\\s+("+l[D]+")\\s*$";var Q=c++;l[Q]="^\\s*("+l[M]+")\\s+-\\s+("+l[M]+")\\s*$";var Y=c++;l[Y]="(<|>)?=?\\s*\\*";for(var $=0;$<35;$++)i($,l[$]),a[$]||(a[$]=new RegExp(l[$]),s[$]=new RegExp(p(l[$])));function Z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof X)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?s[w]:s[R]).test(e))return null;try{return new X(e,t)}catch(e){return null}}function X(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof X){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof X))return new X(e,t);i("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?s[w]:s[R]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=Z,t.valid=function(e,t){var i=Z(e,t);return i?i.version:null},t.clean=function(e,t){var i=Z(e.trim().replace(/^[=v]+/,""),t);return i?i.version:null},t.SemVer=X,X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},X.prototype.toString=function(){return this.version},X.prototype.compare=function(e){return i("SemVer.compare",this.version,this.options,e),e instanceof X||(e=new X(e,this.options)),this.compareMain(e)||this.comparePre(e)},X.prototype.compareMain=function(e){return e instanceof X||(e=new X(e,this.options)),ee(this.major,e.major)||ee(this.minor,e.minor)||ee(this.patch,e.patch)},X.prototype.comparePre=function(e){if(e instanceof X||(e=new X(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return ee(n,r)}while(++t)},X.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,i,n){"string"==typeof i&&(n=i,i=void 0);try{return new X(e,i).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(re(e,t))return null;var i=Z(e),n=Z(t),r="";if(i.prerelease.length||n.prerelease.length){r="pre";var o="prerelease"}for(var a in i)if(("major"===a||"minor"===a||"patch"===a)&&i[a]!==n[a])return r+a;return o},t.compareIdentifiers=ee;var J=/^[0-9]+$/;function ee(e,t){var i=J.test(e),n=J.test(t);return i&&n&&(e=+e,t=+t),e===t?0:i&&!n?-1:n&&!i?1:e<t?-1:1}function te(e,t,i){return new X(e,i).compare(new X(t,i))}function ie(e,t,i){return te(e,t,i)>0}function ne(e,t,i){return te(e,t,i)<0}function re(e,t,i){return 0===te(e,t,i)}function oe(e,t,i){return 0!==te(e,t,i)}function ae(e,t,i){return te(e,t,i)>=0}function se(e,t,i){return te(e,t,i)<=0}function le(e,t,i,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e===i;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof i&&(i=i.version),e!==i;case"":case"=":case"==":return re(e,i,n);case"!=":return oe(e,i,n);case">":return ie(e,i,n);case">=":return ae(e,i,n);case"<":return ne(e,i,n);case"<=":return se(e,i,n);default:throw new TypeError("Invalid operator: "+t)}}function ce(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ce){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ce))return new ce(e,t);e=e.trim().split(/\s+/).join(" "),i("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ue?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}t.rcompareIdentifiers=function(e,t){return ee(t,e)},t.major=function(e,t){return new X(e,t).major},t.minor=function(e,t){return new X(e,t).minor},t.patch=function(e,t){return new X(e,t).patch},t.compare=te,t.compareLoose=function(e,t){return te(e,t,!0)},t.rcompare=function(e,t,i){return te(t,e,i)},t.sort=function(e,i){return e.sort((function(e,n){return t.compare(e,n,i)}))},t.rsort=function(e,i){return e.sort((function(e,n){return t.rcompare(e,n,i)}))},t.gt=ie,t.lt=ne,t.eq=re,t.neq=oe,t.gte=ae,t.lte=se,t.cmp=le,t.Comparator=ce;var ue={};function de(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof de)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new de(e.raw,t);if(e instanceof ce)return new de(e.value,t);if(!(this instanceof de))return new de(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function pe(e){return!e||"x"===e.toLowerCase()||"*"===e}function he(e,t,i,n,r,o,a,s,l,c,u,d,p){return((t=pe(i)?"":pe(n)?">="+i+".0.0":pe(r)?">="+i+"."+n+".0":">="+t)+" "+(s=pe(l)?"":pe(c)?"<"+(+l+1)+".0.0":pe(u)?"<"+l+"."+(+c+1)+".0":d?"<="+l+"."+c+"."+u+"-"+d:"<="+s)).trim()}function _e(e,t,n){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(r=0;r<e.length;r++)if(i(e[r].semver),e[r].semver!==ue&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ge(e,t,i){try{t=new de(t,i)}catch(e){return!1}return t.test(e)}function me(e,t,i,n){var r,o,a,s,l;switch(e=new X(e,n),t=new de(t,n),i){case">":r=ie,o=se,a=ne,s=">",l=">=";break;case"<":r=ne,o=ae,a=ie,s="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ge(e,t,n))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],d=null,p=null;if(u.forEach((function(e){e.semver===ue&&(e=new ce(">=0.0.0")),d=d||e,p=p||e,r(e.semver,d.semver,n)?d=e:a(e.semver,p.semver,n)&&(p=e)})),d.operator===s||d.operator===l)return!1;if((!p.operator||p.operator===s)&&o(e,p.semver))return!1;if(p.operator===l&&a(e,p.semver))return!1}return!0}ce.prototype.parse=function(e){var t=this.options.loose?s[H]:s[z],i=e.match(t);if(!i)throw new TypeError("Invalid comparator: "+e);this.operator=i[1],"="===this.operator&&(this.operator=""),i[2]?this.semver=new X(i[2],this.options.loose):this.semver=ue},ce.prototype.toString=function(){return this.value},ce.prototype.test=function(e){return i("Comparator.test",e,this.options.loose),this.semver===ue||("string"==typeof e&&(e=new X(e,this.options)),le(e,this.operator,this.semver,this.options))},ce.prototype.intersects=function(e,t){if(!(e instanceof ce))throw new TypeError("a Comparator is required");var i;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return i=new de(e.value,t),ge(this.value,i,t);if(""===e.operator)return i=new de(this.value,t),ge(e.semver,i,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=le(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=le(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||o&&a||s||l},t.Range=de,de.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},de.prototype.toString=function(){return this.range},de.prototype.parseRange=function(e){var t=this.options.loose,n=t?s[Q]:s[K];e=e.replace(n,he),i("hyphen replace",e),e=e.replace(s[W],"$1$2$3"),i("comparator trim",e,s[W]),e=(e=e.replace(s[k],"$1~")).replace(s[V],"$1^");var r=t?s[H]:s[z],o=e.split(" ").map((function(e){return function(e,t){return i("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){i("caret",e,t);var n=t.loose?s[j]:s[q];return e.replace(n,(function(t,n,r,o,a){var s;return i("caret",e,t,n,r,o,a),pe(n)?s="":pe(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":pe(o)?s="0"===n?">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":">="+n+"."+r+".0 <"+(+n+1)+".0.0":a?(i("replaceCaret pr",a),s="0"===n?"0"===r?">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+"-"+a+" <"+(+n+1)+".0.0"):(i("no pr"),s="0"===n?"0"===r?">="+n+"."+r+"."+o+" <"+n+"."+r+"."+(+o+1):">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0":">="+n+"."+r+"."+o+" <"+(+n+1)+".0.0"),i("caret return",s),s}))}(e,t)})).join(" ")}(e,t),i("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?s[F]:s[U];return e.replace(n,(function(t,n,r,o,a){var s;return i("tilde",e,t,n,r,o,a),pe(n)?s="":pe(r)?s=">="+n+".0.0 <"+(+n+1)+".0.0":pe(o)?s=">="+n+"."+r+".0 <"+n+"."+(+r+1)+".0":a?(i("replaceTilde pr",a),s=">="+n+"."+r+"."+o+"-"+a+" <"+n+"."+(+r+1)+".0"):s=">="+n+"."+r+"."+o+" <"+n+"."+(+r+1)+".0",i("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),i("tildes",e),e=function(e,t){return i("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?s[P]:s[L];return e.replace(n,(function(t,n,r,o,a,s){i("xRange",e,t,n,r,o,a,s);var l=pe(r),c=l||pe(o),u=c||pe(a);return"="===n&&u&&(n=""),l?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(c&&(o=0),a=0,">"===n?(n=">=",c?(r=+r+1,o=0,a=0):(o=+o+1,a=0)):"<="===n&&(n="<",c?r=+r+1:o=+o+1),t=n+r+"."+o+"."+a):c?t=">="+r+".0.0 <"+(+r+1)+".0.0":u&&(t=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0"),i("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),i("xrange",e),e=function(e,t){return i("replaceStars",e,t),e.trim().replace(s[Y],"")}(e,t),i("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter((function(e){return!!e.match(r)}))),o.map((function(e){return new ce(e,this.options)}),this)},de.prototype.intersects=function(e,t){if(!(e instanceof de))throw new TypeError("a Range is required");return this.set.some((function(i){return i.every((function(i){return e.set.some((function(e){return e.every((function(e){return i.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new de(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},de.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new X(e,this.options));for(var t=0;t<this.set.length;t++)if(_e(this.set[t],e,this.options))return!0;return!1},t.satisfies=ge,t.maxSatisfying=function(e,t,i){var n=null,r=null;try{var o=new de(t,i)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&-1!==r.compare(e)||(r=new X(n=e,i)))})),n},t.minSatisfying=function(e,t,i){var n=null,r=null;try{var o=new de(t,i)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(n&&1!==r.compare(e)||(r=new X(n=e,i)))})),n},t.minVersion=function(e,t){e=new de(e,t);var i=new X("0.0.0");if(e.test(i))return i;if(i=new X("0.0.0-0"),e.test(i))return i;i=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new X(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!ie(i,t)||(i=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return i&&e.test(i)?i:null},t.validRange=function(e,t){try{return new de(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,i){return me(e,t,"<",i)},t.gtr=function(e,t,i){return me(e,t,">",i)},t.outside=me,t.prerelease=function(e,t){var i=Z(e,t);return i&&i.prerelease.length?i.prerelease:null},t.intersects=function(e,t,i){return e=new de(e,i),t=new de(t,i),e.intersects(t)},t.coerce=function(e){if(e instanceof X)return e;if("string"!=typeof e)return null;var t=e.match(s[x]);return null==t?null:Z(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},7998:(e,t,i)=>{"use strict";t.c=t.create=i(4629),t.r=t.replace=i(1746),t.t=t.list=i(6473),t.u=t.update=i(5997),t.x=t.extract=i(769),t.Pack=i(8042),t.Unpack=i(2699),t.Parse=i(6824),t.ReadEntry=i(6277),t.WriteEntry=i(4426),t.Header=i(7134),t.Pax=i(4747),t.types=i(4402)},4629:(e,t,i)=>{"use strict";const n=i(2093),r=i(8042),o=i(292),a=i(6473),s=i(1017);e.exports=(e,t,i)=>{if("function"==typeof t&&(i=t),Array.isArray(e)&&(t=e,e={}),!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");t=Array.from(t);const r=n(e);if(r.sync&&"function"==typeof i)throw new TypeError("callback not supported for sync tar functions");if(!r.file&&"function"==typeof i)throw new TypeError("callback only supported with file option");return r.file&&r.sync?l(r,t):r.file?c(r,t,i):r.sync?p(r,t):h(r,t)};const l=(e,t)=>{const i=new r.Sync(e),n=new o.WriteStreamSync(e.file,{mode:e.mode||438});i.pipe(n),u(i,t)},c=(e,t,i)=>{const n=new r(e),a=new o.WriteStream(e.file,{mode:e.mode||438});n.pipe(a);const s=new Promise(((e,t)=>{a.on("error",t),a.on("close",e),n.on("error",t)}));return d(n,t),i?s.then(i,i):s},u=(e,t)=>{t.forEach((t=>{"@"===t.charAt(0)?a({file:s.resolve(e.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:t=>e.add(t)}):e.add(t)})),e.end()},d=(e,t)=>{for(;t.length;){const i=t.shift();if("@"===i.charAt(0))return a({file:s.resolve(e.cwd,i.slice(1)),noResume:!0,onentry:t=>e.add(t)}).then((i=>d(e,t)));e.add(i)}e.end()},p=(e,t)=>{const i=new r.Sync(e);return u(i,t),i},h=(e,t)=>{const i=new r(e);return d(i,t),i}},769:(e,t,i)=>{"use strict";const n=i(2093),r=i(2699),o=i(7147),a=i(292),s=i(1017),l=i(4922);e.exports=(e,t,i)=>{"function"==typeof e?(i=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),"function"==typeof t&&(i=t,t=null),t=t?Array.from(t):[];const r=n(e);if(r.sync&&"function"==typeof i)throw new TypeError("callback not supported for sync tar functions");if(!r.file&&"function"==typeof i)throw new TypeError("callback only supported with file option");return t.length&&c(r,t),r.file&&r.sync?u(r):r.file?d(r,i):r.sync?p(r):h(r)};const c=(e,t)=>{const i=new Map(t.map((e=>[l(e),!0]))),n=e.filter,r=(e,t)=>{const n=t||s.parse(e).root||".",o=e!==n&&(i.has(e)?i.get(e):r(s.dirname(e),n));return i.set(e,o),o};e.filter=n?(e,t)=>n(e,t)&&r(l(e)):e=>r(l(e))},u=e=>{const t=new r.Sync(e),i=e.file,n=o.statSync(i),s=e.maxReadSize||16777216;new a.ReadStreamSync(i,{readSize:s,size:n.size}).pipe(t)},d=(e,t)=>{const i=new r(e),n=e.maxReadSize||16777216,s=e.file,l=new Promise(((e,t)=>{i.on("error",t),i.on("close",e),o.stat(s,((e,r)=>{if(e)t(e);else{const e=new a.ReadStream(s,{readSize:n,size:r.size});e.on("error",t),e.pipe(i)}}))}));return t?l.then(t,t):l},p=e=>new r.Sync(e),h=e=>new r(e)},5879:(e,t,i)=>{const n="win32"===(process.env.__FAKE_PLATFORM__||process.platform),r=global.__FAKE_TESTING_FS__||i(7147),{O_CREAT:o,O_TRUNC:a,O_WRONLY:s,UV_FS_O_FILEMAP:l=0}=r.constants,c=n&&!!l,u=l|a|o|s;e.exports=c?e=>e<524288?u:"w":()=>"w"},7134:(e,t,i)=>{"use strict";const n=i(4402),r=i(1017).posix,o=i(9678),a=Symbol("slurp"),s=Symbol("type"),l=(e,t,i)=>e.slice(t,t+i).toString("utf8").replace(/\0.*/,""),c=(e,t,i)=>u(d(e,t,i)),u=e=>null===e?null:new Date(1e3*e),d=(e,t,i)=>128&e[t]?o.parse(e.slice(t,t+i)):p(e,t,i),p=(e,t,i)=>{return n=parseInt(e.slice(t,t+i).toString("utf8").replace(/\0.*$/,"").trim(),8),isNaN(n)?null:n;var n},h={12:8589934591,8:2097151},_=(e,t,i,n)=>null!==n&&(n>h[i]||n<0?(o.encode(n,e.slice(t,t+i)),!0):(g(e,t,i,n),!1)),g=(e,t,i,n)=>e.write(m(n,i),t,i,"ascii"),m=(e,t)=>S(Math.floor(e).toString(8),t),S=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0",f=(e,t,i,n)=>null!==n&&_(e,t,i,n.getTime()/1e3),E=new Array(156).join("\0"),T=(e,t,i,n)=>null!==n&&(e.write(n+E,t,i,"utf8"),n.length!==Buffer.byteLength(n)||n.length>i);e.exports=class{constructor(e,t,i,n){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[s]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,t||0,i,n):e&&this.set(e)}decode(e,t,i,n){if(t||(t=0),!(e&&e.length>=t+512))throw new Error("need 512 bytes for header");if(this.path=l(e,t,100),this.mode=d(e,t+100,8),this.uid=d(e,t+108,8),this.gid=d(e,t+116,8),this.size=d(e,t+124,12),this.mtime=c(e,t+136,12),this.cksum=d(e,t+148,12),this[a](i),this[a](n,!0),this[s]=l(e,t+156,1),""===this[s]&&(this[s]="0"),"0"===this[s]&&"/"===this.path.slice(-1)&&(this[s]="5"),"5"===this[s]&&(this.size=0),this.linkpath=l(e,t+157,100),"ustar\x0000"===e.slice(t+257,t+265).toString())if(this.uname=l(e,t+265,32),this.gname=l(e,t+297,32),this.devmaj=d(e,t+329,8),this.devmin=d(e,t+337,8),0!==e[t+475]){const i=l(e,t+345,155);this.path=i+"/"+this.path}else{const i=l(e,t+345,130);i&&(this.path=i+"/"+this.path),this.atime=c(e,t+476,12),this.ctime=c(e,t+488,12)}let r=256;for(let i=t;i<t+148;i++)r+=e[i];for(let i=t+156;i<t+512;i++)r+=e[i];this.cksumValid=r===this.cksum,null===this.cksum&&256===r&&(this.nullBlock=!0)}[a](e,t){for(const i in e)null===e[i]||void 0===e[i]||t&&"path"===i||(this[i]=e[i])}encode(e,t){if(e||(e=this.block=Buffer.alloc(512),t=0),t||(t=0),!(e.length>=t+512))throw new Error("need 512 bytes for header");const i=this.ctime||this.atime?130:155,n=((e,t)=>{let i,n=e,o="";const a=r.parse(e).root||".";if(Buffer.byteLength(n)<100)i=[n,o,!1];else{o=r.dirname(n),n=r.basename(n);do{Buffer.byteLength(n)<=100&&Buffer.byteLength(o)<=t?i=[n,o,!1]:Buffer.byteLength(n)>100&&Buffer.byteLength(o)<=t?i=[n.slice(0,99),o,!0]:(n=r.join(r.basename(o),n),o=r.dirname(o))}while(o!==a&&!i);i||(i=[e.slice(0,99),"",!0])}return i})(this.path||"",i),o=n[0],a=n[1];this.needPax=n[2],this.needPax=T(e,t,100,o)||this.needPax,this.needPax=_(e,t+100,8,this.mode)||this.needPax,this.needPax=_(e,t+108,8,this.uid)||this.needPax,this.needPax=_(e,t+116,8,this.gid)||this.needPax,this.needPax=_(e,t+124,12,this.size)||this.needPax,this.needPax=f(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this[s].charCodeAt(0),this.needPax=T(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=T(e,t+265,32,this.uname)||this.needPax,this.needPax=T(e,t+297,32,this.gname)||this.needPax,this.needPax=_(e,t+329,8,this.devmaj)||this.needPax,this.needPax=_(e,t+337,8,this.devmin)||this.needPax,this.needPax=T(e,t+345,i,a)||this.needPax,0!==e[t+475]?this.needPax=T(e,t+345,155,a)||this.needPax:(this.needPax=T(e,t+345,130,a)||this.needPax,this.needPax=f(e,t+476,12,this.atime)||this.needPax,this.needPax=f(e,t+488,12,this.ctime)||this.needPax);let l=256;for(let i=t;i<t+148;i++)l+=e[i];for(let i=t+156;i<t+512;i++)l+=e[i];return this.cksum=l,_(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(const t in e)null!==e[t]&&void 0!==e[t]&&(this[t]=e[t])}get type(){return n.name.get(this[s])||this[s]}get typeKey(){return this[s]}set type(e){n.code.has(e)?this[s]=n.code.get(e):this[s]=e}}},2093:e=>{"use strict";const t=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);e.exports=e=>e?Object.keys(e).map((i=>[t.has(i)?t.get(i):i,e[i]])).reduce(((e,t)=>(e[t[0]]=t[1],e)),Object.create(null)):{}},9678:e=>{"use strict";const t=e=>255&(255^e),i=e=>1+(255^e)&255;e.exports={encode:(e,n)=>{if(!Number.isSafeInteger(e))throw Error("cannot encode number outside of javascript safe integer range");return e<0?((e,n)=>{n[0]=255;var r=!1;e*=-1;for(var o=n.length;o>1;o--){var a=255&e;e=Math.floor(e/256),r?n[o-1]=t(a):0===a?n[o-1]=0:(r=!0,n[o-1]=i(a))}})(e,n):((e,t)=>{t[0]=128;for(var i=t.length;i>1;i--)t[i-1]=255&e,e=Math.floor(e/256)})(e,n),n},parse:e=>{const n=e[0],r=128===n?(e=>{for(var t=e.length,i=0,n=t-1;n>-1;n--){var r=e[n];0!==r&&(i+=r*Math.pow(256,t-n-1))}return i})(e.slice(1,e.length)):255===n?(e=>{for(var n=e.length,r=0,o=!1,a=n-1;a>-1;a--){var s,l=e[a];o?s=t(l):0===l?s=l:(o=!0,s=i(l)),0!==s&&(r-=s*Math.pow(256,n-a-1))}return r})(e):null;if(null===r)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r}}},6473:(e,t,i)=>{"use strict";const n=i(2093),r=i(6824),o=i(7147),a=i(292),s=i(1017),l=i(4922);e.exports=(e,t,i)=>{"function"==typeof e?(i=e,t=null,e={}):Array.isArray(e)&&(t=e,e={}),"function"==typeof t&&(i=t,t=null),t=t?Array.from(t):[];const r=n(e);if(r.sync&&"function"==typeof i)throw new TypeError("callback not supported for sync tar functions");if(!r.file&&"function"==typeof i)throw new TypeError("callback only supported with file option");return t.length&&u(r,t),r.noResume||c(r),r.file&&r.sync?d(r):r.file?p(r,i):h(r)};const c=e=>{const t=e.onentry;e.onentry=t?e=>{t(e),e.resume()}:e=>e.resume()},u=(e,t)=>{const i=new Map(t.map((e=>[l(e),!0]))),n=e.filter,r=(e,t)=>{const n=t||s.parse(e).root||".",o=e!==n&&(i.has(e)?i.get(e):r(s.dirname(e),n));return i.set(e,o),o};e.filter=n?(e,t)=>n(e,t)&&r(l(e)):e=>r(l(e))},d=e=>{const t=h(e),i=e.file;let n,r=!0;try{const a=o.statSync(i),s=e.maxReadSize||16777216;if(a.size<s)t.end(o.readFileSync(i));else{let e=0;const r=Buffer.allocUnsafe(s);for(n=o.openSync(i,"r");e<a.size;){const i=o.readSync(n,r,0,s,e);e+=i,t.write(r.slice(0,i))}t.end()}r=!1}finally{if(r&&n)try{o.closeSync(n)}catch(e){}}},p=(e,t)=>{const i=new r(e),n=e.maxReadSize||16777216,s=e.file,l=new Promise(((e,t)=>{i.on("error",t),i.on("end",e),o.stat(s,((e,r)=>{if(e)t(e);else{const e=new a.ReadStream(s,{readSize:n,size:r.size});e.on("error",t),e.pipe(i)}}))}));return t?l.then(t,t):l},h=e=>new r(e)},3248:(e,t,i)=>{"use strict";const n=i(1890),r=i(7147),o=i(1017),a=i(9019),s=i(2905);class l extends Error{constructor(e,t){super("Cannot extract through symbolic link"),this.path=t,this.symlink=e}get name(){return"SylinkError"}}class c extends Error{constructor(e,t){super(t+": Cannot cd into '"+e+"'"),this.path=e,this.code=t}get name(){return"CwdError"}}const u=(e,t)=>e.get(s(t)),d=(e,t,i)=>e.set(s(t),i);e.exports=(e,t,i)=>{e=s(e);const l=t.umask,h=448|t.mode,_=0!=(h&l),g=t.uid,m=t.gid,S="number"==typeof g&&"number"==typeof m&&(g!==t.processUid||m!==t.processGid),f=t.preserve,E=t.unlink,T=t.cache,C=s(t.cwd),y=(t,n)=>{t?i(t):(d(T,e,!0),n&&S?a(n,g,m,(e=>y(e))):_?r.chmod(e,h,i):i())};if(T&&!0===u(T,e))return y();if(e===C)return((e,t)=>{r.stat(e,((i,n)=>{!i&&n.isDirectory()||(i=new c(e,i&&i.code||"ENOTDIR")),t(i)}))})(e,y);if(f)return n(e,{mode:h}).then((e=>y(null,e)),y);const v=s(o.relative(C,e)).split("/");p(C,v,h,T,E,C,null,y)};const p=(e,t,i,n,a,l,c,d)=>{if(!t.length)return d(null,c);const _=t.shift(),g=s(o.resolve(e+"/"+_));if(u(n,g))return p(g,t,i,n,a,l,c,d);r.mkdir(g,i,h(g,t,i,n,a,l,c,d))},h=(e,t,i,n,o,a,c,u)=>d=>{d?r.lstat(e,((_,g)=>{if(_)_.path=_.path&&s(_.path),u(_);else if(g.isDirectory())p(e,t,i,n,o,a,c,u);else if(o)r.unlink(e,(s=>{if(s)return u(s);r.mkdir(e,i,h(e,t,i,n,o,a,c,u))}));else{if(g.isSymbolicLink())return u(new l(e,e+"/"+t.join("/")));u(d)}})):p(e,t,i,n,o,a,c=c||e,u)};e.exports.sync=(e,t)=>{e=s(e);const i=t.umask,p=448|t.mode,h=0!=(p&i),_=t.uid,g=t.gid,m="number"==typeof _&&"number"==typeof g&&(_!==t.processUid||g!==t.processGid),S=t.preserve,f=t.unlink,E=t.cache,T=s(t.cwd),C=t=>{d(E,e,!0),t&&m&&a.sync(t,_,g),h&&r.chmodSync(e,p)};if(E&&!0===u(E,e))return C();if(e===T)return(e=>{let t=!1,i="ENOTDIR";try{t=r.statSync(e).isDirectory()}catch(e){i=e.code}finally{if(!t)throw new c(e,i)}})(T),C();if(S)return C(n.sync(e,p));const y=s(o.relative(T,e)).split("/");let v=null;for(let e=y.shift(),t=T;e&&(t+="/"+e);e=y.shift())if(t=s(o.resolve(t)),!u(E,t))try{r.mkdirSync(t,p),v=v||t,d(E,t,!0)}catch(e){const i=r.lstatSync(t);if(i.isDirectory()){d(E,t,!0);continue}if(f){r.unlinkSync(t),r.mkdirSync(t,p),v=v||t,d(E,t,!0);continue}if(i.isSymbolicLink())return new l(t,t+"/"+y.join("/"))}return C(v)}},7716:e=>{"use strict";e.exports=(e,t,i)=>(e&=4095,i&&(e=-19&(384|e)),t&&(256&e&&(e|=64),32&e&&(e|=8),4&e&&(e|=1)),e)},1946:e=>{const t=Object.create(null),{hasOwnProperty:i}=Object.prototype;e.exports=e=>(i.call(t,e)||(t[e]=e.normalize("NFKD")),t[e])},2905:e=>{const t=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;e.exports="win32"!==t?e=>e:e=>e&&e.replace(/\\/g,"/")},8042:(e,t,i)=>{"use strict";class n{constructor(e,t){this.path=e||"./",this.absolute=t,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}}const r=i(4577),o=i(1650),a=i(6277),s=i(4426),l=s.Sync,c=s.Tar,u=i(4411),d=Buffer.alloc(1024),p=Symbol("onStat"),h=Symbol("ended"),_=Symbol("queue"),g=Symbol("current"),m=Symbol("process"),S=Symbol("processing"),f=Symbol("processJob"),E=Symbol("jobs"),T=Symbol("jobDone"),C=Symbol("addFSEntry"),y=Symbol("addTarEntry"),v=Symbol("stat"),R=Symbol("readdir"),A=Symbol("onreaddir"),I=Symbol("pipe"),w=Symbol("entry"),O=Symbol("entryOpt"),b=Symbol("writeEntryClass"),N=Symbol("write"),D=Symbol("ondrain"),M=i(7147),L=i(1017),P=i(7902),x=i(2905),B=P(class extends r{constructor(e){super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=x(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[b]=s,"function"==typeof e.onwarn&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?("object"!=typeof e.gzip&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new o.Gzip(e.gzip),this.zip.on("data",(e=>super.write(e))),this.zip.on("end",(e=>super.end())),this.zip.on("drain",(e=>this[D]())),this.on("resume",(e=>this.zip.resume()))):this.on("drain",this[D]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter="function"==typeof e.filter?e.filter:e=>!0,this[_]=new u,this[E]=0,this.jobs=+e.jobs||4,this[S]=!1,this[h]=!1}[N](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[h]=!0,this[m](),this}write(e){if(this[h])throw new Error("write after end");return e instanceof a?this[y](e):this[C](e),this.flowing}[y](e){const t=x(L.resolve(this.cwd,e.path));if(this.filter(e.path,e)){const i=new n(e.path,t,!1);i.entry=new c(e,this[O](i)),i.entry.on("end",(e=>this[T](i))),this[E]+=1,this[_].push(i)}else e.resume();this[m]()}[C](e){const t=x(L.resolve(this.cwd,e));this[_].push(new n(e,t)),this[m]()}[v](e){e.pending=!0,this[E]+=1;const t=this.follow?"stat":"lstat";M[t](e.absolute,((t,i)=>{e.pending=!1,this[E]-=1,t?this.emit("error",t):this[p](e,i)}))}[p](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[m]()}[R](e){e.pending=!0,this[E]+=1,M.readdir(e.absolute,((t,i)=>{if(e.pending=!1,this[E]-=1,t)return this.emit("error",t);this[A](e,i)}))}[A](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[m]()}[m](){if(!this[S]){this[S]=!0;for(let e=this[_].head;null!==e&&this[E]<this.jobs;e=e.next)if(this[f](e.value),e.value.ignore){const t=e.next;this[_].removeNode(e),e.next=t}this[S]=!1,this[h]&&!this[_].length&&0===this[E]&&(this.zip?this.zip.end(d):(super.write(d),super.end()))}}get[g](){return this[_]&&this[_].head&&this[_].head.value}[T](e){this[_].shift(),this[E]-=1,this[m]()}[f](e){e.pending||(e.entry?e!==this[g]||e.piped||this[I](e):(e.stat||(this.statCache.has(e.absolute)?this[p](e,this.statCache.get(e.absolute)):this[v](e)),e.stat&&(e.ignore||(this.noDirRecurse||!e.stat.isDirectory()||e.readdir||(this.readdirCache.has(e.absolute)?this[A](e,this.readdirCache.get(e.absolute)):this[R](e),e.readdir))&&(e.entry=this[w](e),e.entry?e!==this[g]||e.piped||this[I](e):e.ignore=!0))))}[O](e){return{onwarn:(e,t,i)=>this.warn(e,t,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[w](e){this[E]+=1;try{return new this[b](e.path,this[O](e)).on("end",(()=>this[T](e))).on("error",(e=>this.emit("error",e)))}catch(e){this.emit("error",e)}}[D](){this[g]&&this[g].entry&&this[g].entry.resume()}[I](e){e.piped=!0,e.readdir&&e.readdir.forEach((t=>{const i=e.path,n="./"===i?"":i.replace(/\/*$/,"/");this[C](n+t)}));const t=e.entry,i=this.zip;i?t.on("data",(e=>{i.write(e)||t.pause()})):t.on("data",(e=>{super.write(e)||t.pause()}))}pause(){return this.zip&&this.zip.pause(),super.pause()}});B.Sync=class extends B{constructor(e){super(e),this[b]=l}pause(){}resume(){}[v](e){const t=this.follow?"statSync":"lstatSync";this[p](e,M[t](e.absolute))}[R](e,t){this[A](e,M.readdirSync(e.absolute))}[I](e){const t=e.entry,i=this.zip;e.readdir&&e.readdir.forEach((t=>{const i=e.path,n="./"===i?"":i.replace(/\/*$/,"/");this[C](n+t)})),i?t.on("data",(e=>{i.write(e)})):t.on("data",(e=>{super[N](e)}))}},e.exports=B},6824:(e,t,i)=>{"use strict";const n=i(7902),r=i(7134),o=i(2361),a=i(4411),s=i(6277),l=i(4747),c=i(1650),{nextTick:u}=i(7282),d=Buffer.from([31,139]),p=Symbol("state"),h=Symbol("writeEntry"),_=Symbol("readEntry"),g=Symbol("nextEntry"),m=Symbol("processEntry"),S=Symbol("extendedHeader"),f=Symbol("globalExtendedHeader"),E=Symbol("meta"),T=Symbol("emitMeta"),C=Symbol("buffer"),y=Symbol("queue"),v=Symbol("ended"),R=Symbol("emittedEnd"),A=Symbol("emit"),I=Symbol("unzip"),w=Symbol("consumeChunk"),O=Symbol("consumeChunkSub"),b=Symbol("consumeBody"),N=Symbol("consumeMeta"),D=Symbol("consumeHeader"),M=Symbol("consuming"),L=Symbol("bufferConcat"),P=Symbol("maybeEnd"),x=Symbol("writing"),B=Symbol("aborted"),k=Symbol("onDone"),U=Symbol("sawValidEntry"),F=Symbol("sawNullBlock"),G=Symbol("sawEOF"),V=Symbol("closeStream"),q=e=>!0;e.exports=n(class extends o{constructor(e){super(e=e||{}),this.file=e.file||"",this[U]=null,this.on(k,(e=>{"begin"!==this[p]&&!1!==this[U]||this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")})),e.ondone?this.on(k,e.ondone):this.on(k,(e=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")})),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||1048576,this.filter="function"==typeof e.filter?e.filter:q,this.writable=!0,this.readable=!1,this[y]=new a,this[C]=null,this[_]=null,this[h]=null,this[p]="begin",this[E]="",this[S]=null,this[f]=null,this[v]=!1,this[I]=null,this[B]=!1,this[F]=!1,this[G]=!1,this.on("end",(()=>this[V]())),"function"==typeof e.onwarn&&this.on("warn",e.onwarn),"function"==typeof e.onentry&&this.on("entry",e.onentry)}[D](e,t){let i;null===this[U]&&(this[U]=!1);try{i=new r(e,t,this[S],this[f])}catch(e){return this.warn("TAR_ENTRY_INVALID",e)}if(i.nullBlock)this[F]?(this[G]=!0,"begin"===this[p]&&(this[p]="header"),this[A]("eof")):(this[F]=!0,this[A]("nullBlock"));else if(this[F]=!1,i.cksumValid)if(i.path){const e=i.type;if(/^(Symbolic)?Link$/.test(e)&&!i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:i});else if(!/^(Symbolic)?Link$/.test(e)&&i.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:i});else{const e=this[h]=new s(i,this[S],this[f]);if(!this[U])if(e.remain){const t=()=>{e.invalid||(this[U]=!0)};e.on("end",t)}else this[U]=!0;e.meta?e.size>this.maxMetaEntrySize?(e.ignore=!0,this[A]("ignoredEntry",e),this[p]="ignore",e.resume()):e.size>0&&(this[E]="",e.on("data",(e=>this[E]+=e)),this[p]="meta"):(this[S]=null,e.ignore=e.ignore||!this.filter(e.path,e),e.ignore?(this[A]("ignoredEntry",e),this[p]=e.remain?"ignore":"header",e.resume()):(e.remain?this[p]="body":(this[p]="header",e.end()),this[_]?this[y].push(e):(this[y].push(e),this[g]())))}}else this.warn("TAR_ENTRY_INVALID","path is required",{header:i});else this.warn("TAR_ENTRY_INVALID","checksum failure",{header:i})}[V](){u((()=>this.emit("close")))}[m](e){let t=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[_]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",(e=>this[g]())),t=!1)):(this[_]=null,t=!1),t}[g](){do{}while(this[m](this[y].shift()));if(!this[y].length){const e=this[_];!e||e.flowing||e.size===e.remain?this[x]||this.emit("drain"):e.once("drain",(e=>this.emit("drain")))}}[b](e,t){const i=this[h],n=i.blockRemain,r=n>=e.length&&0===t?e:e.slice(t,t+n);return i.write(r),i.blockRemain||(this[p]="header",this[h]=null,i.end()),r.length}[N](e,t){const i=this[h],n=this[b](e,t);return this[h]||this[T](i),n}[A](e,t,i){this[y].length||this[_]?this[y].push([e,t,i]):this.emit(e,t,i)}[T](e){switch(this[A]("meta",this[E]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[S]=l.parse(this[E],this[S],!1);break;case"GlobalExtendedHeader":this[f]=l.parse(this[E],this[f],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[S]=this[S]||Object.create(null),this[S].path=this[E].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[S]=this[S]||Object.create(null),this[S].linkpath=this[E].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[B]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[B])return;if(null===this[I]&&e){if(this[C]&&(e=Buffer.concat([this[C],e]),this[C]=null),e.length<d.length)return this[C]=e,!0;for(let t=0;null===this[I]&&t<d.length;t++)e[t]!==d[t]&&(this[I]=!1);if(null===this[I]){const t=this[v];this[v]=!1,this[I]=new c.Unzip,this[I].on("data",(e=>this[w](e))),this[I].on("error",(e=>this.abort(e))),this[I].on("end",(e=>{this[v]=!0,this[w]()})),this[x]=!0;const i=this[I][t?"end":"write"](e);return this[x]=!1,i}}this[x]=!0,this[I]?this[I].write(e):this[w](e),this[x]=!1;const t=!this[y].length&&(!this[_]||this[_].flowing);return t||this[y].length||this[_].once("drain",(e=>this.emit("drain"))),t}[L](e){e&&!this[B]&&(this[C]=this[C]?Buffer.concat([this[C],e]):e)}[P](){if(this[v]&&!this[R]&&!this[B]&&!this[M]){this[R]=!0;const e=this[h];if(e&&e.blockRemain){const t=this[C]?this[C].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[C]&&e.write(this[C]),e.end()}this[A](k)}}[w](e){if(this[M])this[L](e);else if(e||this[C]){if(this[M]=!0,this[C]){this[L](e);const t=this[C];this[C]=null,this[O](t)}else this[O](e);for(;this[C]&&this[C].length>=512&&!this[B]&&!this[G];){const e=this[C];this[C]=null,this[O](e)}this[M]=!1}else this[P]();this[C]&&!this[v]||this[P]()}[O](e){let t=0;const i=e.length;for(;t+512<=i&&!this[B]&&!this[G];)switch(this[p]){case"begin":case"header":this[D](e,t),t+=512;break;case"ignore":case"body":t+=this[b](e,t);break;case"meta":t+=this[N](e,t);break;default:throw new Error("invalid state: "+this[p])}t<i&&(this[C]?this[C]=Buffer.concat([e.slice(t),this[C]]):this[C]=e.slice(t))}end(e){this[B]||(this[I]?this[I].end(e):(this[v]=!0,this.write(e)))}})},10:(e,t,i)=>{const n=i(9491),r=i(1946),o=i(4922),{join:a}=i(1017),s="win32"===(process.env.TESTING_TAR_FAKE_PLATFORM||process.platform);e.exports=()=>{const e=new Map,t=new Map,i=new Set,l=i=>{const{paths:n,dirs:r}=(i=>{const n=t.get(i);if(!n)throw new Error("function does not have any path reservations");return{paths:n.paths.map((t=>e.get(t))),dirs:[...n.dirs].map((t=>e.get(t)))}})(i);return n.every((e=>e[0]===i))&&r.every((e=>e[0]instanceof Set&&e[0].has(i)))},c=e=>!(i.has(e)||!l(e)||(i.add(e),e((()=>u(e))),0)),u=r=>{if(!i.has(r))return!1;const{paths:o,dirs:a}=t.get(r),s=new Set;return o.forEach((t=>{const i=e.get(t);n.equal(i[0],r),1===i.length?e.delete(t):(i.shift(),"function"==typeof i[0]?s.add(i[0]):i[0].forEach((e=>s.add(e))))})),a.forEach((t=>{const i=e.get(t);n(i[0]instanceof Set),1===i[0].size&&1===i.length?e.delete(t):1===i[0].size?(i.shift(),s.add(i[0])):i[0].delete(r)})),i.delete(r),s.forEach((e=>c(e))),!0};return{check:l,reserve:(i,n)=>{i=s?["win32 parallelization disabled"]:i.map((e=>r(o(a(e))).toLowerCase()));const l=new Set(i.map((e=>(e=>{const t=e.split("/").slice(0,-1).reduce(((e,t)=>(e.length&&(t=a(e[e.length-1],t)),e.push(t||"/"),e)),[]);return t})(e))).reduce(((e,t)=>e.concat(t))));return t.set(n,{dirs:l,paths:i}),i.forEach((t=>{const i=e.get(t);i?i.push(n):e.set(t,[n])})),l.forEach((t=>{const i=e.get(t);i?i[i.length-1]instanceof Set?i[i.length-1].add(n):i.push(new Set([n])):e.set(t,[new Set([n])])})),c(n)}}}},4747:(e,t,i)=>{"use strict";const n=i(7134),r=i(1017);class o{constructor(e,t){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=t||!1}encode(){const e=this.encodeBody();if(""===e)return null;const t=Buffer.byteLength(e),i=512*Math.ceil(1+t/512),o=Buffer.allocUnsafe(i);for(let e=0;e<512;e++)o[e]=0;new n({path:("PaxHeader/"+r.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:t,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,t,"utf8");for(let e=t+512;e<o.length;e++)o[e]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(null===this[e]||void 0===this[e])return"";const t=" "+("dev"===e||"ino"===e||"nlink"===e?"SCHILY.":"")+e+"="+(this[e]instanceof Date?this[e].getTime()/1e3:this[e])+"\n",i=Buffer.byteLength(t);let n=Math.floor(Math.log(i)/Math.log(10))+1;return i+n>=Math.pow(10,n)&&(n+=1),n+i+t}}o.parse=(e,t,i)=>new o(a(s(e),t),i);const a=(e,t)=>t?Object.keys(e).reduce(((t,i)=>(t[i]=e[i],t)),t):e,s=e=>e.replace(/\n$/,"").split("\n").reduce(l,Object.create(null)),l=(e,t)=>{const i=parseInt(t,10);if(i!==Buffer.byteLength(t)+1)return e;const n=(t=t.slice((i+" ").length)).split("="),r=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!r)return e;const o=n.join("=");return e[r]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(r)?new Date(1e3*o):/^[0-9]+$/.test(o)?+o:o,e};e.exports=o},6277:(e,t,i)=>{"use strict";const n=i(4577),r=i(2905),o=Symbol("slurp");e.exports=class extends n{constructor(e,t,i){switch(super(),this.pause(),this.extended=t,this.globalExtended=i,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=r(e.path),this.mode=e.mode,this.mode&&(this.mode=4095&this.mode),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=r(e.linkpath),this.uname=e.uname,this.gname=e.gname,t&&this[o](t),i&&this[o](i,!0)}write(e){const t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");const i=this.remain,n=this.blockRemain;return this.remain=Math.max(0,i-t),this.blockRemain=Math.max(0,n-t),!!this.ignore||(i>=t?super.write(e):super.write(e.slice(0,i)))}[o](e,t){for(const i in e)null===e[i]||void 0===e[i]||t&&"path"===i||(this[i]="path"===i||"linkpath"===i?r(e[i]):e[i])}}},1746:(e,t,i)=>{"use strict";const n=i(2093),r=i(8042),o=i(7147),a=i(292),s=i(6473),l=i(1017),c=i(7134);e.exports=(e,t,i)=>{const r=n(e);if(!r.file)throw new TypeError("file is required");if(r.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),r.sync?u(r,t):p(r,t,i)};const u=(e,t)=>{const i=new r.Sync(e);let n,a,s=!0;try{try{n=o.openSync(e.file,"r+")}catch(t){if("ENOENT"!==t.code)throw t;n=o.openSync(e.file,"w+")}const r=o.fstatSync(n),l=Buffer.alloc(512);e:for(a=0;a<r.size;a+=512){for(let e=0,t=0;e<512;e+=t){if(t=o.readSync(n,l,e,l.length-e,a+e),0===a&&31===l[0]&&139===l[1])throw new Error("cannot append to compressed archives");if(!t)break e}const t=new c(l);if(!t.cksumValid)break;const i=512*Math.ceil(t.size/512);if(a+i+512>r.size)break;a+=i,e.mtimeCache&&e.mtimeCache.set(t.path,t.mtime)}s=!1,d(e,i,a,n,t)}finally{if(s)try{o.closeSync(n)}catch(e){}}},d=(e,t,i,n,r)=>{const o=new a.WriteStreamSync(e.file,{fd:n,start:i});t.pipe(o),h(t,r)},p=(e,t,i)=>{t=Array.from(t);const n=new r(e),s=new Promise(((i,r)=>{n.on("error",r);let s="r+";const l=(u,d)=>u&&"ENOENT"===u.code&&"r+"===s?(s="w+",o.open(e.file,s,l)):u?r(u):void o.fstat(d,((s,l)=>{if(s)return o.close(d,(()=>r(s)));((t,i,n)=>{const r=(e,i)=>{e?o.close(t,(t=>n(e))):n(null,i)};let a=0;if(0===i)return r(null,0);let s=0;const l=Buffer.alloc(512),u=(n,d)=>{if(n)return r(n);if(s+=d,s<512&&d)return o.read(t,l,s,l.length-s,a+s,u);if(0===a&&31===l[0]&&139===l[1])return r(new Error("cannot append to compressed archives"));if(s<512)return r(null,a);const p=new c(l);if(!p.cksumValid)return r(null,a);const h=512*Math.ceil(p.size/512);return a+h+512>i?r(null,a):(a+=h+512,a>=i?r(null,a):(e.mtimeCache&&e.mtimeCache.set(p.path,p.mtime),s=0,void o.read(t,l,0,512,a,u)))};o.read(t,l,0,512,a,u)})(d,l.size,((o,s)=>{if(o)return r(o);const l=new a.WriteStream(e.file,{fd:d,start:s});n.pipe(l),l.on("error",r),l.on("close",i),_(n,t)}))}));o.open(e.file,s,l)}));return i?s.then(i,i):s},h=(e,t)=>{t.forEach((t=>{"@"===t.charAt(0)?s({file:l.resolve(e.cwd,t.slice(1)),sync:!0,noResume:!0,onentry:t=>e.add(t)}):e.add(t)})),e.end()},_=(e,t)=>{for(;t.length;){const i=t.shift();if("@"===i.charAt(0))return s({file:l.resolve(e.cwd,i.slice(1)),noResume:!0,onentry:t=>e.add(t)}).then((i=>_(e,t)));e.add(i)}e.end()}},2214:(e,t,i)=>{const{isAbsolute:n,parse:r}=i(1017).win32;e.exports=e=>{let t="",i=r(e);for(;n(e)||i.root;){const n="/"===e.charAt(0)&&"//?/"!==e.slice(0,4)?"/":i.root;e=e.slice(n.length),t+=n,i=r(e)}return[t,e]}},4922:e=>{e.exports=e=>{let t=e.length-1,i=-1;for(;t>-1&&"/"===e.charAt(t);)i=t,t--;return-1===i?e:e.slice(0,i)}},4402:(e,t)=>{"use strict";t.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]),t.code=new Map(Array.from(t.name).map((e=>[e[1],e[0]])))},2699:(e,t,i)=>{"use strict";const n=i(9491),r=i(6824),o=i(7147),a=i(292),s=i(1017),l=i(3248),c=i(619),u=i(10),d=i(2214),p=i(2905),h=i(4922),_=i(1946),g=Symbol("onEntry"),m=Symbol("checkFs"),S=Symbol("checkFs2"),f=Symbol("pruneCache"),E=Symbol("isReusable"),T=Symbol("makeFs"),C=Symbol("file"),y=Symbol("directory"),v=Symbol("link"),R=Symbol("symlink"),A=Symbol("hardlink"),I=Symbol("unsupported"),w=Symbol("checkPath"),O=Symbol("mkdir"),b=Symbol("onError"),N=Symbol("pending"),D=Symbol("pend"),M=Symbol("unpend"),L=Symbol("ended"),P=Symbol("maybeClose"),x=Symbol("skip"),B=Symbol("doChown"),k=Symbol("uid"),U=Symbol("gid"),F=Symbol("checkedCwd"),G=i(6113),V=i(5879),q="win32"===(process.env.TESTING_TAR_FAKE_PLATFORM||process.platform),j=(e,t,i)=>e===e>>>0?e:t===t>>>0?t:i,H=e=>_(h(p(e))).toLowerCase();class z extends r{constructor(e){if(e||(e={}),e.ondone=e=>{this[L]=!0,this[P]()},super(e),this[F]=!1,this.reservations=u(),this.transform="function"==typeof e.transform?e.transform:null,this.writable=!0,this.readable=!1,this[N]=0,this[L]=!1,this.dirCache=e.dirCache||new Map,"number"==typeof e.uid||"number"==typeof e.gid){if("number"!=typeof e.uid||"number"!=typeof e.gid)throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;void 0===e.preserveOwner&&"number"!=typeof e.uid?this.preserveOwner=process.getuid&&0===process.getuid():this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=!0===e.forceChown,this.win32=!!e.win32||q,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=p(s.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask="number"==typeof e.umask?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",(e=>this[g](e)))}warn(e,t,i={}){return"TAR_BAD_ARCHIVE"!==e&&"TAR_ABORT"!==e||(i.recoverable=!1),super.warn(e,t,i)}[P](){this[L]&&0===this[N]&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[w](e){if(this.strip){const t=p(e.path).split("/");if(t.length<this.strip)return!1;if(e.path=t.slice(this.strip).join("/"),"Link"===e.type){const t=p(e.linkpath).split("/");if(!(t.length>=this.strip))return!1;e.linkpath=t.slice(this.strip).join("/")}}if(!this.preservePaths){const t=p(e.path),i=t.split("/");if(i.includes("..")||q&&/^[a-z]:\.\.$/i.test(i[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;const[n,r]=d(t);n&&(e.path=r,this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:e,path:t}))}if(s.isAbsolute(e.path)?e.absolute=p(s.resolve(e.path)):e.absolute=p(s.resolve(this.cwd,e.path)),!this.preservePaths&&0!==e.absolute.indexOf(this.cwd+"/")&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:p(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&"Directory"!==e.type&&"GNUDumpDir"!==e.type)return!1;if(this.win32){const{root:t}=s.win32.parse(e.absolute);e.absolute=t+c.encode(e.absolute.slice(t.length));const{root:i}=s.win32.parse(e.path);e.path=i+c.encode(e.path.slice(i.length))}return!0}[g](e){if(!this[w](e))return e.resume();switch(n.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=448|e.mode);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[m](e);default:return this[I](e)}}[b](e,t){"CwdError"===e.name?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[M](),t.resume())}[O](e,t,i){l(p(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t,noChmod:this.noChmod},i)}[B](e){return this.forceChown||this.preserveOwner&&("number"==typeof e.uid&&e.uid!==this.processUid||"number"==typeof e.gid&&e.gid!==this.processGid)||"number"==typeof this.uid&&this.uid!==this.processUid||"number"==typeof this.gid&&this.gid!==this.processGid}[k](e){return j(this.uid,e.uid,this.processUid)}[U](e){return j(this.gid,e.gid,this.processGid)}[C](e,t){const i=4095&e.mode||this.fmode,n=new a.WriteStream(e.absolute,{flags:V(e.size),mode:i,autoClose:!1});n.on("error",(i=>{n.fd&&o.close(n.fd,(()=>{})),n.write=()=>!0,this[b](i,e),t()}));let r=1;const s=i=>{if(i)return n.fd&&o.close(n.fd,(()=>{})),this[b](i,e),void t();0==--r&&o.close(n.fd,(i=>{i?this[b](i,e):this[M](),t()}))};n.on("finish",(t=>{const i=e.absolute,a=n.fd;if(e.mtime&&!this.noMtime){r++;const t=e.atime||new Date,n=e.mtime;o.futimes(a,t,n,(e=>e?o.utimes(i,t,n,(t=>s(t&&e))):s()))}if(this[B](e)){r++;const t=this[k](e),n=this[U](e);o.fchown(a,t,n,(e=>e?o.chown(i,t,n,(t=>s(t&&e))):s()))}s()}));const l=this.transform&&this.transform(e)||e;l!==e&&(l.on("error",(i=>{this[b](i,e),t()})),e.pipe(l)),l.pipe(n)}[y](e,t){const i=4095&e.mode||this.dmode;this[O](e.absolute,i,(i=>{if(i)return this[b](i,e),void t();let n=1;const r=i=>{0==--n&&(t(),this[M](),e.resume())};e.mtime&&!this.noMtime&&(n++,o.utimes(e.absolute,e.atime||new Date,e.mtime,r)),this[B](e)&&(n++,o.chown(e.absolute,this[k](e),this[U](e),r)),r()}))}[I](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[R](e,t){this[v](e,e.linkpath,"symlink",t)}[A](e,t){const i=p(s.resolve(this.cwd,e.linkpath));this[v](e,i,"link",t)}[D](){this[N]++}[M](){this[N]--,this[P]()}[x](e){this[M](),e.resume()}[E](e,t){return"File"===e.type&&!this.unlink&&t.isFile()&&t.nlink<=1&&!q}[m](e){this[D]();const t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,(t=>this[S](e,t)))}[f](e){"SymbolicLink"===e.type?(e=>{for(const t of e.keys())e.delete(t)})(this.dirCache):"Directory"!==e.type&&((e,t)=>{t=H(t);for(const i of e.keys()){const n=H(i);n!==t&&0!==n.indexOf(t+"/")||e.delete(i)}})(this.dirCache,e.absolute)}[S](e,t){this[f](e);const i=i=>{this[f](e),t(i)},n=()=>{if(e.absolute!==this.cwd){const t=p(s.dirname(e.absolute));if(t!==this.cwd)return this[O](t,this.dmode,(t=>{if(t)return this[b](t,e),void i();r()}))}r()},r=()=>{o.lstat(e.absolute,((t,n)=>{if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[x](e),void i();if(t||this[E](e,n))return this[T](null,e,i);if(n.isDirectory()){if("Directory"===e.type){const t=t=>this[T](t,e,i);return!this.noChmod&&e.mode&&(4095&n.mode)!==e.mode?o.chmod(e.absolute,e.mode,t):t()}if(e.absolute!==this.cwd)return o.rmdir(e.absolute,(t=>this[T](t,e,i)))}if(e.absolute===this.cwd)return this[T](null,e,i);((e,t)=>{if(!q)return o.unlink(e,t);const i=e+".DELETE."+G.randomBytes(16).toString("hex");o.rename(e,i,(e=>{if(e)return t(e);o.unlink(i,t)}))})(e.absolute,(t=>this[T](t,e,i)))}))};this[F]?n():(()=>{this[O](this.cwd,this.dmode,(t=>{if(t)return this[b](t,e),void i();this[F]=!0,n()}))})()}[T](e,t,i){if(e)return this[b](e,t),void i();switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[C](t,i);case"Link":return this[A](t,i);case"SymbolicLink":return this[R](t,i);case"Directory":case"GNUDumpDir":return this[y](t,i)}}[v](e,t,i,n){o[i](t,e.absolute,(t=>{t?this[b](t,e):(this[M](),e.resume()),n()}))}}const W=e=>{try{return[null,e()]}catch(e){return[e,null]}};z.Sync=class extends z{[T](e,t){return super[T](e,t,(()=>{}))}[m](e){if(this[f](e),!this[F]){const t=this[O](this.cwd,this.dmode);if(t)return this[b](t,e);this[F]=!0}if(e.absolute!==this.cwd){const t=p(s.dirname(e.absolute));if(t!==this.cwd){const i=this[O](t,this.dmode);if(i)return this[b](i,e)}}const[t,i]=W((()=>o.lstatSync(e.absolute)));if(i&&(this.keep||this.newer&&i.mtime>e.mtime))return this[x](e);if(t||this[E](e,i))return this[T](null,e);if(i.isDirectory()){if("Directory"===e.type){const t=!this.noChmod&&e.mode&&(4095&i.mode)!==e.mode,[n]=t?W((()=>{o.chmodSync(e.absolute,e.mode)})):[];return this[T](n,e)}const[t]=W((()=>o.rmdirSync(e.absolute)));this[T](t,e)}const[n]=e.absolute===this.cwd?[]:W((()=>(e=>{if(!q)return o.unlinkSync(e);const t=e+".DELETE."+G.randomBytes(16).toString("hex");o.renameSync(e,t),o.unlinkSync(t)})(e.absolute)));this[T](n,e)}[C](e,t){const i=4095&e.mode||this.fmode,n=i=>{let n;try{o.closeSync(r)}catch(e){n=e}(i||n)&&this[b](i||n,e),t()};let r;try{r=o.openSync(e.absolute,V(e.size),i)}catch(e){return n(e)}const a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",(t=>this[b](t,e))),e.pipe(a)),a.on("data",(e=>{try{o.writeSync(r,e,0,e.length)}catch(e){n(e)}})),a.on("end",(t=>{let i=null;if(e.mtime&&!this.noMtime){const t=e.atime||new Date,n=e.mtime;try{o.futimesSync(r,t,n)}catch(r){try{o.utimesSync(e.absolute,t,n)}catch(e){i=r}}}if(this[B](e)){const t=this[k](e),n=this[U](e);try{o.fchownSync(r,t,n)}catch(r){try{o.chownSync(e.absolute,t,n)}catch(e){i=i||r}}}n(i)}))}[y](e,t){const i=4095&e.mode||this.dmode,n=this[O](e.absolute,i);if(n)return this[b](n,e),void t();if(e.mtime&&!this.noMtime)try{o.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch(n){}if(this[B](e))try{o.chownSync(e.absolute,this[k](e),this[U](e))}catch(n){}t(),e.resume()}[O](e,t){try{return l.sync(p(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(e){return e}}[v](e,t,i,n){try{o[i+"Sync"](t,e.absolute),n(),e.resume()}catch(t){return this[b](t,e)}}},e.exports=z},5997:(e,t,i)=>{"use strict";const n=i(2093),r=i(1746);e.exports=(e,t,i)=>{const a=n(e);if(!a.file)throw new TypeError("file is required");if(a.gzip)throw new TypeError("cannot append to compressed archives");if(!t||!Array.isArray(t)||!t.length)throw new TypeError("no files or directories specified");return t=Array.from(t),o(a),r(a,t,i)};const o=e=>{const t=e.filter;e.mtimeCache||(e.mtimeCache=new Map),e.filter=t?(i,n)=>t(i,n)&&!(e.mtimeCache.get(i)>n.mtime):(t,i)=>!(e.mtimeCache.get(t)>i.mtime)}},7902:e=>{"use strict";e.exports=e=>class extends e{warn(e,t,i={}){this.file&&(i.file=this.file),this.cwd&&(i.cwd=this.cwd),i.code=t instanceof Error&&t.code||e,i.tarCode=e,this.strict||!1===i.recoverable?t instanceof Error?this.emit("error",Object.assign(t,i)):this.emit("error",Object.assign(new Error(`${e}: ${t}`),i)):(t instanceof Error&&(i=Object.assign(t,i),t=t.message),this.emit("warn",i.tarCode,t,i))}}},619:e=>{"use strict";const t=["|","<",">","?",":"],i=t.map((e=>String.fromCharCode(61440+e.charCodeAt(0)))),n=new Map(t.map(((e,t)=>[e,i[t]]))),r=new Map(i.map(((e,i)=>[e,t[i]])));e.exports={encode:e=>t.reduce(((e,t)=>e.split(t).join(n.get(t))),e),decode:e=>i.reduce(((e,t)=>e.split(t).join(r.get(t))),e)}},4426:(e,t,i)=>{"use strict";const n=i(4577),r=i(4747),o=i(7134),a=i(7147),s=i(1017),l=i(2905),c=i(4922),u=(e,t)=>t?(e=l(e).replace(/^\.(\/|$)/,""),c(t)+"/"+e):l(e),d=Symbol("process"),p=Symbol("file"),h=Symbol("directory"),_=Symbol("symlink"),g=Symbol("hardlink"),m=Symbol("header"),S=Symbol("read"),f=Symbol("lstat"),E=Symbol("onlstat"),T=Symbol("onread"),C=Symbol("onreadlink"),y=Symbol("openfile"),v=Symbol("onopenfile"),R=Symbol("close"),A=Symbol("mode"),I=Symbol("awaitDrain"),w=Symbol("ondrain"),O=Symbol("prefix"),b=Symbol("hadError"),N=i(7902),D=i(619),M=i(2214),L=i(7716),P=N(class extends n{constructor(e,t){if(super(t=t||{}),"string"!=typeof e)throw new TypeError("path is required");this.path=l(e),this.portable=!!t.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=t.maxReadSize||16777216,this.linkCache=t.linkCache||new Map,this.statCache=t.statCache||new Map,this.preservePaths=!!t.preservePaths,this.cwd=l(t.cwd||process.cwd()),this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.mtime=t.mtime||null,this.prefix=t.prefix?l(t.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,"function"==typeof t.onwarn&&this.on("warn",t.onwarn);let i=!1;if(!this.preservePaths){const[e,t]=M(this.path);e&&(this.path=t,i=e)}this.win32=!!t.win32||"win32"===process.platform,this.win32&&(this.path=D.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=l(t.absolute||s.resolve(this.cwd,e)),""===this.path&&(this.path="./"),i&&this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:this,path:i+this.path}),this.statCache.has(this.absolute)?this[E](this.statCache.get(this.absolute)):this[f]()}emit(e,...t){return"error"===e&&(this[b]=!0),super.emit(e,...t)}[f](){a.lstat(this.absolute,((e,t)=>{if(e)return this.emit("error",e);this[E](t)}))}[E](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=B(e),this.emit("stat",e),this[d]()}[d](){switch(this.type){case"File":return this[p]();case"Directory":return this[h]();case"SymbolicLink":return this[_]();default:return this.end()}}[A](e){return L(e,"Directory"===this.type,this.portable)}[O](e){return u(e,this.prefix)}[m](){"Directory"===this.type&&this.portable&&(this.noMtime=!0),this.header=new o({path:this[O](this.path),linkpath:"Link"===this.type?this[O](this.linkpath):this.linkpath,mode:this[A](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new r({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[O](this.path),linkpath:"Link"===this.type?this[O](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[h](){"/"!==this.path.slice(-1)&&(this.path+="/"),this.stat.size=0,this[m](),this.end()}[_](){a.readlink(this.absolute,((e,t)=>{if(e)return this.emit("error",e);this[C](t)}))}[C](e){this.linkpath=l(e),this[m](),this.end()}[g](e){this.type="Link",this.linkpath=l(s.relative(this.cwd,e)),this.stat.size=0,this[m](),this.end()}[p](){if(this.stat.nlink>1){const e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){const t=this.linkCache.get(e);if(0===t.indexOf(this.cwd))return this[g](t)}this.linkCache.set(e,this.absolute)}if(this[m](),0===this.stat.size)return this.end();this[y]()}[y](){a.open(this.absolute,"r",((e,t)=>{if(e)return this.emit("error",e);this[v](t)}))}[v](e){if(this.fd=e,this[b])return this[R]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;const t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[S]()}[S](){const{fd:e,buf:t,offset:i,length:n,pos:r}=this;a.read(e,t,i,n,r,((e,t)=>{if(e)return this[R]((()=>this.emit("error",e)));this[T](t)}))}[R](e){a.close(this.fd,e)}[T](e){if(e<=0&&this.remain>0){const e=new Error("encountered unexpected EOF");return e.path=this.absolute,e.syscall="read",e.code="EOF",this[R]((()=>this.emit("error",e)))}if(e>this.remain){const e=new Error("did not encounter expected EOF");return e.path=this.absolute,e.syscall="read",e.code="EOF",this[R]((()=>this.emit("error",e)))}if(e===this.remain)for(let t=e;t<this.length&&e<this.blockRemain;t++)this.buf[t+this.offset]=0,e++,this.remain++;const t=0===this.offset&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(t)?this[w]():this[I]((()=>this[w]()))}[I](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){const e=new Error("writing more data than expected");return e.path=this.absolute,this.emit("error",e)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[w](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[R]((e=>e?this.emit("error",e):this.end()));this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[S]()}}),x=N(class extends n{constructor(e,t){super(t=t||{}),this.preservePaths=!!t.preservePaths,this.portable=!!t.portable,this.strict=!!t.strict,this.noPax=!!t.noPax,this.noMtime=!!t.noMtime,this.readEntry=e,this.type=e.type,"Directory"===this.type&&this.portable&&(this.noMtime=!0),this.prefix=t.prefix||null,this.path=l(e.path),this.mode=this[A](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:t.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=l(e.linkpath),"function"==typeof t.onwarn&&this.on("warn",t.onwarn);let i=!1;if(!this.preservePaths){const[e,t]=M(this.path);e&&(this.path=t,i=e)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new o({path:this[O](this.path),linkpath:"Link"===this.type?this[O](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),i&&this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:this,path:i+this.path}),this.header.encode()&&!this.noPax&&super.write(new r({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[O](this.path),linkpath:"Link"===this.type?this[O](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[O](e){return u(e,this.prefix)}[A](e){return L(e,"Directory"===this.type,this.portable)}write(e){const t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=t,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});P.Sync=class extends P{[f](){this[E](a.lstatSync(this.absolute))}[_](){this[C](a.readlinkSync(this.absolute))}[y](){this[v](a.openSync(this.absolute,"r"))}[S](){let e=!0;try{const{fd:t,buf:i,offset:n,length:r,pos:o}=this,s=a.readSync(t,i,n,r,o);this[T](s),e=!1}finally{if(e)try{this[R]((()=>{}))}catch(e){}}}[I](e){e()}[R](e){a.closeSync(this.fd),e()}},P.Tar=x;const B=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported";e.exports=P},4577:(e,t,i)=>{"use strict";const n="object"==typeof process&&process?process:{stdout:null,stderr:null},r=i(2361),o=i(2781),a=i(1576).StringDecoder,s=Symbol("EOF"),l=Symbol("maybeEmitEnd"),c=Symbol("emittedEnd"),u=Symbol("emittingEnd"),d=Symbol("emittedError"),p=Symbol("closed"),h=Symbol("read"),_=Symbol("flush"),g=Symbol("flushChunk"),m=Symbol("encoding"),S=Symbol("decoder"),f=Symbol("flowing"),E=Symbol("paused"),T=Symbol("resume"),C=Symbol("buffer"),y=Symbol("pipes"),v=Symbol("bufferLength"),R=Symbol("bufferPush"),A=Symbol("bufferShift"),I=Symbol("objectMode"),w=Symbol("destroyed"),O=Symbol("emitData"),b=Symbol("emitEnd"),N=Symbol("emitEnd2"),D=Symbol("async"),M=e=>Promise.resolve().then(e),L="1"!==global._MP_NO_ITERATOR_SYMBOLS_,P=L&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),x=L&&Symbol.iterator||Symbol("iterator not implemented");class B{constructor(e,t,i){this.src=e,this.dest=t,this.opts=i,this.ondrain=()=>e[T](),t.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class k extends B{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,i){super(e,t,i),this.proxyErrors=e=>t.emit("error",e),e.on("error",this.proxyErrors)}}e.exports=class e extends o{constructor(e){super(),this[f]=!1,this[E]=!1,this[y]=[],this[C]=[],this[I]=e&&e.objectMode||!1,this[I]?this[m]=null:this[m]=e&&e.encoding||null,"buffer"===this[m]&&(this[m]=null),this[D]=e&&!!e.async||!1,this[S]=this[m]?new a(this[m]):null,this[s]=!1,this[c]=!1,this[u]=!1,this[p]=!1,this[d]=null,this.writable=!0,this.readable=!0,this[v]=0,this[w]=!1,e&&!0===e.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[C]}),e&&!0===e.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[y]})}get bufferLength(){return this[v]}get encoding(){return this[m]}set encoding(e){if(this[I])throw new Error("cannot set encoding in objectMode");if(this[m]&&e!==this[m]&&(this[S]&&this[S].lastNeed||this[v]))throw new Error("cannot change encoding");this[m]!==e&&(this[S]=e?new a(e):null,this[C].length&&(this[C]=this[C].map((e=>this[S].write(e))))),this[m]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[I]}set objectMode(e){this[I]=this[I]||!!e}get async(){return this[D]}set async(e){this[D]=this[D]||!!e}write(e,t,i){if(this[s])throw new Error("write after end");if(this[w])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof t&&(i=t,t="utf8"),t||(t="utf8");const n=this[D]?M:e=>e();var r;return this[I]||Buffer.isBuffer(e)||(r=e,!Buffer.isBuffer(r)&&ArrayBuffer.isView(r)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(e=>e instanceof ArrayBuffer||"object"==typeof e&&e.constructor&&"ArrayBuffer"===e.constructor.name&&e.byteLength>=0)(e)?e=Buffer.from(e):"string"!=typeof e&&(this.objectMode=!0)),this[I]?(this.flowing&&0!==this[v]&&this[_](!0),this.flowing?this.emit("data",e):this[R](e),0!==this[v]&&this.emit("readable"),i&&n(i),this.flowing):e.length?("string"!=typeof e||t===this[m]&&!this[S].lastNeed||(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[m]&&(e=this[S].write(e)),this.flowing&&0!==this[v]&&this[_](!0),this.flowing?this.emit("data",e):this[R](e),0!==this[v]&&this.emit("readable"),i&&n(i),this.flowing):(0!==this[v]&&this.emit("readable"),i&&n(i),this.flowing)}read(e){if(this[w])return null;if(0===this[v]||0===e||e>this[v])return this[l](),null;this[I]&&(e=null),this[C].length>1&&!this[I]&&(this.encoding?this[C]=[this[C].join("")]:this[C]=[Buffer.concat(this[C],this[v])]);const t=this[h](e||null,this[C][0]);return this[l](),t}[h](e,t){return e===t.length||null===e?this[A]():(this[C][0]=t.slice(e),t=t.slice(0,e),this[v]-=e),this.emit("data",t),this[C].length||this[s]||this.emit("drain"),t}end(e,t,i){return"function"==typeof e&&(i=e,e=null),"function"==typeof t&&(i=t,t="utf8"),e&&this.write(e,t),i&&this.once("end",i),this[s]=!0,this.writable=!1,!this.flowing&&this[E]||this[l](),this}[T](){this[w]||(this[E]=!1,this[f]=!0,this.emit("resume"),this[C].length?this[_]():this[s]?this[l]():this.emit("drain"))}resume(){return this[T]()}pause(){this[f]=!1,this[E]=!0}get destroyed(){return this[w]}get flowing(){return this[f]}get paused(){return this[E]}[R](e){this[I]?this[v]+=1:this[v]+=e.length,this[C].push(e)}[A](){return this[C].length&&(this[I]?this[v]-=1:this[v]-=this[C][0].length),this[C].shift()}[_](e){do{}while(this[g](this[A]()));e||this[C].length||this[s]||this.emit("drain")}[g](e){return!!e&&(this.emit("data",e),this.flowing)}pipe(e,t){if(this[w])return;const i=this[c];return t=t||{},e===n.stdout||e===n.stderr?t.end=!1:t.end=!1!==t.end,t.proxyErrors=!!t.proxyErrors,i?t.end&&e.end():(this[y].push(t.proxyErrors?new k(this,e,t):new B(this,e,t)),this[D]?M((()=>this[T]())):this[T]()),e}unpipe(e){const t=this[y].find((t=>t.dest===e));t&&(this[y].splice(this[y].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){const i=super.on(e,t);return"data"!==e||this[y].length||this.flowing?"readable"===e&&0!==this[v]?super.emit("readable"):(e=>"end"===e||"finish"===e||"prefinish"===e)(e)&&this[c]?(super.emit(e),this.removeAllListeners(e)):"error"===e&&this[d]&&(this[D]?M((()=>t.call(this,this[d]))):t.call(this,this[d])):this[T](),i}get emittedEnd(){return this[c]}[l](){this[u]||this[c]||this[w]||0!==this[C].length||!this[s]||(this[u]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[p]&&this.emit("close"),this[u]=!1)}emit(e,t,...i){if("error"!==e&&"close"!==e&&e!==w&&this[w])return;if("data"===e)return!!t&&(this[D]?M((()=>this[O](t))):this[O](t));if("end"===e)return this[b]();if("close"===e){if(this[p]=!0,!this[c]&&!this[w])return;const e=super.emit("close");return this.removeAllListeners("close"),e}if("error"===e){this[d]=t;const e=super.emit("error",t);return this[l](),e}if("resume"===e){const e=super.emit("resume");return this[l](),e}if("finish"===e||"prefinish"===e){const t=super.emit(e);return this.removeAllListeners(e),t}const n=super.emit(e,t,...i);return this[l](),n}[O](e){for(const t of this[y])!1===t.dest.write(e)&&this.pause();const t=super.emit("data",e);return this[l](),t}[b](){this[c]||(this[c]=!0,this.readable=!1,this[D]?M((()=>this[N]())):this[N]())}[N](){if(this[S]){const e=this[S].end();if(e){for(const t of this[y])t.dest.write(e);super.emit("data",e)}}for(const e of this[y])e.end();const e=super.emit("end");return this.removeAllListeners("end"),e}collect(){const e=[];this[I]||(e.dataLength=0);const t=this.promise();return this.on("data",(t=>{e.push(t),this[I]||(e.dataLength+=t.length)})),t.then((()=>e))}concat(){return this[I]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then((e=>this[I]?Promise.reject(new Error("cannot concat in objectMode")):this[m]?e.join(""):Buffer.concat(e,e.dataLength)))}promise(){return new Promise(((e,t)=>{this.on(w,(()=>t(new Error("stream destroyed")))),this.on("error",(e=>t(e))),this.on("end",(()=>e()))}))}[P](){return{next:()=>{const e=this.read();if(null!==e)return Promise.resolve({done:!1,value:e});if(this[s])return Promise.resolve({done:!0});let t=null,i=null;const n=e=>{this.removeListener("data",r),this.removeListener("end",o),i(e)},r=e=>{this.removeListener("error",n),this.removeListener("end",o),this.pause(),t({value:e,done:!!this[s]})},o=()=>{this.removeListener("error",n),this.removeListener("data",r),t({done:!0})},a=()=>n(new Error("stream destroyed"));return new Promise(((e,s)=>{i=s,t=e,this.once(w,a),this.once("error",n),this.once("end",o),this.once("data",r)}))}}}[x](){return{next:()=>{const e=this.read();return{value:e,done:null===e}}}}destroy(e){return this[w]?(e?this.emit("error",e):this.emit(w),this):(this[w]=!0,this[C].length=0,this[v]=0,"function"!=typeof this.close||this[p]||this.close(),e?this.emit("error",e):this.emit(w),this)}static isStream(t){return!!t&&(t instanceof e||t instanceof o||t instanceof r&&("function"==typeof t.pipe||"function"==typeof t.write&&"function"==typeof t.end))}}},6276:(e,t,i)=>{const n=i(7147),r=i(1017),o=i(6113),a=i(5339),s=process.binding("constants"),l=a(),c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u=/XXXXXX/,d=(s.O_CREAT||s.fs.O_CREAT)|(s.O_EXCL||s.fs.O_EXCL)|(s.O_RDWR||s.fs.O_RDWR),p=s.EBADF||s.os.errno.EBADF,h=s.ENOENT||s.os.errno.ENOENT,_=[];var g=!1,m=!1;function S(e){var t=[],i=null;try{i=o.randomBytes(e)}catch(t){i=o.pseudoRandomBytes(e)}for(var n=0;n<e;n++)t.push(c[i[n]%c.length]);return t.join("")}function f(e){return void 0===e}function E(e,t){return"function"==typeof e?[t||{},e]:f(e)?[{},t]:[e,t]}function T(e){if(e.name)return r.join(e.dir||l,e.name);if(e.template)return e.template.replace(u,S(6));const t=[e.prefix||"tmp-",process.pid,S(12),e.postfix||""].join("");return r.join(e.dir||l,t)}function C(e,t){var i=E(e,t),r=i[0],o=i[1],a=r.name?1:r.tries||3;return isNaN(a)||a<0?o(new Error("Invalid tries")):r.template&&!r.template.match(u)?o(new Error("Invalid template provided")):void function e(){const t=T(r);n.stat(t,(function(i){if(!i)return a-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)}))}()}function y(e){var t=E(e)[0],i=t.name?1:t.tries||3;if(isNaN(i)||i<0)throw new Error("Invalid tries");if(t.template&&!t.template.match(u))throw new Error("Invalid template provided");do{const e=T(t);try{n.statSync(e)}catch(t){return e}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function v(e){const t=[e];do{for(var i=t.pop(),o=!1,a=n.readdirSync(i),s=0,l=a.length;s<l;s++){var c=r.join(i,a[s]);n.lstatSync(c).isDirectory()?(o||(o=!0,t.push(i)),t.push(c)):n.unlinkSync(c)}o||n.rmdirSync(i)}while(0!==t.length)}function R(e,t,i){const r=I((function(e){try{0<=e[0]&&n.closeSync(e[0])}catch(e){if(!b(e,-p,"EBADF")&&!O(e))throw e}try{n.unlinkSync(e[1])}catch(e){if(!O(e))throw e}}),[t,e]);return i.keep||_.unshift(r),r}function A(e,t){const i=I(t.unsafeCleanup?v:n.rmdirSync.bind(n),e);return t.keep||_.unshift(i),i}function I(e,t){var i=!1;return function n(r){if(!i){const r=_.indexOf(n);r>=0&&_.splice(r,1),i=!0,e(t)}r&&r(null)}}function w(){if(!m||g)for(;_.length;)try{_[0].call(null)}catch(e){}}function O(e){return b(e,-h,"ENOENT")}function b(e,t,i){return e.code==t||e.code==i}const N=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===N[0]&&(N[1]<9||9===N[1]&&N[2]<5)&&process.addListener("uncaughtException",(function(e){throw m=!0,w(),e})),process.addListener("exit",(function(e){e&&(m=!0),w()})),e.exports.tmpdir=l,e.exports.dir=function(e,t){var i=E(e,t),r=i[0],o=i[1];C(r,(function(e,t){if(e)return o(e);n.mkdir(t,r.mode||448,(function(e){if(e)return o(e);o(null,t,A(t,r))}))}))},e.exports.dirSync=function(e){var t=E(e)[0];const i=y(t);return n.mkdirSync(i,t.mode||448),{name:i,removeCallback:A(i,t)}},e.exports.file=function(e,t){var i=E(e,t),r=i[0],o=i[1];r.postfix=f(r.postfix)?".tmp":r.postfix,C(r,(function(e,t){if(e)return o(e);n.open(t,d,r.mode||384,(function(e,i){return e?o(e):r.discardDescriptor?n.close(i,(function(e){if(e){try{n.unlinkSync(t)}catch(t){O(t)||(e=t)}return o(e)}o(null,t,void 0,R(t,-1,r))})):r.detachDescriptor?o(null,t,i,R(t,-1,r)):void o(null,t,i,R(t,i,r))}))}))},e.exports.fileSync=function(e){var t=E(e)[0];t.postfix=t.postfix||".tmp";const i=t.discardDescriptor||t.detachDescriptor,r=y(t);var o=n.openSync(r,d,t.mode||384);return t.discardDescriptor&&(n.closeSync(o),o=void 0),{name:r,fd:o,removeCallback:R(r,i?-1:o,t)}},e.exports.tmpName=C,e.exports.tmpNameSync=y,e.exports.setGracefulCleanup=function(){g=!0}},2277:(e,t,i)=>{"use strict";i.r(t),i.d(t,{NIL:()=>y,parse:()=>S,stringify:()=>d,v1:()=>m,v3:()=>E,v4:()=>T,v5:()=>C,validate:()=>c,version:()=>v});var n=i(6113),r=i.n(n);const o=new Uint8Array(256);let a=o.length;function s(){return a>o.length-16&&(r().randomFillSync(o),a=0),o.slice(a,a+=16)}const l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=function(e){return"string"==typeof e&&l.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).substr(1));const d=function(e,t=0){const i=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!c(i))throw TypeError("Stringified UUID is invalid");return i};let p,h,_=0,g=0;const m=function(e,t,i){let n=t&&i||0;const r=t||new Array(16);let o=(e=e||{}).node||p,a=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==a){const t=e.random||(e.rng||s)();null==o&&(o=p=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==a&&(a=h=16383&(t[6]<<8|t[7]))}let l=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:g+1;const u=l-_+(c-g)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||l>_)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_=l,g=c,h=a,l+=122192928e5;const m=(1e4*(268435455&l)+c)%4294967296;r[n++]=m>>>24&255,r[n++]=m>>>16&255,r[n++]=m>>>8&255,r[n++]=255&m;const S=l/4294967296*1e4&268435455;r[n++]=S>>>8&255,r[n++]=255&S,r[n++]=S>>>24&15|16,r[n++]=S>>>16&255,r[n++]=a>>>8|128,r[n++]=255&a;for(let e=0;e<6;++e)r[n+e]=o[e];return t||d(r)},S=function(e){if(!c(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i};function f(e,t,i){function n(e,n,r,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof n&&(n=S(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),a=i(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,r){o=o||0;for(let e=0;e<16;++e)r[o+e]=a[e];return r}return d(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const E=f("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r().createHash("md5").update(e).digest()})),T=function(e,t,i){const n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return d(n)},C=f("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r().createHash("sha1").update(e).digest()})),y="00000000-0000-0000-0000-000000000000",v=function(e){if(!c(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},3126:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3680),r=i(2593);var o;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n.Event.None}),e.is=function(t){let i=t;return i&&(i===e.None||i===e.Cancelled||r.boolean(i.isCancellationRequested)&&!!i.onCancellationRequested)}}(o=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}));class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=o.Cancelled}dispose(){this.cancel()}}},3680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}},function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,i){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(i)&&i.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(this._callbacks){for(var i=!1,n=0,r=this._callbacks.length;n<r;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);i=!0}if(i)throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks)return[];for(var t=[],i=this._callbacks.slice(0),n=this._contexts.slice(0),r=0,o=i.length;r<o;r++)try{t.push(i[r].apply(n[r],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{let o;return this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t),o={dispose:()=>{this._callbacks.remove(e,t),o.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}},Array.isArray(r)&&r.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}n._noop=function(){},t.Emitter=n},2593:(e,t)=>{"use strict";function i(e){return"string"==typeof e||e instanceof String}function n(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=n,t.stringArray=function(e){return n(e)&&e.every((e=>i(e)))}},397:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(i=t.Touch||(t.Touch={})),t.LinkedMap=class{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,n=i.None){let r=this._map.get(e);if(r)r.value=t,n!==i.None&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case i.None:this.addItemLast(r);break;case i.First:this.addItemFirst(r);break;case i.Last:default:this.addItemLast(r)}this._map.set(e,r),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._head;for(;i;)t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),i=i.next}forEachReverse(e,t){let i=this._tail;for(;i;)t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),i=i.previous}values(){let e=[],t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){let e=[],t=this._head;for(;t;)e.push(t.key),t=t.next;return e}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===i.First||t===i.Last)if(t===i.First){if(e===this._head)return;const t=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===i.Last){if(e===this._tail)return;const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},8231:(e,t,i)=>{"use strict";function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0});const r=i(2593),o=i(3234);t.RequestType=o.RequestType,t.RequestType0=o.RequestType0,t.RequestType1=o.RequestType1,t.RequestType2=o.RequestType2,t.RequestType3=o.RequestType3,t.RequestType4=o.RequestType4,t.RequestType5=o.RequestType5,t.RequestType6=o.RequestType6,t.RequestType7=o.RequestType7,t.RequestType8=o.RequestType8,t.RequestType9=o.RequestType9,t.ResponseError=o.ResponseError,t.ErrorCodes=o.ErrorCodes,t.NotificationType=o.NotificationType,t.NotificationType0=o.NotificationType0,t.NotificationType1=o.NotificationType1,t.NotificationType2=o.NotificationType2,t.NotificationType3=o.NotificationType3,t.NotificationType4=o.NotificationType4,t.NotificationType5=o.NotificationType5,t.NotificationType6=o.NotificationType6,t.NotificationType7=o.NotificationType7,t.NotificationType8=o.NotificationType8,t.NotificationType9=o.NotificationType9;const a=i(6386);t.MessageReader=a.MessageReader,t.StreamMessageReader=a.StreamMessageReader,t.IPCMessageReader=a.IPCMessageReader,t.SocketMessageReader=a.SocketMessageReader;const s=i(9725);t.MessageWriter=s.MessageWriter,t.StreamMessageWriter=s.StreamMessageWriter,t.IPCMessageWriter=s.IPCMessageWriter,t.SocketMessageWriter=s.SocketMessageWriter;const l=i(3680);t.Disposable=l.Disposable,t.Event=l.Event,t.Emitter=l.Emitter;const c=i(3126);t.CancellationTokenSource=c.CancellationTokenSource,t.CancellationToken=c.CancellationToken;const u=i(397);var d,p,h,_,g,m,S;n(i(3377)),n(i(1609)),function(e){e.type=new o.NotificationType("$/cancelRequest")}(d||(d={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(p=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":default:return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(p=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTraceNotification")}(_=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTraceNotification")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(m=t.ConnectionErrors||(t.ConnectionErrors={}));class f extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,f.prototype)}}function E(e,t,i,n){let a=0,s=0,E=0;const T="2.0";let C,y,v,R,A=Object.create(null),I=Object.create(null),w=new u.LinkedMap,O=Object.create(null),b=Object.create(null),N=p.Off,D=h.Text,M=S.New,L=new l.Emitter,P=new l.Emitter,x=new l.Emitter,B=new l.Emitter;function k(e){return"req-"+e.toString()}function U(e){}function F(){return M===S.Listening}function G(){return M===S.Closed}function V(){return M===S.Disposed}function q(){M!==S.New&&M!==S.Listening||(M=S.Closed,P.fire(void 0))}function j(){v||0===w.size||(v=setImmediate((()=>{v=void 0,function(){if(0===w.size)return;let e=w.shift();try{o.isRequestMessage(e)?function(e){if(V())return;function i(i,n,r){let a={jsonrpc:T,id:e.id};i instanceof o.ResponseError?a.error=i.toJson():a.result=void 0===i?null:i,z(a,n,r),t.write(a)}function n(i,n,r){let o={jsonrpc:T,id:e.id,error:i.toJson()};z(o,n,r),t.write(o)}!function(e){if(N!==p.Off&&R)if(D===h.Text){let t;N===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),R.log(`Received request '${e.method} - (${e.id})'.`,t)}else W("receive-request",e)}(e);let a,s,l=A[e.method];l&&(a=l.type,s=l.handler);let u=Date.now();if(s||C){let l=new c.CancellationTokenSource,d=String(e.id);b[d]=l;try{let c;c=void 0===e.params||void 0!==a&&0===a.numberOfParams?s?s(l.token):C(e.method,l.token):r.array(e.params)&&(void 0===a||a.numberOfParams>1)?s?s(...e.params,l.token):C(e.method,...e.params,l.token):s?s(e.params,l.token):C(e.method,e.params,l.token);let p=c;c?p.then?p.then((t=>{delete b[d],i(t,e.method,u)}),(t=>{delete b[d],t instanceof o.ResponseError?n(t,e.method,u):t&&r.string(t.message)?n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)})):(delete b[d],i(c,e.method,u)):(delete b[d],function(i,n,r){void 0===i&&(i=null);let o={jsonrpc:T,id:e.id,result:i};z(o,n,r),t.write(o)}(c,e.method,u))}catch(t){delete b[d],t instanceof o.ResponseError?i(t,e.method,u):t&&r.string(t.message)?n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,u):n(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,u)}}else n(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,u)}(e):o.isNotificationMessage(e)?function(e){if(V())return;let t,n;if(e.method===d.type.method)n=e=>{let t=e.id,i=b[String(t)];i&&i.cancel()};else{let i=I[e.method];i&&(n=i.handler,t=i.type)}if(n||y)try{!function(e){if(N!==p.Off&&R&&e.method!==g.type.method)if(D===h.Text){let t;N===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),R.log(`Received notification '${e.method}'.`,t)}else W("receive-notification",e)}(e),void 0===e.params||void 0!==t&&0===t.numberOfParams?n?n():y(e.method):r.array(e.params)&&(void 0===t||t.numberOfParams>1)?n?n(...e.params):y(e.method,...e.params):n?n(e.params):y(e.method,e.params)}catch(t){t.message?i.error(`Notification handler '${e.method}' failed with message: ${t.message}`):i.error(`Notification handler '${e.method}' failed unexpectedly.`)}else x.fire(e)}(e):o.isResponseMessage(e)?function(e){if(!V())if(null===e.id)e.error?i.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let t=String(e.id),n=O[t];if(function(e,t){if(N!==p.Off&&R)if(D===h.Text){let i;if(N===p.Verbose&&(e.error&&e.error.data?i=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?i=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(i="No result returned.\n\n")),t){let n=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";R.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${n}`,i)}else R.log(`Received response ${e.id} without active response promise.`,i)}else W("receive-response",e)}(e,n),n){delete O[t];try{if(e.error){let t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?i.error(`Response handler '${n.method}' failed with message: ${e.message}`):i.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void i.error("Received empty message.");i.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(r.string(t.id)||r.number(t.id)){let e=String(t.id),i=O[e];i&&i.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{j()}}()})))}e.onClose(q),e.onError((function(e){L.fire([e,void 0,void 0])})),t.onClose(q),t.onError((function(e){L.fire(e)}));let H=e=>{try{if(o.isNotificationMessage(e)&&e.method===d.type.method){let i=k(e.params.id),r=w.get(i);if(o.isRequestMessage(r)){let o=n&&n.cancelUndispatched?n.cancelUndispatched(r,U):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return w.delete(i),o.id=r.id,z(o,e.method,Date.now()),void t.write(o)}}!function(e,t){var i;o.isRequestMessage(t)?e.set(k(t.id),t):o.isResponseMessage(t)?e.set(null===(i=t.id)?"res-unknown-"+(++E).toString():"res-"+i.toString(),t):e.set("not-"+(++s).toString(),t)}(w,e)}finally{j()}};function z(e,t,i){if(N!==p.Off&&R)if(D===h.Text){let n;N===p.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),R.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-i}ms`,n)}else W("send-response",e)}function W(e,t){if(!R||N===p.Off)return;const i={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};R.log(i)}function K(){if(G())throw new f(m.Closed,"Connection is closed.");if(V())throw new f(m.Disposed,"Connection is disposed.")}function Q(e){return void 0===e?null:e}function Y(e,t){let i,n=e.numberOfParams;switch(n){case 0:i=null;break;case 1:i=Q(t[0]);break;default:i=[];for(let e=0;e<t.length&&e<n;e++)i.push(Q(t[e]));if(t.length<n)for(let e=t.length;e<n;e++)i.push(null)}return i}let $={sendNotification:(e,...i)=>{let n,o;if(K(),r.string(e))switch(n=e,i.length){case 0:o=null;break;case 1:o=i[0];break;default:o=i}else n=e.method,o=Y(e,i);let a={jsonrpc:T,method:n,params:o};!function(e){if(N!==p.Off&&R)if(D===h.Text){let t;N===p.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),R.log(`Sending notification '${e.method}'.`,t)}else W("send-notification",e)}(a),t.write(a)},onNotification:(e,t)=>{K(),r.func(e)?y=e:t&&(r.string(e)?I[e]={type:void 0,handler:t}:I[e.method]={type:e,handler:t})},sendRequest:(e,...i)=>{let n,s,l;if(K(),function(){if(!F())throw new Error("Call listen() first.")}(),r.string(e))switch(n=e,i.length){case 0:s=null;break;case 1:c.CancellationToken.is(i[0])?(s=null,l=i[0]):s=Q(i[0]);break;default:const e=i.length-1;c.CancellationToken.is(i[e])?(l=i[e],s=2===i.length?Q(i[0]):i.slice(0,e).map((e=>Q(e)))):s=i.map((e=>Q(e)))}else{n=e.method,s=Y(e,i);let t=e.numberOfParams;l=c.CancellationToken.is(i[t])?i[t]:void 0}let u=a++,_=new Promise(((e,i)=>{let r={jsonrpc:T,id:u,method:n,params:s},a={method:n,timerStart:Date.now(),resolve:e,reject:i};!function(e){if(N!==p.Off&&R)if(D===h.Text){let t;N===p.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),R.log(`Sending request '${e.method} - (${e.id})'.`,t)}else W("send-request",e)}(r);try{t.write(r)}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&(O[String(u)]=a)}));return l&&l.onCancellationRequested((()=>{$.sendNotification(d.type,{id:u})})),_},onRequest:(e,t)=>{K(),r.func(e)?C=e:t&&(r.string(e)?A[e]={type:void 0,handler:t}:A[e.method]={type:e,handler:t})},trace:(e,t,i)=>{let n=!1,o=h.Text;void 0!==i&&(r.boolean(i)?n=i:(n=i.sendNotification||!1,o=i.traceFormat||h.Text)),N=e,D=o,R=N===p.Off?void 0:t,!n||G()||V()||$.sendNotification(_.type,{value:p.toString(e)})},onError:L.event,onClose:P.event,onUnhandledNotification:x.event,onDispose:B.event,dispose:()=>{if(V())return;M=S.Disposed,B.fire(void 0);let i=new Error("Connection got disposed.");Object.keys(O).forEach((e=>{O[e].reject(i)})),O=Object.create(null),b=Object.create(null),w=new u.LinkedMap,r.func(t.dispose)&&t.dispose(),r.func(e.dispose)&&e.dispose()},listen:()=>{K(),function(){if(F())throw new f(m.AlreadyListening,"Connection is already listening")}(),M=S.Listening,e.listen(H)},inspect:()=>{console.log("inspect")}};return $.onNotification(g.type,(e=>{N!==p.Off&&R&&R.log(e.message,N===p.Verbose?e.verbose:void 0)})),$}t.ConnectionError=f,(t.ConnectionStrategy||(t.ConnectionStrategy={})).is=function(e){let t=e;return t&&r.func(t.cancelUndispatched)},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(S||(S={})),t.createMessageConnection=function(e,i,n,r){n||(n=t.NullLogger);let o=void 0!==(l=e).listen&&void 0===l.read?e:new a.StreamMessageReader(e);var l;let c=function(e){return void 0!==e.write&&void 0===e.end}(i)?i:new s.StreamMessageWriter(i);return E(o,c,n,r)}},6386:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3680),r=i(2593);let o=8192,a=Buffer.from("\r","ascii")[0],s=Buffer.from("\n","ascii")[0];class l{constructor(e="utf8"){this.encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(o)}append(e){var t=e;if("string"==typeof e){var i=e,n=Buffer.byteLength(i,this.encoding);(t=Buffer.allocUnsafe(n)).write(i,0,n,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var r=(Math.ceil((this.index+t.length)/o)+1)*o;0===this.index?(this.buffer=Buffer.allocUnsafe(r),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],r)}this.index+=t.length}tryReadHeaders(){let e,t=0;for(;t+3<this.index&&(this.buffer[t]!==a||this.buffer[t+1]!==s||this.buffer[t+2]!==a||this.buffer[t+3]!==s);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach((t=>{let i=t.indexOf(":");if(-1===i)throw new Error("Message header must separate key and value using :");let n=t.substr(0,i),r=t.substr(i+1).trim();e[n]=r}));let i=t+4;return this.buffer=this.buffer.slice(i),this.index=this.index-i,e}tryReadContent(e){if(this.index<e)return null;let t=this.buffer.toString(this.encoding,0,e),i=e;return this.buffer.copy(this.buffer,0,i),this.index=this.index-i,t}get numberOfBytes(){return this.index}}(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&r.func(t.listen)&&r.func(t.dispose)&&r.func(t.onError)&&r.func(t.onClose)&&r.func(t.onPartialMessage)};class c{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter,this.partialMessageEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader recevied error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=c;class u extends c{constructor(e,t="utf8"){super(),this.readable=e,this.buffer=new l(t),this._partialMessageTimeout=1e4}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",(e=>{this.onData(e)})),this.readable.on("error",(e=>this.fireError(e))),this.readable.on("close",(()=>this.fireClose()))}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){let e=this.buffer.tryReadHeaders();if(!e)return;let t=e["Content-Length"];if(!t)throw new Error("Header must provide a Content-Length property.");let i=parseInt(t);if(isNaN(i))throw new Error("Content-Length value must be a number.");this.nextMessageLength=i}var t=this.buffer.tryReadContent(this.nextMessageLength);if(null===t)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var i=JSON.parse(t);this.callback(i)}}clearPartialMessageTimer(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}t.StreamMessageReader=u,t.IPCMessageReader=class extends c{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){this.process.on("message",e)}},t.SocketMessageReader=class extends u{constructor(e,t="utf-8"){super(e,t)}}},9725:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3680),r=i(2593);let o="Content-Length: ",a="\r\n";(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&r.func(t.dispose)&&r.func(t.onClose)&&r.func(t.onError)&&r.func(t.write)};class s{constructor(){this.errorEmitter=new n.Emitter,this.closeEmitter=new n.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,i){this.errorEmitter.fire([this.asError(e),t,i])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer recevied error. Reason: ${r.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=s,t.StreamMessageWriter=class extends s{constructor(e,t="utf8"){super(),this.writable=e,this.encoding=t,this.errorCount=0,this.writable.on("error",(e=>this.fireError(e))),this.writable.on("close",(()=>this.fireClose()))}write(e){let t=JSON.stringify(e),i=Buffer.byteLength(t,this.encoding),n=[o,i.toString(),a,a];try{this.writable.write(n.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.IPCMessageWriter=class extends s{constructor(e){super(),this.process=e,this.errorCount=0,this.queue=[],this.sending=!1;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,(t=>{this.sending=!1,t?(this.errorCount++,this.fireError(t,e,this.errorCount)):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())})))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}}},t.SocketMessageWriter=class extends s{constructor(e,t="utf8"){super(),this.socket=e,this.queue=[],this.sending=!1,this.encoding=t,this.errorCount=0,this.socket.on("error",(e=>this.fireError(e))),this.socket.on("close",(()=>this.fireClose()))}write(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)}doWriteMessage(e){let t=JSON.stringify(e),i=Buffer.byteLength(t,this.encoding),n=[o,i.toString(),a,a];try{this.sending=!0,this.socket.write(n.join(""),"ascii",(i=>{i&&this.handleError(i,e);try{this.socket.write(t,this.encoding,(t=>{this.sending=!1,t?this.handleError(t,e):this.errorCount=0,this.queue.length>0&&this.doWriteMessage(this.queue.shift())}))}catch(i){this.handleError(i,e)}}))}catch(t){this.handleError(t,e)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},3234:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2593);var r;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(r=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,i){super(t),this.code=n.number(e)?e:r.UnknownErrorCode,this.data=i,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class a{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}}t.AbstractMessageType=a,t.RequestType0=class extends a{constructor(e){super(e,0),this._=void 0}},t.RequestType=class extends a{constructor(e){super(e,1),this._=void 0}},t.RequestType1=class extends a{constructor(e){super(e,1),this._=void 0}},t.RequestType2=class extends a{constructor(e){super(e,2),this._=void 0}},t.RequestType3=class extends a{constructor(e){super(e,3),this._=void 0}},t.RequestType4=class extends a{constructor(e){super(e,4),this._=void 0}},t.RequestType5=class extends a{constructor(e){super(e,5),this._=void 0}},t.RequestType6=class extends a{constructor(e){super(e,6),this._=void 0}},t.RequestType7=class extends a{constructor(e){super(e,7),this._=void 0}},t.RequestType8=class extends a{constructor(e){super(e,8),this._=void 0}},t.RequestType9=class extends a{constructor(e){super(e,9),this._=void 0}},t.NotificationType=class extends a{constructor(e){super(e,1),this._=void 0}},t.NotificationType0=class extends a{constructor(e){super(e,0),this._=void 0}},t.NotificationType1=class extends a{constructor(e){super(e,1),this._=void 0}},t.NotificationType2=class extends a{constructor(e){super(e,2),this._=void 0}},t.NotificationType3=class extends a{constructor(e){super(e,3),this._=void 0}},t.NotificationType4=class extends a{constructor(e){super(e,4),this._=void 0}},t.NotificationType5=class extends a{constructor(e){super(e,5),this._=void 0}},t.NotificationType6=class extends a{constructor(e){super(e,6),this._=void 0}},t.NotificationType7=class extends a{constructor(e){super(e,7),this._=void 0}},t.NotificationType8=class extends a{constructor(e){super(e,8),this._=void 0}},t.NotificationType9=class extends a{constructor(e){super(e,9),this._=void 0}},t.isRequestMessage=function(e){let t=e;return t&&n.string(t.method)&&(n.string(t.id)||n.number(t.id))},t.isNotificationMessage=function(e){let t=e;return t&&n.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){let t=e;return t&&(void 0!==t.result||!!t.error)&&(n.string(t.id)||n.number(t.id)||null===t.id)}},3377:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1017),r=i(2037),o=i(6113),a=i(1808),s=i(6386),l=i(9725);t.generateRandomPipeName=function(){const e=o.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:n.join(r.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let i,n=new Promise(((e,t)=>{i=e}));return new Promise(((r,o)=>{let c=a.createServer((e=>{c.close(),i([new s.SocketMessageReader(e,t),new l.SocketMessageWriter(e,t)])}));c.on("error",o),c.listen(e,(()=>{c.removeListener("error",o),r({onConnected:()=>n})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const i=a.createConnection(e);return[new s.SocketMessageReader(i,t),new l.SocketMessageWriter(i,t)]}},1609:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1808),r=i(6386),o=i(9725);t.createClientSocketTransport=function(e,t="utf-8"){let i,a=new Promise(((e,t)=>{i=e}));return new Promise(((s,l)=>{let c=n.createServer((e=>{c.close(),i([new r.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])}));c.on("error",l),c.listen(e,"127.0.0.1",(()=>{c.removeListener("error",l),s({onConnected:()=>a})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const i=n.createConnection(e,"127.0.0.1");return[new r.SocketMessageReader(i,t),new o.SocketMessageWriter(i,t)]}},5620:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9496),r=i(4192),o=i(7620),a=i(3101),s=i(2097),l=i(3299),c=i(2884);!function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(4192));class u{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}var d,p,h,_,g;!function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(d=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(p=t.CloseAction||(t.CloseAction={}));class m{constructor(e){this.name=e,this.restarts=[]}error(e,t,i){return i&&i<=3?d.Continue:d.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?p.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(n.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),p.DoNotRestart):(this.restarts.shift(),p.Restart)}}!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(h=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(_=t.State||(t.State={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(g||(g={}));const S=[r.SymbolKind.File,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Package,r.SymbolKind.Class,r.SymbolKind.Method,r.SymbolKind.Property,r.SymbolKind.Field,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.Interface,r.SymbolKind.Function,r.SymbolKind.Variable,r.SymbolKind.Constant,r.SymbolKind.String,r.SymbolKind.Number,r.SymbolKind.Boolean,r.SymbolKind.Array,r.SymbolKind.Object,r.SymbolKind.Key,r.SymbolKind.Null,r.SymbolKind.EnumMember,r.SymbolKind.Struct,r.SymbolKind.Event,r.SymbolKind.Operator,r.SymbolKind.TypeParameter],f=[r.CompletionItemKind.Text,r.CompletionItemKind.Method,r.CompletionItemKind.Function,r.CompletionItemKind.Constructor,r.CompletionItemKind.Field,r.CompletionItemKind.Variable,r.CompletionItemKind.Class,r.CompletionItemKind.Interface,r.CompletionItemKind.Module,r.CompletionItemKind.Property,r.CompletionItemKind.Unit,r.CompletionItemKind.Value,r.CompletionItemKind.Enum,r.CompletionItemKind.Keyword,r.CompletionItemKind.Snippet,r.CompletionItemKind.Color,r.CompletionItemKind.File,r.CompletionItemKind.Reference,r.CompletionItemKind.Folder,r.CompletionItemKind.EnumMember,r.CompletionItemKind.Constant,r.CompletionItemKind.Struct,r.CompletionItemKind.Event,r.CompletionItemKind.Operator,r.CompletionItemKind.TypeParameter];function E(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var T;!function(e){e.is=function(e){let t=e;return t&&s.func(t.register)&&s.func(t.unregister)&&s.func(t.dispose)&&void 0!==t.messages}}(T||(T={}));class C{constructor(e,t,i,n,r,o){this._client=e,this._event=t,this._type=i,this._middleware=n,this._createParams=r,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(const i of e)if(n.languages.match(i,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,(e=>this._client.sendNotification(this._type,this._createParams(e)))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class y extends C{constructor(e,t){super(e,n.workspace.onDidOpenTextDocument,r.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),C.textDocumentFilter),this._syncedDocuments=t}get messages(){return r.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){E(E(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.openClose&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let i=t.registerOptions.documentSelector;n.workspace.textDocuments.forEach((e=>{let t=e.uri.toString();if(!this._syncedDocuments.has(t)&&n.languages.match(i,e)){let i=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};i.didOpen?i.didOpen(e,n):n(e),this._syncedDocuments.set(t,e)}}))}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class v extends C{constructor(e,t){super(e,n.workspace.onDidCloseTextDocument,r.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),C.textDocumentFilter),this._syncedDocuments=t}get messages(){return r.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){E(E(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.openClose&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let i=this._selectors.values();this._syncedDocuments.forEach((e=>{if(n.languages.match(t,e)&&!this._selectorFilter(i,e)){let t=this._client.clientOptions.middleware,i=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,i):i(e)}}))}}class R{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return r.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){E(E(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&void 0!==i.change&&i.change!==r.TextDocumentSyncKind.None&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:i.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=n.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const t of this._changeData.values())if(n.languages.match(t.documentSelector,e.document)){let i=this._client.clientOptions.middleware;if(t.syncKind===r.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);i.didChange?i.didChange(e,(()=>this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t))):this._client.sendNotification(r.DidChangeTextDocumentNotification.type,t)}else if(t.syncKind===r.TextDocumentSyncKind.Full){let t=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger((()=>{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))}))):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new l.Delayer(200)},this._changeDelayer.delayer.trigger((()=>{this._client.sendNotification(r.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))}),-1))};i.didChange?i.didChange(e,t):t(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}}class A extends C{constructor(e){super(e,n.workspace.onWillSaveTextDocument,r.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),((e,t)=>C.textDocumentFilter(e,t.document)))}get messages(){return r.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){E(E(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.willSave&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}}class I{constructor(e){this._client=e,this._selectors=new Map}get messages(){return r.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){E(E(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.willSaveWaitUntil&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=n.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(C.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,i=e=>this._client.sendRequest(r.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then((e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t}));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,i):i(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class w extends C{constructor(e){super(e,n.workspace.onDidSaveTextDocument,r.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText)),C.textDocumentFilter)}get messages(){return r.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){E(E(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let i=e.resolvedTextDocumentSync;t&&i&&i.save&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!i.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}}class O{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return r.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){E(E(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let i=[];for(let e of t.registerOptions.watchers){if(!s.string(e.globPattern))continue;let t=!0,o=!0,a=!0;void 0!==e.kind&&null!==e.kind&&(t=0!=(e.kind&r.WatchKind.Create),o=0!=(e.kind&r.WatchKind.Change),a=0!=(e.kind&r.WatchKind.Delete));let l=n.workspace.createFileSystemWatcher(e.globPattern,!t,!o,!a);this.hookListeners(l,t,o,a),i.push(l)}this._watchers.set(t.id,i)}registerRaw(e,t){let i=[];for(let e of t)this.hookListeners(e,!0,!0,!0,i);this._watchers.set(e,i)}hookListeners(e,t,i,n,o){t&&e.onDidCreate((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Created})),null,o),i&&e.onDidChange((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Changed})),null,o),n&&e.onDidDelete((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:r.FileChangeType.Deleted})),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach((e=>{for(let t of e)t.dispose()})),this._watchers.clear()}}class b{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let i=this.registerLanguageProvider(t.registerOptions);i&&this._providers.set(t.id,i)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach((e=>{e.dispose()})),this._providers.clear()}}t.TextDocumentFeature=b;class N{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let i=this.registerLanguageProvider(t.registerOptions);i&&this._providers.set(t.id,i)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach((e=>{e.dispose()})),this._providers.clear()}}class D extends b{constructor(e){super(e,r.CompletionRequest.type)}fillClientCapabilities(e){let t=E(E(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:f}}initialize(e,t){e.completionProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],i=this._client,o=(e,t,n,o)=>i.sendRequest(r.CompletionRequest.type,i.code2ProtocolConverter.asCompletionParams(e,t,n),o).then(i.protocol2CodeConverter.asCompletionResult,(e=>(i.logFailedRequest(r.CompletionRequest.type,e),Promise.resolve([])))),a=(e,t)=>i.sendRequest(r.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(e),t).then(i.protocol2CodeConverter.asCompletionItem,(t=>(i.logFailedRequest(r.CompletionResolveRequest.type,t),Promise.resolve(e)))),s=this._client.clientOptions.middleware;return n.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(e,t,i,n)=>s.provideCompletionItem?s.provideCompletionItem(e,t,n,i,o):o(e,t,n,i),resolveCompletionItem:e.resolveProvider?(e,t)=>s.resolveCompletionItem?s.resolveCompletionItem(e,t,a):a(e,t):void 0},...t)}}class M extends b{constructor(e){super(e,r.HoverRequest.type)}fillClientCapabilities(e){const t=E(E(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[r.MarkupKind.Markdown,r.MarkupKind.PlainText]}initialize(e,t){e.hoverProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>t.sendRequest(r.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asHover,(e=>(t.logFailedRequest(r.HoverRequest.type,e),Promise.resolve(null)))),o=t.clientOptions.middleware;return n.languages.registerHoverProvider(e.documentSelector,{provideHover:(e,t,n)=>o.provideHover?o.provideHover(e,t,n,i):i(e,t,n)})}}class L extends b{constructor(e){super(e,r.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=E(E(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[r.MarkupKind.Markdown,r.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0}}initialize(e,t){e.signatureHelpProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>t.sendRequest(r.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asSignatureHelp,(e=>(t.logFailedRequest(r.SignatureHelpRequest.type,e),Promise.resolve(null)))),o=t.clientOptions.middleware,a=e.triggerCharacters||[];return n.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(e,t,n)=>o.provideSignatureHelp?o.provideSignatureHelp(e,t,n,i):i(e,t,n)},...a)}}class P extends b{constructor(e){super(e,r.DefinitionRequest.type)}fillClientCapabilities(e){let t=E(E(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){e.definitionProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>t.sendRequest(r.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDefinitionResult,(e=>(t.logFailedRequest(r.DefinitionRequest.type,e),Promise.resolve(null)))),o=t.clientOptions.middleware;return n.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(e,t,n)=>o.provideDefinition?o.provideDefinition(e,t,n,i):i(e,t,n)})}}class x extends b{constructor(e){super(e,r.ReferencesRequest.type)}fillClientCapabilities(e){E(E(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){e.referencesProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n,o)=>t.sendRequest(r.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(e,i,n),o).then(t.protocol2CodeConverter.asReferences,(e=>(t.logFailedRequest(r.ReferencesRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return n.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(e,t,n,r)=>o.provideReferences?o.provideReferences(e,t,n,r,i):i(e,t,n,r)})}}class B extends b{constructor(e){super(e,r.DocumentHighlightRequest.type)}fillClientCapabilities(e){E(E(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){e.documentHighlightProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>t.sendRequest(r.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDocumentHighlights,(e=>(t.logFailedRequest(r.DocumentHighlightRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return n.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(e,t,n)=>o.provideDocumentHighlights?o.provideDocumentHighlights(e,t,n,i):i(e,t,n)})}}class k extends b{constructor(e){super(e,r.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=E(E(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:S},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){e.documentSymbolProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(e,i)=>t.sendRequest(r.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(e),i).then((e=>{if(null!==e){if(0===e.length)return[];{let i=e[0];return r.DocumentSymbol.is(i)?t.protocol2CodeConverter.asDocumentSymbols(e):t.protocol2CodeConverter.asSymbolInformations(e)}}}),(e=>(t.logFailedRequest(r.DocumentSymbolRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return n.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(e,t)=>o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,i):i(e,t)})}}class U extends N{constructor(e){super(e,r.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=E(E(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:S}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:c.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,i=(e,i)=>t.sendRequest(r.WorkspaceSymbolRequest.type,{query:e},i).then(t.protocol2CodeConverter.asSymbolInformations,(e=>(t.logFailedRequest(r.WorkspaceSymbolRequest.type,e),Promise.resolve([])))),o=t.clientOptions.middleware;return n.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(e,t)=>o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,i):i(e,t)})}}class F extends b{constructor(e){super(e,r.CodeActionRequest.type)}fillClientCapabilities(e){const t=E(E(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",r.CodeActionKind.QuickFix,r.CodeActionKind.Refactor,r.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorRewrite,r.CodeActionKind.Source,r.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){if(!e.codeActionProvider||!t)return;let i;s.boolean(e.codeActionProvider)||(i=e.codeActionProvider.codeActionKinds),this.register(this.messages,{id:c.generateUuid(),registerOptions:{documentSelector:t,codeActionKinds:i}})}registerLanguageProvider(e){let t=this._client,i=(e,i,n,o)=>{let a={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(i),context:t.code2ProtocolConverter.asCodeActionContext(n)};return t.sendRequest(r.CodeActionRequest.type,a,o).then((e=>{if(null===e)return;let i=[];for(let n of e)r.Command.is(n)?i.push(t.protocol2CodeConverter.asCommand(n)):i.push(t.protocol2CodeConverter.asCodeAction(n));return i}),(e=>(t.logFailedRequest(r.CodeActionRequest.type,e),Promise.resolve([]))))},o=t.clientOptions.middleware;return n.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(e,t,n,r)=>o.provideCodeActions?o.provideCodeActions(e,t,n,r,i):i(e,t,n,r)},e.codeActionKinds?{providedCodeActionKinds:t.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0)}}class G extends b{constructor(e){super(e,r.CodeLensRequest.type)}fillClientCapabilities(e){E(E(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){e.codeLensProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,i=(e,i)=>t.sendRequest(r.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(e),i).then(t.protocol2CodeConverter.asCodeLenses,(e=>(t.logFailedRequest(r.CodeLensRequest.type,e),Promise.resolve([])))),o=(e,i)=>t.sendRequest(r.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(e),i).then(t.protocol2CodeConverter.asCodeLens,(i=>(t.logFailedRequest(r.CodeLensResolveRequest.type,i),e))),a=t.clientOptions.middleware;return n.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(e,t)=>a.provideCodeLenses?a.provideCodeLenses(e,t,i):i(e,t),resolveCodeLens:e.resolveProvider?(e,t)=>a.resolveCodeLens?a.resolveCodeLens(e,t,o):o(e,t):void 0})}}class V extends b{constructor(e){super(e,r.DocumentFormattingRequest.type)}fillClientCapabilities(e){E(E(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){e.documentFormattingProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),options:t.code2ProtocolConverter.asFormattingOptions(i)};return t.sendRequest(r.DocumentFormattingRequest.type,o,n).then(t.protocol2CodeConverter.asTextEdits,(e=>(t.logFailedRequest(r.DocumentFormattingRequest.type,e),Promise.resolve([]))))},o=t.clientOptions.middleware;return n.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(e,t,n)=>o.provideDocumentFormattingEdits?o.provideDocumentFormattingEdits(e,t,n,i):i(e,t,n)})}}class q extends b{constructor(e){super(e,r.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){E(E(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentRangeFormattingProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n,o)=>{let a={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(i),options:t.code2ProtocolConverter.asFormattingOptions(n)};return t.sendRequest(r.DocumentRangeFormattingRequest.type,a,o).then(t.protocol2CodeConverter.asTextEdits,(e=>(t.logFailedRequest(r.DocumentRangeFormattingRequest.type,e),Promise.resolve([]))))},o=t.clientOptions.middleware;return n.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(e,t,n,r)=>o.provideDocumentRangeFormattingEdits?o.provideDocumentRangeFormattingEdits(e,t,n,r,i):i(e,t,n,r)})}}class j extends b{constructor(e){super(e,r.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){E(E(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentOnTypeFormattingProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,i=e.moreTriggerCharacter||[],o=(e,i,n,o,a)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(i),ch:n,options:t.code2ProtocolConverter.asFormattingOptions(o)};return t.sendRequest(r.DocumentOnTypeFormattingRequest.type,s,a).then(t.protocol2CodeConverter.asTextEdits,(e=>(t.logFailedRequest(r.DocumentOnTypeFormattingRequest.type,e),Promise.resolve([]))))},a=t.clientOptions.middleware;return n.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(e,t,i,n,r)=>a.provideOnTypeFormattingEdits?a.provideOnTypeFormattingEdits(e,t,i,n,r,o):o(e,t,i,n,r)},e.firstTriggerCharacter,...i)}}class H extends b{constructor(e){super(e,r.RenameRequest.type)}fillClientCapabilities(e){let t=E(E(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){if(!e.renameProvider||!t)return;let i=Object.assign({},{documentSelector:t});s.boolean(e.renameProvider)?i.prepareProvider=!1:i.prepareProvider=e.renameProvider.prepareProvider,this.register(this.messages,{id:c.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=this._client,i=(e,i,n,o)=>{let a={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(i),newName:n};return t.sendRequest(r.RenameRequest.type,a,o).then(t.protocol2CodeConverter.asWorkspaceEdit,(e=>(t.logFailedRequest(r.RenameRequest.type,e),Promise.reject(new Error(e.message)))))},o=(e,i,n)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(i)};return t.sendRequest(r.PrepareRenameRequest.type,o,n).then((e=>r.Range.is(e)?t.protocol2CodeConverter.asRange(e):e&&e.range?{range:t.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:null),(e=>(t.logFailedRequest(r.PrepareRenameRequest.type,e),Promise.reject(new Error(e.message)))))},a=t.clientOptions.middleware;return n.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(e,t,n,r)=>a.provideRenameEdits?a.provideRenameEdits(e,t,n,r,i):i(e,t,n,r),prepareRename:e.prepareProvider?(e,t,i)=>a.prepareRename?a.prepareRename(e,t,i,o):o(e,t,i):void 0})}}class z extends b{constructor(e){super(e,r.DocumentLinkRequest.type)}fillClientCapabilities(e){E(E(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){e.documentLinkProvider&&t&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,i=(e,i)=>t.sendRequest(r.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(e),i).then(t.protocol2CodeConverter.asDocumentLinks,(e=>{t.logFailedRequest(r.DocumentLinkRequest.type,e),Promise.resolve(new Error(e.message))})),o=(e,i)=>t.sendRequest(r.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(e),i).then(t.protocol2CodeConverter.asDocumentLink,(e=>{t.logFailedRequest(r.DocumentLinkResolveRequest.type,e),Promise.resolve(new Error(e.message))})),a=t.clientOptions.middleware;return n.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(e,t)=>a.provideDocumentLinks?a.provideDocumentLinks(e,t,i):i(e,t),resolveDocumentLink:e.resolveProvider?(e,t)=>a.resolveDocumentLink?a.resolveDocumentLink(e,t,o):o(e,t):void 0})}}class W{constructor(e){this._client=e,this._listeners=new Map}get messages(){return r.DidChangeConfigurationNotification.type}fillClientCapabilities(e){E(E(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register(this.messages,{id:c.generateUuid(),registerOptions:{section:e}})}register(e,t){let i=n.workspace.onDidChangeConfiguration((e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)}));this._listeners.set(t.id,i),void 0!==t.registerOptions.section&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let i;if(i=s.string(e)?[e]:e,void 0!==i&&void 0!==t&&!i.some((e=>t.affectsConfiguration(e))))return;let n=e=>{void 0!==e?this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(r.DidChangeConfigurationNotification.type,{settings:null})},o=this.getMiddleware();o?o(i,n):n(i)}extractSettingsInformation(e){function t(e,t){let i=e;for(let e=0;e<t.length-1;e++){let n=i[t[e]];n||(n=Object.create(null),i[t[e]]=n),i=n}return i}let i=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,r=Object.create(null);for(let o=0;o<e.length;o++){let a=e[o],s=a.indexOf("."),l=null;if(l=s>=0?n.workspace.getConfiguration(a.substr(0,s),i).get(a.substr(s+1)):n.workspace.getConfiguration(a,i),l){let i=e[o].split(".");t(r,i)[i[i.length-1]]=l}}return r}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class K{constructor(e){this._client=e,this._commands=new Map}get messages(){return r.ExecuteCommandRequest.type}fillClientCapabilities(e){E(E(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:c.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let i=this._client;if(t.registerOptions.commands){let e=[];for(const o of t.registerOptions.commands)e.push(n.commands.registerCommand(o,((...e)=>{let t={command:o,arguments:e};return i.sendRequest(r.ExecuteCommandRequest.type,t).then(void 0,(e=>{i.logFailedRequest(r.ExecuteCommandRequest.type,e)}))})));this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);t&&t.forEach((e=>e.dispose()))}dispose(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))})),this._commands.clear()}}(t.MessageTransports||(t.MessageTransports={})).is=function(e){return e&&r.MessageReader.is(e.reader)&&r.MessageWriter.is(e.writer)};class Q{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}}t.BaseLanguageClient=class{constructor(e,t,i){this._traceFormat=r.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,i=i||{},this._clientOptions={documentSelector:i.documentSelector||[],synchronize:i.synchronize||{},diagnosticCollectionName:i.diagnosticCollectionName,outputChannelName:i.outputChannelName||this._name,revealOutputChannelOn:i.revealOutputChannelOn||h.Error,stdioEncoding:i.stdioEncoding||"utf8",initializationOptions:i.initializationOptions,initializationFailedHandler:i.initializationFailedHandler,errorHandler:i.errorHandler||new m(this._name),middleware:i.middleware||{},uriConverters:i.uriConverters,workspaceFolder:i.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=g.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,i.outputChannel?(this._outputChannel=i.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new l.Delayer(250),this._onReady=new Promise(((e,t)=>{this._onReadyCallbacks=new Q(e,t)})),this._onStop=void 0,this._telemetryEmitter=new r.Emitter,this._stateChangeEmitter=new r.Emitter,this._tracer={log:(e,t)=>{s.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=o.createConverter(i.uriConverters?i.uriConverters.code2Protocol:void 0),this._p2c=a.createConverter(i.uriConverters?i.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let i=this.getPublicState();i!==t&&this._stateChangeEmitter.fire({oldState:t,newState:i})}getPublicState(){return this.state===g.Running?_.Running:this.state===g.Starting?_.Starting:_.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${s.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(t){throw this.error(`Registering request handler ${s.string(e)?e:e.method} failed.`,t),t}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${s.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(t){throw this.error(`Registering notification handler ${s.string(e)?e:e.method} failed.`,t),t}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=n.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new m(this._name)}set trace(e){this._trace=e,this.onReady().then((()=>{this.resolveConnection().then((e=>{e.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}))}),(()=>{}))}data2String(e){if(e instanceof r.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?s.string(e.stack)?e.stack:e.message:s.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=h.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.outputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.outputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.outputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===g.Initial||this.state===g.Stopping||this.state===g.Stopped}needsStop(){return this.state===g.Starting||this.state===g.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===g.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise(((e,t)=>{this._onReadyCallbacks=new Q(e,t)}))),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?n.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):n.languages.createDiagnosticCollection()),this.state=g.Starting,this.resolveConnection().then((e=>(e.onLogMessage((e=>{switch(e.type){case r.MessageType.Error:this.error(e.message);break;case r.MessageType.Warning:this.warn(e.message);break;case r.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}})),e.onShowMessage((e=>{switch(e.type){case r.MessageType.Error:n.window.showErrorMessage(e.message);break;case r.MessageType.Warning:n.window.showWarningMessage(e.message);break;case r.MessageType.Info:default:n.window.showInformationMessage(e.message)}})),e.onRequest(r.ShowMessageRequest.type,(e=>{let t;switch(e.type){case r.MessageType.Error:t=n.window.showErrorMessage;break;case r.MessageType.Warning:t=n.window.showWarningMessage;break;case r.MessageType.Info:default:t=n.window.showInformationMessage}let i=e.actions||[];return t(e.message,...i)})),e.onTelemetry((e=>{this._telemetryEmitter.fire(e)})),e.listen(),this.initialize(e)))).then(void 0,(e=>{this.state=g.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),n.window.showErrorMessage(`Couldn't start client ${this._name}`)})),new n.Disposable((()=>{this.needsStop()&&this.stop()}))}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,i=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:process.pid,rootPath:i||null,rootUri:i?this._c2p.asUri(n.Uri.file(i)):null,capabilities:this.computeClientCapabilities(),initializationOptions:s.func(t)?t():t,trace:r.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(o),e.initialize(o).then((t=>{let i;return this._resolvedConnection=e,this._initializeResult=t,this.state=g.Running,s.number(t.capabilities.textDocumentSync)?i=t.capabilities.textDocumentSync===r.TextDocumentSyncKind.None?{openClose:!1,change:r.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(i=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics((e=>this.handleDiagnostics(e))),e.onRequest(r.RegistrationRequest.type,(e=>this.handleRegistrationRequest(e))),e.onRequest("client/registerFeature",(e=>this.handleRegistrationRequest(e))),e.onRequest(r.UnregistrationRequest.type,(e=>this.handleUnregistrationRequest(e))),e.onRequest("client/unregisterFeature",(e=>this.handleUnregistrationRequest(e))),e.onRequest(r.ApplyWorkspaceEditRequest.type,(e=>this.handleApplyWorkspaceEdit(e))),e.sendNotification(r.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t})).then(void 0,(t=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t)):t instanceof r.ResponseError&&t.data&&t.data.retry?n.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then((i=>{i&&"retry"===i.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t))})):(t&&t.message&&n.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop(),this._onReadyCallbacks.reject(t))}))}_clientGetRootPath(){let e=n.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===g.Stopping&&this._onStop?this._onStop:(this.state=g.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then((e=>e.shutdown().then((()=>{e.exit(),e.dispose(),this.state=g.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))))):(this.state=g.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach((e=>e.dispose())),this._listeners=void 0),this._providers&&(this._providers.forEach((e=>e.dispose())),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let e of this._dynamicFeatures.values())e.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger((()=>{this.onReady().then((()=>{this.resolveConnection().then((e=>{this.isConnectionActive()&&e.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]}))}),(e=>{this.error("Notify file events failed.",e)}))}))}forceDocumentSync(){this._dynamicFeatures.get(r.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),i=this._p2c.asDiagnostics(e.diagnostics),n=this.clientOptions.middleware.handleDiagnostics;n?n(t,i,((e,t)=>this.setDiagnostics(e,t))):this.setDiagnostics(t,i)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,i)=>{this.handleConnectionError(e,t,i)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then((i=>function(e,t,i,n){let o=new u,a=r.createProtocolConnection(e,t,o);return a.onError((e=>{i(e[0],e[1],e[2])})),a.onClose(n),{listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(s.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(s.string(e)?e:e.method,t),sendNotification:(e,t)=>a.sendNotification(s.string(e)?e:e.method,t),onNotification:(e,t)=>a.onNotification(s.string(e)?e:e.method,t),trace:(e,t,i)=>{const n={sendNotification:!1,traceFormat:r.TraceFormat.Text};void 0===i?a.trace(e,t,n):(s.boolean(i),a.trace(e,t,i))},initialize:e=>a.sendRequest(r.InitializeRequest.type,e),shutdown:()=>a.sendRequest(r.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(r.ExitNotification.type),onLogMessage:e=>a.onNotification(r.LogMessageNotification.type,e),onShowMessage:e=>a.onNotification(r.ShowMessageNotification.type,e),onTelemetry:e=>a.onNotification(r.TelemetryEventNotification.type,e),didChangeConfiguration:e=>a.sendNotification(r.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>a.sendNotification(r.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>a.sendNotification(r.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>a.sendNotification(r.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>a.sendNotification(r.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>a.sendNotification(r.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>a.onNotification(r.PublishDiagnosticsNotification.type,e),dispose:()=>a.dispose()}}(i.reader,i.writer,e,t)))}handleConnectionClosed(){if(this.state===g.Stopping||this.state===g.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(e){}let e=p.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===p.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=g.Stopped,this.cleanUp(!1,!0)):e===p.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=g.Initial,this.start())}handleConnectionError(e,t,i){this._clientOptions.errorHandler.error(e,t,i)===d.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){n.workspace.onDidChangeConfiguration((()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let i=n.workspace.getConfiguration(this._id),o=r.Trace.Off,a=r.TraceFormat.Text;if(i){const e=i.get("trace.server","off");"string"==typeof e?o=r.Trace.fromString(e):(o=r.Trace.fromString(i.get("trace.server.verbosity","off")),a=r.TraceFormat.fromString(i.get("trace.server.format","text")))}this._trace=o,this._traceFormat=a,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t,i=this._clientOptions.synchronize.fileEvents;i&&(t=s.array(i)?i:[i],t&&this._dynamicFeatures.get(r.DidChangeWatchedFilesNotification.type.method).registerRaw(c.generateUuid(),t))}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),T.is(e)){let t=e.messages;if(Array.isArray(t))for(let i of t)this._method2Message.set(i.method,i),this._dynamicFeatures.set(i.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new W(this)),this.registerFeature(new y(this,this._syncedDocuments)),this.registerFeature(new R(this)),this.registerFeature(new A(this)),this.registerFeature(new I(this)),this.registerFeature(new w(this)),this.registerFeature(new v(this,this._syncedDocuments)),this.registerFeature(new O(this,(e=>this.notifyFileEvent(e)))),this.registerFeature(new D(this)),this.registerFeature(new M(this)),this.registerFeature(new L(this)),this.registerFeature(new P(this)),this.registerFeature(new x(this)),this.registerFeature(new B(this)),this.registerFeature(new k(this)),this.registerFeature(new U(this)),this.registerFeature(new F(this)),this.registerFeature(new G(this)),this.registerFeature(new V(this)),this.registerFeature(new q(this)),this.registerFeature(new j(this)),this.registerFeature(new H(this)),this.registerFeature(new z(this)),this.registerFeature(new K(this))}fillInitializeParams(e){for(let t of this._features)s.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};E(e,"workspace").applyEdit=!0;let t=E(E(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[r.ResourceOperationKind.Create,r.ResourceOperationKind.Rename,r.ResourceOperationKind.Delete],t.failureHandling=r.FailureHandlingKind.TextOnlyTransactional,E(E(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features)e.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise(((t,i)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e)return void i(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const n=t.registerOptions||{};n.documentSelector=n.documentSelector||this._clientOptions.documentSelector;const r={id:t.id,registerOptions:n};e.register(this._method2Message.get(t.method),r)}t()}))}handleUnregistrationRequest(e){return new Promise(((t,i)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e)return void i(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}t()}))}handleApplyWorkspaceEdit(e){let t=e.edit,i=new Map;n.workspace.textDocuments.forEach((e=>i.set(e.uri.toString(),e)));let o=!1;if(t.documentChanges)for(const e of t.documentChanges)if(r.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=i.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){o=!0;break}}return o?Promise.resolve({applied:!1}):n.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then((e=>({applied:e})))}logFailedRequest(e,t){t instanceof r.ResponseError&&t.code===r.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}}},7620:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9496),r=i(4192),o=i(2097),a=i(213),s=i(5628),l=i(6653);t.createConverter=function(e){const t=e||(e=>e.toString());function i(e){return t(e)}function c(e){return{uri:t(e.uri)}}function u(e){return{uri:t(e.uri),version:e.version}}function d(e){switch(e){case n.TextDocumentSaveReason.Manual:return r.TextDocumentSaveReason.Manual;case n.TextDocumentSaveReason.AfterDelay:return r.TextDocumentSaveReason.AfterDelay;case n.TextDocumentSaveReason.FocusOut:return r.TextDocumentSaveReason.FocusOut}return r.TextDocumentSaveReason.Manual}function p(e){switch(e){case n.CompletionTriggerKind.TriggerCharacter:return r.CompletionTriggerKind.TriggerCharacter;case n.CompletionTriggerKind.TriggerForIncompleteCompletions:return r.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return r.CompletionTriggerKind.Invoked}}function h(e){return{line:e.line,character:e.character}}function _(e){if(void 0!==e)return null===e?null:{line:e.line,character:e.character}}function g(e){return null==e?e:{start:_(e.start),end:_(e.end)}}function m(e){switch(e){case n.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case n.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case n.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case n.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}}function S(e){let t=r.Diagnostic.create(g(e.range),e.message);return o.number(e.severity)&&(t.severity=m(e.severity)),(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),t}function f(e){return null==e?e:e.map(S)}function E(e){return{range:g(e.range),newText:e.newText}}function T(e){let t=r.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:i,asTextDocumentIdentifier:c,asVersionedTextDocumentIdentifier:u,asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let i=e.document;return{textDocument:{uri:t(i.uri),version:i.version},contentChanges:e.contentChanges.map((e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:c(e)}},asSaveTextDocumentParams:function(e,t=!1){let i={textDocument:u(e)};return t&&(i.text=e.getText()),i},asWillSaveTextDocumentParams:function(e){return{textDocument:c(e.document),reason:d(e.reason)}},asTextDocumentPositionParams:function(e,t){return{textDocument:c(e),position:h(t)}},asCompletionParams:function(e,t,i){return{textDocument:c(e),position:h(t),context:{triggerKind:p(i.triggerKind),triggerCharacter:i.triggerCharacter}}},asWorkerPosition:h,asRange:g,asPosition:_,asDiagnosticSeverity:m,asDiagnostic:S,asDiagnostics:f,asCompletionItem:function(e){let t={label:e.label},i=e instanceof a.default?e:void 0;var s,l,c;return e.detail&&(t.detail=e.detail),e.documentation&&(i&&"$string"!==i.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case r.MarkupKind.PlainText:return{kind:e,value:t};case r.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(i.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let i,o,a=r.InsertTextFormat.PlainText;t.textEdit?(i=t.textEdit.newText,o=g(t.textEdit.range)):t.insertText instanceof n.SnippetString?(a=r.InsertTextFormat.Snippet,i=t.insertText.value):i=t.insertText,t.range&&(o=g(t.range)),e.insertTextFormat=a,t.fromEdit&&i&&o?e.textEdit={newText:i,range:o}:e.insertText=i}(t,e),o.number(e.kind)&&(t.kind=(s=e.kind,void 0!==(l=i&&i.originalItemKind)?l:s+1)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=null==(c=e.additionalTextEdits)?c:c.map(E)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=T(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),i&&(void 0!==i.data&&(t.data=i.data),!0!==i.deprecated&&!1!==i.deprecated||(t.deprecated=i.deprecated)),t},asTextEdit:E,asReferenceParams:function(e,t,i){return{textDocument:c(e),position:h(t),context:{includeDeclaration:i.includeDeclaration}}},asCodeActionContext:function(e){return null==e?e:r.CodeActionContext.create(f(e.diagnostics),o.string(e.only)?[e.only]:void 0)},asCommand:T,asCodeLens:function(e){let t=r.CodeLens.create(g(e.range));return e.command&&(t.command=T(e.command)),e instanceof s.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}},asDocumentSymbolParams:function(e){return{textDocument:c(e)}},asCodeLensParams:function(e){return{textDocument:c(e)}},asDocumentLink:function(e){let t=r.DocumentLink.create(g(e.range));e.target&&(t.target=i(e.target));let n=e instanceof l.default?e:void 0;return n&&n.data&&(t.data=n.data),t},asDocumentLinkParams:function(e){return{textDocument:c(e)}}}}},2101:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2884),r=i(2097),o=i(9496),a=i(4192),s=i(5620);function l(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class c extends s.TextDocumentFeature{constructor(e){super(e,a.DocumentColorRequest.type)}fillClientCapabilities(e){l(l(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;const i=e.colorProvider,o=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid(),a=i.documentSelector||t;a&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:a})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>{const r={color:e,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(i.document),range:t.code2ProtocolConverter.asRange(i.range)};return t.sendRequest(a.ColorPresentationRequest.type,r,n).then(this.asColorPresentations.bind(this),(e=>(t.logFailedRequest(a.ColorPresentationRequest.type,e),Promise.resolve(null))))},n=(e,i)=>{const n={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(a.DocumentColorRequest.type,n,i).then(this.asColorInformations.bind(this),(e=>(t.logFailedRequest(a.ColorPresentationRequest.type,e),Promise.resolve(null))))},r=t.clientOptions.middleware;return o.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(e,t,n)=>r.provideColorPresentations?r.provideColorPresentations(e,t,n,i):i(e,t,n),provideDocumentColors:(e,t)=>r.provideDocumentColors?r.provideDocumentColors(e,t,n):n(e,t)})}asColor(e){return new o.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map((e=>new o.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color)))):[]}asColorPresentations(e){return Array.isArray(e)?e.map((e=>{let t=new o.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t})):[]}}t.ColorProviderFeature=c},7888:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9496),r=i(4192);t.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(r.ConfigurationRequest.type,((t,i)=>{let n=e=>{let t=[];for(let i of e.items){let e=void 0!==i.scopeUri&&null!==i.scopeUri?this._client.protocol2CodeConverter.asUri(i.scopeUri):void 0;t.push(this.getConfiguration(e,null!==i.section?i.section:void 0))}return t},r=e.clientOptions.middleware.workspace;return r&&r.configuration?r.configuration(t,i,n):n(t)}))}getConfiguration(e,t){let i=null;if(t){let r=t.lastIndexOf(".");if(-1===r)i=n.workspace.getConfiguration(void 0,e).get(t);else{let e=n.workspace.getConfiguration(t.substr(0,r));e&&(i=e.get(t.substr(r+1)))}}else{let t=n.workspace.getConfiguration(void 0,e);i={};for(let e of Object.keys(t))t.has(e)&&(i[e]=t.get(e))}return i||null}}},7812:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2884),r=i(2097),o=i(9496),a=i(4192),s=i(5620);function l(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class c extends s.TextDocumentFeature{constructor(e){super(e,a.DeclarationRequest.type)}fillClientCapabilities(e){let t=l(l(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.declarationProvider)if(!0===e.declarationProvider){if(!t)return;this.register(this.messages,{id:n.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const i=e.declarationProvider,o=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid(),a=i.documentSelector||t;a&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:a})})}}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>t.sendRequest(a.DeclarationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDeclarationResult,(e=>(t.logFailedRequest(a.DeclarationRequest.type,e),Promise.resolve(null)))),n=t.clientOptions.middleware;return o.languages.registerDeclarationProvider(e.documentSelector,{provideDeclaration:(e,t,r)=>n.provideDeclaration?n.provideDeclaration(e,t,r,i):i(e,t,r)})}}t.DeclarationFeature=c},5573:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2884),r=i(2097),o=i(9496),a=i(4192),s=i(5620);function l(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class c extends s.TextDocumentFeature{constructor(e){super(e,a.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=l(l(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;const i=e.foldingRangeProvider,o=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid(),a=i.documentSelector||t;a&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:a})})}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>{const r={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(a.FoldingRangeRequest.type,r,n).then(this.asFoldingRanges.bind(this),(e=>(t.logFailedRequest(a.FoldingRangeRequest.type,e),Promise.resolve(null))))},n=t.clientOptions.middleware;return o.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges:(e,t,r)=>n.provideFoldingRanges?n.provideFoldingRanges(e,t,r,i):i(e,0,r)})}asFoldingRangeKind(e){if(e)switch(e){case a.FoldingRangeKind.Comment:return o.FoldingRangeKind.Comment;case a.FoldingRangeKind.Imports:return o.FoldingRangeKind.Imports;case a.FoldingRangeKind.Region:return o.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map((e=>new o.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind)))):[]}}t.FoldingRangeFeature=c},7391:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2884),r=i(2097),o=i(9496),a=i(4192),s=i(5620);function l(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class c extends s.TextDocumentFeature{constructor(e){super(e,a.ImplementationRequest.type)}fillClientCapabilities(e){let t=l(l(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.implementationProvider)if(!0===e.implementationProvider){if(!t)return;this.register(this.messages,{id:n.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const i=e.implementationProvider,o=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid(),a=i.documentSelector||t;a&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:a})})}}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>t.sendRequest(a.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDefinitionResult,(e=>(t.logFailedRequest(a.ImplementationRequest.type,e),Promise.resolve(null)))),n=t.clientOptions.middleware;return o.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(e,t,r)=>n.provideImplementation?n.provideImplementation(e,t,r,i):i(e,t,r)})}}t.ImplementationFeature=c},3056:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2081),r=i(7147),o=i(6625),a=i(5620),s=i(9496),l=i(4192),c=i(2101),u=i(7888),d=i(7391),p=i(9409),h=i(4670),_=i(5573),g=i(7812),m=i(2097),S=i(9567);!function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(5620));const f="^1.30";var E,T,C,y,v,R,A;!function(e){e.is=function(e){return m.string(e.command)}}(E||(E={})),function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(T=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){let t=e;return t&&t.kind===T.socket&&m.number(t.port)}}(C||(C={})),function(e){e.is=function(e){return m.string(e.module)}}(y||(y={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(v||(v={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(R||(R={}));class I extends a.BaseLanguageClient{constructor(e,t,i,n,r){let o,a,s,l,c;m.string(t)?(o=e,a=t,s=i,l=n,c=!!r):(o=e.toLowerCase(),a=e,s=t,l=i,c=n),void 0===c&&(c=!1),super(o,a,l),this._serverOptions=s,this._forceDebug=c;try{this.checkVersion()}catch(e){throw m.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){let e=o.parse(s.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${s.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!o.satisfies(e,f))throw new Error(`The language client requires VS Code version ${f} but received version ${s.version}`)}stop(){return super.stop().then((()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}}))}checkProcessDied(e){e&&setTimeout((()=>{try{process.kill(e.pid,0),S.terminate(e)}catch(e){}}),2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){let t,i=this._serverOptions;if(m.func(i))return i().then((t=>{if(a.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(v.is(t))return this._isDetached=!!t.detached,{reader:new l.StreamMessageReader(t.reader),writer:new l.StreamMessageWriter(t.writer)};{let i;return R.is(t)?(i=t.process,this._isDetached=t.detached):(i=t,this._isDetached=!1),i.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),{reader:new l.StreamMessageReader(i.stdout),writer:new l.StreamMessageWriter(i.stdin)}}}));let r=i;return t=r.run||r.debug?"object"==typeof v8debug||this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some((e=>/^--debug=?/.test(e)||/^--debug-brk=?/.test(e)||/^--inspect=?/.test(e)||/^--inspect-brk=?/.test(e)))}()?r.debug:r.run:i,this._getServerWorkingDir(t.options).then((r=>{if(y.is(t)&&t.module){let i=t,o=i.transport||T.stdio;if(!i.runtime){let t;return new Promise(((a,s)=>{let c=i.args&&i.args.slice()||[];o===T.ipc?c.push("--node-ipc"):o===T.stdio?c.push("--stdio"):o===T.pipe?(t=l.generateRandomPipeName(),c.push(`--pipe=${t}`)):C.isSocket(o)&&c.push(`--socket=${o.port}`),c.push(`--clientProcessId=${process.pid.toString()}`);let u=i.options||Object.create(null);if(u.execArgv=u.execArgv||[],u.cwd=r,u.silent=!0,o===T.ipc||o===T.stdio){let t=n.fork(i.module,c||[],u);this._serverProcess=t,t.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),o===T.ipc?(t.stdout.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),a({reader:new l.IPCMessageReader(this._serverProcess),writer:new l.IPCMessageWriter(this._serverProcess)})):a({reader:new l.StreamMessageReader(t.stdout),writer:new l.StreamMessageWriter(t.stdin)})}else o===T.pipe?l.createClientPipeTransport(t).then((t=>{let r=n.fork(i.module,c||[],u);this._serverProcess=r,r.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{a({reader:e[0],writer:e[1]})}))})):C.isSocket(o)&&l.createClientSocketTransport(o.port).then((t=>{let r=n.fork(i.module,c||[],u);this._serverProcess=r,r.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),r.stdout.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),t.onConnected().then((e=>{a({reader:e[0],writer:e[1]})}))}))}))}{let t=[],a=i.options||Object.create(null);a.execArgv&&a.execArgv.forEach((e=>t.push(e))),t.push(i.module),i.args&&i.args.forEach((e=>t.push(e)));let s,c=Object.create(null);if(c.cwd=r,c.env=function(e){if(!e)return process.env;let t=Object.create(null);return Object.keys(process.env).forEach((e=>t[e]=process.env[e])),Object.keys(e).forEach((i=>t[i]=e[i])),t}(a.env),o===T.ipc?(c.stdio=[null,null,null,"ipc"],t.push("--node-ipc")):o===T.stdio?t.push("--stdio"):o===T.pipe?(s=l.generateRandomPipeName(),t.push(`--pipe=${s}`)):C.isSocket(o)&&t.push(`--socket=${o.port}`),t.push(`--clientProcessId=${process.pid.toString()}`),o===T.ipc||o===T.stdio){let r=n.spawn(i.runtime,t,c);return r&&r.pid?(this._serverProcess=r,r.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),o===T.ipc?(r.stdout.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),Promise.resolve({reader:new l.IPCMessageReader(r),writer:new l.IPCMessageWriter(r)})):Promise.resolve({reader:new l.StreamMessageReader(r.stdout),writer:new l.StreamMessageWriter(r.stdin)})):Promise.reject(`Launching server using runtime ${i.runtime} failed.`)}if(o==T.pipe)return l.createClientPipeTransport(s).then((r=>{let o=n.spawn(i.runtime,t,c);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),o.stdout.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),r.onConnected().then((e=>({reader:e[0],writer:e[1]})))):Promise.reject(`Launching server using runtime ${i.runtime} failed.`)}));if(C.isSocket(o))return l.createClientSocketTransport(o.port).then((r=>{let o=n.spawn(i.runtime,t,c);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),o.stdout.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),r.onConnected().then((e=>({reader:e[0],writer:e[1]})))):Promise.reject(`Launching server using runtime ${i.runtime} failed.`)}))}}else if(E.is(t)&&t.command){let i=t,o=i.args||[],a=Object.assign({},i.options);a.cwd=a.cwd||r;let s=n.spawn(i.command,o,a);return s&&s.pid?(s.stderr.on("data",(t=>this.outputChannel.append(m.string(t)?t:t.toString(e)))),this._serverProcess=s,this._isDetached=!!a.detached,Promise.resolve({reader:new l.StreamMessageReader(s.stdout),writer:new l.StreamMessageWriter(s.stdin)})):Promise.reject(`Launching server using command ${i.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(i,null,4)))}))}registerProposedFeatures(){this.registerFeatures(A.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new u.ConfigurationFeature(this)),this.registerFeature(new p.TypeDefinitionFeature(this)),this.registerFeature(new d.ImplementationFeature(this)),this.registerFeature(new c.ColorProviderFeature(this)),this.registerFeature(new h.WorkspaceFoldersFeature(this)),this.registerFeature(new _.FoldingRangeFeature(this)),this.registerFeature(new g.DeclarationFeature(this))}_mainGetRootPath(){let e=s.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise((e=>{r.lstat(t,((i,n)=>{e(!i&&n.isDirectory()?t:void 0)}))})):Promise.resolve(void 0)}}t.LanguageClient=I,t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return s.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new s.Disposable((()=>{this._client.needsStop()&&this._client.stop()}))}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,i=e>=0?this._setting.substr(e+1):void 0,n=i?s.workspace.getConfiguration(t).get(i,!1):s.workspace.getConfiguration(t);n&&this._client.needsStart()?this._client.start():!n&&this._client.needsStop()&&this._client.stop()}},function(e){e.createAll=function(e){return[]}}(A=t.ProposedFeatures||(t.ProposedFeatures={}))},5628:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9496);class r extends n.CodeLens{constructor(e){super(e)}}t.default=r},213:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9496);class r extends n.CompletionItem{constructor(e){super(e)}}t.default=r},3101:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9496),r=i(4192),o=i(2097),a=i(213),s=i(5628),l=i(6653);var c;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(c||(c={})),t.createConverter=function(e){const t=e||(e=>n.Uri.parse(e));function i(e){return t(e)}function u(e){return e.map(d)}function d(e){let t=new n.Diagnostic(_(e.range),e.message,g(e.severity));return(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(p)),t}function p(e){return new n.DiagnosticRelatedInformation(R(e.location),e.message)}function h(e){if(e)return new n.Position(e.line,e.character)}function _(e){if(e)return new n.Range(h(e.start),h(e.end))}function g(e){if(null==e)return n.DiagnosticSeverity.Error;switch(e){case r.DiagnosticSeverity.Error:return n.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return n.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return n.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return n.DiagnosticSeverity.Hint}return n.DiagnosticSeverity.Error}function m(e){if(o.string(e))return e;switch(e.kind){case r.MarkupKind.Markdown:return new n.MarkdownString(e.value);case r.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function S(e){let t=new a.default(e.label);e.detail&&(t.detail=e.detail),e.documentation&&(t.documentation=m(e.documentation),t.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(t.filterText=e.filterText);let i=function(e){return e.textEdit?e.insertTextFormat===r.InsertTextFormat.Snippet?{text:new n.SnippetString(e.textEdit.newText),range:_(e.textEdit.range),fromEdit:!0}:{text:e.textEdit.newText,range:_(e.textEdit.range),fromEdit:!0}:e.insertText?e.insertTextFormat===r.InsertTextFormat.Snippet?{text:new n.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(i&&(t.insertText=i.text,t.range=i.range,t.fromEdit=i.fromEdit),o.number(e.kind)){let[i,o]=(s=e.kind,r.CompletionItemKind.Text<=s&&s<=r.CompletionItemKind.TypeParameter?[s-1,void 0]:[n.CompletionItemKind.Text,s]);t.kind=i,o&&(t.originalItemKind=o)}var s;return e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=E(e.additionalTextEdits)),o.stringArray(e.commitCharacters)&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=M(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(t.deprecated=e.deprecated),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),void 0!==e.data&&(t.data=e.data),t}function f(e){if(e)return new n.TextEdit(_(e.range),e.newText)}function E(e){if(e)return e.map(f)}function T(e){return e.map(C)}function C(e){let t=new n.SignatureInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),e.parameters&&(t.parameters=y(e.parameters)),t}function y(e){return e.map(v)}function v(e){let t=new n.ParameterInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),t}function R(e){if(e)return new n.Location(t(e.uri),_(e.range))}function A(e){if(e)return{targetUri:t(e.targetUri),targetRange:_(e.targetSelectionRange),originSelectionRange:_(e.originSelectionRange),targetSelectionRange:_(e.targetSelectionRange)}}function I(e){if(e)return o.array(e)?0===e.length?[]:r.LocationLink.is(e[0])?e.map((e=>A(e))):e.map((e=>R(e))):r.LocationLink.is(e)?[A(e)]:R(e)}function w(e){let t=new n.DocumentHighlight(_(e.range));return o.number(e.kind)&&(t.kind=O(e.kind)),t}function O(e){switch(e){case r.DocumentHighlightKind.Text:return n.DocumentHighlightKind.Text;case r.DocumentHighlightKind.Read:return n.DocumentHighlightKind.Read;case r.DocumentHighlightKind.Write:return n.DocumentHighlightKind.Write}return n.DocumentHighlightKind.Text}function b(e){return e<=r.SymbolKind.TypeParameter?e-1:n.SymbolKind.Property}function N(e,i){let r=new n.SymbolInformation(e.name,b(e.kind),_(e.location.range),e.location.uri?t(e.location.uri):i);return e.containerName&&(r.containerName=e.containerName),r}function D(e){let t=new n.DocumentSymbol(e.name,e.detail||"",b(e.kind),_(e.range),_(e.selectionRange));if(void 0!==e.children&&e.children.length>0){let i=[];for(let t of e.children)i.push(D(t));t.children=i}return t}function M(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const L=new Map;function P(e){if(null==e)return;let t=L.get(e);if(t)return t;let i=e.split(".");t=n.CodeActionKind.Empty;for(let e of i)t=t.append(e);return t}function x(e){if(!e)return;let t=new s.default(_(e.range));return e.command&&(t.command=M(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function B(e){if(!e)return;let i=new n.WorkspaceEdit;return e.documentChanges?e.documentChanges.forEach((e=>{r.CreateFile.is(e)?i.createFile(t(e.uri),e.options):r.RenameFile.is(e)?i.renameFile(t(e.oldUri),t(e.newUri),e.options):r.DeleteFile.is(e)?i.deleteFile(t(e.uri),e.options):r.TextDocumentEdit.is(e)?i.set(t(e.textDocument.uri),E(e.edits)):console.error(`Unknown workspace edit change received:\n${JSON.stringify(e,void 0,4)}`)})):e.changes&&Object.keys(e.changes).forEach((n=>{i.set(t(n),E(e.changes[n]))})),i}function k(e){let t=_(e.range),n=e.target?i(e.target):void 0,r=new l.default(t,n);return void 0!==e.data&&null!==e.data&&(r.data=e.data),r}function U(e){return new n.Color(e.red,e.green,e.blue,e.alpha)}function F(e){return new n.ColorInformation(_(e.range),U(e.color))}function G(e){let t=new n.ColorPresentation(e.label);return t.additionalTextEdits=E(e.additionalTextEdits),e.textEdit&&(t.textEdit=f(e.textEdit)),t}function V(e){if(e)switch(e){case r.FoldingRangeKind.Comment:return n.FoldingRangeKind.Comment;case r.FoldingRangeKind.Imports:return n.FoldingRangeKind.Imports;case r.FoldingRangeKind.Region:return n.FoldingRangeKind.Region}}function q(e){return new n.FoldingRange(e.startLine,e.endLine,V(e.kind))}return L.set("",n.CodeActionKind.Empty),L.set(r.CodeActionKind.QuickFix,n.CodeActionKind.QuickFix),L.set(r.CodeActionKind.Refactor,n.CodeActionKind.Refactor),L.set(r.CodeActionKind.RefactorExtract,n.CodeActionKind.RefactorExtract),L.set(r.CodeActionKind.RefactorInline,n.CodeActionKind.RefactorInline),L.set(r.CodeActionKind.RefactorRewrite,n.CodeActionKind.RefactorRewrite),L.set(r.CodeActionKind.Source,n.CodeActionKind.Source),L.set(r.CodeActionKind.SourceOrganizeImports,n.CodeActionKind.SourceOrganizeImports),{asUri:i,asDiagnostics:u,asDiagnostic:d,asRange:_,asPosition:h,asDiagnosticSeverity:g,asHover:function(e){if(e)return new n.Hover(function(e){if(o.string(e))return new n.MarkdownString(e);if(c.is(e))return(new n.MarkdownString).appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let i of e){let e=new n.MarkdownString;c.is(i)?e.appendCodeblock(i.value,i.language):e.appendMarkdown(i),t.push(e)}return t}{let t;switch(e.kind){case r.MarkupKind.Markdown:return new n.MarkdownString(e.value);case r.MarkupKind.PlainText:return t=new n.MarkdownString,t.appendText(e.value),t;default:return t=new n.MarkdownString,t.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`),t}}}(e.contents),_(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e))return e.map(S);let t=e;return new n.CompletionList(t.items.map(S),t.isIncomplete)},asCompletionItem:S,asTextEdit:f,asTextEdits:E,asSignatureHelp:function(e){if(!e)return;let t=new n.SignatureHelp;return o.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,o.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=T(e.signatures)),t},asSignatureInformations:T,asSignatureInformation:C,asParameterInformations:y,asParameterInformation:v,asDeclarationResult:function(e){if(e)return I(e)},asDefinitionResult:function(e){if(e)return I(e)},asLocation:R,asReferences:function(e){if(e)return e.map((e=>R(e)))},asDocumentHighlights:function(e){if(e)return e.map(w)},asDocumentHighlight:w,asDocumentHighlightKind:O,asSymbolInformations:function(e,t){if(e)return e.map((e=>N(e,t)))},asSymbolInformation:N,asDocumentSymbols:function(e){if(null!=e)return e.map(D)},asDocumentSymbol:D,asCommand:M,asCommands:function(e){if(e)return e.map(M)},asCodeAction:function(e){if(null==e)return;let t=new n.CodeAction(e.title);return void 0!==e.kind&&(t.kind=P(e.kind)),e.diagnostics&&(t.diagnostics=u(e.diagnostics)),e.edit&&(t.edit=B(e.edit)),e.command&&(t.command=M(e.command)),t},asCodeActionKind:P,asCodeActionKinds:function(e){if(null!=e)return e.map((e=>P(e)))},asCodeLens:x,asCodeLenses:function(e){if(e)return e.map((e=>x(e)))},asWorkspaceEdit:B,asDocumentLink:k,asDocumentLinks:function(e){if(e)return e.map(k)},asFoldingRangeKind:V,asFoldingRange:q,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(q)},asColor:U,asColorInformation:F,asColorInformations:function(e){if(Array.isArray(e))return e.map(F)},asColorPresentation:G,asColorPresentations:function(e){if(Array.isArray(e))return e.map(G)}}}},6653:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9496);class r extends n.DocumentLink{constructor(e,t){super(e,t)}}t.default=r},9409:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2884),r=i(2097),o=i(9496),a=i(4192),s=i(5620);function l(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class c extends s.TextDocumentFeature{constructor(e){super(e,a.TypeDefinitionRequest.type)}fillClientCapabilities(e){l(l(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=l(l(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){if(e.typeDefinitionProvider)if(!0===e.typeDefinitionProvider){if(!t)return;this.register(this.messages,{id:n.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const i=e.typeDefinitionProvider,o=r.string(i.id)&&i.id.length>0?i.id:n.generateUuid(),a=i.documentSelector||t;a&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:a})})}}registerLanguageProvider(e){let t=this._client,i=(e,i,n)=>t.sendRequest(a.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,i),n).then(t.protocol2CodeConverter.asDefinitionResult,(e=>(t.logFailedRequest(a.TypeDefinitionRequest.type,e),Promise.resolve(null)))),n=t.clientOptions.middleware;return o.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(e,t,r)=>n.provideTypeDefinition?n.provideTypeDefinition(e,t,r,i):i(e,t,r)})}}t.TypeDefinitionFeature=c},3299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e}))),(t>=0||void 0===this.timeout)&&(this.timeout=setTimeout((()=>{this.timeout=void 0,this.onSuccess(void 0)}),t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}},2097:(e,t)=>{"use strict";function i(e){return"string"==typeof e||e instanceof String}function n(e){return"function"==typeof e}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=n,t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>i(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&n(e.then)}},9567:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2081),r=i(1017),o="win32"===process.platform,a="darwin"===process.platform,s="linux"===process.platform;t.terminate=function(e,t){if(o)try{let i={stdio:["pipe","pipe","ignore"]};return t&&(i.cwd=t),n.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],i),!0}catch(e){return!1}else{if(!s&&!a)return e.kill("SIGKILL"),!0;try{var i=r.join(__dirname,"terminateProcess.sh");return!n.spawnSync(i,[e.pid.toString()]).error}catch(e){return!1}}}},2884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class n extends i{constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}}function r(){return new n}n._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n._timeHighBits=["8","9","a","b"],t.empty=new i("00000000-0000-0000-0000-000000000000"),t.v4=r;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return o.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new i(e)},t.generateUuid=function(){return r().asHex()}},4670:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2884),r=i(9496),o=i(4192);function a(e,t){if(void 0!==e)return e[t]}t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=r.workspace.workspaceFolders;e.workspaceFolders=void 0===t?null:t.map((e=>this.asProtocol(e)))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,(e=>{let i=()=>{let e=r.workspace.workspaceFolders;return void 0===e?null:e.map((e=>this.asProtocol(e)))},n=t.clientOptions.middleware.workspace;return n&&n.workspaceFolders?n.workspaceFolders(e,i):i()}));let i,s=a(a(a(e,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof s?i=s:!0===s&&(i=n.generateUuid()),i&&this.register(this.messages,{id:i,registerOptions:void 0})}register(e,t){let i=t.id,n=this._client,a=r.workspace.onDidChangeWorkspaceFolders((e=>{let t=e=>{let t={event:{added:e.added.map((e=>this.asProtocol(e))),removed:e.removed.map((e=>this.asProtocol(e)))}};this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,t)},i=n.clientOptions.middleware.workspace;i&&i.didChangeWorkspaceFolders?i.didChangeWorkspaceFolders(e,t):t(e)}));this._listeners.set(i,a)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},4192:(e,t,i)=>{"use strict";function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0});const r=i(8231);t.ErrorCodes=r.ErrorCodes,t.ResponseError=r.ResponseError,t.CancellationToken=r.CancellationToken,t.CancellationTokenSource=r.CancellationTokenSource,t.Disposable=r.Disposable,t.Event=r.Event,t.Emitter=r.Emitter,t.Trace=r.Trace,t.TraceFormat=r.TraceFormat,t.SetTraceNotification=r.SetTraceNotification,t.LogTraceNotification=r.LogTraceNotification,t.RequestType=r.RequestType,t.RequestType0=r.RequestType0,t.NotificationType=r.NotificationType,t.NotificationType0=r.NotificationType0,t.MessageReader=r.MessageReader,t.MessageWriter=r.MessageWriter,t.ConnectionStrategy=r.ConnectionStrategy,t.StreamMessageReader=r.StreamMessageReader,t.StreamMessageWriter=r.StreamMessageWriter,t.IPCMessageReader=r.IPCMessageReader,t.IPCMessageWriter=r.IPCMessageWriter,t.createClientPipeTransport=r.createClientPipeTransport,t.createServerPipeTransport=r.createServerPipeTransport,t.generateRandomPipeName=r.generateRandomPipeName,t.createClientSocketTransport=r.createClientSocketTransport,t.createServerSocketTransport=r.createServerSocketTransport,n(i(1674)),n(i(9121)),t.createProtocolConnection=function(e,t,i,n){return r.createMessageConnection(e,t,i,n)}},1418:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8231);(t.DocumentColorRequest||(t.DocumentColorRequest={})).type=new n.RequestType("textDocument/documentColor"),(t.ColorPresentationRequest||(t.ColorPresentationRequest={})).type=new n.RequestType("textDocument/colorPresentation")},4082:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8231);(t.ConfigurationRequest||(t.ConfigurationRequest={})).type=new n.RequestType("workspace/configuration")},3688:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8231);(t.DeclarationRequest||(t.DeclarationRequest={})).type=new n.RequestType("textDocument/declaration")},4138:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8231);var r;(r=t.FoldingRangeKind||(t.FoldingRangeKind={})).Comment="comment",r.Imports="imports",r.Region="region",(t.FoldingRangeRequest||(t.FoldingRangeRequest={})).type=new n.RequestType("textDocument/foldingRange")},3759:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8231);(t.ImplementationRequest||(t.ImplementationRequest={})).type=new n.RequestType("textDocument/implementation")},9121:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3381),r=i(8231),o=i(3759);t.ImplementationRequest=o.ImplementationRequest;const a=i(2040);t.TypeDefinitionRequest=a.TypeDefinitionRequest;const s=i(942);t.WorkspaceFoldersRequest=s.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=s.DidChangeWorkspaceFoldersNotification;const l=i(4082);t.ConfigurationRequest=l.ConfigurationRequest;const c=i(1418);t.DocumentColorRequest=c.DocumentColorRequest,t.ColorPresentationRequest=c.ColorPresentationRequest;const u=i(4138);t.FoldingRangeRequest=u.FoldingRangeRequest;const d=i(3688);var p,h,_,g,m,S,f;t.DeclarationRequest=d.DeclarationRequest,(t.DocumentFilter||(t.DocumentFilter={})).is=function(e){let t=e;return n.string(t.language)||n.string(t.scheme)||n.string(t.pattern)},(t.RegistrationRequest||(t.RegistrationRequest={})).type=new r.RequestType("client/registerCapability"),(t.UnregistrationRequest||(t.UnregistrationRequest={})).type=new r.RequestType("client/unregisterCapability"),(f=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",f.Rename="rename",f.Delete="delete",(S=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",S.Transactional="transactional",S.TextOnlyTransactional="textOnlyTransactional",S.Undo="undo",(m=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,m.Full=1,m.Incremental=2,(t.InitializeRequest||(t.InitializeRequest={})).type=new r.RequestType("initialize"),(t.InitializeError||(t.InitializeError={})).unknownProtocolVersion=1,(t.InitializedNotification||(t.InitializedNotification={})).type=new r.NotificationType("initialized"),(t.ShutdownRequest||(t.ShutdownRequest={})).type=new r.RequestType0("shutdown"),(t.ExitNotification||(t.ExitNotification={})).type=new r.NotificationType0("exit"),(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).type=new r.NotificationType("workspace/didChangeConfiguration"),(g=t.MessageType||(t.MessageType={})).Error=1,g.Warning=2,g.Info=3,g.Log=4,(t.ShowMessageNotification||(t.ShowMessageNotification={})).type=new r.NotificationType("window/showMessage"),(t.ShowMessageRequest||(t.ShowMessageRequest={})).type=new r.RequestType("window/showMessageRequest"),(t.LogMessageNotification||(t.LogMessageNotification={})).type=new r.NotificationType("window/logMessage"),(t.TelemetryEventNotification||(t.TelemetryEventNotification={})).type=new r.NotificationType("telemetry/event"),(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).type=new r.NotificationType("textDocument/didOpen"),(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).type=new r.NotificationType("textDocument/didChange"),(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).type=new r.NotificationType("textDocument/didClose"),(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).type=new r.NotificationType("textDocument/didSave"),(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).type=new r.NotificationType("textDocument/willSave"),(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).type=new r.RequestType("textDocument/willSaveWaitUntil"),(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).type=new r.NotificationType("workspace/didChangeWatchedFiles"),(_=t.FileChangeType||(t.FileChangeType={})).Created=1,_.Changed=2,_.Deleted=3,(h=t.WatchKind||(t.WatchKind={})).Create=1,h.Change=2,h.Delete=4,(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).type=new r.NotificationType("textDocument/publishDiagnostics"),(p=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,p.TriggerCharacter=2,p.TriggerForIncompleteCompletions=3,(t.CompletionRequest||(t.CompletionRequest={})).type=new r.RequestType("textDocument/completion"),(t.CompletionResolveRequest||(t.CompletionResolveRequest={})).type=new r.RequestType("completionItem/resolve"),(t.HoverRequest||(t.HoverRequest={})).type=new r.RequestType("textDocument/hover"),(t.SignatureHelpRequest||(t.SignatureHelpRequest={})).type=new r.RequestType("textDocument/signatureHelp"),(t.DefinitionRequest||(t.DefinitionRequest={})).type=new r.RequestType("textDocument/definition"),(t.ReferencesRequest||(t.ReferencesRequest={})).type=new r.RequestType("textDocument/references"),(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).type=new r.RequestType("textDocument/documentHighlight"),(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).type=new r.RequestType("textDocument/documentSymbol"),(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).type=new r.RequestType("workspace/symbol"),(t.CodeActionRequest||(t.CodeActionRequest={})).type=new r.RequestType("textDocument/codeAction"),(t.CodeLensRequest||(t.CodeLensRequest={})).type=new r.RequestType("textDocument/codeLens"),(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).type=new r.RequestType("codeLens/resolve"),(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).type=new r.RequestType("textDocument/formatting"),(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).type=new r.RequestType("textDocument/rangeFormatting"),(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).type=new r.RequestType("textDocument/onTypeFormatting"),(t.RenameRequest||(t.RenameRequest={})).type=new r.RequestType("textDocument/rename"),(t.PrepareRenameRequest||(t.PrepareRenameRequest={})).type=new r.RequestType("textDocument/prepareRename"),(t.DocumentLinkRequest||(t.DocumentLinkRequest={})).type=new r.RequestType("textDocument/documentLink"),(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).type=new r.RequestType("documentLink/resolve"),(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).type=new r.RequestType("workspace/executeCommand"),(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).type=new r.RequestType("workspace/applyEdit")},2040:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8231);(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).type=new n.RequestType("textDocument/typeDefinition")},942:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8231);(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).type=new n.RequestType0("workspace/workspaceFolders"),(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).type=new n.NotificationType("workspace/didChangeWorkspaceFolders")},3381:(e,t)=>{"use strict";function i(e){return"string"==typeof e||e instanceof String}function n(e){return"function"==typeof e}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=n,t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>i(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&n(e.then)}},1674:(e,t,i)=>{"use strict";var n,r,o,a,s,l,c,u,d,p,h,_,g,m,S,f,E,T,C;i.r(t),i.d(t,{CodeAction:()=>j,CodeActionContext:()=>q,CodeActionKind:()=>V,CodeLens:()=>H,Color:()=>s,ColorInformation:()=>l,ColorPresentation:()=>c,Command:()=>g,CompletionItem:()=>b,CompletionItemKind:()=>w,CompletionList:()=>N,CreateFile:()=>f,DeleteFile:()=>T,Diagnostic:()=>_,DiagnosticRelatedInformation:()=>p,DiagnosticSeverity:()=>h,DocumentHighlight:()=>B,DocumentHighlightKind:()=>x,DocumentLink:()=>K,DocumentSymbol:()=>W,EOL:()=>$,FoldingRange:()=>d,FoldingRangeKind:()=>u,FormattingOptions:()=>z,Hover:()=>M,InsertTextFormat:()=>O,Location:()=>o,LocationLink:()=>a,MarkedString:()=>D,MarkupContent:()=>I,MarkupKind:()=>A,ParameterInformation:()=>L,Position:()=>n,Range:()=>r,RenameFile:()=>E,SignatureInformation:()=>P,SymbolInformation:()=>U,SymbolKind:()=>k,TextDocument:()=>Q,TextDocumentEdit:()=>S,TextDocumentIdentifier:()=>y,TextDocumentItem:()=>R,TextDocumentSaveReason:()=>Y,TextEdit:()=>m,VersionedTextDocumentIdentifier:()=>v,WorkspaceChange:()=>G,WorkspaceEdit:()=>C}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return Z.objectLiteral(t)&&Z.number(t.line)&&Z.number(t.character)}}(n||(n={})),function(e){e.create=function(e,t,i,r){if(Z.number(e)&&Z.number(t)&&Z.number(i)&&Z.number(r))return{start:n.create(e,t),end:n.create(i,r)};if(n.is(e)&&n.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+i+", "+r+"]")},e.is=function(e){var t=e;return Z.objectLiteral(t)&&n.is(t.start)&&n.is(t.end)}}(r||(r={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return Z.defined(t)&&r.is(t.range)&&(Z.string(t.uri)||Z.undefined(t.uri))}}(o||(o={})),function(e){e.create=function(e,t,i,n){return{targetUri:e,targetRange:t,targetSelectionRange:i,originSelectionRange:n}},e.is=function(e){var t=e;return Z.defined(t)&&r.is(t.targetRange)&&Z.string(t.targetUri)&&(r.is(t.targetSelectionRange)||Z.undefined(t.targetSelectionRange))&&(r.is(t.originSelectionRange)||Z.undefined(t.originSelectionRange))}}(a||(a={})),function(e){e.create=function(e,t,i,n){return{red:e,green:t,blue:i,alpha:n}},e.is=function(e){var t=e;return Z.number(t.red)&&Z.number(t.green)&&Z.number(t.blue)&&Z.number(t.alpha)}}(s||(s={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return r.is(t.range)&&s.is(t.color)}}(l||(l={})),function(e){e.create=function(e,t,i){return{label:e,textEdit:t,additionalTextEdits:i}},e.is=function(e){var t=e;return Z.string(t.label)&&(Z.undefined(t.textEdit)||m.is(t))&&(Z.undefined(t.additionalTextEdits)||Z.typedArray(t.additionalTextEdits,m.is))}}(c||(c={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(u||(u={})),function(e){e.create=function(e,t,i,n,r){var o={startLine:e,endLine:t};return Z.defined(i)&&(o.startCharacter=i),Z.defined(n)&&(o.endCharacter=n),Z.defined(r)&&(o.kind=r),o},e.is=function(e){var t=e;return Z.number(t.startLine)&&Z.number(t.startLine)&&(Z.undefined(t.startCharacter)||Z.number(t.startCharacter))&&(Z.undefined(t.endCharacter)||Z.number(t.endCharacter))&&(Z.undefined(t.kind)||Z.string(t.kind))}}(d||(d={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return Z.defined(t)&&o.is(t.location)&&Z.string(t.message)}}(p||(p={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(h||(h={})),function(e){e.create=function(e,t,i,n,r,o){var a={range:e,message:t};return Z.defined(i)&&(a.severity=i),Z.defined(n)&&(a.code=n),Z.defined(r)&&(a.source=r),Z.defined(o)&&(a.relatedInformation=o),a},e.is=function(e){var t=e;return Z.defined(t)&&r.is(t.range)&&Z.string(t.message)&&(Z.number(t.severity)||Z.undefined(t.severity))&&(Z.number(t.code)||Z.string(t.code)||Z.undefined(t.code))&&(Z.string(t.source)||Z.undefined(t.source))&&(Z.undefined(t.relatedInformation)||Z.typedArray(t.relatedInformation,p.is))}}(_||(_={})),function(e){e.create=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r={title:e,command:t};return Z.defined(i)&&i.length>0&&(r.arguments=i),r},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.title)&&Z.string(t.command)}}(g||(g={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return Z.objectLiteral(t)&&Z.string(t.newText)&&r.is(t.range)}}(m||(m={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return Z.defined(t)&&v.is(t.textDocument)&&Array.isArray(t.edits)}}(S||(S={})),function(e){e.create=function(e,t){var i={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(i.options=t),i},e.is=function(e){var t=e;return t&&"create"===t.kind&&Z.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||Z.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Z.boolean(t.options.ignoreIfExists)))}}(f||(f={})),function(e){e.create=function(e,t,i){var n={kind:"rename",oldUri:e,newUri:t};return void 0===i||void 0===i.overwrite&&void 0===i.ignoreIfExists||(n.options=i),n},e.is=function(e){var t=e;return t&&"rename"===t.kind&&Z.string(t.oldUri)&&Z.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||Z.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||Z.boolean(t.options.ignoreIfExists)))}}(E||(E={})),function(e){e.create=function(e,t){var i={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(i.options=t),i},e.is=function(e){var t=e;return t&&"delete"===t.kind&&Z.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||Z.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||Z.boolean(t.options.ignoreIfNotExists)))}}(T||(T={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return Z.string(e.kind)?f.is(e)||E.is(e)||T.is(e):S.is(e)})))}}(C||(C={}));var y,v,R,A,I,w,O,b,N,D,M,L,P,x,B,k,U,F=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(m.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(m.replace(e,t))},e.prototype.delete=function(e){this.edits.push(m.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),G=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(S.is(e)){var i=new F(e.edits);t._textEditChanges[e.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach((function(i){var n=new F(e.changes[i]);t._textEditChanges[i]=n})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(v.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(n=this._textEditChanges[t.uri])){var i={textDocument:t,edits:r=[]};this._workspaceEdit.documentChanges.push(i),n=new F(r),this._textEditChanges[t.uri]=n}return n}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var n;if(!(n=this._textEditChanges[e])){var r=[];this._workspaceEdit.changes[e]=r,n=new F(r),this._textEditChanges[e]=n}return n},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(f.create(e,t))},e.prototype.renameFile=function(e,t,i){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(E.create(e,t,i))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(T.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.uri)}}(y||(y={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.uri)&&(null===t.version||Z.number(t.version))}}(v||(v={})),function(e){e.create=function(e,t,i,n){return{uri:e,languageId:t,version:i,text:n}},e.is=function(e){var t=e;return Z.defined(t)&&Z.string(t.uri)&&Z.string(t.languageId)&&Z.number(t.version)&&Z.string(t.text)}}(R||(R={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(A||(A={})),function(e){e.is=function(t){var i=t;return i===e.PlainText||i===e.Markdown}}(A||(A={})),function(e){e.is=function(e){var t=e;return Z.objectLiteral(e)&&A.is(t.kind)&&Z.string(t.value)}}(I||(I={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(w||(w={})),function(e){e.PlainText=1,e.Snippet=2}(O||(O={})),function(e){e.create=function(e){return{label:e}}}(b||(b={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(N||(N={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return Z.string(t)||Z.objectLiteral(t)&&Z.string(t.language)&&Z.string(t.value)}}(D||(D={})),function(e){e.is=function(e){var t=e;return!!t&&Z.objectLiteral(t)&&(I.is(t.contents)||D.is(t.contents)||Z.typedArray(t.contents,D.is))&&(void 0===e.range||r.is(e.range))}}(M||(M={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(L||(L={})),function(e){e.create=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r={label:e};return Z.defined(t)&&(r.documentation=t),Z.defined(i)?r.parameters=i:r.parameters=[],r}}(P||(P={})),function(e){e.Text=1,e.Read=2,e.Write=3}(x||(x={})),function(e){e.create=function(e,t){var i={range:e};return Z.number(t)&&(i.kind=t),i}}(B||(B={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(k||(k={})),function(e){e.create=function(e,t,i,n,r){var o={name:e,kind:t,location:{uri:n,range:i}};return r&&(o.containerName=r),o}}(U||(U={}));var V,q,j,H,z,W=function(){};!function(e){e.create=function(e,t,i,n,r,o){var a={name:e,detail:t,kind:i,range:n,selectionRange:r};return void 0!==o&&(a.children=o),a},e.is=function(e){var t=e;return t&&Z.string(t.name)&&Z.number(t.kind)&&r.is(t.range)&&r.is(t.selectionRange)&&(void 0===t.detail||Z.string(t.detail))&&(void 0===t.deprecated||Z.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(W||(W={})),function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(V||(V={})),function(e){e.create=function(e,t){var i={diagnostics:e};return null!=t&&(i.only=t),i},e.is=function(e){var t=e;return Z.defined(t)&&Z.typedArray(t.diagnostics,_.is)&&(void 0===t.only||Z.typedArray(t.only,Z.string))}}(q||(q={})),function(e){e.create=function(e,t,i){var n={title:e};return g.is(t)?n.command=t:n.edit=t,void 0!==i&&(n.kind=i),n},e.is=function(e){var t=e;return t&&Z.string(t.title)&&(void 0===t.diagnostics||Z.typedArray(t.diagnostics,_.is))&&(void 0===t.kind||Z.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||g.is(t.command))&&(void 0===t.edit||C.is(t.edit))}}(j||(j={})),function(e){e.create=function(e,t){var i={range:e};return Z.defined(t)&&(i.data=t),i},e.is=function(e){var t=e;return Z.defined(t)&&r.is(t.range)&&(Z.undefined(t.command)||g.is(t.command))}}(H||(H={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return Z.defined(t)&&Z.number(t.tabSize)&&Z.boolean(t.insertSpaces)}}(z||(z={}));var K=function(){};!function(e){e.create=function(e,t,i){return{range:e,target:t,data:i}},e.is=function(e){var t=e;return Z.defined(t)&&r.is(t.range)&&(Z.undefined(t.target)||Z.string(t.target))}}(K||(K={}));var Q,Y,$=["\n","\r\n","\r"];!function(e){function t(e,i){if(e.length<=1)return e;var n=e.length/2|0,r=e.slice(0,n),o=e.slice(n);t(r,i),t(o,i);for(var a=0,s=0,l=0;a<r.length&&s<o.length;){var c=i(r[a],o[s]);e[l++]=c<=0?r[a++]:o[s++]}for(;a<r.length;)e[l++]=r[a++];for(;s<o.length;)e[l++]=o[s++];return e}e.create=function(e,t,i,n){return new X(e,t,i,n)},e.is=function(e){var t=e;return!!(Z.defined(t)&&Z.string(t.uri)&&(Z.undefined(t.languageId)||Z.string(t.languageId))&&Z.number(t.lineCount)&&Z.func(t.getText)&&Z.func(t.positionAt)&&Z.func(t.offsetAt))},e.applyEdits=function(e,i){for(var n=e.getText(),r=t(i,(function(e,t){var i=e.range.start.line-t.range.start.line;return 0===i?e.range.start.character-t.range.start.character:i})),o=n.length,a=r.length-1;a>=0;a--){var s=r[a],l=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=o))throw new Error("Overlapping edit");n=n.substring(0,l)+s.newText+n.substring(c,n.length),o=l}return n}}(Q||(Q={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(Y||(Y={}));var Z,X=function(){function e(e,t,i,n){this._uri=e,this._languageId=t,this._version=i,this._content=n,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),i=this.offsetAt(e.end);return this._content.substring(t,i)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,i=!0,n=0;n<t.length;n++){i&&(e.push(n),i=!1);var r=t.charAt(n);i="\r"===r||"\n"===r,"\r"===r&&n+1<t.length&&"\n"===t.charAt(n+1)&&n++}i&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),i=0,r=t.length;if(0===r)return n.create(0,e);for(;i<r;){var o=Math.floor((i+r)/2);t[o]>e?r=o:i=o+1}var a=i-1;return n.create(a,e-t[a])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var i=t[e.line],n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(i+e.character,n),i)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(Z||(Z={}))},3403:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,o,a,s,l,c=i(1017),u=i(7147),d=Object.prototype.toString;function p(e){return void 0!==e}function h(e){return"[object String]"===d.call(e)}function _(e){return JSON.parse(u.readFileSync(e,"utf8"))}function g(e,t){return l&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,i){var n=i[0],r=t[n],o=e;return"string"==typeof r?o=r:"number"!=typeof r&&"boolean"!=typeof r&&null!=r||(o=String(r)),o}))}function m(e){return function(t,i){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return n=t,"[object Number]"===d.call(n)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):g(e[t],r):h(i)?(console.warn("Message "+i+" didn't get externalized correctly."),g(i,r)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function S(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return g(t,i)}function f(e,t){return a[e]=t,t}function E(e){try{return function(e){var t=_(c.join(e,"nls.metadata.json")),i=Object.create(null);for(var n in t){var r=t[n];i[n]=r.messages}return i}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function T(e,t){var i;if(!0===s.languagePackSupport&&void 0!==s.cacheRoot&&void 0!==s.languagePackId&&void 0!==s.translationsConfigFile&&void 0!==s.translationsConfig)try{i=function(e,t){var i,n,r,o=c.join(s.cacheRoot,e.id+"-"+e.hash+".json"),a=!1,l=!1;try{return i=JSON.parse(u.readFileSync(o,{encoding:"utf8",flag:"r"})),n=o,r=new Date,u.utimes(n,r,r,(function(){})),i}catch(e){if("ENOENT"===e.code)l=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),u.unlink(o,(function(e){e&&console.error("Deleting corrupted bundle "+o+" failed.")})),a=!0}}if(i=function(e,t){var i=s.translationsConfig[e.id];if(i){var n=_(i).contents,r=_(c.join(t,"nls.metadata.json")),o=Object.create(null);for(var a in r){var l=r[a],u=n[e.outDir+"/"+a];if(u){for(var d=[],p=0;p<l.keys.length;p++){var g=l.keys[p],m=u[h(g)?g:g.key];void 0===m&&(m=l.messages[p]),d.push(m)}o[a]=d}else o[a]=l.messages}return o}}(e,t),!i||a)return i;if(l)try{u.writeFileSync(o,JSON.stringify(i),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return i;throw e}return i}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!i){if(s.languagePackSupport)return E(t);var n=function(e){for(var t=s.language;t;){var i=c.join(e,"nls.bundle."+t+".json");if(u.existsSync(i))return i;var n=t.lastIndexOf("-");t=n>0?t.substring(0,n):void 0}if(void 0===t&&(i=c.join(e,"nls.bundle.json"),u.existsSync(i)))return i}(t);if(n)try{return _(n)}catch(e){console.log("Loading in the box message bundle failed.",e)}i=E(t)}return i}function C(e){if(!e)return S;var t=c.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),s.messageFormat===n.both||s.messageFormat===n.bundle){var i=function(e){for(var t,i=c.dirname(e);t=c.join(i,"nls.metadata.header.json"),!u.existsSync(t);){var n=c.dirname(i);if(n===i){t=void 0;break}i=n}return t}(e);if(i){var r=c.dirname(i),o=a[r];if(void 0===o)try{var d=JSON.parse(u.readFileSync(i,"utf8"));try{var h=T(d,r);o=f(r,h?{header:d,nlsBundle:h}:null)}catch(e){console.error("Failed to load nls bundle",e),o=f(r,null)}}catch(e){console.error("Failed to read header file",e),o=f(r,null)}if(o){var g=e.substr(r.length+1).replace(/\\/g,"/"),E=o.nlsBundle[g];return void 0===E?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):m(E)}}}if(s.messageFormat===n.both||s.messageFormat===n.file)try{var C=_(function(e){var t;if(s.cacheLanguageResolution&&t);else{if(l||!s.language)t=".nls.json";else for(var i=s.language;i;){var n=".nls."+i+".json";if(u.existsSync(e+n)){t=n;break}var r=i.lastIndexOf("-");r>0?i=i.substring(0,r):(t=".nls.json",i=null)}s.cacheLanguageResolution}return e+t}(e));return Array.isArray(C)?m(C):p(C.messages)&&p(C.keys)?m(C.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(n=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(r=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&p(t.key)&&p(t.comment)}}(o||(o={})),function(){if(s={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:n.bundle},h(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var i=e.availableLanguages["*"];h(i)&&(t=i)}if(h(e.locale)&&(s.locale=e.locale.toLowerCase()),void 0===t?s.language=s.locale:"en"!==t&&(s.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(s.languagePackSupport=e._languagePackSupport),h(e._cacheRoot)&&(s.cacheRoot=e._cacheRoot),h(e._languagePackId)&&(s.languagePackId=e._languagePackId),h(e._translationsConfigFile)){s.translationsConfigFile=e._translationsConfigFile;try{s.translationsConfig=_(s.translationsConfigFile)}catch(t){if(e._corruptedFile){var r=c.dirname(e._corruptedFile);u.exists(r,(function(t){t&&u.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}l="pseudo"===s.locale,a=Object.create(null)}(),t.loadMessageBundle=C,t.config=function(e){return e&&(h(e.locale)&&(s.locale=e.locale.toLowerCase(),s.language=s.locale,a=Object.create(null)),void 0!==e.messageFormat&&(s.messageFormat=e.messageFormat),e.bundleFormat===r.standalone&&!0===s.languagePackSupport&&(s.languagePackSupport=!1)),l="pseudo"===s.locale,C}},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,i)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var i=0,r=arguments.length;i<r;i++)t.push(arguments[i]);return t}function r(e,t,i){var n=t===e.head?new s(i,null,t,e):new s(i,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function o(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,i,n){if(!(this instanceof s))return new s(e,t,i,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,i=e.prev;return t&&(t.prev=i),i&&(i.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=i),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var i=this.head,n=0;null!==i;n++)e.call(t,i.value,n,this),i=i.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var i=this.tail,n=this.length-1;null!==i;n--)e.call(t,i.value,n,this),i=i.prev},n.prototype.get=function(e){for(var t=0,i=this.head;null!==i&&t<e;t++)i=i.next;if(t===e&&null!==i)return i.value},n.prototype.getReverse=function(e){for(var t=0,i=this.tail;null!==i&&t<e;t++)i=i.prev;if(t===e&&null!==i)return i.value},n.prototype.map=function(e,t){t=t||this;for(var i=new n,r=this.head;null!==r;)i.push(e.call(t,r.value,this)),r=r.next;return i},n.prototype.mapReverse=function(e,t){t=t||this;for(var i=new n,r=this.tail;null!==r;)i.push(e.call(t,r.value,this)),r=r.prev;return i},n.prototype.reduce=function(e,t){var i,n=this.head;if(arguments.length>1)i=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,i=this.head.value}for(var r=0;null!==n;r++)i=e(i,n.value,r),n=n.next;return i},n.prototype.reduceReverse=function(e,t){var i,n=this.tail;if(arguments.length>1)i=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,i=this.tail.value}for(var r=this.length-1;null!==n;r--)i=e(i,n.value,r),n=n.prev;return i},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,i=this.head;null!==i;t++)e[t]=i.value,i=i.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,i=this.tail;null!==i;t++)e[t]=i.value,i=i.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var i=new n;if(t<e||t<0)return i;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;for(;null!==o&&r<t;r++,o=o.next)i.push(o.value);return i},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var i=new n;if(t<e||t<0)return i;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,o=this.tail;null!==o&&r>t;r--)o=o.prev;for(;null!==o&&r>e;r--,o=o.prev)i.push(o.value);return i},n.prototype.splice=function(e,t,...i){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;null!==o&&n<e;n++)o=o.next;var a=[];for(n=0;o&&n<t;n++)a.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),n=0;n<i.length;n++)o=r(this,o,i[n]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,i=e;null!==i;i=i.prev){var n=i.prev;i.prev=i.next,i.next=n}return this.head=t,this.tail=e,this};try{i(9602)(n)}catch(e){}},7766:(e,t,i)=>{var n=i(7147),r=i(9796),o=i(8913),a=i(2779),s=i(3837),l=i(2361).EventEmitter,c=i(2781).Transform,u=i(2781).PassThrough,d=i(2781).Writable;function p(e,t,i){"function"==typeof t&&(i=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!1),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==i&&(i=O),n.fstat(e,(function(n,r){if(n)return i(n);h(o.createFromFd(e,{autoClose:!0}),r.size,t,i)}))}function h(e,t,i,n){"function"==typeof i&&(n=i,i=null),null==i&&(i={}),null==i.autoClose&&(i.autoClose=!0),null==i.lazyEntries&&(i.lazyEntries=!1),null==i.decodeStrings&&(i.decodeStrings=!0);var r=!!i.decodeStrings;if(null==i.validateEntrySizes&&(i.validateEntrySizes=!0),null==i.strictFileNames&&(i.strictFileNames=!1),null==n&&(n=O),"number"!=typeof t)throw new Error("expected totalSize parameter to be a number");if(t>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");e.ref();var o=Math.min(65557,t),a=R(o),s=t-a.length;T(e,a,0,o,s,(function(l){if(l)return n(l);for(var c=o-22;c>=0;c-=1)if(101010256===a.readUInt32LE(c)){var u=a.slice(c),d=u.readUInt16LE(4);if(0!==d)return n(new Error("multi-disk zip files are not supported: found disk number: "+d));var p=u.readUInt16LE(10),h=u.readUInt32LE(16),g=u.readUInt16LE(20),m=u.length-22;if(g!==m)return n(new Error("invalid comment length. expected: "+m+". found: "+g));var S=r?I(u,22,u.length,!1):u.slice(22);if(65535!==p&&4294967295!==h)return n(null,new _(e,h,t,p,S,i.autoClose,i.lazyEntries,r,i.validateEntrySizes,i.strictFileNames));var f=R(20),E=s+c-f.length;return void T(e,f,0,f.length,E,(function(o){if(o)return n(o);if(117853008!==f.readUInt32LE(0))return n(new Error("invalid zip64 end of central directory locator signature"));var a=w(f,8),s=R(56);T(e,s,0,s.length,a,(function(o){return o?n(o):101075792!==s.readUInt32LE(0)?n(new Error("invalid zip64 end of central directory record signature")):(p=w(s,32),h=w(s,48),n(null,new _(e,h,t,p,S,i.autoClose,i.lazyEntries,r,i.validateEntrySizes,i.strictFileNames)))}))}))}n(new Error("end of central directory record signature not found"))}))}function _(e,t,i,n,r,o,a,s,c,u){var d=this;l.call(d),d.reader=e,d.reader.on("error",(function(e){m(d,e)})),d.reader.once("close",(function(){d.emit("close")})),d.readEntryCursor=t,d.fileSize=i,d.entryCount=n,d.comment=r,d.entriesRead=0,d.autoClose=!!o,d.lazyEntries=!!a,d.decodeStrings=!!s,d.validateEntrySizes=!!c,d.strictFileNames=!!u,d.isOpen=!0,d.emittedError=!1,d.lazyEntries||d._readEntry()}function g(e,t){e.autoClose&&e.close(),m(e,t)}function m(e,t){e.emittedError||(e.emittedError=!0,e.emit("error",t))}function S(){}function f(e,t){return new Date(1980+(e>>9&127),(e>>5&15)-1,31&e,t>>11&31,t>>5&63,2*(31&t),0)}function E(e){return-1!==e.indexOf("\\")?"invalid characters in fileName: "+e:/^[a-zA-Z]:/.test(e)||/^\//.test(e)?"absolute path: "+e:-1!==e.split("/").indexOf("..")?"invalid relative path: "+e:null}function T(e,t,i,n,r,o){if(0===n)return setImmediate((function(){o(null,R(0))}));e.read(t,i,n,r,(function(e,t){return e?o(e):t<n?o(new Error("unexpected EOF")):void o()}))}function C(e){c.call(this),this.actualByteCount=0,this.expectedByteCount=e}function y(){l.call(this),this.refCount=0}function v(e){u.call(this),this.context=e,this.context.ref(),this.unreffedYet=!1}t.open=function(e,t,i){"function"==typeof t&&(i=t,t=null),null==t&&(t={}),null==t.autoClose&&(t.autoClose=!0),null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),null==i&&(i=O),n.open(e,"r",(function(e,r){if(e)return i(e);p(r,t,(function(e,t){e&&n.close(r,O),i(e,t)}))}))},t.fromFd=p,t.fromBuffer=function(e,t,i){"function"==typeof t&&(i=t,t=null),null==t&&(t={}),t.autoClose=!1,null==t.lazyEntries&&(t.lazyEntries=!1),null==t.decodeStrings&&(t.decodeStrings=!0),null==t.validateEntrySizes&&(t.validateEntrySizes=!0),null==t.strictFileNames&&(t.strictFileNames=!1),h(o.createFromBuffer(e,{maxChunkSize:65536}),e.length,t,i)},t.fromRandomAccessReader=h,t.dosDateTimeToDate=f,t.validateFileName=E,t.ZipFile=_,t.Entry=S,t.RandomAccessReader=y,s.inherits(_,l),_.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},_.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()},_.prototype._readEntry=function(){var e=this;if(e.entryCount!==e.entriesRead){if(!e.emittedError){var t=R(46);T(e.reader,t,0,t.length,e.readEntryCursor,(function(i){if(i)return g(e,i);if(!e.emittedError){var n=new S,r=t.readUInt32LE(0);if(33639248!==r)return g(e,new Error("invalid central directory file header signature: 0x"+r.toString(16)));if(n.versionMadeBy=t.readUInt16LE(4),n.versionNeededToExtract=t.readUInt16LE(6),n.generalPurposeBitFlag=t.readUInt16LE(8),n.compressionMethod=t.readUInt16LE(10),n.lastModFileTime=t.readUInt16LE(12),n.lastModFileDate=t.readUInt16LE(14),n.crc32=t.readUInt32LE(16),n.compressedSize=t.readUInt32LE(20),n.uncompressedSize=t.readUInt32LE(24),n.fileNameLength=t.readUInt16LE(28),n.extraFieldLength=t.readUInt16LE(30),n.fileCommentLength=t.readUInt16LE(32),n.internalFileAttributes=t.readUInt16LE(36),n.externalFileAttributes=t.readUInt32LE(38),n.relativeOffsetOfLocalHeader=t.readUInt32LE(42),64&n.generalPurposeBitFlag)return g(e,new Error("strong encryption is not supported"));e.readEntryCursor+=46,t=R(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),T(e.reader,t,0,t.length,e.readEntryCursor,(function(i){if(i)return g(e,i);if(!e.emittedError){var r=0!=(2048&n.generalPurposeBitFlag);n.fileName=e.decodeStrings?I(t,0,n.fileNameLength,r):t.slice(0,n.fileNameLength);var o=n.fileNameLength+n.extraFieldLength,s=t.slice(n.fileNameLength,o);n.extraFields=[];for(var l=0;l<s.length-3;){var c=s.readUInt16LE(l+0),u=s.readUInt16LE(l+2),d=l+4,p=d+u;if(p>s.length)return g(e,new Error("extra field length exceeds extra field buffer size"));var h=R(u);s.copy(h,0,d,p),n.extraFields.push({id:c,data:h}),l=p}if(n.fileComment=e.decodeStrings?I(t,o,o+n.fileCommentLength,r):t.slice(o,o+n.fileCommentLength),n.comment=n.fileComment,e.readEntryCursor+=t.length,e.entriesRead+=1,4294967295===n.uncompressedSize||4294967295===n.compressedSize||4294967295===n.relativeOffsetOfLocalHeader){var _=null;for(l=0;l<n.extraFields.length;l++)if(1===(S=n.extraFields[l]).id){_=S.data;break}if(null==_)return g(e,new Error("expected zip64 extended information extra field"));var m=0;if(4294967295===n.uncompressedSize){if(m+8>_.length)return g(e,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=w(_,m),m+=8}if(4294967295===n.compressedSize){if(m+8>_.length)return g(e,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=w(_,m),m+=8}if(4294967295===n.relativeOffsetOfLocalHeader){if(m+8>_.length)return g(e,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=w(_,m),m+=8}}if(e.decodeStrings)for(l=0;l<n.extraFields.length;l++){var S;if(28789===(S=n.extraFields[l]).id){if(S.data.length<6)continue;if(1!==S.data.readUInt8(0))continue;var f=S.data.readUInt32LE(1);if(a.unsigned(t.slice(0,n.fileNameLength))!==f)continue;n.fileName=I(S.data,5,S.data.length,!0);break}}if(e.validateEntrySizes&&0===n.compressionMethod){var T=n.uncompressedSize;if(n.isEncrypted()&&(T+=12),n.compressedSize!==T){var C="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return g(e,new Error(C))}}if(e.decodeStrings){e.strictFileNames||(n.fileName=n.fileName.replace(/\\/g,"/"));var y=E(n.fileName,e.validateFileNameOptions);if(null!=y)return g(e,new Error(y))}e.emit("entry",n),e.lazyEntries||e._readEntry()}}))}}))}}else setImmediate((function(){e.autoClose&&e.close(),e.emittedError||e.emit("end")}))},_.prototype.openReadStream=function(e,t,i){var n=this,o=0,a=e.compressedSize;if(null==i)i=t,t={};else{if(null!=t.decrypt){if(!e.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(!1!==t.decrypt)throw new Error("invalid options.decrypt value: "+t.decrypt);if(e.isCompressed()&&!1!==t.decompress)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=t.decompress){if(!e.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!1!==t.decompress&&!0!==t.decompress)throw new Error("invalid options.decompress value: "+t.decompress)}if(null!=t.start||null!=t.end){if(e.isCompressed()&&!1!==t.decompress)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(e.isEncrypted()&&!1!==t.decrypt)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=t.start){if((o=t.start)<0)throw new Error("options.start < 0");if(o>e.compressedSize)throw new Error("options.start > entry.compressedSize")}if(null!=t.end){if((a=t.end)<0)throw new Error("options.end < 0");if(a>e.compressedSize)throw new Error("options.end > entry.compressedSize");if(a<o)throw new Error("options.end < options.start")}}if(!n.isOpen)return i(new Error("closed"));if(e.isEncrypted()&&!1!==t.decrypt)return i(new Error("entry is encrypted, and options.decrypt !== false"));n.reader.ref();var s=R(30);T(n.reader,s,0,s.length,e.relativeOffsetOfLocalHeader,(function(l){try{if(l)return i(l);var c=s.readUInt32LE(0);if(67324752!==c)return i(new Error("invalid local file header signature: 0x"+c.toString(16)));var u,d=s.readUInt16LE(26),p=s.readUInt16LE(28),h=e.relativeOffsetOfLocalHeader+s.length+d+p;if(0===e.compressionMethod)u=!1;else{if(8!==e.compressionMethod)return i(new Error("unsupported compression method: "+e.compressionMethod));u=null==t.decompress||t.decompress}var _=h,g=_+e.compressedSize;if(0!==e.compressedSize&&g>n.fileSize)return i(new Error("file data overflows file bounds: "+_+" + "+e.compressedSize+" > "+n.fileSize));var m=n.reader.createReadStream({start:_+o,end:_+a}),S=m;if(u){var f=!1,E=r.createInflateRaw();m.on("error",(function(e){setImmediate((function(){f||E.emit("error",e)}))})),m.pipe(E),n.validateEntrySizes?(S=new C(e.uncompressedSize),E.on("error",(function(e){setImmediate((function(){f||S.emit("error",e)}))})),E.pipe(S)):S=E,S.destroy=function(){f=!0,E!==S&&E.unpipe(S),m.unpipe(E),m.destroy()}}i(null,S)}finally{n.reader.unref()}}))},S.prototype.getLastModDate=function(){return f(this.lastModFileDate,this.lastModFileTime)},S.prototype.isEncrypted=function(){return 0!=(1&this.generalPurposeBitFlag)},S.prototype.isCompressed=function(){return 8===this.compressionMethod},s.inherits(C,c),C.prototype._transform=function(e,t,i){if(this.actualByteCount+=e.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return i(new Error(n))}i(null,e)},C.prototype._flush=function(e){if(this.actualByteCount<this.expectedByteCount){var t="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return e(new Error(t))}e()},s.inherits(y,l),y.prototype.ref=function(){this.refCount+=1},y.prototype.unref=function(){var e=this;if(e.refCount-=1,!(e.refCount>0)){if(e.refCount<0)throw new Error("invalid unref");e.close((function(t){if(t)return e.emit("error",t);e.emit("close")}))}},y.prototype.createReadStream=function(e){var t=e.start,i=e.end;if(t===i){var n=new u;return setImmediate((function(){n.end()})),n}var r=this._readStreamForRange(t,i),o=!1,a=new v(this);r.on("error",(function(e){setImmediate((function(){o||a.emit("error",e)}))})),a.destroy=function(){r.unpipe(a),a.unref(),r.destroy()};var s=new C(i-t);return a.on("error",(function(e){setImmediate((function(){o||s.emit("error",e)}))})),s.destroy=function(){o=!0,a.unpipe(s),a.destroy()},r.pipe(a).pipe(s)},y.prototype._readStreamForRange=function(e,t){throw new Error("not implemented")},y.prototype.read=function(e,t,i,n,r){var o=this.createReadStream({start:n,end:n+i}),a=new d,s=0;a._write=function(i,n,r){i.copy(e,t+s,0,i.length),s+=i.length,r()},a.on("finish",r),o.on("error",(function(e){r(e)})),o.pipe(a)},y.prototype.close=function(e){setImmediate(e)},s.inherits(v,u),v.prototype._flush=function(e){this.unref(),e()},v.prototype.unref=function(e){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var R,A="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ";function I(e,t,i,n){if(n)return e.toString("utf8",t,i);for(var r="",o=t;o<i;o++)r+=A[e[o]];return r}function w(e,t){var i=e.readUInt32LE(t);return 4294967296*e.readUInt32LE(t+4)+i}function O(e){if(e)throw e}R="function"==typeof Buffer.allocUnsafe?function(e){return Buffer.allocUnsafe(e)}:function(e){return new Buffer(e)}},9644:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AppInsightsCore:()=>se,BaseCore:()=>ue,BaseTelemetryPlugin:()=>ve.i,CoreUtils:()=>ne,DiagnosticLogger:()=>g.AQ,ESPromise:()=>_e,ESPromiseScheduler:()=>Te,EventHelper:()=>R.zB,EventLatency:()=>c,EventPersistence:()=>d,EventPropertyType:()=>u,EventsDiscardedReason:()=>Ie.h,FullVersionString:()=>N,InternalAppInsightsCore:()=>f.F,InternalBaseCore:()=>le.A,LoggingSeverity:()=>s.X,MinChannelPriorty:()=>Ae.p,NotificationManager:()=>ye.f,PerfEvent:()=>m.zn,PerfManager:()=>m.Jk,ProcessTelemetryContext:()=>Re.Vi,TraceLevel:()=>p,Undefined:()=>A.jA,Utils:()=>ie,ValueKind:()=>l,ValueSanitizer:()=>Ce,Version:()=>b,_ExtendedInternalMessageId:()=>h,_InternalLogMessage:()=>g.lQ,_InternalMessageId:()=>s.v,__getRegisteredEvents:()=>I.um,_logInternalMessage:()=>g.L4,_throwInternal:()=>g.kP,_warnToConsole:()=>g.jV,addEventHandler:()=>I.Ib,addEventListeners:()=>I.yw,addPageHideEventListener:()=>I.TJ,addPageShowEventListener:()=>I.nD,addPageUnloadEventListener:()=>I.c9,areCookiesSupported:()=>v.p7,arrForEach:()=>a.tO,arrIndexOf:()=>a.UA,arrMap:()=>a.Mr,arrReduce:()=>a.Xz,attachEvent:()=>I.pZ,cookieAvailable:()=>v.p7,createCookieMgr:()=>v.Nz,createEnumStyle:()=>o.By,createGuid:()=>Y,createProcessTelemetryContext:()=>Re.CD,createTraceParent:()=>be.SU,createUniqueNamespace:()=>we.J,createUnloadHandlerContainer:()=>Oe.Y,dateNow:()=>a.m6,deleteCookie:()=>W,detachEvent:()=>I.pD,disableCookies:()=>H,disallowsSameSiteNone:()=>v.UY,doPerf:()=>m.Lm,dumpObj:()=>S.eU,eventOff:()=>I.QY,eventOn:()=>I.XO,extend:()=>$,findW3cTraceParent:()=>be.lq,formatTraceParent:()=>be.aR,generateW3CId:()=>R.DO,getCommonSchemaMetaData:()=>j,getConsole:()=>S.dr,getCookie:()=>K,getCookieValue:()=>Q,getCrypto:()=>S.MX,getDocument:()=>S.Me,getExceptionName:()=>a.jj,getFieldValueType:()=>te,getGlobal:()=>O.Rd,getGlobalInst:()=>S.a8,getHistory:()=>S.s1,getIEVersion:()=>S.sA,getISOString:()=>a.Y6,getJSON:()=>S.xA,getLocation:()=>S.k$,getMsCrypto:()=>S.gz,getNavigator:()=>S.jW,getPerformance:()=>S.r,getSetValue:()=>a.qK,getTenantId:()=>F,getTime:()=>Z,getWindow:()=>S.Jj,hasDocument:()=>S.Nv,hasHistory:()=>S.fE,hasJSON:()=>S.nS,hasNavigator:()=>S.d6,hasOwnProperty:()=>a.nr,hasWindow:()=>S.Ym,isArray:()=>a.kJ,isArrayValid:()=>J,isBeaconsSupported:()=>S.MF,isBoolean:()=>a.jn,isChromium:()=>re,isDate:()=>a.J_,isDocumentObjectAvailable:()=>B,isError:()=>a.VZ,isFetchSupported:()=>S.JO,isFunction:()=>a.mf,isIE:()=>S.w1,isLatency:()=>V,isNotTruthy:()=>a.F,isNullOrUndefined:()=>a.le,isNumber:()=>a.hj,isObject:()=>a.Kn,isReactNative:()=>S.b$,isSampledFlag:()=>be.Pn,isString:()=>a.HD,isTruthy:()=>a.fQ,isTypeof:()=>a.Ym,isUint8ArrayAvailable:()=>G,isUndefined:()=>a.o8,isValidSpanId:()=>be.Lc,isValidTraceId:()=>be.jN,isValidTraceParent:()=>be.J6,isValueAssigned:()=>U,isValueKind:()=>X,isWindowObjectAvailable:()=>k,isXhrSupported:()=>S.Z3,mergeEvtNamespace:()=>I.jU,newGuid:()=>R.GW,newId:()=>w.pZ,normalizeJsName:()=>a.Gf,objCreate:()=>O.pu,objDefineAccessors:()=>a.l_,objForEachKey:()=>a.rW,objFreeze:()=>a.FL,objKeys:()=>a.FY,objSeal:()=>a.Xi,openXhr:()=>oe,optimizeObject:()=>a.Ax,parseTraceParent:()=>be.j_,perfNow:()=>R.Jj,proxyAssign:()=>a.cf,proxyFunctionAs:()=>a.Oi,proxyFunctions:()=>a.Vb,random32:()=>w._l,randomValue:()=>w.az,removeEventHandler:()=>I.C1,removeEventListeners:()=>I.nJ,removePageHideEventListener:()=>I.C9,removePageShowEventListener:()=>I.Yl,removePageUnloadEventListener:()=>I.JA,safeGetCookieMgr:()=>v.JP,safeGetLogger:()=>g.vH,sanitizeProperty:()=>q,setCookie:()=>z,setEnableEnvMocks:()=>S.dI,setProcessTelemetryTimings:()=>ee,setValue:()=>a.sO,strContains:()=>a._Q,strEndsWith:()=>a.Id,strFunction:()=>A.cb,strObject:()=>A.fK,strPrototype:()=>A.hB,strStartsWith:()=>a.xe,strTrim:()=>a.nd,strUndefined:()=>A.jA,throwError:()=>a._y,toISOString:()=>a.Y6,useXDomainRequest:()=>S.cp});var n,r=i(3298),o=i(1785),a=i(3161),s=i(8712),l=(0,o.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),c=(0,o.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),u=(0,o.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),d=(0,o.By)({Normal:1,Critical:2}),p=(0,o.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),h=(0,a.FL)((0,r.uc)((0,r.uc)({},s.v),(0,o.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),_=i(2314),g=i(4300),m=i(2753),S=i(1167),f=i(8176),E="",T="https://browser.events.data.microsoft.com/OneCollector/1.0/",C="version",y="properties",v=i(8589),R=i(821),A=i(2589),I=i(1318),w=i(395),O=i(8785),b="3.2.13",N="1DS-Web-JS-"+b,D="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",M="withCredentials",L="timeout",P=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n),x=null,B=Boolean((0,S.Me)()),k=Boolean((0,S.Jj)());function U(e){return!(e===E||(0,a.le)(e))}function F(e){if(e){var t=e.indexOf("-");if(t>-1)return e.substring(0,t)}return E}function G(){return null===x&&(x=!(0,a.o8)(Uint8Array)&&!function(){var e=(0,S.jW)();if(!(0,a.o8)(e)&&e.userAgent){var t=e.userAgent.toLowerCase();if((t.indexOf("safari")>=0||t.indexOf("firefox")>=0)&&t.indexOf("chrome")<0)return!0}return!1}()&&!(0,S.b$)()),x}function V(e){return!!(e&&(0,a.hj)(e)&&e>=1&&e<=4)}function q(e,t,i){if(!t&&!U(t)||"string"!=typeof e)return null;var n=typeof t;if("string"===n||"number"===n||"boolean"===n||(0,a.kJ)(t))t={value:t};else if("object"!==n||A.CY.call(t,"value")){if((0,a.le)(t.value)||t.value===E||!(0,a.HD)(t.value)&&!(0,a.hj)(t.value)&&!(0,a.jn)(t.value)&&!(0,a.kJ)(t.value))return null}else t={value:i?JSON.stringify(t):t};if((0,a.kJ)(t.value)&&!J(t.value))return null;if(!(0,a.le)(t.kind)){if((0,a.kJ)(t.value)||!X(t.kind))return null;t.value=t.value.toString()}return t}function j(e,t,i){var n=-1;if(!(0,a.o8)(e))if(t>0&&(32===t?n=8192:t<=13&&(n=t<<5)),function(e){return e>=0&&e<=9}(i))-1===n&&(n=0),n|=i;else{var r=P[te(e)]||-1;-1!==n&&-1!==r?n|=r:6===r&&(n=r)}return n}function H(){(0,v.JP)(null).setEnabled(!1)}function z(e,t,i){(0,v.p7)(null)&&(0,v.JP)(null).set(e,t,86400*i,null,"/")}function W(e){(0,v.p7)(null)&&(0,v.JP)(null).del(e)}function K(e){return(0,v.p7)(null)?Q((0,v.JP)(null),e):E}function Q(e,t,i){var n;return void 0===i&&(i=!0),e&&(n=e.get(t),i&&n&&decodeURIComponent&&(n=decodeURIComponent(n))),n||E}function Y(e){void 0===e&&(e="D");var t=(0,R.GW)();return"B"===e?t="{"+t+"}":"P"===e?t="("+t+")":"N"===e&&(t=t.replace(/-/g,E)),t}function $(e,t,i,n,r){var o={},s=!1,l=0,c=arguments.length,u=arguments;for("[object Boolean]"===Object[A.hB].toString.call(u[0])&&(s=u[0],l++);l<c;l++)e=u[l],(0,a.rW)(e,(function(e,t){s&&t&&(0,a.Kn)(t)?(0,a.kJ)(t)?(o[e]=o[e]||[],(0,a.tO)(t,(function(t,i){t&&(0,a.Kn)(t)?o[e][i]=$(!0,o[e][i],t):o[e][i]=t}))):o[e]=$(!0,o[e],t):o[e]=t}));return o}var Z=R.Jj;function X(e){return 0===e||e>0&&e<=13||32===e}function J(e){return e.length>0}function ee(e,t){var i=e;i.timings=i.timings||{},i.timings.processTelemetryStart=i.timings.processTelemetryStart||{},i.timings.processTelemetryStart[t]=Z()}function te(e){var t=0;if(null!=e){var i=typeof e;"string"===i?t=1:"number"===i?t=2:"boolean"===i?t=3:i===A.fK&&(t=4,(0,a.kJ)(e)?(t=4096,e.length>0&&(t|=te(e[0]))):A.CY.call(e,"value")&&(t=8192|te(e.value)))}return t}var ie={Version:b,FullVersionString:N,strUndefined:A.jA,strObject:A.fK,Undefined:A.jA,arrForEach:a.tO,arrIndexOf:a.UA,arrMap:a.Mr,arrReduce:a.Xz,objKeys:a.FY,toISOString:a.Y6,isReactNative:S.b$,isString:a.HD,isNumber:a.hj,isBoolean:a.jn,isFunction:a.mf,isArray:a.kJ,isObject:a.Kn,strTrim:a.nd,isDocumentObjectAvailable:B,isWindowObjectAvailable:k,isValueAssigned:U,getTenantId:F,isBeaconsSupported:S.MF,isUint8ArrayAvailable:G,isLatency:V,sanitizeProperty:q,getISOString:a.Y6,useXDomainRequest:S.cp,getCommonSchemaMetaData:j,cookieAvailable:v.p7,disallowsSameSiteNone:v.UY,setCookie:z,deleteCookie:W,getCookie:K,createGuid:Y,extend:$,getTime:Z,isValueKind:X,isArrayValid:J,objDefineAccessors:a.l_,addPageUnloadEventListener:I.c9,setProcessTelemetryTimings:ee,addEventHandler:I.Ib,getFieldValueType:te,strEndsWith:a.Id,objForEachKey:a.rW},ne={_canUseCookies:void 0,isTypeof:a.Ym,isUndefined:a.o8,isNullOrUndefined:a.le,hasOwnProperty:a.nr,isFunction:a.mf,isObject:a.Kn,isDate:a.J_,isArray:a.kJ,isError:a.VZ,isString:a.HD,isNumber:a.hj,isBoolean:a.jn,toISOString:a.Y6,arrForEach:a.tO,arrIndexOf:a.UA,arrMap:a.Mr,arrReduce:a.Xz,strTrim:a.nd,objCreate:O.pu,objKeys:a.FY,objDefineAccessors:a.l_,addEventHandler:I.Ib,dateNow:a.m6,isIE:S.w1,disableCookies:H,newGuid:R.GW,perfNow:R.Jj,newId:w.pZ,randomValue:w.az,random32:w._l,mwcRandomSeed:w.CN,mwcRandom32:w.F6,generateW3CId:R.DO};function re(){return!!(0,S.a8)("chrome")}function oe(e,t,i,n,r,o){function a(e,t,i){try{e[t]=i}catch(e){}}void 0===n&&(n=!1),void 0===r&&(r=!1);var s=new XMLHttpRequest;return n&&a(s,D,n),i&&a(s,M,i),s.open(e,t,!r),i&&a(s,M,i),!r&&o&&a(s,L,o),s}var ae=function(e){function t(){var i=e.call(this)||this;return i.pluginVersionStringArr=[],(0,_.default)(t,i,(function(e,t){e.logger&&e.logger.queue||(e.logger=new g.AQ({loggingLevelConsole:1})),e.initialize=function(i,n,r,o){(0,m.Lm)(e,(function(){return"AppInsightsCore.initialize"}),(function(){var s=e.pluginVersionStringArr;if(i){i.endpointUrl||(i.endpointUrl=T);var l=i.propertyStorageOverride;!l||l.getProperty&&l.setProperty||(0,a._y)("Invalid property storage override passed."),i.channels&&(0,a.tO)(i.channels,(function(e){e&&(0,a.tO)(e,(function(e){if(e.identifier&&e.version){var t=e.identifier+"="+e.version;s.push(t)}}))}))}e.getWParam=function(){return"undefined"!=typeof document||i.enableWParam?0:-1},n&&(0,a.tO)(n,(function(e){if(e&&e.identifier&&e.version){var t=e.identifier+"="+e.version;s.push(t)}})),e.pluginVersionString=s.join(";"),e.pluginVersionStringArr=s;try{t.initialize(i,n,r,o),e.pollInternalLogs("InternalLog")}catch(t){var c=e.logger,u=(0,S.eU)(t);-1!==u.indexOf("channels")&&(u+="\n - Channels must be provided through config.channels only!"),(0,g.kP)(c,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}}),(function(){return{config:i,extensions:n,logger:r,notificationManager:o}}))},e.track=function(i){(0,m.Lm)(e,(function(){return"AppInsightsCore.track"}),(function(){var n=i;if(n){n.timings=n.timings||{},n.timings.trackStart=Z(),V(n.latency)||(n.latency=1);var r=n.ext=n.ext||{};r.sdk=r.sdk||{},r.sdk.ver=N;var o=n.baseData=n.baseData||{};o[y]=o[y]||{};var a=o[y];a[C]=a[C]||e.pluginVersionString||E}t.track(n)}),(function(){return{item:i}}),!i.sync)}})),i}return(0,r.ne)(t,e),t.__ieDyn=1,t}(f.F);const se=ae;var le=i(4770),ce=function(e){function t(){var i=e.call(this)||this;return(0,_.default)(t,i,(function(e,t){e.initialize=function(i,n,r,o){i&&!i.endpointUrl&&(i.endpointUrl=T),e.getWParam=function(){return B||i.enableWParam?0:-1};try{t.initialize(i,n,r,o)}catch(t){(0,g.kP)(e.logger,1,514,"Initialization Failed: "+(0,S.eU)(t)+"\n - Note: Channels must be provided through config.channels only")}},e.track=function(e){var i=e;if(i){var n=i.ext=i.ext||{};n.sdk=n.sdk||{},n.sdk.ver=N}t.track(i)}})),i}return(0,r.ne)(t,e),t.__ieDyn=1,t}(le.A);const ue=ce;var de=a.mf;function pe(e,t,i){return function(n){e[t]=n,i()}}var he=function(){function e(t){var i=0,n=null,r=[];function o(){if(r.length>0){var e=r.slice();r=[],setTimeout((function(){for(var t=0,i=e.length;t<i;++t)try{e[t]()}catch(e){}}),0)}}function a(e){0===i&&(n=e,i=1,o())}function s(e){0===i&&(n=e,i=2,o())}(0,_.default)(e,this,(function(t){t.then=function(t,a){return new e((function(s,l){!function(t,a,s,l){r.push((function(){var r;try{(r=1===i?de(t)?t(n):n:de(a)?a(n):n)instanceof e?r.then(s,l):2!==i||de(a)?s(r):l(r)}catch(e){return void l(e)}})),0!==i&&o()}(t,a,s,l)}))},t.catch=function(e){return t.then(null,e)}})),function(){if(!de(t))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{t(a,s)}catch(e){s(e)}}()}return e.resolve=function(t){return t instanceof e?t:t&&de(t.then)?new e((function(e,i){try{t.then(e,i)}catch(e){i(e)}})):new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,i){i(t)}))},e.all=function(t){if(t&&t.length)return new e((function(e,i){try{for(var n=[],r=0,o=0;o<t.length;o++){var a=t[o];a&&de(a.then)?(r++,a.then(pe(n,o,(function(){0==--r&&e(n)})),i)):n[o]=a}0===r&&setTimeout((function(){e(n)}),0)}catch(e){i(e)}}))},e.race=function(t){return new e((function(e,i){if(t&&t.length)try{for(var n=function(n){var r=t[n];r&&de(r.then)?r.then(e,i):setTimeout((function(){e(r)}),0)},r=0;r<t.length;r++)n(r)}catch(e){i(e)}}))},e}();const _e=he;var ge=0,me=[],Se=[],fe=[];function Ee(){return(new Date).getTime()}const Te=function(){function e(t,i){var n=0,r=(t||"<unnamed>")+"."+ge;function o(e){var t=(0,O.Rd)();t&&t.QUnit&&console&&console.log("ESPromiseScheduler["+r+"] "+e)}function a(e){(0,g.jV)(i,"ESPromiseScheduler["+r+"] "+e)}ge++,(0,_.default)(e,this,(function(e){var t=null,i=0;function s(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return e.splice(i,1)[0];return null}e.scheduleEvent=function(e,l,c){var u=r+"."+i;i++,l&&(u+="-("+l+")");var d=u+"{"+n+"}";n++;var p,h,_,g={evt:null,tm:Ee(),id:d,isRunning:!1,isAborted:!1};return g.evt=t?(p=g,h=t,_=new _e((function(e,t){var i=Ee()-h.tm,n=h.id;o("["+u+"] is waiting for ["+n+":"+i+" ms] to complete before starting -- ["+Se.length+"] waiting and ["+me.length+"] running"),p.abort=function(e){p.abort=null,s(Se,u),p.isAborted=!0,t(new Error(e))},h.evt.then((function(i){s(Se,u),C(p).then(e,t)}),(function(i){s(Se,u),C(p).then(e,t)}))})),Se.push(p),_):C(g),(t=g).evt._schId=d,g.evt;function m(e){for(var t=Ee(),i=t-6e5,n=e.length,r=0;r<n;){var o=e[r];if(o&&o.tm<i){var s=null;o.abort?(s="Aborting ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",o.abort(s)):s="Removing ["+o.id+"] due to Excessive runtime ("+(t-o.tm)+" ms)",a(s),e.splice(r,1),n--}else r++}}function S(e,i){var n=!1,r=s(me,e);if(r||(r=s(fe,e),n=!0),r){r.to&&(clearTimeout(r.to),r.to=null);var l=Ee()-r.tm;i?n?a("Timed out event ["+e+"] finally complete -- "+l+" ms"):o("Promise ["+e+"] Complete -- "+l+" ms"):(fe.push(r),a("Event ["+e+"] Timed out and removed -- "+l+" ms"))}else o("Failed to remove ["+e+"] from running queue");t&&t.id===e&&(t=null),m(me),m(Se),m(fe)}function f(e,t){return function(i){return S(e,!0),t&&t(i),i}}function E(e,t,i,n){t.then((function(t){return t instanceof _e?(o("Event ["+e+"] returned a promise -- waiting"),E(e,t,i,n),t):f(e,i)(t)}),f(e,n))}function T(e,t){var i=e.id;return new _e((function(n,r){o("Event ["+i+"] Starting -- waited for "+(e.wTm||"--")+" ms"),e.isRunning=!0,e.abort=function(t){e.abort=null,e.isAborted=!0,S(i,!1),r(new Error(t))};var a=t(i);a instanceof _e?(c&&(e.to=setTimeout((function(){S(i,!1),r(new Error("Timed out after ["+c+"] ms"))}),c)),E(i,a,(function(t){o("Event ["+i+"] Resolving after "+(Ee()-e.tm)+" ms"),n(t)}),r)):(o("Promise ["+i+"] Auto completed as the start action did not return a promise"),n())}))}function C(t){var i=Ee();return t.wTm=i-t.tm,t.tm=i,t.isAborted?_e.reject(new Error("["+u+"] was aborted")):(me.push(t),T(t,e))}}}))}return e.incomplete=function(){return me},e.waitingToStart=function(){return Se},e}();var Ce=function(){function e(e){var t=this,i={},n=[],r=[];function o(e,t){var o,s=i[e];if(s&&(o=s[t]),!o&&null!==o){if((0,a.HD)(e)&&(0,a.HD)(t))if(r.length>0){for(var l=0;l<r.length;l++)if(r[l].handleField(e,t)){o={canHandle:!0,fieldHandler:r[l]};break}}else 0===n.length&&(o={canHandle:!0});if(!o&&null!==o)for(o=null,l=0;l<n.length;l++)if(n[l].handleField(e,t)){o={canHandle:!0,handler:n[l],fieldHandler:null};break}s||(s=i[e]={}),s[t]=o}return o}function s(e,t,i,n,r,o){if(e.handler)return e.handler.property(t,i,r,o);if(!(0,a.le)(r.kind)){if(4096==(4096&n)||!X(r.kind))return null;r.value=r.value.toString()}return c(e.fieldHandler,t,i,n,r)}function l(e,t,i){return U(i)?{value:i}:null}function c(e,i,n,r,o){if(o&&e){var s=e.getSanitizer(i,n,r,o.kind,o.propertyType);if(s)if(4===r){var u={},d=o.value;(0,a.rW)(d,(function(t,r){var o=i+"."+n;if(U(r)){var a=l(0,0,r);(a=c(e,o,t,te(r),a))&&(u[t]=a.value)}})),o.value=u}else{var p={path:i,name:n,type:r,prop:o,sanitizer:t};o=s.call(t,p)}}return o}e&&r.push(e),t.addSanitizer=function(e){e&&(n.push(e),i={})},t.addFieldSanitizer=function(e){e&&(r.push(e),i={})},t.handleField=function(e,t){var i=o(e,t);return!!i&&i.canHandle},t.value=function(e,t,i,n){var r=o(e,t);if(r&&r.canHandle){if(!r||!r.canHandle)return null;if(r.handler)return r.handler.value(e,t,i,n);if(!(0,a.HD)(t)||(0,a.le)(i)||i===E)return null;var c=null,u=te(i);if(8192==(8192&u)){var d=-8193&u;if(!U((c=i).value)||1!==d&&2!==d&&3!==d&&4096!=(4096&d))return null}else 1===u||2===u||3===u||4096==(4096&u)?c=l(0,0,i):4===u&&(c=l(0,0,n?JSON.stringify(i):i));if(c)return s(r,e,t,u,c,n)}return null},t.property=function(e,t,i,n){var r=o(e,t);if(!r||!r.canHandle)return null;if(!(0,a.HD)(t)||(0,a.le)(i)||!U(i.value))return null;var l=te(i.value);return 0===l?null:s(r,e,t,l,i,n)}}return e.getFieldType=te,e}(),ye=i(6329),ve=i(1549),Re=i(877),Ae=i(978),Ie=i(4641),we=i(8530),Oe=i(6930),be=i(1579)},1785:(e,t,i)=>{"use strict";i.d(t,{By:()=>r,cc:()=>a,uj:()=>o});var n=i(3161);function r(e){var t={};return(0,n.rW)(e,(function(e,i){t[e]=i,t[i]=e})),(0,n._A)(t)}function o(e){var t={};return(0,n.rW)(e,(function(e,i){t[e]=e,t[i]=e})),(0,n._A)(t)}function a(e){var t={};return(0,n.rW)(e,(function(e,i){t[e]=i[1],t[i[0]]=i[1]})),(0,n._A)(t)}},4641:(e,t,i)=>{"use strict";i.d(t,{h:()=>n});var n=(0,i(1785).By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},8712:(e,t,i)=>{"use strict";i.d(t,{X:()=>T,v:()=>C});var n,r=i(1785),o="Failed",a=o+"MonitorAjax",s="Track",l="Start",c="Stop",u="Event",d="AuthContext",p="Exception",h="Local",_="Session",g="Storage",m="Browser",S="Cannot",f="Buffer",E="InstrumentationKey",T=(0,r.By)({CRITICAL:1,WARNING:2}),C=(0,r.By)(((n={})[m+"DoesNotSupport"+h+g]=0,n[m+S+"Read"+h+g]=1,n[m+S+"Read"+_+g]=2,n[m+S+"Write"+h+g]=3,n[m+S+"Write"+_+g]=4,n[m+o+"RemovalFrom"+h+g]=5,n[m+o+"RemovalFrom"+_+g]=6,n[S+"SendEmptyTelemetry"]=7,n.ClientPerformanceMathError=8,n["ErrorParsingAI"+_+"Cookie"]=9,n.ErrorPVCalc=10,n[p+"WhileLoggingError"]=11,n[o+"AddingTelemetryTo"+f]=12,n[a+"Abort"]=13,n[a+"Dur"]=14,n[a+"Open"]=15,n[a+"RSC"]=16,n[a+"Send"]=17,n[a+"GetCorrelationHeader"]=18,n[o+"ToAddHandlerForOnBeforeUnload"]=19,n[o+"ToSendQueuedTelemetry"]=20,n[o+"ToReportDataLoss"]=21,n["Flush"+o]=22,n.MessageLimitPerPVExceeded=23,n.MissingRequiredFieldSpecification=24,n.NavigationTimingNotSupported=25,n.OnError=26,n[_+"RenewalDateIsZero"]=27,n.SenderNotInitialized=28,n[l+s+u+o]=29,n[c+s+u+o]=30,n[l+s+o]=31,n[c+s+o]=32,n.TelemetrySampledAndNotSent=33,n[s+u+o]=34,n[s+p+o]=35,n[s+"Metric"+o]=36,n[s+"PV"+o]=37,n[s+"PV"+o+"Calc"]=38,n[s+"Trace"+o]=39,n["Transmission"+o]=40,n[o+"ToSet"+g+f]=41,n[o+"ToRestore"+g+f]=42,n.InvalidBackendResponse=43,n[o+"ToFixDepricatedValues"]=44,n.InvalidDurationValue=45,n.TelemetryEnvelopeInvalid=46,n.CreateEnvelopeError=47,n[S+"SerializeObject"]=48,n[S+"SerializeObjectNonSerializable"]=49,n.CircularReferenceDetected=50,n["Clear"+d+o]=51,n[p+"Truncated"]=52,n.IllegalCharsInName=53,n.ItemNotInArray=54,n.MaxAjaxPerPVExceeded=55,n.MessageTruncated=56,n.NameTooLong=57,n.SampleRateOutOfRange=58,n["Set"+d+o]=59,n["Set"+d+o+"AccountName"]=60,n.StringValueTooLong=61,n.StartCalledMoreThanOnce=62,n.StopCalledWithoutStart=63,n["TelemetryInitializer"+o]=64,n.TrackArgumentsNotSpecified=65,n.UrlTooLong=66,n[_+g+f+"Full"]=67,n[S+"AccessCookie"]=68,n.IdTooLong=69,n.InvalidEvent=70,n[a+"SetRequestHeader"]=71,n["Send"+m+"InfoOnUserInit"]=72,n["Plugin"+p]=73,n["Notification"+p]=74,n.SnippetScriptLoadFailure=99,n["Invalid"+E]=100,n[S+"ParseAiBlobValue"]=101,n.InvalidContentBlob=102,n[s+"PageAction"+u+o]=103,n[o+"AddingCustomDefinedRequestContext"]=104,n["InMemory"+g+f+"Full"]=105,n[E+"Deprecation"]=106,n))},978:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});var n=100},8176:(e,t,i)=>{"use strict";i.d(t,{F:()=>p});var n=i(3298),r=i(9798),o=i(6474),a=i(4770),s=i(4300),l=i(3161),c=i(9556),u=i(6329),d=i(2753),p=function(e){function t(){var i=e.call(this)||this;return(0,r.Z)(t,i,(function(e,t){function i(t){var i=e[o.tb]();i&&i[c.$F]([t],2)}e[o.VL]=function(e,i,n,r){t[o.VL](e,i,n||new s.AQ(e),r||new u.f(e))},e.track=function(n){(0,d.Lm)(e[c.kl](),(function(){return"AppInsightsCore:track"}),(function(){null===n&&(i(n),(0,l._y)("Invalid telemetry item")),function(e){(0,l.le)(e[o.I])&&(i(e),(0,l._y)("telemetry name required"))}(n),t.track(n)}),(function(){return{item:n}}),!n.sync)}})),i}return(0,n.ne)(t,e),t.__ieDyn=1,t}(a.A)},4770:(e,t,i)=>{"use strict";i.d(t,{A:()=>O});var n=i(3298),r=i(9798),o=i(8785),a=i(6474),s=i(3161),l=i(9556),c=i(877),u=i(3656),d=500;function p(e,t,i){t&&(0,s.kJ)(t)&&t[a.R5]>0&&(t=t.sort((function(e,t){return e[l.yi]-t[l.yi]})),(0,s.tO)(t,(function(e){e[l.yi]<d&&(0,s._y)("Channel has invalid priority - "+e[a.pZ])})),e[a.MW]({queue:(0,s.FL)(t),chain:(0,c.jV)(t,i[a.TC],i)}))}var h=i(8589),_=i(8530),g=i(7485),m=i(4300),S=i(2753),f=i(1549),E=i(1167),T=function(e){function t(){var i,n,o=e.call(this)||this;function c(){i=0,n=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,c(),(0,r.Z)(t,o,(function(e,t){e.addTelemetryInitializer=function(e){var t={id:i++,fn:e};return n[a.MW](t),{remove:function(){(0,s.tO)(n,(function(e,i){if(e.id===t.id)return n[a.cb](i,1),-1}))}}},e[l.hL]=function(t,i){for(var r=!1,o=n[a.R5],l=0;l<o;++l){var c=n[l];if(c)try{if(!1===c.fn[a.ZV](null,[t])){r=!0;break}}catch(e){(0,m.kP)(i[a.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,s.jj)(e),{exception:(0,E.eU)(e)},!0)}}r||e[a.uL](t,i)},e[a.F3]=function(){c()}})),o}return(0,n.ne)(t,e),t.__ieDyn=1,t}(f.i),C=i(6930),y="Plugins must provide initialize method",v="_notificationManager",R="SDK is still unloading...",A={loggingLevelConsole:1};function I(e,t){return new S.Jk(t)}function w(e,t){var i=!1;return(0,s.tO)(t,(function(t){if(t===e)return i=!0,-1})),i}var O=function(){function e(){var t,i,f,E,O,b,N,D,M,L,P,x,B,k,U,F,G,V,q,j,H=0,z=!1;(0,r.Z)(e,this,(function(e){function r(i){if(!H&&!z&&(i||e[a.eZ]&&e[a.eZ].queue[a.R5]>0)){var n=(0,s.v4)(t.diagnosticLogInterval);n&&n>0||(n=1e4),H=setInterval((function(){clearInterval(H),H=0,X()}),n)}return H}function W(){i=!1,t=(0,s.mm)(!0,{},A),e[a.TC]=t,e[a.eZ]=new m.AQ(t),e[a.iC]=[],U=new T,f=[],E=null,O=null,b=null,N=null,D=null,L=null,M=[],P=null,x=null,B=null,k=!1,F=null,G=(0,_.J)("AIBaseCore",!0),V=(0,C.Y)(),j=null}function K(){var i=(0,c.CD)($(),t,e);return i[a.Fc](r),i}function Q(i){var n=function(e,t,i){var n,r=[],o={};return(0,s.tO)(i,(function(t){((0,s.le)(t)||(0,s.le)(t[a.VL]))&&(0,s._y)(y);var i=t[l.yi],n=t[a.pZ];t&&i&&((0,s.le)(o[i])?o[i]=n:(0,m.jV)(e,"Two extensions have same priority #"+i+" - "+o[i]+", "+n)),(!i||i<500)&&r[a.MW](t)})),(n={all:i})[l.oV]=r,n}(e[a.eZ],0,M);L=n[l.oV],D=null;var o=n.all;if(B=(0,s.FL)(function(e,t,i){var n=[];if(e&&(0,s.tO)(e,(function(e){return p(n,e,i)})),t){var r=[];(0,s.tO)(t,(function(e){e[l.yi]>d&&r[a.MW](e)})),p(n,r,i)}return n}(x,o,e)),P){var h=(0,s.UA)(o,P);-1!==h&&o[a.cb](h,1),-1!==(h=(0,s.UA)(L,P))&&L[a.cb](h,1),P._setQueue(B)}else P=function(e,t){function i(){return(0,c.CD)(null,t[a.TC],t,null)}function n(e,t,i,n){var r=e?e[a.R5]+1:1;function o(){0==--r&&(n&&n(),n=null)}r>0&&(0,s.tO)(e,(function(e){if(e&&e.queue[a.R5]>0){var n=e.chain,s=t[a.zV](n);s[a.Fc](o),i(s)}else r--})),o()}var r=!1,o={identifier:"ChannelControllerPlugin",priority:d,initialize:function(t,i,n,o){r=!0,(0,s.tO)(e,(function(e){e&&e.queue[a.R5]>0&&(0,u.bP)((0,c.CD)(e.chain,t,i),n)}))},isInitialized:function(){return r},processTelemetry:function(t,r){n(e,r||i(),(function(e){e[a.uL](t)}),(function(){r[a.uL](t)}))},update:function(t,i){var r=i||{reason:0};return n(e,t,(function(e){e[a.uL](r)}),(function(){t[a.uL](r)})),!0},pause:function(){n(e,i(),(function(e){e.iterate((function(e){e.pause&&e.pause()}))}),null)},resume:function(){n(e,i(),(function(e){e.iterate((function(e){e.resume&&e.resume()}))}),null)},teardown:function(t,i){var o=i||{reason:0,isAsync:!1};return n(e,t,(function(e){e[a.uL](o)}),(function(){t[a.uL](o),r=!1})),!0},getChannel:function(t){var i=null;return e&&e[a.R5]>0&&(0,s.tO)(e,(function(e){if(e&&e.queue[a.R5]>0&&((0,s.tO)(e.queue,(function(e){if(e[a.pZ]===t)return i=e,-1})),i))return-1})),i},flush:function(t,r,o,s){var l=1,c=!1,u=null;function d(){l--,c&&0===l&&(u&&(clearTimeout(u),u=null),r&&r(c),r=null)}return s=s||5e3,n(e,i(),(function(e){e.iterate((function(e){if(e[a.kL]){l++;var i=!1;e[a.kL](t,(function(){i=!0,d()}),o)||i||(t&&null==u?u=setTimeout((function(){u=null,d()}),s):d())}}))}),(function(){c=!0,d()})),!0},_setQueue:function(t){e=t}};return o}(B,e);o[a.MW](P),L[a.MW](P),e[a.iC]=(0,u.AA)(o),P[a.VL](t,e,o);var _=K();(0,u.bP)(_,o),e[a.iC]=(0,s.FL)((0,u.AA)(L||[])).slice(),i&&function(t){var i=(0,c.xy)($(),e);i[a.Fc](r),e._updateHook&&!0===e._updateHook(i,t)||i[a.uL](t)}(i)}function Y(t){var i,n=null,r=null;return(0,s.tO)(e[a.iC],(function(e){if(e[a.pZ]===t&&e!==P&&e!==U)return r=e,-1})),!r&&P&&(r=P.getChannel(t)),r&&((i={plugin:r})[a.$h]=function(e){(0,u.OY)(r)[l.mE]=!e},i.isEnabled=function(){var e=(0,u.OY)(r);return!e[a.fi]&&!e[l.mE]},i.remove=function(e,t){var i;void 0===e&&(e=!0);var n=[r],o=((i={reason:1})[a.d]=e,i);Z(n,o,(function(e){e&&Q({reason:32,removed:n}),t&&t(e)}))},n=i),n}function $(){if(!D){var i=(L||[]).slice();-1===(0,s.UA)(i,U)&&i[a.MW](U),D=(0,c.jV)((0,u.AA)(i),t,e)}return D}function Z(i,n,o){if(i&&i[a.R5]>0){var l=(0,c.jV)(i,t,e),u=(0,c.Bt)(l,e);u[a.Fc]((function(){var e=!1,t=[];(0,s.tO)(M,(function(n,r){w(n,i)?e=!0:t[a.MW](n)})),M=t;var n=[];x&&((0,s.tO)(x,(function(t,r){var o=[];(0,s.tO)(t,(function(t){w(t,i)?e=!0:o[a.MW](t)})),n[a.MW](o)})),x=n),o&&o(e),r()})),u[a.uL](n)}else o(!1)}function X(){if(e[a.eZ]&&e[a.eZ].queue){var i=e[a.eZ].queue.slice(0);e[a.eZ].queue[a.R5]=0,(0,s.tO)(i,(function(i){var n,r=((n={})[a.I]=F||"InternalMessageId: "+i[a.Gc],n.iKey=(0,s.v4)(t[a.p$]),n.time=(0,s.Y6)(new Date),n.baseType=m.lQ.dataType,n.baseData={message:i[a.gU]},n);e.track(r)}))}}function J(e,t,i,n){return P?P[a.kL](e,t,i||6,n):(t&&t(!1),!0)}function ee(t){var i=e[a.eZ];i?((0,m.kP)(i,2,73,t),r()):(0,s._y)(t)}W(),e[a.yl]=function(){return i},e[a.VL]=function(r,o,c,u){var d,p;k&&(0,s._y)(R),e[a.yl]()&&(0,s._y)("Core should not be initialized more than once"),t=r||{},e[a.TC]=t,(0,s.le)(r[a.p$])&&(0,s._y)("Please provide instrumentation key"),E=u,e[v]=u,!0===(p=(0,s.v4)(t.disableDbgExt))&&q&&(E[a.n7](q),q=null),E&&!q&&!0!==p&&(q=(0,g.p)(t),E[a.g](q)),!(d=(0,s.v4)(t.enablePerfMgr))&&b&&(b=null),d&&(0,s.qK)(t,l.DN,I),(0,s.qK)(t,l.Zh,{}).NotificationManager=E,c&&(e[a.eZ]=c);var h=(0,s.qK)(t,l.js,[]);(M=[])[a.MW].apply(M,(0,n.$h)((0,n.$h)([],o,!1),h,!1)),x=(0,s.qK)(t,l.Z,[]),Q(null),B&&0!==B[a.R5]||(0,s._y)("No "+l.Z+" available"),i=!0,e.releaseQueue()},e.getTransmissionControls=function(){var e=[];return B&&(0,s.tO)(B,(function(t){e[a.MW](t.queue)})),(0,s.FL)(e)},e.track=function(i){i.iKey=i.iKey||t[a.p$],i[a.Z_]=i[a.Z_]||(0,s.Y6)(new Date),i.ver=i.ver||"4.0",!k&&e[a.yl]()?K()[a.uL](i):f[a.MW](i)},e[a.SD]=K,e[a.tb]=function(){var t;return E||(E=(0,o.pu)(((t={})[a.g]=function(e){},t[a.n7]=function(e){},t[l.uC]=function(e){},t[l.$F]=function(e,t){},t[l.f_]=function(e,t){},t)),e[v]=E),E},e[a.g]=function(e){E&&E[a.g](e)},e[a.n7]=function(e){E&&E[a.n7](e)},e.getCookieMgr=function(){return N||(N=(0,h.Nz)(t,e[a.eZ])),N},e.setCookieMgr=function(e){N=e},e[l.kl]=function(){if(!O&&!b&&(0,s.v4)(t.enablePerfMgr)){var i=(0,s.v4)(t[l.DN]);(0,s.mf)(i)&&(b=i(e,e[a.tb]()))}return O||b||(0,S.j5)()},e.setPerfMgr=function(e){O=e},e.eventCnt=function(){return f[a.R5]},e.releaseQueue=function(){if(i&&f[a.R5]>0){var e=f;f=[],(0,s.tO)(e,(function(e){K()[a.uL](e)}))}},e.pollInternalLogs=function(e){return F=e||null,z=!1,H&&(clearInterval(H),H=null),r(!0)},e[a.LS]=function(){z=!0,H&&(clearInterval(H),H=0,X())},(0,s.Vb)(e,(function(){return U}),["addTelemetryInitializer"]),e.unload=function(t,n,r){var o;void 0===t&&(t=!0),i||(0,s._y)("SDK is not initialized"),k&&(0,s._y)(R);var l=((o={reason:50})[a.d]=t,o.flushComplete=!1,o),u=(0,c.Bt)($(),e);function d(t){l.flushComplete=t,k=!0,V.run(u,l),e[a.LS](),u[a.uL](l)}u[a.Fc]((function(){W(),n&&n(l)}),e),X(),J(t,d,6,r)||d(!1)},e[a.TO]=Y,e.addPlugin=function(e,t,i,n){if(!e)return n&&n(!1),void ee(y);var r=Y(e[a.pZ]);if(r&&!t)return n&&n(!1),void ee("Plugin ["+e[a.pZ]+"] is already loaded!");var o={reason:16};function s(t){M[a.MW](e),o.added=[e],Q(o),n&&n(!0)}if(r){var l=[r.plugin];Z(l,{reason:2,isAsync:!!i},(function(e){e?(o.removed=l,o.reason|=32,s()):n&&n(!1)}))}else s()},e.evtNamespace=function(){return G},e[a.kL]=J,e.getTraceCtx=function(e){return j||(j=(0,u.Yn)()),j},e.setTraceCtx=function(e){j=e||null},(0,s.Oi)(e,"addUnloadCb",(function(){return V}),"add")}))}return e.__ieDyn=1,e}()},1549:(e,t,i)=>{"use strict";i.d(t,{i:()=>u});var n=i(9798),r=i(6474),o=i(3161),a=i(9556),s=i(877),l=i(6930),c="getPlugin",u=function(){function e(){var t,i,u,d,p,h=this;function _(e){void 0===e&&(e=null);var t=e;if(!t){var n=i||(0,s.CD)(null,{},h[a.oV]);t=u&&u[c]?n[r.zV](null,u[c]):n[r.zV](null,u)}return t}function g(e,t,n){e&&(0,o.sO)(e,a.Zh,[],null,o.le),!n&&t&&(n=t[r.SD]()[r.W2]());var l=u;u&&u[c]&&(l=u[c]()),h[a.oV]=t,i=(0,s.CD)(n,e,t,l)}function m(){t=!1,h[a.oV]=null,i=null,u=null,p=[],d=(0,l.Y)()}m(),(0,n.Z)(e,h,(function(e){e[r.VL]=function(e,i,n,r){g(e,i,r),t=!0},e[r.fi]=function(t,i){var n,l=e[a.oV];if(l&&(!t||l===t[a.oV]())){var h,_=!1,g=t||(0,s.Bt)(null,l,u&&u[c]?u[c]():u),S=i||((n={reason:0})[r.d]=!1,n);return e[r.F3]&&!0===e[r.F3](g,S,f)?h=!0:f(),h}function f(){if(!_){_=!0,d.run(g,i);var e=p;p=[],(0,o.tO)(e,(function(e){e.rm()})),!0===h&&g[r.uL](S),m()}}},e[r.Tu]=function(t,i){var n=e[a.oV];if(n&&(!t||n===t[a.oV]())){var o,l=!1,d=t||(0,s.xy)(null,n,u&&u[c]?u[c]():u),p=i||{reason:0};return e._doUpdate&&!0===e._doUpdate(d,p,h)?o=!0:h(),o}function h(){l||(l=!0,g(d.getCfg(),d.core(),d[r.W2]()))}},e._addHook=function(e){e&&((0,o.kJ)(e)?p=p.concat(e):p[r.MW](e))},(0,o.Oi)(e,"_addUnloadCb",(function(){return d}),"add")})),h[r.mc]=function(e){return _(e)[r.mc]()},h[r.yl]=function(){return t},h.setInitialized=function(e){t=e},h[r.Jd]=function(e){u=e},h[r.uL]=function(e,t){t?t[r.uL](e):u&&(0,o.mf)(u[a.hL])&&u[a.hL](e,null)},h._getTelCtx=_}return e.__ieDyn=1,e}()},8589:(e,t,i)=>{"use strict";i.d(t,{JP:()=>A,Nz:()=>I,UY:()=>L,kj:()=>y,p7:()=>w});var n=i(6474),r=i(4300),o=i(1167),a=i(3161),s=i(9556),l="toGMTString",c="toUTCString",u="cookie",d="expires",p="enabled",h="isCookieUseDisabled",_="disableCookiesUsage",g="_ckMgr",m=null,S=null,f=null,E=(0,o.Me)(),T={},C={};function y(e,t){var i=I[g]||C[g];return i||(i=I[g]=I(e,t),C[g]=i),i}function v(e){return!e||e.isEnabled()}function R(e,t){return!!(t&&e&&(0,a.kJ)(e.ignoreCookies))&&-1!==e.ignoreCookies[n.ou](t)}function A(e,t){var i;if(e)i=e.getCookieMgr();else if(t){var r=t[n.Lk];i=r[g]?r[g]:I(t)}return i||(i=y(t,(e||{})[n.eZ])),i}function I(e,t){var i,r=function(e){var t=e[n.Lk]=e[n.Lk]||{};if((0,a.sO)(t,"domain",e.cookieDomain,a.BX,a.le),(0,a.sO)(t,"path",e.cookiePath||"/",null,a.le),(0,a.le)(t[p])){var i=void 0;(0,a.o8)(e[h])||(i=!e[h]),(0,a.o8)(e[_])||(i=!e[_]),t[p]=i}return t}(e||C),u=r.path||"/",m=r.domain,f=!1!==r[p],E=((i={isEnabled:function(){var e=f&&w(t),i=C[g];return e&&i&&E!==i&&(e=v(i)),e}})[n.$h]=function(e){f=!1!==e},i.set=function(e,t,i,p,h){var _=!1;if(v(E)&&!function(e,t){return!!(t&&e&&(0,a.kJ)(e.blockedCookies)&&-1!==e.blockedCookies[n.ou](t))||R(e,t)}(r,e)){var g={},f=(0,a.nd)(t||s.qS),T=f[n.ou](";");if(-1!==T&&(f=(0,a.nd)(t[n.zc](0,T)),g=O(t[n.zc](T+1))),(0,a.sO)(g,"domain",p||m,a.fQ,a.o8),!(0,a.le)(i)){var C=(0,o.w1)();if((0,a.o8)(g[d])){var y=(0,a.m6)()+1e3*i;if(y>0){var A=new Date;A.setTime(y),(0,a.sO)(g,d,b(A,C?l:c)||b(A,C?l:c)||s.qS,a.fQ)}}C||(0,a.sO)(g,"max-age",s.qS+i,null,a.o8)}var I=(0,o.k$)();I&&"https:"===I.protocol&&((0,a.sO)(g,"secure",null,null,a.o8),null===S&&(S=!L(((0,o.jW)()||{})[n.qV])),S&&(0,a.sO)(g,"SameSite","None",null,a.o8)),(0,a.sO)(g,"path",h||u,null,a.o8),(r.setCookie||M)(e,N(f,g)),_=!0}return _},i.get=function(e){var t=s.qS;return v(E)&&!R(r,e)&&(t=(r.getCookie||D)(e)),t},i.del=function(e,t){var i=!1;return v(E)&&(i=E.purge(e,t)),i},i.purge=function(e,i){var n,a=!1;if(w(t)){var l=((n={}).path=i||"/",n[d]="Thu, 01 Jan 1970 00:00:01 GMT",n);(0,o.w1)()||(l["max-age"]="0"),(r.delCookie||M)(e,N(s.qS,l)),a=!0}return a},i);return E[g]=E,E}function w(e){if(null===m){m=!1;try{m=void 0!==(E||{})[u]}catch(t){(0,r.kP)(e,2,68,"Cannot access document.cookie - "+(0,a.jj)(t),{exception:(0,o.eU)(t)})}}return m}function O(e){var t={};if(e&&e[n.R5]){var i=(0,a.nd)(e)[n.w6](";");(0,a.tO)(i,(function(e){if(e=(0,a.nd)(e||s.qS)){var i=e[n.ou]("=");-1===i?t[e]=null:t[(0,a.nd)(e[n.zc](0,i))]=(0,a.nd)(e[n.zc](i+1))}}))}return t}function b(e,t){return(0,a.mf)(e[t])?e[t]():null}function N(e,t){var i=e||s.qS;return(0,a.rW)(t,(function(e,t){i+="; "+e+((0,a.le)(t)?s.qS:"="+t)})),i}function D(e){var t=s.qS;if(E){var i=E[u]||s.qS;f!==i&&(T=O(i),f=i),t=(0,a.nd)(T[e]||s.qS)}return t}function M(e,t){E&&(E[u]=e+"="+t)}function L(e){return!(!(0,a.HD)(e)||!(0,a._Q)(e,"CPU iPhone OS 12")&&!(0,a._Q)(e,"iPad; CPU OS 12")&&!((0,a._Q)(e,"Macintosh; Intel Mac OS X 10_14")&&(0,a._Q)(e,"Version/")&&(0,a._Q)(e,"Safari"))&&(!(0,a._Q)(e,"Macintosh; Intel Mac OS X 10_14")||!(0,a.Id)(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!(0,a._Q)(e,"Chrome/5")&&!(0,a._Q)(e,"Chrome/6")&&(!(0,a._Q)(e,"UnrealEngine")||(0,a._Q)(e,"Chrome"))&&!(0,a._Q)(e,"UCBrowser/12")&&!(0,a._Q)(e,"UCBrowser/11"))}},821:(e,t,i)=>{"use strict";i.d(t,{DO:()=>S,GW:()=>g,Jj:()=>m,Px:()=>_,Tr:()=>f,d8:()=>R,ej:()=>v,kT:()=>A,oF:()=>C,pP:()=>T,vn:()=>y,zB:()=>E});var n,r=i(2589),o=i(8785),a=i(6474),s=i(8589),l=i(1167),c=i(1318),u=i(3161),d=i(9556),p=i(395),h=null,_=r.jA;function g(){var e=S();return e[a.zc](0,8)+"-"+e[a.zc](8,12)+"-"+e[a.zc](12,16)+"-"+e[a.zc](16,20)+"-"+e[a.zc](20)}function m(){var e=(0,l.r)();return e&&e.now?e.now():(0,u.m6)()}function S(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i=d.qS,n=0;n<4;n++)i+=t[15&(e=(0,p._l)())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var r=t[8+(3&(0,p._l)())|0];return i[a.Jn](0,8)+i[a.Jn](9,4)+"4"+i[a.Jn](13,3)+r+i[a.Jn](16,3)+i[a.Jn](19,12)}var f={_canUseCookies:void 0,isTypeof:u.Ym,isUndefined:u.o8,isNullOrUndefined:u.le,hasOwnProperty:u.nr,isFunction:u.mf,isObject:u.Kn,isDate:u.J_,isArray:u.kJ,isError:u.VZ,isString:u.HD,isNumber:u.hj,isBoolean:u.jn,toISOString:u.Y6,arrForEach:u.tO,arrIndexOf:u.UA,arrMap:u.Mr,arrReduce:u.Xz,strTrim:u.nd,objCreate:o.pu,objKeys:u.FY,objDefineAccessors:u.l_,addEventHandler:c.Ib,dateNow:u.m6,isIE:l.w1,disableCookies:C,newGuid:g,perfNow:m,newId:p.pZ,randomValue:p.az,random32:p._l,mwcRandomSeed:p.CN,mwcRandom32:p.F6,generateW3CId:S},E={Attach:c.pZ,AttachEvent:c.pZ,Detach:c.pD,DetachEvent:c.pD};function T(e,t){var i=(0,s.kj)(e,t),r=f._canUseCookies;return null===h&&(h=[],n=r,(0,u.l_)(f,"_canUseCookies",(function(){return n}),(function(e){n=e,(0,u.tO)(h,(function(t){t[a.$h](e)}))}))),-1===(0,u.UA)(h,i)&&h[a.MW](i),(0,u.jn)(r)&&i[a.$h](r),(0,u.jn)(n)&&i[a.$h](n),i}function C(){T()[a.$h](!1)}function y(e){return T(null,e).isEnabled()}function v(e,t){return T(null,e).get(t)}function R(e,t,i,n){T(null,e).set(t,i,null,n)}function A(e,t){return T(null,e).del(t)}},8530:(e,t,i)=>{"use strict";i.d(t,{J:()=>h,K:()=>_});var n=i(2589),r=i(6474),o=i(3161),a=i(9556),s=i(395),l=n.RJ,c="2.8.15",u="."+(0,s.pZ)(6),d=0;function p(e){return 1===e[r.xv]||9===e[r.xv]||!+e[r.xv]}function h(e,t){return void 0===t&&(t=!1),(0,o.Gf)(e+d+++(t?"."+c:a.qS)+u)}function _(e){var t={id:h("_aiData-"+(e||a.qS)+"."+c),accept:function(e){return p(e)},get:function(e,i,n,r){var a=e[t.id];return a?a[(0,o.Gf)(i)]:(r&&((a=function(e,t){var i=t[e.id];if(!i){i={};try{p(t)&&(function(e,t,i){if(l)try{return l(e,t,{value:i,enumerable:!1,configurable:!0}),!0}catch(e){}return!1}(t,e.id,i)||(t[e.id]=i))}catch(e){}}return i}(t,e))[(0,o.Gf)(i)]=n),n)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(e){}}};return t}},7485:(e,t,i)=>{"use strict";i.d(t,{j:()=>c,p:()=>u});var n,r=i(6474),o=i(1167),a=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],s=null;function l(e,t){return function(){var i=arguments,n=c(t);if(n){var o=n.listener;o&&o[e]&&o[e][r.ZV](o,i)}}}function c(e){var t,i=s;return i||!0===e.disableDbgExt||(i=s||((t=(0,o.a8)("Microsoft"))&&(s=t.ApplicationInsights),s)),i?i.ChromeDbgExt:null}function u(e){if(!n){n={};for(var t=0;t<a[r.R5];t++)n[a[t]]=l(a[t],e)}return n}},4300:(e,t,i)=>{"use strict";i.d(t,{AQ:()=>h,L4:()=>S,jV:()=>m,kP:()=>g,lQ:()=>d,vH:()=>p});var n=i(9798),r=i(6474),o=i(7485),a=i(1167),s=i(3161),l=i(9556);function c(e){return e?'"'+e[r.i7](/\"/g,l.qS)+'"':l.qS}function u(e,t){var i=(0,a.dr)();if(i){var n="log";i[e]&&(n=e),(0,s.mf)(i[n])&&i[n](t)}}var d=function(){function e(e,t,i,n){void 0===i&&(i=!1);var o=this;o[r.Gc]=e,o[r.gU]=(i?"AI: ":"AI (Internal): ")+e;var s=l.qS;(0,a.nS)()&&(s=(0,a.xA)().stringify(n));var u=(t?" message:"+c(t):l.qS)+(n?" props:"+c(s):l.qS);o[r.gU]+=u}return e.dataType="MessageData",e}();function p(e,t){return(e||{})[r.eZ]||new h(t)}var h=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var i,c,p,h,_=0,g={};(0,n.Z)(e,this,(function(e){function n(t,i){if(!(_>=p)){var n=!0,o="AITR_"+i[r.Gc];if(g[o]?n=!1:g[o]=!0,n&&(t<=c&&(e.queue[r.MW](i),_++,m(1===t?"error":"warn",i)),_===p)){var a="Internal events throttle limit per PageView reached for this app.",s=new d(23,a,!1);e.queue[r.MW](s),1===t?e[l.ys](a):e[l.cL](a)}}}function m(e,i){var n=(0,o.j)(t||{});n&&n[r.mc]&&n[r.mc](e,i)}!function(e){i=(0,s.v4)(e.loggingLevelConsole,0),c=(0,s.v4)(e.loggingLevelTelemetry,1),p=(0,s.v4)(e.maxMessageLimit,25),h=(0,s.v4)(e.enableDebug,(0,s.v4)(e[r.Fr],!1))}(t||{}),e.consoleLoggingLevel=function(){return i},e.telemetryLoggingLevel=function(){return c},e.maxInternalMessageLimit=function(){return p},e[r.Fr]=function(){return h},e.throwInternal=function(t,o,c,u,p){void 0===p&&(p=!1);var _=new d(o,c,p,u);if(h)throw(0,a.eU)(_);var S=1===t?l.ys:l.cL;if((0,s.o8)(_[r.gU]))m("throw"+(1===t?"Critical":"Warning"),_);else{if(p){var f=+_[r.Gc];!g[f]&&i>=t&&(e[S](_[r.gU]),g[f]=!0)}else i>=t&&e[S](_[r.gU]);n(t,_)}},e[l.cL]=function(e){u("warn",e),m("warning",e)},e[l.ys]=function(e){u("error",e),m("error",e)},e.resetInternalMessageCount=function(){_=0,g={}},e[r.jk]=n}))}return e.__ieDyn=1,e}();function _(e){return e||new h}function g(e,t,i,n,r,o){void 0===o&&(o=!1),_(e).throwInternal(t,i,n,r,o)}function m(e,t){_(e)[l.cL](t)}function S(e,t,i){_(e)[r.jk](t,i)}},1167:(e,t,i)=>{"use strict";i.d(t,{G6:()=>$,JO:()=>X,Jj:()=>M,Kf:()=>ae,MF:()=>Z,MX:()=>H,Me:()=>P,Nd:()=>oe,Nu:()=>re,Nv:()=>L,Ym:()=>D,Z3:()=>ee,a8:()=>N,b$:()=>W,cp:()=>J,d6:()=>x,dI:()=>b,dr:()=>G,eU:()=>Y,ed:()=>ie,fE:()=>k,gz:()=>z,jW:()=>B,k$:()=>F,nS:()=>q,pI:()=>ne,r:()=>V,s1:()=>U,sA:()=>Q,w1:()=>K,xA:()=>j});var n=i(2589),r=i(8785),o=i(6474),a=i(3161),s=i(9556),l="window",c="document",u="documentMode",d="navigator",p="history",h="location",_="console",g="performance",m="JSON",S="crypto",f="msCrypto",E="ReactNative",T="msie",C="trident/",y="XMLHttpRequest",v=null,R=null,A=!1,I=null,w=null;function O(e,t){var i=!1;if(e){try{if(!(i=t in e)){var r=e[n.hB];r&&(i=t in r)}}catch(e){}if(!i)try{var o=new e;i=!(0,a.o8)(o[t])}catch(e){}}return i}function b(e){A=e}function N(e){var t=(0,r.Rd)();return t&&t[e]?t[e]:e===l&&D()?window:null}function D(){return Boolean(typeof window===n.fK&&window)}function M(){return D()?window:N(l)}function L(){return Boolean(typeof document===n.fK&&document)}function P(){return L()?document:N(c)}function x(){return Boolean(typeof navigator===n.fK&&navigator)}function B(){return x()?navigator:N(d)}function k(){return Boolean(typeof history===n.fK&&history)}function U(){return k()?history:N(p)}function F(e){if(e&&A){var t=N("__mockLocation");if(t)return t}return typeof location===n.fK&&location?location:N(h)}function G(){return typeof console!==n.jA?console:N(_)}function V(){return N(g)}function q(){return Boolean(typeof JSON===n.fK&&JSON||null!==N(m))}function j(){return q()?JSON||N(m):null}function H(){return N(S)}function z(){return N(f)}function W(){var e=B();return!(!e||!e.product)&&e.product===E}function K(){var e=B();if(e&&(e[o.qV]!==R||null===v)){var t=((R=e[o.qV])||s.qS)[o.T1]();v=(0,a._Q)(t,T)||(0,a._Q)(t,C)}return v}function Q(e){if(void 0===e&&(e=null),!e){var t=B()||{};e=t?(t[o.qV]||s.qS)[o.T1]():s.qS}var i=(e||s.qS)[o.T1]();if((0,a._Q)(i,T)){var n=P()||{};return Math.max(parseInt(i[o.w6](T)[1]),n[u]||0)}if((0,a._Q)(i,C)){var r=parseInt(i[o.w6](C)[1]);if(r)return r+4}return null}function Y(e){var t=Object[n.hB].toString[o._S](e),i=s.qS;return"[object Error]"===t?i="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e[o.I]+"'":q()&&(i=j().stringify(e)),t+i}function $(e){if(!e||!(0,a.HD)(e)){var t=B()||{};e=t?(t[o.qV]||s.qS)[o.T1]():s.qS}return(e||s.qS)[o.T1]()[o.ou]("safari")>=0}function Z(){return null===w&&(w=x()&&Boolean(B().sendBeacon)),w}function X(e){var t=!1;try{t=!!N("fetch");var i=N("Request");t&&e&&i&&(t=O(i,"keepalive"))}catch(e){}return t}function J(){return null===I&&(I=typeof XDomainRequest!==n.jA)&&ee()&&(I=I&&!O(N(y),"withCredentials")),I}function ee(){var e=!1;try{e=!!N(y)}catch(e){}return e}function te(e,t){if(e)for(var i=0;i<e[o.R5];i++){var n=e[i];if(n[o.I]&&n[o.I]===t)return n}return{}}function ie(e){var t=P();return t&&e?te(t.querySelectorAll("meta"),e).content:null}function ne(e){var t,i=V();if(i){var n=i.getEntriesByType("navigation")||[];t=te((n[o.R5]>0?n[0]:{}).serverTiming,e).description}return t}function re(e,t){return!!(e&&e.dispatchEvent&&t)&&(e.dispatchEvent(t),!0)}function oe(e,t){var i=null,n={detail:t||null};if((0,a.mf)(CustomEvent))i=new CustomEvent(e,n);else{var r=P();r&&r.createEvent&&(i=r.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n)}return i}function ae(e,t,i){var n=(0,r.Rd)();if(n&&n.CustomEvent)try{return re(n,oe(e,{cfg:t||null,customDetails:i||null}))}catch(e){}return!1}},1318:(e,t,i)=>{"use strict";i.d(t,{C1:()=>U,C9:()=>z,Ib:()=>k,JA:()=>j,QY:()=>P,TJ:()=>H,XO:()=>L,Yl:()=>K,c9:()=>q,jU:()=>M,nD:()=>W,nJ:()=>V,pD:()=>B,pZ:()=>x,um:()=>O,yw:()=>G});var n=i(6474),r=i(8530),o=i(1167),a=i(3161),s=i(9556),l="on",c="attachEvent",u="addEventListener",d="detachEvent",p="removeEventListener",h="events",_="visibilitychange",g="pagehide",m="pageshow",S="unload",f="beforeunload",E=(0,r.J)("aiEvtPageHide"),T=(0,r.J)("aiEvtPageShow"),C=/\.[\.]+/g,y=/[\.]+$/,v=1,R=(0,r.K)("events"),A=/^([^.]*)(?:\.(.+)|)/;function I(e){return e&&e[n.i7]?e[n.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,s.qS):e}function w(e,t){var i;if(t){var r=s.qS;(0,a.kJ)(t)?(r=s.qS,(0,a.tO)(t,(function(e){(e=I(e))&&("."!==e[0]&&(e="."+e),r+=e)}))):r=I(t),r&&("."!==r[0]&&(r="."+r),e=(e||s.qS)+r)}var o=A.exec(e||s.qS)||[];return(i={})[n.P6]=o[1],i.ns=(o[2]||s.qS).replace(C,".").replace(y,s.qS)[n.w6](".").sort().join("."),i}function O(e,t,i){var r=[],o=R.get(e,h,{},!1),l=w(t,i);return(0,a.rW)(o,(function(e,t){(0,a.tO)(t,(function(e){var t;l[n.P6]&&l[n.P6]!==e.evtName[n.P6]||l.ns&&l.ns!=l.ns||r[n.MW](((t={})[n.I]=e.evtName[n.P6]+(e.evtName.ns?"."+e.evtName.ns:s.qS),t.handler=e[n.Kn],t))}))})),r}function b(e,t,i){void 0===i&&(i=!0);var n=R.get(e,h,{},i),r=n[t];return r||(r=n[t]=[]),r}function N(e,t,i,r){e&&t&&t[n.P6]&&(e[p]?e[p](t[n.P6],i,r):e[d]&&e[d](l+t[n.P6],i))}function D(e,t,i,r){for(var o=t[n.R5];o--;){var a=t[o];a&&(i.ns&&i.ns!==a.evtName.ns||r&&!r(a)||(N(e,a.evtName,a[n.Kn],a.capture),t[n.cb](o,1)))}}function M(e,t){return t?w("xx",(0,a.kJ)(t)?[e].concat(t):[e,t]).ns[n.w6]("."):e}function L(e,t,i,r,o){var a;void 0===o&&(o=!1);var s=!1;if(e)try{var d=w(t,r);if(s=function(e,t,i,r){var o=!1;return e&&t&&t[n.P6]&&i&&(e[u]?(e[u](t[n.P6],i,r),o=!0):e[c]&&(e[c](l+t[n.P6],i),o=!0)),o}(e,d,i,o),s&&R.accept(e)){var p=((a={guid:v++,evtName:d})[n.Kn]=i,a.capture=o,a);b(e,d.type)[n.MW](p)}}catch(e){}return s}function P(e,t,i,r,o){if(void 0===o&&(o=!1),e)try{var s=w(t,r),l=!1;!function(e,t,i){if(t[n.P6])D(e,b(e,t[n.P6]),t,i);else{var r=R.get(e,h,{});(0,a.rW)(r,(function(n,r){D(e,r,t,i)})),0===(0,a.FY)(r)[n.R5]&&R.kill(e,h)}}(e,s,(function(e){return!((!s.ns||i)&&e[n.Kn]!==i||(l=!0,0))})),l||N(e,s,i,o)}catch(e){}}function x(e,t,i,n){return void 0===n&&(n=!1),L(e,t,i,null,n)}function B(e,t,i,n){void 0===n&&(n=!1),P(e,t,i,null,n)}function k(e,t,i){var n=!1,r=(0,o.Jj)();r&&(n=L(r,e,t,i),n=L(r.body,e,t,i)||n);var a=(0,o.Me)();return a&&(n=L(a,e,t,i)||n),n}function U(e,t,i){var n=(0,o.Jj)();n&&(P(n,e,t,i),P(n.body,e,t,i));var r=(0,o.Me)();r&&P(r,e,t,i)}function F(e,t,i,r){var o=!1;return t&&e&&e[n.R5]>0&&(0,a.tO)(e,(function(e){e&&(i&&-1!==(0,a.UA)(i,e)||(o=k(e,t,r)||o))})),o}function G(e,t,i,r){var o=!1;return t&&e&&(0,a.kJ)(e)&&!(o=F(e,t,i,r))&&i&&i[n.R5]>0&&(o=F(e,t,null,r)),o}function V(e,t,i){e&&(0,a.kJ)(e)&&(0,a.tO)(e,(function(e){e&&U(e,t,i)}))}function q(e,t,i){return G([f,S,g],e,t,i)}function j(e,t){V([f,S,g],e,t)}function H(e,t,i){var n=M(E,i),r=F([g],e,t,n);return t&&-1!==(0,a.UA)(t,_)||(r=F([_],(function(t){var i=(0,o.Me)();e&&i&&"hidden"===i.visibilityState&&e(t)}),t,n)||r),!r&&t&&(r=H(e,null,i)),r}function z(e,t){var i=M(E,t);V([g],e,i),V([_],null,i)}function W(e,t,i){var n=M(T,i),r=F([m],e,t,n);return!(r=F([_],(function(t){var i=(0,o.Me)();e&&i&&"visible"===i.visibilityState&&e(t)}),t,n)||r)&&t&&(r=W(e,null,i)),r}function K(e,t){var i=M(T,t);V([m],e,i),V([_],null,i)}},3161:(e,t,i)=>{"use strict";i.d(t,{Ax:()=>Ne,BX:()=>G,F:()=>ye,FL:()=>ge,FY:()=>de,Gf:()=>H,HD:()=>X,Hb:()=>P,Id:()=>W,J_:()=>Y,Kn:()=>q,Mr:()=>ae,Mu:()=>x,Oi:()=>we,PO:()=>ie,UA:()=>oe,VZ:()=>Z,Vb:()=>Oe,Xi:()=>me,Xz:()=>se,Y6:()=>ne,Ym:()=>B,_A:()=>_e,_Q:()=>Q,_y:()=>Re,cf:()=>Ie,fQ:()=>ve,hj:()=>J,hl:()=>be,jj:()=>fe,jn:()=>ee,kJ:()=>$,l_:()=>pe,le:()=>F,m6:()=>Se,mf:()=>j,mm:()=>De,nd:()=>le,nr:()=>V,o8:()=>k,pT:()=>U,qK:()=>Te,rW:()=>z,sO:()=>Ee,tO:()=>re,v4:()=>Ce,xe:()=>K,yk:()=>te});var n=i(2589),r=i(8785),o=i(6474),a=i(9556),s="toISOString",l="endsWith",c="startsWith",u="indexOf",d="map",p="reduce",h="trim",_="toString",g="__proto__",m="constructor",S=n.RJ,f=n.Pw.freeze,E=n.Pw.seal,T=n.Pw.keys,C=String[n.hB],y=C[h],v=C[l],R=C[c],A=Date[n.hB][s],I=Array.isArray,w=n.V4[_],O=n.CY[_],b=O[o._S](n.Pw),N=/-([a-z])/g,D=/([^\w\d_$])/g,M=/^(\d+[\w\d_$])/,L=Object.getPrototypeOf;function P(e){if(e){if(L)return L(e);var t=e[g]||e[n.hB]||e[m];if(t)return t}return null}function x(e){return w[o._S](e)}function B(e,t){return typeof e===t}function k(e){return void 0===e||typeof e===n.jA}function U(e){return!k(e)}function F(e){return null===e||k(e)}function G(e){return!F(e)}function V(e,t){return!(!e||!n.CY[o._S](e,t))}function q(e){return!(!e||typeof e!==n.fK)}function j(e){return!(!e||typeof e!==n.cb)}function H(e){var t=e;return t&&X(t)&&(t=(t=(t=t[o.i7](N,(function(e,t){return t.toUpperCase()})))[o.i7](D,"_"))[o.i7](M,(function(e,t){return"_"+t}))),t}function z(e,t){if(e)for(var i in e)n.CY[o._S](e,i)&&t[o._S](e,i,e[i])}function W(e,t){var i=!1;return e&&t&&!(i=e===t)&&(i=v?e[l](t):function(e,t){var i=!1,n=t?t[o.R5]:0,r=e?e[o.R5]:0;if(n&&r&&r>=n&&!(i=e===t)){for(var a=r-1,s=n-1;s>=0;s--){if(e[a]!=t[s])return!1;a--}i=!0}return i}(e,t)),i}function K(e,t){var i=!1;return e&&t&&!(i=e===t)&&(i=R?e[c](t):function(e,t){var i=!1,n=t?t[o.R5]:0;if(e&&n&&e[o.R5]>=n&&!(i=e===t)){for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;i=!0}return i}(e,t)),i}function Q(e,t){return!(!e||!t)&&-1!==e[o.ou](t)}function Y(e){return!(!e||"[object Date]"!==w[o._S](e))}var $=I||function(e){return!(!e||"[object Array]"!==w[o._S](e))};function Z(e){return!(!e||"[object Error]"!==w[o._S](e))}function X(e){return"string"==typeof e}function J(e){return"number"==typeof e}function ee(e){return"boolean"==typeof e}function te(e){return"symbol"==typeof e}function ie(e){var t=!1;if(e&&"object"==typeof e){var i=L?L(e):P(e);i?(i[m]&&n.CY[o._S](i,m)&&(i=i[m]),t=typeof i===n.cb&&O[o._S](i)===b):t=!0}return t}function ne(e){if(e)return A?e[s]():function(e){if(e&&e.getUTCFullYear){var t=function(e){var t=String(e);return 1===t[o.R5]&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(e)}function re(e,t,i){var n=e[o.R5];try{for(var r=0;r<n&&(!(r in e)||-1!==t[o._S](i||e,e[r],r,e));r++);}catch(e){}}function oe(e,t,i){if(e){if(e[u])return e[u](t,i);var n=e[o.R5],r=i||0;try{for(var a=Math.max(r>=0?r:n-Math.abs(r),0);a<n;a++)if(a in e&&e[a]===t)return a}catch(e){}}return-1}function ae(e,t,i){var n;if(e){if(e[d])return e[d](t,i);var r=e[o.R5],a=i||e;n=new Array(r);try{for(var s=0;s<r;s++)s in e&&(n[s]=t[o._S](a,e[s],e))}catch(e){}}return n}function se(e,t,i){var n;if(e){if(e[p])return e[p](t,i);var r=e[o.R5],a=0;if(arguments[o.R5]>=3)n=arguments[2];else{for(;a<r&&!(a in e);)a++;n=e[a++]}for(;a<r;)a in e&&(n=t(n,e[a],a,e)),a++}return n}function le(e){return e&&(e=y&&e[h]?e[h]():e[o.i7]?e[o.i7](/^\s+|(?=\s)\s+$/g,a.qS):e),e}var ce=!{toString:null}.propertyIsEnumerable("toString"),ue=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function de(e){var t=typeof e;if(t===n.cb||t===n.fK&&null!==e||(0,r.ZU)("objKeys called on non-object"),!ce&&T)return T(e);var i=[];for(var a in e)e&&n.CY[o._S](e,a)&&i[o.MW](a);if(ce)for(var s=ue[o.R5],l=0;l<s;l++)e&&n.CY[o._S](e,ue[l])&&i[o.MW](ue[l]);return i}function pe(e,t,i,n){if(S)try{var r={enumerable:!0,configurable:!0};return i&&(r.get=i),n&&(r.set=n),S(e,t,r),!0}catch(e){}return!1}function he(e){return e}function _e(e){return f&&z(e,(function(e,t){($(t)||q(t))&&f(t)})),ge(e)}var ge=f||he,me=E||he;function Se(){var e=Date;return e.now?e.now():(new e).getTime()}function fe(e){return Z(e)?e[o.I]:a.qS}function Ee(e,t,i,n,r){var o=i;return e&&((o=e[t])===i||r&&!r(o)||n&&!n(i)||(o=i,e[t]=o)),o}function Te(e,t,i){var n;return e?!(n=e[t])&&F(n)&&(n=k(i)?{}:i,e[t]=n):n=k(i)?{}:i,n}function Ce(e,t){return F(e)?t:e}function ye(e){return!e}function ve(e){return!!e}function Re(e){throw new Error(e)}function Ae(e,t){var i=null,n=null;return j(e)?i=e:n=e,function(){var e=arguments;if(i&&(n=i()),n)return n[t][o.ZV](n,e)}}function Ie(e,t,i){if(e&&t&&q(e)&&q(t)){var n=function(n){if(X(n)){var r=t[n];j(r)?i&&!i(n,!0,t,e)||(e[n]=Ae(t,n)):i&&!i(n,!1,t,e)||(V(e,n)&&delete e[n],pe(e,n,(function(){return t[n]}),(function(e){t[n]=e}))||(e[n]=r))}};for(var r in t)n(r)}return e}function we(e,t,i,n,r){e&&t&&i&&(!1!==r||k(e[t]))&&(e[t]=Ae(i,n))}function Oe(e,t,i,n){return e&&t&&q(e)&&$(i)&&re(i,(function(i){X(i)&&we(e,i,t,i,n)})),e}function be(e){return function(){var t=this;e&&z(e,(function(e,i){t[e]=i}))}}function Ne(e){return e&&n.rl&&(e=(0,n.Pw)((0,n.rl)({},e))),e}function De(e,t,i,r,a,s){var l=arguments,c=l[0]||{},u=l[o.R5],d=!1,p=1;for(u>0&&ee(c)&&(d=c,c=l[p]||{},p++),q(c)||(c={});p<u;p++){var h=l[p],_=$(h),g=q(h);for(var m in h)if(_&&m in h||g&&n.CY[o._S](h,m)){var S=h[m],f=void 0;if(d&&S&&((f=$(S))||ie(S))){var E=c[m];f?$(E)||(E=[]):ie(E)||(E={}),S=De(d,E,S)}void 0!==S&&(c[m]=S)}}return c}},9556:(e,t,i)=>{"use strict";i.d(t,{$F:()=>h,C$:()=>g,DN:()=>a,Z:()=>r,Zh:()=>l,cL:()=>S,f_:()=>_,hL:()=>u,js:()=>c,kl:()=>f,mE:()=>s,oV:()=>o,qS:()=>n,uC:()=>p,yi:()=>d,ys:()=>m});var n="",r="channels",o="core",a="createPerfMgr",s="disabled",l="extensionConfig",c="extensions",u="processTelemetry",d="priority",p="eventsSent",h="eventsDiscarded",_="eventsSendRequest",g="perfEvent",m="errorToConsole",S="warnToConsole",f="getPerfMgr"},6329:(e,t,i)=>{"use strict";i.d(t,{f:()=>l});var n=i(9798),r=i(6474),o=i(3161),a=i(9556);function s(e,t,i,n){(0,o.tO)(e,(function(e){if(e&&e[t])if(i)setTimeout((function(){return n(e)}),0);else try{n(e)}catch(e){}}))}var l=function(){function e(t){this.listeners=[];var i=!!(t||{}).perfEvtsSendAll;(0,n.Z)(e,this,(function(e){e[r.g]=function(t){e.listeners[r.MW](t)},e[r.n7]=function(t){for(var i=(0,o.UA)(e[r.dE],t);i>-1;)e.listeners[r.cb](i,1),i=(0,o.UA)(e[r.dE],t)},e[a.uC]=function(t){s(e[r.dE],a.uC,!0,(function(e){e[a.uC](t)}))},e[a.$F]=function(t,i){s(e[r.dE],a.$F,!0,(function(e){e[a.$F](t,i)}))},e[a.f_]=function(t,i){s(e[r.dE],a.f_,i,(function(e){e[a.f_](t,i)}))},e[a.C$]=function(t){t&&(!i&&t[r.PL]()||s(e[r.dE],a.C$,!1,(function(e){t[r.d]?setTimeout((function(){return e[a.C$](t)}),0):e[a.C$](t)})))}}))}return e.__ieDyn=1,e}()},2753:(e,t,i)=>{"use strict";i.d(t,{Jk:()=>p,Lm:()=>_,j5:()=>m,tQ:()=>g,zn:()=>d});var n=i(9798),r=i(6474),o=i(3161),a=i(9556),s="ctx",l="ParentContextKey",c="ChildrenContextKey",u=null,d=function(){function e(t,i,n){var a,u=this,d=!1;u.start=(0,o.m6)(),u[r.I]=t,u[r.d]=n,u[r.PL]=function(){return!1},(0,o.mf)(i)&&(d=(0,o.l_)(u,"payload",(function(){return!a&&(0,o.mf)(i)&&(a=i(),i=null),a}))),u[r.T]=function(t){return t?t===e[l]||t===e[c]?u[t]:(u[s]||{})[t]:null},u[r.wu]=function(t,i){t&&(t===e[l]?(u[t]||(u[r.PL]=function(){return!0}),u[t]=i):t===e[c]?u[t]=i:(u[s]=u[s]||{})[t]=i)},u[r.Km]=function(){var t=0,n=u[r.T](e[c]);if((0,o.kJ)(n))for(var a=0;a<n[r.R5];a++){var s=n[a];s&&(t+=s[r.Z_])}u[r.Z_]=(0,o.m6)()-u.start,u.exTime=u[r.Z_]-t,u[r.Km]=function(){},!d&&(0,o.mf)(i)&&(u.payload=i())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),p=function(){function e(t){this.ctx={},(0,n.Z)(e,this,(function(e){e.create=function(e,t,i){return new d(e,t,i)},e.fire=function(e){e&&(e[r.Km](),t&&(0,o.mf)(t[a.C$])&&t[a.C$](e))},e[r.wu]=function(t,i){t&&((e[s]=e[s]||{})[t]=i)},e[r.T]=function(t){return(e[s]||{})[t]}}))}return e.__ieDyn=1,e}(),h="CoreUtils.doPerf";function _(e,t,i,n,o){if(e){var s=e;if(s[a.kl]&&(s=s[a.kl]()),s){var u=void 0,p=s[r.T](h);try{if(u=s.create(t(),n,o)){if(p&&u[r.wu]&&(u[r.wu](d[l],p),p[r.T]&&p[r.wu])){var _=p[r.T](d[c]);_||(_=[],p[r.wu](d[c],_)),_[r.MW](u)}return s[r.wu](h,u),i(u)}}catch(e){u&&u[r.wu]&&u[r.wu]("exception",e)}finally{u&&s.fire(u),s[r.wu](h,p)}}}return i()}function g(e){u=e}function m(){return u}},877:(e,t,i)=>{"use strict";i.d(t,{Bt:()=>m,CD:()=>g,Vi:()=>E,jV:()=>f,xy:()=>S});var n=i(6474),r=i(4300),o=i(1167),a=i(3161),s=i(9556),l=i(2753),c=i(3656),u="TelemetryPluginChain",d="_hasRun",p="_getTelCtx",h=0;function _(e,t,i,l){var c=null,u=[];null!==l&&(c=l?function(e,t,i){for(;e;){if(e[n.TO]()===i)return e;e=e[n.W2]()}return f([i],t[n.TC]||{},t)}(e,i,l):e);var d={_next:function(){var e=c;if(c=e?e[n.W2]():null,!e){var t=u;t&&t[n.R5]>0&&((0,a.tO)(t,(function(e){try{e.func[n._S](e.self,e.args)}catch(e){(0,r.kP)(i[n.eZ],2,73,"Unexpected Exception during onComplete - "+(0,o.eU)(e))}})),u=[])}return e},ctx:{core:function(){return i},diagLog:function(){return(0,r.vH)(i,t)},getCfg:function(){return t},getExtCfg:p,getConfig:function(e,i,n){void 0===n&&(n=!1);var r,o=p(e,null);return o&&!(0,a.le)(o[i])?r=o[i]:t&&!(0,a.le)(t[i])&&(r=t[i]),(0,a.le)(r)?n:r},hasNext:function(){return!!c},getNext:function(){return c},setNext:function(e){c=e},iterate:function(e){for(var t;t=d._next();){var i=t[n.TO]();i&&e(i)}},onComplete:function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];e&&u[n.MW]({func:e,self:(0,a.o8)(t)?d.ctx:t,args:i})}}};function p(e,i,n){var r;if(void 0===i&&(i={}),void 0===n&&(n=0),t){var o=t[s.Zh];o&&e&&(r=o[e])}if(r){if((0,a.Kn)(i)&&0!==n){var l=(0,a.mm)(!0,i,r);t&&2===n&&(0,a.rW)(i,(function(e){if((0,a.le)(l[e])){var i=t[e];(0,a.le)(i)||(l[e]=i)}})),r=l}}else r=i;return r}return d}function g(e,t,i,r){var o=_(e,t,i,r),l=o.ctx;return l[n.uL]=function(e){var t=o._next();return t&&t[s.hL](e,l),!t},l[n.zV]=function(e,r){return void 0===e&&(e=null),(0,a.kJ)(e)&&(e=f(e,t,i,r)),g(e||l[n.W2](),t,i,r)},l}function m(e,t,i){var r=t[n.TC]||{},o=_(e,r,t,i),s=o.ctx;return s[n.uL]=function(e){var t=o._next();return t&&t.unload(s,e),!t},s[n.zV]=function(e,i){return void 0===e&&(e=null),(0,a.kJ)(e)&&(e=f(e,r,t,i)),m(e||s[n.W2](),t,i)},s}function S(e,t,i){var r=t[n.TC]||{},o=_(e,r,t,i).ctx;return o[n.uL]=function(e){return o.iterate((function(t){(0,a.mf)(t[n.Tu])&&t[n.Tu](o,e)}))},o[n.zV]=function(e,i){return void 0===e&&(e=null),(0,a.kJ)(e)&&(e=f(e,r,t,i)),S(e||o[n.W2](),t,i)},o}function f(e,t,i,_){var m=null,S=!_;if((0,a.kJ)(e)&&e[n.R5]>0){var E=null;(0,a.tO)(e,(function(e){if(S||_!==e||(S=!0),S&&e&&(0,a.mf)(e[s.hL])){var f=function(e,t,i){var _,m=null,S=(0,a.mf)(e[s.hL]),f=(0,a.mf)(e[n.Jd]),E={getPlugin:function(){return e},getNext:function(){return m},processTelemetry:function(r,o){T(o=o||function(){var n;return e&&(0,a.mf)(e[p])&&(n=e[p]()),n||(n=g(E,t,i)),n}(),(function(t){if(!e||!S)return!1;var i=(0,c.OY)(e);return!i[n.fi]&&!i[s.mE]&&(f&&e[n.Jd](m),e[s.hL](r,t),!0)}),"processTelemetry",(function(){return{item:r}}),!r.sync)||o[n.uL](r)},unload:function(t,i){T(t,(function(){var r=!1;if(e){var o=(0,c.OY)(e),a=e[s.oV]||o[s.oV];!e||a&&a!==t.core()||o[n.fi]||(o[s.oV]=null,o[n.fi]=!0,o[n.yl]=!1,e[n.fi]&&!0===e[n.fi](t,i)&&(r=!0))}return r}),"unload",(function(){}),i[n.d])||t[n.uL](i)},update:function(t,i){T(t,(function(){var r=!1;if(e){var o=(0,c.OY)(e),a=e[s.oV]||o[s.oV];!e||a&&a!==t.core()||o[n.fi]||e[n.Tu]&&!0===e[n.Tu](t,i)&&(r=!0)}return r}),"update",(function(){}),!1)||t[n.uL](i)},_id:_=e?e[n.pZ]+"-"+e[s.yi]+"-"+h++:"Unknown-0-"+h++,_setNext:function(e){m=e}};function T(t,i,a,c,p){var h=!1,g=e?e[n.pZ]:u,S=t[d];return S||(S=t[d]={}),t.setNext(m),e&&(0,l.Lm)(t[s.oV](),(function(){return g+":"+a}),(function(){S[_]=!0;try{var e=m?m._id:s.qS;e&&(S[e]=!1),h=i(t)}catch(e){var l=!m||S[m._id];l&&(h=!0),m&&l||(0,r.kP)(t[n.mc](),1,73,"Plugin ["+g+"] failed during "+a+" - "+(0,o.eU)(e)+", run flags: "+(0,o.eU)(S))}}),c,p),h}return(0,a.FL)(E)}(e,t,i);m||(m=f),E&&E._setNext(f),E=f}}))}return _&&!m?f([_],t,i):m}var E=function(e,t,i,n){var r=g(e,t,i,n);(0,a.Vb)(this,r,(0,a.FY)(r))}},395:(e,t,i)=>{"use strict";i.d(t,{CN:()=>m,F6:()=>S,_l:()=>g,az:()=>_,pZ:()=>f});var n=i(6474),r=i(1167),o=i(3161),a=i(9556),s=4294967296,l=4294967295,c=!1,u=123456789,d=987654321;function p(e){e<0&&(e>>>=0),u=123456789+e&l,d=987654321-e&l,c=!0}function h(){try{var e=2147483647&(0,o.m6)();p((Math.random()*s^e)+e)}catch(e){}}function _(e){return e>0?Math.floor(g()/l*(e+1))>>>0:0}function g(e){var t=0,i=(0,r.MX)()||(0,r.gz)();return i&&i.getRandomValues&&(t=i.getRandomValues(new Uint32Array(1))[0]&l),0===t&&(0,r.w1)()&&(c||h(),t=S()&l),0===t&&(t=Math.floor(s*Math.random()|0)),e||(t>>>=0),t}function m(e){e?p(e):h()}function S(e){var t=((d=36969*(65535&d)+(d>>16)&l)<<16)+(65535&(u=18e3*(65535&u)+(u>>16)&l))>>>0&l|0;return e||(t>>>=0),t}function f(e){void 0===e&&(e=22);for(var t=g()>>>0,i=0,r=a.qS;r[n.R5]<e;)i++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===i&&(t=(g()<<2&4294967295|3&t)>>>0,i=0);return r}},3656:(e,t,i)=>{"use strict";i.d(t,{AA:()=>d,HD:()=>p,OY:()=>c,Yn:()=>h,bP:()=>u});var n=i(6474),r=i(8530),o=i(3161),a=i(9556),s=i(1579),l=(0,r.K)("plugin");function c(e){return l.get(e,"state",{},!0)}function u(e,t){for(var i,r=[],s=null,l=e[n.W2]();l;){var u=l[n.TO]();u&&(s&&(0,o.mf)(s[n.Jd])&&(0,o.mf)(u[a.hL])&&s[n.Jd](u),((0,o.mf)(u[n.yl])?u[n.yl]():(i=c(u))[n.yl])||r[n.MW](u),s=u,l=l[n.W2]())}(0,o.tO)(r,(function(r){var o=e[a.oV]();r[n.VL](e.getCfg(),o,t,e[n.W2]()),i=c(r),r[a.oV]||i[a.oV]||(i[a.oV]=o),i[n.yl]=!0,delete i[n.fi]}))}function d(e){return e.sort((function(e,t){var i=0;if(t){var n=(0,o.mf)(t[a.hL]);(0,o.mf)(e[a.hL])?i=n?e[a.yi]-t[a.yi]:1:n&&(i=-1)}else i=e?1:-1;return i}))}function p(e,t,i,r){var a=0;return function r(){for(;a<e[n.R5];){var s=e[a++];if(s){var l=s._doUnload||s[n.F3];if((0,o.mf)(l)&&!0===l[n._S](s,t,i,r))return!0}}}()}function h(e){var t={};return{getName:function(){return t[n.I]},setName:function(i){e&&e.setName(i),t[n.I]=i},getTraceId:function(){return t[n.nY]},setTraceId:function(i){e&&e.setTraceId(i),(0,s.jN)(i)&&(t[n.nY]=i)},getSpanId:function(){return t[n._d]},setSpanId:function(i){e&&e.setSpanId(i),(0,s.Lc)(i)&&(t[n._d]=i)},getTraceFlags:function(){return t[n.T0]},setTraceFlags:function(i){e&&e.setTraceFlags(i),t[n.T0]=i}}}},6930:(e,t,i)=>{"use strict";i.d(t,{Y:()=>s});var n=i(6474),r=i(4300),o=i(1167),a=i(3161);function s(){var e=[];return{add:function(t){t&&e[n.MW](t)},run:function(t,i){(0,a.tO)(e,(function(e){try{e(t,i)}catch(e){(0,r.kP)(t[n.mc](),2,73,"Unexpected error calling unload handler - "+(0,o.eU)(e))}})),e=[]}}}},1579:(e,t,i)=>{"use strict";i.d(t,{J6:()=>T,Lc:()=>E,Pn:()=>C,SU:()=>m,aR:()=>y,jN:()=>f,j_:()=>S,lq:()=>v});var n=i(6474),r=i(821),o=i(1167),a=i(3161),s=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,l="00",c="ff",u="00000000000000000000000000000000",d="0000000000000000",p=1;function h(e,t,i){return!(!e||e[n.R5]!==t||e===i||!e.match(/^[\da-f]*$/))}function _(e,t,i){return h(e,t)?e:i}function g(e){(isNaN(e)||e<0||e>255)&&(e=1);for(var t=e.toString(16);t[n.R5]<2;)t="0"+t;return t}function m(e,t,i,o){var a;return(a={})[n.PA]=h(o,2,c)?o:l,a[n.nY]=f(e)?e:(0,r.DO)(),a.spanId=E(t)?t:(0,r.DO)()[n.Jn](0,16),a.traceFlags=i>=0&&i<=255?i:1,a}function S(e){var t;if(!e)return null;if((0,a.kJ)(e)&&(e=e[0]||""),!e||!(0,a.HD)(e)||e[n.R5]>8192)return null;var i=s.exec((0,a.nd)(e));return i&&i[1]!==c&&i[2]!==u&&i[3]!==d?((t={})[n.PA]=i[1],t[n.nY]=i[2],t[n._d]=i[3],t[n.T0]=parseInt(i[4],16),t):null}function f(e){return h(e,32,u)}function E(e){return h(e,16,d)}function T(e){return!!(e&&h(e[n.PA],2,c)&&h(e[n.nY],32,u)&&h(e[n._d],16,d)&&h(g(e[n.T0]),2))}function C(e){return!!T(e)&&(e[n.T0]&p)===p}function y(e){if(e){var t=g(e[n.T0]);h(t,2)||(t="01");var i=e[n.PA]||l;return"00"!==i&&"ff"!==i&&(i=l),"".concat(i,"-").concat(_(e.traceId,32,u),"-").concat(_(e.spanId,16,d),"-").concat(t)}return""}function v(){var e="traceparent",t=S((0,o.ed)(e));return t||(t=S((0,o.pI)(e))),t}},6474:(e,t,i)=>{"use strict";i.d(t,{$h:()=>F,F3:()=>O,Fc:()=>E,Fr:()=>H,Gc:()=>A,I:()=>r,Jd:()=>M,Jn:()=>G,Km:()=>ee,Kn:()=>Y,LS:()=>f,Lk:()=>P,MW:()=>s,P6:()=>Q,PA:()=>re,PL:()=>Z,R5:()=>p,SD:()=>g,T:()=>X,T0:()=>ne,T1:()=>W,TC:()=>c,TO:()=>T,Tu:()=>b,VL:()=>n,W2:()=>N,ZV:()=>q,Z_:()=>h,_S:()=>K,_d:()=>ie,cb:()=>v,d:()=>w,dE:()=>$,eZ:()=>d,fi:()=>R,g:()=>m,gU:()=>I,i7:()=>j,iC:()=>y,jk:()=>z,kL:()=>C,mc:()=>D,n7:()=>S,nY:()=>te,ou:()=>x,p$:()=>u,pZ:()=>a,qV:()=>k,tb:()=>o,uL:()=>_,w6:()=>U,wu:()=>J,xv:()=>V,yl:()=>l,zV:()=>L,zc:()=>B});var n="initialize",r="name",o="getNotifyMgr",a="identifier",s="push",l="isInitialized",c="config",u="instrumentationKey",d="logger",p="length",h="time",_="processNext",g="getProcessTelContext",m="addNotificationListener",S="removeNotificationListener",f="stopPollingInternalLogs",E="onComplete",T="getPlugin",C="flush",y="_extensions",v="splice",R="teardown",A="messageId",I="message",w="isAsync",O="_doTeardown",b="update",N="getNext",D="diagLog",M="setNextPlugin",L="createNew",P="cookieCfg",x="indexOf",B="substring",k="userAgent",U="split",F="setEnabled",G="substr",V="nodeType",q="apply",j="replace",H="enableDebugExceptions",z="logInternalMessage",W="toLowerCase",K="call",Q="type",Y="handler",$="listeners",Z="isChildEvt",X="getCtx",J="setCtx",ee="complete",te="traceId",ie="spanId",ne="traceFlags",re="version"},4719:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AppInsightsCore:()=>o.F,BaseCore:()=>a.A,BaseTelemetryPlugin:()=>s.i,CoreUtils:()=>c.Tr,DiagnosticLogger:()=>f.AQ,EventHelper:()=>c.zB,EventsDiscardedReason:()=>r.h,InstrumentEvent:()=>L,InstrumentFunc:()=>D,InstrumentFuncs:()=>M,InstrumentProto:()=>O,InstrumentProtos:()=>b,LoggingSeverity:()=>C.X,MinChannelPriorty:()=>n.p,NotificationManager:()=>m.f,PerfEvent:()=>S.zn,PerfManager:()=>S.Jk,ProcessTelemetryContext:()=>E.Vi,Undefined:()=>c.Px,_InternalLogMessage:()=>f.lQ,_InternalMessageId:()=>C.v,__getRegisteredEvents:()=>p.um,_legacyCookieMgr:()=>c.pP,_logInternalMessage:()=>f.L4,_throwInternal:()=>f.kP,_warnToConsole:()=>f.jV,addEventHandler:()=>p.Ib,addEventListeners:()=>p.yw,addPageHideEventListener:()=>p.TJ,addPageShowEventListener:()=>p.nD,addPageUnloadEventListener:()=>p.c9,areCookiesSupported:()=>P.p7,arrForEach:()=>u.tO,arrIndexOf:()=>u.UA,arrMap:()=>u.Mr,arrReduce:()=>u.Xz,attachEvent:()=>p.pZ,canUseCookies:()=>c.vn,createClassFromInterface:()=>u.hl,createCookieMgr:()=>P.Nz,createCustomDomEvent:()=>h.Nd,createEnumMap:()=>d.uj,createEnumStyle:()=>d.By,createProcessTelemetryContext:()=>E.CD,createTraceParent:()=>U.SU,createUniqueNamespace:()=>B.J,createUnloadHandlerContainer:()=>k.Y,createValueMap:()=>d.cc,dateNow:()=>u.m6,deepFreeze:()=>u._A,deleteCookie:()=>c.kT,detachEvent:()=>p.pD,disableCookies:()=>c.oF,dispatchEvent:()=>h.Nu,doPerf:()=>S.Lm,dumpObj:()=>h.eU,eventOff:()=>p.QY,eventOn:()=>p.XO,findMetaTag:()=>h.ed,findNamedServerTiming:()=>h.pI,findW3cTraceParent:()=>U.lq,formatTraceParent:()=>U.aR,generateW3CId:()=>c.DO,getConsole:()=>h.dr,getCookie:()=>c.ej,getCrypto:()=>h.MX,getDebugExt:()=>x.j,getDebugListener:()=>x.p,getDocument:()=>h.Me,getExceptionName:()=>u.jj,getGblPerfMgr:()=>S.j5,getGlobal:()=>_.Rd,getGlobalInst:()=>h.a8,getHistory:()=>h.s1,getIEVersion:()=>h.sA,getJSON:()=>h.xA,getLocation:()=>h.k$,getMsCrypto:()=>h.gz,getNavigator:()=>h.jW,getPerformance:()=>h.r,getSetValue:()=>u.qK,getWindow:()=>h.Jj,hasDocument:()=>h.Nv,hasHistory:()=>h.fE,hasJSON:()=>h.nS,hasNavigator:()=>h.d6,hasOwnProperty:()=>u.nr,hasWindow:()=>h.Ym,initializePlugins:()=>T.bP,isArray:()=>u.kJ,isBeaconsSupported:()=>h.MF,isBoolean:()=>u.jn,isDate:()=>u.J_,isError:()=>u.VZ,isFetchSupported:()=>h.JO,isFunction:()=>u.mf,isIE:()=>h.w1,isNotNullOrUndefined:()=>u.BX,isNotTruthy:()=>u.F,isNotUndefined:()=>u.pT,isNullOrUndefined:()=>u.le,isNumber:()=>u.hj,isObject:()=>u.Kn,isPlainObject:()=>u.PO,isReactNative:()=>h.b$,isSafari:()=>h.G6,isSampledFlag:()=>U.Pn,isString:()=>u.HD,isSymbol:()=>u.yk,isTruthy:()=>u.fQ,isTypeof:()=>u.Ym,isUndefined:()=>u.o8,isValidSpanId:()=>U.Lc,isValidTraceId:()=>U.jN,isValidTraceParent:()=>U.J6,isXhrSupported:()=>h.Z3,mergeEvtNamespace:()=>p.jU,mwcRandom32:()=>l.F6,mwcRandomSeed:()=>l.CN,newGuid:()=>c.GW,newId:()=>l.pZ,normalizeJsName:()=>u.Gf,objCreate:()=>_.pu,objDefineAccessors:()=>u.l_,objExtend:()=>u.mm,objForEachKey:()=>u.rW,objFreeze:()=>u.FL,objKeys:()=>u.FY,objSeal:()=>u.Xi,objToString:()=>u.Mu,optimizeObject:()=>u.Ax,parseTraceParent:()=>U.j_,perfNow:()=>c.Jj,proxyAssign:()=>u.cf,proxyFunctionAs:()=>u.Oi,proxyFunctions:()=>u.Vb,random32:()=>l._l,randomValue:()=>l.az,removeEventHandler:()=>p.C1,removeEventListeners:()=>p.nJ,removePageHideEventListener:()=>p.C9,removePageShowEventListener:()=>p.Yl,removePageUnloadEventListener:()=>p.JA,safeGetCookieMgr:()=>P.JP,safeGetLogger:()=>f.vH,sendCustomEvent:()=>h.Kf,setCookie:()=>c.d8,setEnableEnvMocks:()=>h.dI,setGblPerfMgr:()=>S.tQ,setValue:()=>u.sO,sortPlugins:()=>T.AA,strContains:()=>u._Q,strEndsWith:()=>u.Id,strFunction:()=>g.cb,strObject:()=>g.fK,strPrototype:()=>g.hB,strStartsWith:()=>u.xe,strTrim:()=>u.nd,strUndefined:()=>g.jA,throwError:()=>u._y,toISOString:()=>u.Y6,uaDisallowsSameSiteNone:()=>P.UY,unloadComponents:()=>T.HD,useXDomainRequest:()=>h.cp});var n=i(978),r=i(4641),o=i(8176),a=i(4770),s=i(1549),l=i(395),c=i(821),u=i(3161),d=i(1785),p=i(1318),h=i(1167),_=i(8785),g=i(2589),m=i(6329),S=i(2753),f=i(4300),E=i(877),T=i(3656),C=i(8712),y=i(6474),v="_aiHooks",R=["req","rsp","hkErr","fnErr"];function A(e,t){if(e)for(var i=0;i<e[y.R5]&&!t(e[i],i);i++);}function I(e,t,i,n,r){r>=0&&r<=2&&A(e,(function(e,o){var a=e.cbks,s=a[R[r]];if(s){t.ctx=function(){return n[o]=n[o]||{}};try{s[y.ZV](t.inst,i)}catch(e){var l=t.err;try{var c=a[R[2]];c&&(t.err=e,c[y.ZV](t.inst,i))}catch(e){}finally{t.err=l}}}}))}function w(e,t,i,n){var r=null;return e&&((0,u.nr)(e,t)?r=e:i&&(r=w((0,u.Hb)(e),t,n,!1))),r}function O(e,t,i){return e?D(e[g.hB],t,i,!1):null}function b(e,t,i){return e?M(e[g.hB],t,i,!1):null}function N(e,t,i,n){var r=i&&i[v];if(!r){var o=function(e){return function(){var t,i=arguments,n=e.h,r=((t={})[y.I]=e.n,t.inst=this,t.ctx=null,t.set=function(e,t){(i=s([],i))[e]=t,a=s([r],i)},t),o=[],a=s([r],i);function s(e,t){return A(t,(function(t){e[y.MW](t)})),e}r.evt=(0,h.a8)("event"),I(n,r,a,o,0);var l=e.f;if(l)try{r.rslt=l[y.ZV](this,i)}catch(e){throw r.err=e,I(n,r,a,o,3),e}return I(n,r,a,o,1),r.rslt}}(r={i:0,n:t,f:i,h:[]});o[v]=r,e[t]=o}var a={id:r.i,cbks:n,rm:function(){var e=this.id;A(r.h,(function(t,i){if(t.id===e)return r.h[y.cb](i,1),1}))}};return r.i++,r.h[y.MW](a),a}function D(e,t,i,n,r){if(void 0===n&&(n=!0),e&&t&&i){var o=w(e,t,n,r);if(o){var a=o[t];if(typeof a===g.cb)return N(o,t,a,i)}}return null}function M(e,t,i,n,r){void 0===n&&(n=!0);var o=null;return A(t,(function(t){var a=D(e,t,i,n,r);a&&(o||(o=[]),o[y.MW](a))})),o}function L(e,t,i,n,r){if(e&&t&&i){var o=w(e,t,n,r)||e;if(o)return N(o,t,o[t],i)}return null}var P=i(8589),x=i(7485),B=i(8530),k=i(6930),U=i(1579)},9798:(e,t,i)=>{"use strict";var n;i.d(t,{Z:()=>U});var r,o="undefined",a="constructor",s="prototype",l="function",c="_dynInstFuncs",u="_isDynProxy",d="_dynClass",p="_dynCls$",h="_dynInstChk",_=h,g="_dfOpts",m="_unknown_",S="__proto__",f="_dyn"+S,E="__dynProto$Gbl",T="_dynInstProto",C="useBaseInst",y="setInstFuncs",v=Object,R=v.getPrototypeOf,A=v.getOwnPropertyNames,I=(typeof globalThis!==o&&(r=globalThis),r||typeof self===o||(r=self),r||typeof window===o||(r=window),r||typeof global===o||(r=global),r||{}),w=I[E]||(I[E]={o:(n={},n[y]=!0,n[C]=!0,n),n:1e3});function O(e,t){return e&&v[s].hasOwnProperty.call(e,t)}function b(e){return e&&(e===v[s]||e===Array[s])}function N(e){return b(e)||e===Function[s]}function D(e){var t;if(e){if(R)return R(e);var i=e[S]||e[s]||(e[a]?e[a][s]:null);t=e[f]||i,O(e,f)||(delete e[T],t=e[f]=e[T]||e[f],e[T]=i)}return t}function M(e,t){var i=[];if(A)i=A(e);else for(var n in e)"string"==typeof n&&O(e,n)&&i.push(n);if(i&&i.length>0)for(var r=0;r<i.length;r++)t(i[r])}function L(e,t,i){return t!==a&&typeof e[t]===l&&(i||O(e,t))}function P(e){throw new TypeError("DynamicProto: "+e)}function x(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t)return!0;return!1}function B(e,t,i,n,r){if(!b(e)){var o=i[c]=i[c]||{},a=o[t]=o[t]||{};!1!==o[_]&&(o[_]=!!r),M(i,(function(t){L(i,t,!1)&&i[t]!==n[t]&&(a[t]=i[t],delete i[t],(!O(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var i=function(){var n=function(e,t,i,n){var r=null;if(e&&O(i,d)){var o=e[c]||{};if((r=(o[i[d]]||{})[t])||P("Missing ["+t+"] "+l),!r[h]&&!1!==o[_]){for(var a=!O(e,t),s=D(e),u=[];a&&s&&!N(s)&&!x(u,s);){var p=s[t];if(p){a=p===n;break}u.push(s),s=D(s)}try{a&&(e[t]=r),r[h]=1}catch(e){o[_]=!1}}}return r}(this,t,e,i)||function(e,t,i){var n=t[e];return n===i&&(n=D(t)[e]),typeof n!==l&&P("["+e+"] is not a "+l),n}(t,e,i);return n.apply(this,arguments)};return i[u]=1,i}(e,t)))}))}}function k(e,t){return O(e,s)?e.name||t||m:((e||{})[a]||{}).name||t||m}function U(e,t,i,n){O(e,s)||P("theClass is an invalid class definition.");var r=e[s];(function(e,t){if(R){for(var i=[],n=D(t);n&&!N(n)&&!x(i,n);){if(n===e)return!0;i.push(n),n=D(n)}return!1}return!0})(r,t)||P("["+k(e)+"] not in hierarchy of ["+k(t)+"]");var o=null;O(r,d)?o=r[d]:(o=p+k(e,"_")+"$"+w.n,w.n++,r[d]=o);var a=U[g],l=!!a[C];l&&n&&void 0!==n[C]&&(l=!!n[C]);var h=function(e){var t={};return M(e,(function(i){!t[i]&&L(e,i,!1)&&(t[i]=e[i])})),t}(t),m=function(e,t,i,n){function r(e,t,i){var r=t[i];if(r[u]&&n){var o=e[c]||{};!1!==o[_]&&(r=(o[t[d]]||{})[i]||r)}return function(){return r.apply(e,arguments)}}var o={};M(i,(function(e){o[e]=r(t,i,e)}));for(var a=D(e),s=[];a&&!N(a)&&!x(s,a);)M(a,(function(e){!o[e]&&L(a,e,!R)&&(o[e]=r(t,a,e))})),s.push(a),a=D(a);return o}(r,t,h,l);i(t,m);var S=!!R&&!!a[y];S&&n&&(S=!!n[y]),B(r,o,t,h,!1!==S)}U[g]=w.o},2589:(e,t,i)=>{"use strict";i.d(t,{CY:()=>_,Pw:()=>c,RJ:()=>h,V4:()=>u,ak:()=>l,bO:()=>s,cb:()=>n,fK:()=>r,hB:()=>a,jA:()=>o,rl:()=>d,yu:()=>p});var n="function",r="object",o="undefined",a="prototype",s="hasOwnProperty",l="default",c=Object,u=c[a],d=c.assign,p=c.create,h=c.defineProperty,_=u[s]},8785:(e,t,i)=>{"use strict";i.d(t,{Rd:()=>o,ZU:()=>a,pu:()=>s});var n=i(2589),r=null;function o(e){void 0===e&&(e=!0);var t=!1===e?null:r;return t||(typeof globalThis!==n.jA&&(t=globalThis),t||typeof self===n.jA||(t=self),t||typeof window===n.jA||(t=window),t||typeof global===n.jA||(t=global),r=t),t}function a(e){throw new TypeError(e)}function s(e){var t=n.yu;if(t)return t(e);if(null==e)return{};var i=typeof e;function r(){}return i!==n.fK&&i!==n.cb&&a("Object prototype may only be an Object:"+e),r[n.hB]=e,new r}},3298:(e,t,i)=>{"use strict";i.d(t,{$h:()=>R,Cj:()=>C,DJ:()=>E,EU:()=>f,KG:()=>I,Lv:()=>g,V0:()=>S,an:()=>T,hw:()=>A,i9:()=>y,l9:()=>m,m:()=>w,ne:()=>_,uc:()=>p,zg:()=>v});var n=i(2589),r=i(8785),o=((0,r.Rd)()||{}).Symbol,a=((0,r.Rd)()||{}).Reflect,s=!!a,l="decorate",c="metadata",u="getOwnPropertySymbols",d="iterator",p=n.rl||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var o in t=arguments[i])n.V4[n.bO].call(t,o)&&(e[o]=t[o]);return e},h=function(e,t){return h=n.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t[n.bO](i)&&(e[i]=t[i])},h(e,t)};function _(e,t){function i(){this.constructor=e}typeof t!==n.cb&&null!==t&&(0,r.ZU)("Class extends value "+String(t)+" is not a constructor or null"),h(e,t),e[n.hB]=null===t?(0,r.pu)(t):(i[n.hB]=t[n.hB],new i)}function g(e,t){var i={};for(var r in e)n.CY.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&typeof n.Pw[u]===n.cb)for(var o=0,a=n.Pw[u](e);o<a.length;o++)t.indexOf(a[o])<0&&n.V4.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i}function m(e,t,i,r){var o,c=arguments.length,u=c<3?t:null===r?r=n.Pw.getOwnPropertyDescriptor(t,i):r;if(s&&typeof a[l]===n.cb)u=a[l](e,t,i,r);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(u=(c<3?o(u):c>3?o(t,i,u):o(t,i))||u);return c>3&&u&&(0,n.RJ)(t,i,u),u}function S(e,t){return function(i,n){t(i,n,e)}}function f(e,t){if(s&&a[c]===n.cb)return a[c](e,t)}function E(e,t){for(var i in e)i===n.ak||n.CY.call(t,i)||T(t,e,i)}function T(e,t,i,r){void 0===r&&(r=i),n.yu?(0,n.RJ)(e,r,{enumerable:!0,get:function(){return t[i]}}):e[r]=t[i]}function C(e){var t=typeof o===n.cb&&o[d],i=t&&e[t],a=0;return i?i.call(e):e&&"number"==typeof e.length?{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}}:void(0,r.ZU)(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var i=typeof o===n.cb&&e[o[d]];if(!i)return e;var r,a,s=i.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return l}function v(){for(var e=arguments,t=0,i=0,n=e.length;i<n;i++)t+=e[i].length;var r=Array(t),o=0;for(i=0;i<n;i++)for(var a=e[i],s=0,l=a.length;s<l;s++,o++)r[o]=a[s];return r}function R(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e}function A(e,t){return n.RJ?(0,n.RJ)(e,"raw",{value:t}):e.raw=t,e}function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)i!==n.ak&&Object.prototype.hasOwnProperty.call(e,i)&&T(t,e,i);return n.yu?(0,n.RJ)(t,n.ak,{enumerable:!0,value:e}):t[n.ak]=e,t}function w(e){return e&&e.__esModule?e:{strDefault:e}}},623:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ObjAssign:()=>n.rl,ObjClass:()=>n.Pw,ObjCreate:()=>n.yu,ObjDefineProperty:()=>n.RJ,ObjHasOwnProperty:()=>n.CY,ObjProto:()=>n.V4,__assignFn:()=>o.uc,__createBindingFn:()=>o.an,__decorateFn:()=>o.l9,__exportStarFn:()=>o.DJ,__exposeGlobalTsLib:()=>a,__extendsFn:()=>o.ne,__importDefaultFn:()=>o.m,__importStarFn:()=>o.KG,__makeTemplateObjectFn:()=>o.hw,__metadataFn:()=>o.EU,__paramFn:()=>o.V0,__readFn:()=>o.i9,__restFn:()=>o.Lv,__spreadArrayFn:()=>o.$h,__spreadArraysFn:()=>o.zg,__valuesFn:()=>o.Cj,getGlobal:()=>r.Rd,objCreateFn:()=>r.pu,strDefault:()=>n.ak,strShimFunction:()=>n.cb,strShimHasOwnProperty:()=>n.bO,strShimObject:()=>n.fK,strShimPrototype:()=>n.hB,strShimUndefined:()=>n.jA,throwTypeError:()=>r.ZU});var n=i(2589),r=i(8785),o=i(3298);function a(){var e,t,i,a,s=(0,r.Rd)()||{};e=s,t=o.uc,i=o.ne,a=o.an,e.__assign||(e.__assign=n.rl||t),e.__extends||(e.__extends=i),e.__createBinding||(e.__createBinding=a),__assign||(__assign=s.__assign),__extends||(__extends=s.__extends),__createBinding||(__createBinding=s.__createBinding)}},2314:(e,t,i)=>{"use strict";var n;i.r(t),i.d(t,{default:()=>U});var r,o="undefined",a="constructor",s="prototype",l="function",c="_dynInstFuncs",u="_isDynProxy",d="_dynClass",p="_dynCls$",h="_dynInstChk",_=h,g="_dfOpts",m="_unknown_",S="__proto__",f="_dyn"+S,E="__dynProto$Gbl",T="_dynInstProto",C="useBaseInst",y="setInstFuncs",v=Object,R=v.getPrototypeOf,A=v.getOwnPropertyNames,I=(typeof globalThis!==o&&(r=globalThis),r||typeof self===o||(r=self),r||typeof window===o||(r=window),r||typeof global===o||(r=global),r||{}),w=I[E]||(I[E]={o:(n={},n[y]=!0,n[C]=!0,n),n:1e3});function O(e,t){return e&&v[s].hasOwnProperty.call(e,t)}function b(e){return e&&(e===v[s]||e===Array[s])}function N(e){return b(e)||e===Function[s]}function D(e){var t;if(e){if(R)return R(e);var i=e[S]||e[s]||(e[a]?e[a][s]:null);t=e[f]||i,O(e,f)||(delete e[T],t=e[f]=e[T]||e[f],e[T]=i)}return t}function M(e,t){var i=[];if(A)i=A(e);else for(var n in e)"string"==typeof n&&O(e,n)&&i.push(n);if(i&&i.length>0)for(var r=0;r<i.length;r++)t(i[r])}function L(e,t,i){return t!==a&&typeof e[t]===l&&(i||O(e,t))}function P(e){throw new TypeError("DynamicProto: "+e)}function x(e,t){for(var i=e.length-1;i>=0;i--)if(e[i]===t)return!0;return!1}function B(e,t,i,n,r){if(!b(e)){var o=i[c]=i[c]||{},a=o[t]=o[t]||{};!1!==o[_]&&(o[_]=!!r),M(i,(function(t){L(i,t,!1)&&i[t]!==n[t]&&(a[t]=i[t],delete i[t],(!O(e,t)||e[t]&&!e[t][u])&&(e[t]=function(e,t){var i=function(){var n=function(e,t,i,n){var r=null;if(e&&O(i,d)){var o=e[c]||{};if((r=(o[i[d]]||{})[t])||P("Missing ["+t+"] "+l),!r[h]&&!1!==o[_]){for(var a=!O(e,t),s=D(e),u=[];a&&s&&!N(s)&&!x(u,s);){var p=s[t];if(p){a=p===n;break}u.push(s),s=D(s)}try{a&&(e[t]=r),r[h]=1}catch(e){o[_]=!1}}}return r}(this,t,e,i)||function(e,t,i){var n=t[e];return n===i&&(n=D(t)[e]),typeof n!==l&&P("["+e+"] is not a "+l),n}(t,e,i);return n.apply(this,arguments)};return i[u]=1,i}(e,t)))}))}}function k(e,t){return O(e,s)?e.name||t||m:((e||{})[a]||{}).name||t||m}function U(e,t,i,n){O(e,s)||P("theClass is an invalid class definition.");var r=e[s];(function(e,t){if(R){for(var i=[],n=D(t);n&&!N(n)&&!x(i,n);){if(n===e)return!0;i.push(n),n=D(n)}return!1}return!0})(r,t)||P("["+k(e)+"] not in hierarchy of ["+k(t)+"]");var o=null;O(r,d)?o=r[d]:(o=p+k(e,"_")+"$"+w.n,w.n++,r[d]=o);var a=U[g],l=!!a[C];l&&n&&void 0!==n[C]&&(l=!!n[C]);var h=function(e){var t={};return M(e,(function(i){!t[i]&&L(e,i,!1)&&(t[i]=e[i])})),t}(t),m=function(e,t,i,n){function r(e,t,i){var r=t[i];if(r[u]&&n){var o=e[c]||{};!1!==o[_]&&(r=(o[t[d]]||{})[i]||r)}return function(){return r.apply(e,arguments)}}var o={};M(i,(function(e){o[e]=r(t,i,e)}));for(var a=D(e),s=[];a&&!N(a)&&!x(s,a);)M(a,(function(e){!o[e]&&L(a,e,!R)&&(o[e]=r(t,a,e))})),s.push(a),a=D(a);return o}(r,t,h,l);i(t,m);var S=!!R&&!!a[y];S&&n&&(S=!!n[y]),B(r,o,t,h,!1!==S)}U[g]=w.o},7013:(e,t,i)=>{"use strict";const n=i(2037),r=i(6224),o=i(9248),{env:a}=process;let s;function l(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function c(e,t){if(0===s)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!t&&void 0===s)return 0;const i=s||0;if("dumb"===a.TERM)return i;if("win32"===process.platform){const e=n.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in a))||"codeship"===a.CI_NAME?1:i;if("TEAMCITY_VERSION"in a)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0;if("truecolor"===a.COLORTERM)return 3;if("TERM_PROGRAM"in a){const e=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:i}o("no-color")||o("no-colors")||o("color=false")||o("color=never")?s=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(s=1),"FORCE_COLOR"in a&&(s="true"===a.FORCE_COLOR?1:"false"===a.FORCE_COLOR?0:0===a.FORCE_COLOR.length?1:Math.min(parseInt(a.FORCE_COLOR,10),3)),e.exports={supportsColor:function(e){return l(c(e,e&&e.isTTY))},stdout:l(c(!0,r.isatty(1))),stderr:l(c(!0,r.isatty(2)))}},9248:e=>{"use strict";e.exports=(e,t=process.argv)=>{const i=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(i+e),r=t.indexOf("--");return-1!==n&&(-1===r||n<r)}},4294:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureResourceKind=t.getMigrationErrors=t.getBlobContainerId=t.getResourceName=t.getFullResourceGroupFromId=t.getResourceGroupFromId=t.getMigrationTargetName=t.getMigrationTargetId=t.sortResourceArrayByName=t.validateIrDatabaseMigrationSettings=t.validateIrSqlDatabaseMigrationSettings=t.deleteMigration=t.retryMigration=t.stopMigration=t.startMigrationCutover=t.getMigrationAsyncOperationDetails=t.getMigrationTargetInstance=t.getServiceMigrations=t.getMigrationDetails=t.startDatabaseMigration=t.getSqlMigrationServiceMonitoringData=t.getStorageAccountAccessKeys=t.regenerateSqlMigrationServiceAuthKey=t.getSqlMigrationServiceAuthKeys=t.createSqlMigrationService=t.getSqlMigrationServices=t.getSqlMigrationServicesByResourceGroup=t.getSqlMigrationServiceById=t.getSqlMigrationService=t.getBlobs=t.getBlobContainers=t.getFileShares=t.getAvailableStorageAccounts=t.getComputeVM=t.getAzureResourceGivenId=t.getVMInstanceView=t.getAvailableSqlVMs=t.getAvailableSqlDatabases=t.getAvailableSqlDatabaseServers=t.getSessionIdHeader=t.getDefaultHeader=t.getAvailableSqlServers=t.getSqlManagedInstanceDatabases=t.getAvailableManagedInstanceProducts=t.isSqlManagedInstance=t.createResourceGroup=t.getResourceGroups=t.getLocations=t.getSubscriptions=void 0;const n=i(9496),r=i(9072),o=i(2074),a=i(3186),s=i(7310),l=i(1285),c=i(2037),u="2021-11-01-preview",d="2022-03-30-preview",p="2022-08-01";async function h(){const e=await(n.extensions.getExtension("Microsoft.azurecore")?.activate());if(!e)throw new Error("azure core API undefined for sql-migration");return e}let _;function g(){if(!_){const e=r.version??"unknown",t=r.env.quality??"unknown",i=n.extensions.getExtension(a.SqlMigrationExtensionId),o=i?.packageJSON.version??"unknown";_=`AzureDataStudio/${e} (${t}) ${a.SqlMigrationExtensionId}/${o}`}return _}function m(){return{"User-Agent":g()}}function S(e){return{"User-Agent":g(),SqlMigrationSessionId:e}}async function f(e,t,i,n){const r=await h(),o=encodeURI(`${i}?api-version=${n}`),a=r.getProviderMetadataForAccount(e).settings.armResource?.endpoint,s=await r.makeAzureRestRequest(e,t,o,0,void 0,!0,a,m());if(s.errors.length>0){const e=s.errors.map((e=>e.message)).join(", ");throw new Error(e)}return s.response.data}async function E(e,t,i){const n=await h(),r=encodeURI(`${i}?api-version=${d}`),o=n.getProviderMetadataForAccount(e).settings.armResource?.endpoint,a=await n.makeAzureRestRequest(e,t,r,0,void 0,!0,o,m());if(a.errors.length>0){const e=a.errors.map((e=>e.message)).join(", ");throw new Error(e)}return a.response.data.properties.resourceGroup=v(a.response.data.id),a.response.data}async function T(e,t,i){const n=await h(),r=await n.getStorageAccountAccessKey(e,t,i,!0);if(r.errors.length>0){const e=r.errors.map((e=>e.message)).join(", ");throw new Error(e)}return{keyName1:r?.keyName1,keyName2:r?.keyName2}}function C(e){e&&e.sort(((e,t)=>e?.name?.toLowerCase()<t?.name?.toLowerCase()?-1:e?.name?.toLowerCase()>t?.name?.toLowerCase()?1:0))}function y(e){const t=e.id.split("/providers/Microsoft.DataMigration/",1);return t?.length>0?t[0]:""}function v(e){return e.replace(RegExp("^(.*?)/resourceGroups/"),"").replace(RegExp("/providers/.*"),"").toLowerCase()}function R(e){const t=e.split("/");return t[t.length-1]}var A;t.getSubscriptions=async function(e){const t=await h(),i=await t.getSubscriptions(e,!0);return C(i.subscriptions),i.subscriptions},t.getLocations=async function(e,t){const i=await h(),n=await i.getLocations(e,t,!0),r=`/subscriptions/${t.id}/providers/Microsoft.DataMigration?api-version=2021-04-01`,o=i.getProviderMetadataForAccount(e).settings.armResource?.endpoint,a=(await i.makeAzureRestRequest(e,t,r,0,void 0,!0,o,m()))?.response?.data,s=a?.resourceTypes?.find((e=>"SqlMigrationServices"===e.resourceType)),l=s?.locations??[];if(n.errors?.length>0){const e=n.errors.map((e=>e.message)).join(", ");throw new Error(e)}const c=n?.locations?.filter((e=>l.includes(e.displayName)));return C(c),c},t.getResourceGroups=async function(e,t){const i=await h(),n=await i.getResourceGroups(e,t,!0);return C(n.resourceGroups),n.resourceGroups},t.createResourceGroup=async function(e,t,i,n){const r=await h();return(await r.createResourceGroup(e,t,i,n,!1)).resourceGroup},t.isSqlManagedInstance=function(e){return void 0!==e},t.getAvailableManagedInstanceProducts=async function(e,t){const i=await h(),n=await i.getSqlManagedInstances(e,[t],!1);return C(n.resources),n.resources},t.getSqlManagedInstanceDatabases=async function(e,t,i){const n=await h(),r=await n.getManagedDatabases(e,t,i,!1);return C(r.databases),r.databases},t.getAvailableSqlServers=async function(e,t){const i=await h();return(await i.getSqlServers(e,[t],!1)).resources},t.getDefaultHeader=m,t.getSessionIdHeader=S,t.getAvailableSqlDatabaseServers=async function(e,t){const i=await h(),n=encodeURI(`/subscriptions/${t.id}/providers/Microsoft.Sql/servers?api-version=${u}`),r=i.getProviderMetadataForAccount(e).settings.armResource?.endpoint,o=await i.makeAzureRestRequest(e,t,n,0,void 0,!0,r,m());if(o.errors.length>0){const e=o.errors.map((e=>e.message)).join(", ");throw new Error(e)}return C(o.response.data.value),o.response.data.value},t.getAvailableSqlDatabases=async function(e,t,i,n){const r=await h(),o=encodeURI(`/subscriptions/${t.id}/resourceGroups/${i}/providers/Microsoft.Sql/servers/${n}/databases?api-version=${u}`),a=r.getProviderMetadataForAccount(e).settings.armResource?.endpoint,s=await r.makeAzureRestRequest(e,t,o,0,void 0,!0,a,m());if(s.errors.length>0){const e=s.errors.map((e=>e.message)).join(", ");throw new Error(e)}return C(s.response.data.value),s.response.data.value},t.getAvailableSqlVMs=async function(e,t){const i=await h(),n=encodeURI(`/subscriptions/${t.id}/providers/Microsoft.SqlVirtualMachine/sqlVirtualMachines?api-version=2021-11-01-preview`),r=i.getProviderMetadataForAccount(e).settings.armResource?.endpoint,o=await i.makeAzureRestRequest(e,t,n,0,void 0,!0,r,m());if(o.errors.length>0){const e=o.errors.map((e=>e.message)).join(", ");throw new Error(e)}return C(o.response.data.value),o.response.data.value},t.getVMInstanceView=async function(e,t,i){const n=await h(),r=encodeURI(`/subscriptions/${i.id}/resourceGroups/${v(e.id)}/providers/Microsoft.Compute/virtualMachines/${e.name}/instanceView?api-version=${p}`),o=n.getProviderMetadataForAccount(t).settings.armResource?.endpoint,a=await n.makeAzureRestRequest(t,i,r,0,void 0,!0,o,m());if(a.errors.length>0){const e=a.errors.map((e=>e.message)).join(", ");throw new Error(e)}return a.response.data},t.getAzureResourceGivenId=f,t.getComputeVM=async function(e,t,i){return f(t,i,encodeURI(`/subscriptions/${i.id}/resourceGroups/${v(e.id)}/providers/Microsoft.Compute/virtualMachines/${e.name}`),p)},t.getAvailableStorageAccounts=async function(e,t){const i=await h(),n=await i.getStorageAccounts(e,[t],!1);return C(n.resources),n.resources},t.getFileShares=async function(e,t,i){const n=await h();let r=(await n.getFileShares(e,t,i,!0)).fileShares;return C(r),r},t.getBlobContainers=async function(e,t,i){const n=await h();let r=(await n.getBlobContainers(e,t,i,!0)).blobContainers;return C(r),r},t.getBlobs=async function(e,t,i,n){const r=await h();let o=(await r.getBlobs(e,t,i,n,!0)).blobs;return C(o),o},t.getSqlMigrationService=async function(e,t,i,n,r){const o=`/subscriptions/${t.id}/resourceGroups/${i}/providers/Microsoft.DataMigration/sqlMigrationServices/${r}`;return await E(e,t,o)},t.getSqlMigrationServiceById=E,t.getSqlMigrationServicesByResourceGroup=async function(e,t,i){const n=await h(),r=encodeURI(`/subscriptions/${t.id}/resourceGroups/${i}/providers/Microsoft.DataMigration/sqlMigrationServices?api-version=${d}`),o=n.getProviderMetadataForAccount(e).settings.armResource?.endpoint,a=await n.makeAzureRestRequest(e,t,r,0,void 0,!0,o,m());if(a.errors.length>0){const e=a.errors.map((e=>e.message)).join(", ");throw new Error(e)}return C(a.response.data.value),a.response.data.value.forEach((e=>{e.properties.resourceGroup=v(e.id)})),a.response.data.value},t.getSqlMigrationServices=async function(e,t){const i=await h(),n=encodeURI(`/subscriptions/${t.id}/providers/Microsoft.DataMigration/sqlMigrationServices?api-version=${d}`),r=i.getProviderMetadataForAccount(e).settings.armResource?.endpoint,o=await i.makeAzureRestRequest(e,t,n,0,void 0,!0,r,m());if(o.errors.length>0){const e=o.errors.map((e=>e.message)).join(", ");throw new Error(e)}return C(o.response.data.value),o.response.data.value.forEach((e=>{e.properties.resourceGroup=v(e.id)})),o.response.data.value},t.createSqlMigrationService=async function(e,t,i,n,r,a){const l=await h(),c=encodeURI(`/subscriptions/${t.id}/resourceGroups/${i}/providers/Microsoft.DataMigration/sqlMigrationServices/${r}?api-version=${d}`),u=l.getProviderMetadataForAccount(e).settings.armResource?.endpoint,p={location:n},_=await l.makeAzureRestRequest(e,t,c,1,p,!0,u,S(a));if(_.errors.length>0){const e=_.errors.map((e=>e.message)).join(", ");throw new Error(e)}const g=_.response.headers["azure-asyncoperation"],m=g.replace(new s.URL(g).origin+"/","");let f=0;for(f=0;f<24;f++){const i=await l.makeAzureRestRequest(e,t,m,0,void 0,!0,u),n=i.response.data.status;if(n===o.ProvisioningState.Succeeded)break;if(n===o.ProvisioningState.Failed)throw new Error(i.errors.toString());await new Promise((e=>setTimeout(e,5e3)))}if(24===f)throw new Error(o.DMS_PROVISIONING_FAILED);return _.response.data},t.getSqlMigrationServiceAuthKeys=async function(e,t,i,n,r){const o=await h(),a=encodeURI(`/subscriptions/${t.id}/resourceGroups/${i}/providers/Microsoft.DataMigration/sqlMigrationServices/${r}/ListAuthKeys?api-version=${d}`),s=o.getProviderMetadataForAccount(e).settings.armResource?.endpoint,l=await o.makeAzureRestRequest(e,t,a,2,void 0,!0,s,m());if(l.errors.length>0){const e=l.errors.map((e=>e.message)).join(", ");throw new Error(e)}return{authKey1:l?.response?.data?.authKey1??"",authKey2:l?.response?.data?.authKey2??""}},t.regenerateSqlMigrationServiceAuthKey=async function(e,t,i,n,r,o){const a=await h(),s=encodeURI(`/subscriptions/${t.id}/resourceGroups/${i}/providers/Microsoft.DataMigration/sqlMigrationServices/${r}/regenerateAuthKeys?api-version=${d}`),l={location:n,keyName:o},c=a.getProviderMetadataForAccount(e).settings.armResource?.endpoint,u=await a.makeAzureRestRequest(e,t,s,2,l,!0,c,m());if(u.errors.length>0){const e=u.errors.map((e=>e.message)).join(", ");throw new Error(e)}return{authKey1:u?.response?.data?.authKey1??"",authKey2:u?.response?.data?.authKey2??""}},t.getStorageAccountAccessKeys=T,t.getSqlMigrationServiceMonitoringData=async function(e,t,i,n,r){const o=await h(),a=encodeURI(`/subscriptions/${t.id}/resourceGroups/${i}/providers/Microsoft.DataMigration/sqlMigrationServices/${r}/listMonitoringData?api-version=${d}`),s=o.getProviderMetadataForAccount(e).settings.armResource?.endpoint,l=await o.makeAzureRestRequest(e,t,a,2,void 0,!0,s,m());if(l.errors.length>0){const e=l.errors.map((e=>e.message)).join(", ");throw new Error(e)}return l.response.data},t.startDatabaseMigration=async function(e,t,i,n,r,o,a){const s=await h(),l=encodeURI(`${n.id}/providers/Microsoft.DataMigration/databaseMigrations/${r}?api-version=${d}`),c=s.getProviderMetadataForAccount(e).settings.armResource?.endpoint,u=await s.makeAzureRestRequest(e,t,l,1,o,!0,c,S(a));if(u.errors.length>0){const e=u.errors.map((e=>e.message)).join(", ");throw new Error(e)}return{asyncUrl:u.response.headers["azure-asyncoperation"],status:u.response.status,databaseMigration:u.response.data}},t.getMigrationDetails=async function(e,t,i,n){const r=void 0===n?encodeURI(`${i}?$expand=MigrationStatusDetails&api-version=${d}`):encodeURI(`${i}?migrationOperationId=${n}&$expand=MigrationStatusDetails&api-version=${d}`),o=await h(),a=o.getProviderMetadataForAccount(e).settings.armResource?.endpoint,s=await o.makeAzureRestRequest(e,t,r,0,void 0,!0,a,m());if(s.errors.length>0){const e=s.errors.map((e=>e.message)).join(", ");throw new Error(e)}return s.response.data},t.getServiceMigrations=async function(e,t,i){const n=encodeURI(`${i}/listMigrations?&api-version=${d}`),r=await h(),o=r.getProviderMetadataForAccount(e).settings.armResource?.endpoint,a=await r.makeAzureRestRequest(e,t,n,0,void 0,!0,o,m());if(a.errors.length>0){const e=a.errors.map((e=>e.message)).join(", ");throw new Error(e)}return a.response.data.value},t.getMigrationTargetInstance=async function(e,t,i){const n=y(i),r=encodeURI(`${n}?api-version=2021-11-01-preview`),o=await h(),a=o.getProviderMetadataForAccount(e).settings.armResource?.endpoint,s=await o.makeAzureRestRequest(e,t,r,0,void 0,!0,a,m());if(s.errors.length>0){const e=s.errors.map((e=>e.message)).join(", ");throw new Error(e)}return s.response.data},t.getMigrationAsyncOperationDetails=async function(e,t,i){const n=await h(),r=i.replace(new s.URL(i).origin+"/",""),o=n.getProviderMetadataForAccount(e).settings.armResource?.endpoint,a=await n.makeAzureRestRequest(e,t,r,0,void 0,!0,o,m());if(a.errors.length>0){const e=a.errors.map((e=>e.message)).join(", ");throw new Error(e)}return a.response.data},t.startMigrationCutover=async function(e,t,i){const n=await h(),r=encodeURI(`${i.id}/cutover?api-version=${d}`),o={migrationOperationId:i.properties.migrationOperationId},a=n.getProviderMetadataForAccount(e).settings.armResource?.endpoint,s=await n.makeAzureRestRequest(e,t,r,2,o,!0,a,m());if(s.errors.length>0){const e=s.errors.map((e=>e.message)).join(", ");throw new Error(e)}return s.response.data.value},t.stopMigration=async function(e,t,i){const n=await h(),r=encodeURI(`${i.id}/cancel?api-version=${d}`),o={migrationOperationId:i.properties.migrationOperationId},a=n.getProviderMetadataForAccount(e).settings.armResource?.endpoint,s=await n.makeAzureRestRequest(e,t,r,2,o,!0,a,m());if(s.errors.length>0){const e=s.errors.map((e=>e.message)).join(", ");throw new Error(e)}},t.retryMigration=async function(e,t,i){const n=await h(),r=encodeURI(`${i.id}/retry?api-version=${d}`),o={migrationOperationId:i.properties.migrationOperationId},a=n.getProviderMetadataForAccount(e).settings.armResource?.endpoint,s=await n.makeAzureRestRequest(e,t,r,2,o,!0,a,m());if(s.errors.length>0){const e=s.errors.map((e=>e.message)).join(", ");throw new Error(e)}},t.deleteMigration=async function(e,t,i){const n=await h(),r=encodeURI(`${i}?api-version=${d}`),o=n.getProviderMetadataForAccount(e).settings.armResource?.endpoint,a=await n.makeAzureRestRequest(e,t,r,3,void 0,!0,o,m());if(a.errors.length>0){const e=a.errors.map((e=>e.message)).join(", ");throw new Error(e)}},t.validateIrSqlDatabaseMigrationSettings=async function(e,t,i,n,r,o,a=!0,s=!0,c=!0){const u=await h(),p=e._azureAccount,_=e._sqlMigrationServiceSubscription,g=e._sqlMigrationService?.id,m=u.getProviderMetadataForAccount(p).settings.armResource?.endpoint,S=encodeURI(`${g}/validateIr?api-version=${d}`),f=e._targetServerInstance,E={sourceDatabaseName:r,targetDatabaseName:o,kind:A.SQLDB,validateIntegrationRuntimeOnline:a,sourceSqlConnection:{testConnectivity:s,dataSource:t,userName:e._sqlServerUsername,password:e._sqlServerPassword,authentication:e._authenticationType,encryptConnection:i,trustServerCertificate:n},targetSqlConnection:{testConnectivity:c,dataSource:f.properties.fullyQualifiedDomainName,userName:e._targetUserName,password:e._targetPassword,authentication:l.MigrationSourceAuthenticationType.Sql,encryptConnection:!0,trustServerCertificate:!1}},T=await u.makeAzureRestRequest(p,_,S,2,E,!0,m);if(T.errors.length>0)throw new Error(T.errors.map((e=>e.message)).join(","));return T.response.data},t.validateIrDatabaseMigrationSettings=async function(e,t,i,n,r,o,a=!0,s=!0,l=!0,c=!0){const u=await h(),p=e._azureAccount,_=e._sqlMigrationServiceSubscription,g=e._targetSubscription,m=e._sqlMigrationService?.id,S=u.getProviderMetadataForAccount(p).settings.armResource?.endpoint,f=encodeURI(`${m}/validateIr?api-version=${d}`),E=await T(p,g,o.storageAccount),C={sourceDatabaseName:r??"",kind:e.isSqlMiTarget?A.SQLMI:A.SQLVM,validateIntegrationRuntimeOnline:a,backupConfiguration:{sourceLocation:{testConnectivity:s,fileShare:{path:o.networkShareLocation,username:o.windowsUser,password:o.password}},targetLocation:{testConnectivity:c,accountKey:E?.keyName1,storageAccountResourceId:o.storageAccount?.id}},sourceSqlConnection:{testConnectivity:l,dataSource:t,userName:e._sqlServerUsername,password:e._sqlServerPassword,encryptConnection:i,trustServerCertificate:n,authentication:e._authenticationType}},y=await u.makeAzureRestRequest(p,_,f,2,C,!0,S);if(y.errors.length>0)throw new Error(y.errors.map((e=>e.message)).join(","));return y.response.data},t.sortResourceArrayByName=C,t.getMigrationTargetId=y,t.getMigrationTargetName=function(e){return R(y(e))},t.getResourceGroupFromId=v,t.getFullResourceGroupFromId=function(e){return e.replace(RegExp("/providers/.*"),"").toLowerCase()},t.getResourceName=R,t.getBlobContainerId=function(e,t,i){return`${e}/providers/Microsoft.Storage/storageAccounts/${t}/blobServices/default/containers/${i}`},t.getMigrationErrors=function(e){const t=[];return e?.properties&&(t.push(e.properties.provisioningError),t.push(e.properties.migrationFailureError?.message),t.push(e.properties.migrationStatusDetails?.fileUploadBlockingErrors??[]),t.push(e.properties.migrationStatusDetails?.restoreBlockingReason),t.push(e.properties.migrationStatusDetails?.sqlDataCopyErrors),t.push(...e.properties.migrationStatusDetails?.invalidFiles??[]),t.push(e.properties.migrationStatusWarnings?.completeRestoreErrorMessage),t.push(e.properties.migrationStatusWarnings?.restoreBlockingReason),t.push(...e.properties.migrationStatusDetails?.listOfCopyProgressDetails?.flatMap((e=>e.errors))??[]),t.push(...e.properties.migrationStatusDetails?.sqlSchemaMigrationStatus?.sqlSchemaCopyErrors??[])),t.filter(((e,t,i)=>void 0!==e&&t===i.indexOf(e))).join(c.EOL)},function(e){e.SQLDB="SqlDb",e.SQLMI="SqlMi",e.SQLVM="SqlVm",e.ORACLETOSQLDB="OracleToSqlDb"}(A||(t.AzureResourceKind=A={}))},7184:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkInterfaceModel=void 0;const n=i(4294);class r{static getPrimaryNetworkInterface(e){if(e&&e.length>0){const t=e.find((e=>!0===e.properties.primary));if(t)return t}}static getPrimaryIpConfiguration(e){if(!(e?.properties?.ipConfigurations&&e.properties.ipConfigurations?.length>0))return;let t=e.properties.ipConfigurations.find((e=>e.properties.primary));return t||(t=e.properties.ipConfigurations.find((e=>void 0!==e.properties.publicIPAddress)),t||(t=e.properties.ipConfigurations.find((e=>e.properties.privateIPAddressVersion.toLocaleLowerCase()===r.IPv4VersionType)),t))}static getIpAddress(e){const t=this.getPrimaryNetworkInterface(e);if(!t)return"";const i=this.getPrimaryIpConfiguration(t);return i&&i.properties.publicIPAddress?i.properties.publicIPAddress.properties.ipAddress:i&&i.properties.privateIPAddress?i.properties.privateIPAddress:""}static getPublicIpAddressId(e){const t=this.getPrimaryNetworkInterface(e);if(!t)return;const i=this.getPrimaryIpConfiguration(t);return i&&i.properties.publicIPAddress?i.properties.publicIPAddress.id:void 0}static async getNetworkInterfaces(e,t,i){return(0,n.getAzureResourceGivenId)(e,t,i,this.NETWORK_API_VERSION)}static async getPublicIpAddress(e,t,i){return(0,n.getAzureResourceGivenId)(e,t,i,this.NETWORK_API_VERSION)}static async getVmNetworkInterfaces(e,t,i){const o=await(0,n.getComputeVM)(i,e,t),a=new Map;if(!o?.properties?.networkProfile?.networkInterfaces)return a;for(const i of o.properties.networkProfile.networkInterfaces){const n=i.id,o=await this.getNetworkInterfaces(e,t,n),s=r.getPublicIpAddressId([o]);let l=r.getPrimaryIpConfiguration(o);l&&s&&(l.properties.publicIPAddress=await this.getPublicIpAddress(e,t,s)),a.set(n,o)}return a}static async getPrivateEndpoint(e,t,i){return(0,n.getAzureResourceGivenId)(e,t,i,this.NETWORK_API_VERSION)}static getVirtualNetworkFromSubnet(e){return e.replace(RegExp("^(.*?)/virtualNetworks/"),"").replace(RegExp("/subnets/.*"),"").toLowerCase()}}t.NetworkInterfaceModel=r,r.IPv4VersionType="IPv4".toLocaleLowerCase(),r.NETWORK_API_VERSION="2022-09-01"},3963:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canTargetConnectToStorageAccount=t.isSourceConnectionSysAdmin=t.collectTargetLogins=t.collectSourceLogins=t.getDatabasesList=t.getSqlBoolean=t.getSqlNumber=t.getSqlString=t.collectAzureTargetDatabases=t.collectTargetDatabaseInfo=t.collectTargetDatabaseTableInfo=t.collectSourceDatabaseTableInfo=t.getTargetConnectionString=t.getSourceConnectionString=t.getTargetConnectionProfile=t.getTrustServerCertificateValue=t.getEncryptConnectionValue=t.getSourceConnectionQueryProvider=t.getSourceConnectionCredentials=t.getSourceConnectionUri=t.getSourceConnectionServerInfo=t.getSourceConnectionId=t.getSourceConnectionProfile=t.excludeDatabases=void 0;const n=i(9072),r=i(3186),o=i(3186),a=i(7475),s=i(2074),l=i(7184),c="\n\tSELECT\n\t\tDB_NAME() as database_name,\n\t\tQUOTENAME(SCHEMA_NAME(o.schema_id)) + '.' + QUOTENAME(o.name) AS table_name,\n\t\tSUM(p.Rows) AS row_count\n\tFROM\n\t\tsys.objects AS o\n\tINNER JOIN sys.partitions AS p\n\t\tON o.object_id = p.object_id\n\tWHERE\n\t\to.type = 'U'\n\t\tAND o.is_ms_shipped = 0x0\n\t\tAND index_id < 2\n\tGROUP BY\n\t\to.schema_id,\n\t\to.name\n\tORDER BY table_name;",u="\n\tSELECT\n\t\tsp.name as login,\n\t\tsp.type_desc as login_type,\n\t\tsp.default_database_name,\n\t\tcase when sp.is_disabled = 1 then 'Disabled' else 'Enabled' end as status\n\tFROM sys.server_principals sp\n\tLEFT JOIN sys.sql_logins sl ON sp.principal_id = sl.principal_id\n\tWHERE sp.type NOT IN ('G', 'R') AND sp.type_desc IN (\n\t\t'SQL_LOGIN'\n\t) AND sp.name NOT LIKE '##%##'\n\tORDER BY sp.name;",d="\n\tSELECT\n\t\tsp.name as login,\n\t\tsp.type_desc as login_type,\n\t\tsp.default_database_name,\n\t\tcase when sp.is_disabled = 1 then 'Disabled' else 'Enabled' end as status\n\tFROM sys.server_principals sp\n\tLEFT JOIN sys.sql_logins sl ON sp.principal_id = sl.principal_id\n\tWHERE sp.type NOT IN ('G', 'R') AND sp.type_desc IN (\n\t\t'SQL_LOGIN', 'WINDOWS_LOGIN'\n\t) AND sp.name NOT LIKE '##%##'\n\tORDER BY sp.name;";async function p(){return await n.connection.getCurrentConnection()}async function h(){return(await p()).connectionId}function _(e,t,i,o,a,s){const l=(0,r.generateGuid)();return{serverName:e,id:l,connectionName:l,azureResourceId:t,userName:i,password:o,authenticationType:n.connection.AuthenticationType.SqlLogin,savePassword:!1,groupFullName:l,groupId:l,providerName:"MSSQL",saveProfile:!1,options:{connectionName:l,server:e,authenticationType:n.connection.AuthenticationType.SqlLogin,user:i,password:o,connectionTimeout:60,columnEncryptionSetting:"Enabled",encrypt:a,trustServerCertificate:s,connectRetryCount:"1",connectRetryInterval:"10",applicationName:"azdata-sqlMigration"}}}function g(e){return e.isNull?"":e.displayValue}function m(e){return e.isNull?0:parseInt(e.displayValue)}function S(e){return!e.isNull&&"1"===e.displayValue}t.excludeDatabases=["master","tempdb","msdb","model"],t.getSourceConnectionProfile=p,t.getSourceConnectionId=h,t.getSourceConnectionServerInfo=async function(){return await n.connection.getServerInfo(await h())},t.getSourceConnectionUri=async function(){return await n.connection.getUriForConnection(await h())},t.getSourceConnectionCredentials=async function(){return await n.connection.getCredentials(await h())},t.getSourceConnectionQueryProvider=async function(){return n.dataprotocol.getProvider((await p()).providerId,n.DataProviderType.QueryProvider)},t.getEncryptConnectionValue=function(e){return!0===e?.options?.encrypt||"true"===e?.options?.encrypt},t.getTrustServerCertificateValue=function(e){return!0===e?.options?.trustServerCertificate||"true"===e?.options?.trustServerCertificate},t.getTargetConnectionProfile=_,t.getSourceConnectionString=async function(){return await n.connection.getConnectionString((await p()).connectionId,!0)},t.getTargetConnectionString=async function(e,t,i,r,o,a){const s=_(e,t,i,r,o,a),l=await n.connection.connect(s,!1,!1);return l.connected&&l.connectionId?n.connection.getConnectionString(l.connectionId,!0):""},t.collectSourceDatabaseTableInfo=async function(e){const t=await n.connection.getUriForConnection((await p()).connectionId),i=n.dataprotocol.getProvider("MSSQL",n.DataProviderType.ConnectionProvider);await i.changeDatabase(t,e);const r=n.dataprotocol.getProvider("MSSQL",n.DataProviderType.QueryProvider);return(await r.runQueryAndReturn(t,c)).rows.map((e=>({databaseName:g(e[0]),tableName:g(e[1]),rowCount:m(e[2]),selectedForMigration:!1})))??[]},t.collectTargetDatabaseTableInfo=async function(e,t,i,o,a){const s=function(e,t,i,o,a){return{id:(0,r.generateGuid)(),providerName:"MSSQL",connectionName:"",serverName:e,databaseName:i,userName:o,password:a,authenticationType:n.connection.AuthenticationType.SqlLogin,savePassword:!1,saveProfile:!1,options:{connectionName:"",server:e,database:i,authenticationType:n.connection.AuthenticationType.SqlLogin,user:o,password:a,connectionTimeout:60,columnEncryptionSetting:"Enabled",encrypt:!0,trustServerCertificate:!1,connectRetryCount:"1",connectRetryInterval:"10",applicationName:"azdata-sqlMigration",azureTenantId:t,originalDatabase:i,databaseDisplayName:i}}}(e.properties.fullyQualifiedDomainName,i,t,o,a),l=await n.connection.connect(s,!1,!1);if(l.connected&&l.connectionId){const e=n.dataprotocol.getProvider("MSSQL",n.DataProviderType.QueryProvider),t=await n.connection.getUriForConnection(l.connectionId);return(await e.runQueryAndReturn(t,c)).rows.map((e=>({databaseName:g(e[0]),tableName:g(e[1]),rowCount:m(e[2]),selectedForMigration:!1})))??[]}throw new Error(l.errorMessage)},t.collectTargetDatabaseInfo=async function(e,t,i){const r=_(e.properties.fullyQualifiedDomainName,e.id,t,i,!0,!1),o=await n.connection.connect(r,!1,!1);if(o.connected&&o.connectionId){const e=n.dataprotocol.getProvider("MSSQL",n.DataProviderType.QueryProvider),t=await n.connection.getUriForConnection(o.connectionId);return(await e.runQueryAndReturn(t,"\n\tSELECT\n\t\t('servername') as server_name,\n\t\tSERVERPROPERTY ('collation') as server_collation,\n\t\tdb.database_id as database_id,\n\t\tdb.name as database_name,\n\t\tdb.collation_name as database_collation,\n\t\tCASE WHEN 'A' = 'a' THEN 0 ELSE 1 END as is_server_case_sensitive,\n\t\tdb.state as database_state,\n\t\tdb.is_read_only\tas is_read_only\n\tFROM sys.databases db\n\tWHERE\n\t\tdb.name not in ('master', 'tempdb', 'model', 'msdb')\n\t\tAND is_distributor <> 1\n\tORDER BY db.name;")).rows.map((e=>({serverName:g(e[0]),serverCollation:g(e[1]),databaseId:g(e[2]),databaseName:g(e[3]),databaseCollation:g(e[4]),isServerCaseSensitive:S(e[5]),databaseState:m(e[6]),isReadOnly:S(e[7]),sourceTables:new Map,targetTables:new Map,enableSchemaMigration:!1,hasMissingTables:!0})))??[]}throw new Error(o.errorMessage)},t.collectAzureTargetDatabases=async function(e,i,n,r){const a=[];return n&&r&&a.push(...await o.getAzureSqlDatabases(e,i,n,r)),a.filter((e=>!t.excludeDatabases.includes(e.name)))??[]},t.getSqlString=g,t.getSqlNumber=m,t.getSqlBoolean=S,t.getDatabasesList=async function(e){const t=await n.connection.getUriForConnection(e.connectionId),i=n.dataprotocol.getProvider(e.providerId,n.DataProviderType.QueryProvider);try{return(await i.runQueryAndReturn(t,"\n\tWITH\n\t\tdb_size\n\t\tAS\n\t\t(\n\t\t\tSELECT database_id, CAST(SUM(CAST(size as BIGINT)) / 128 AS BIGINT) size\n\t\t\tFROM sys.master_files with (nolock)\n\t\t\tGROUP BY database_id\n\t\t)\n\tSELECT name, state_desc AS state, db_size.size, collation_name\n\tFROM sys.databases with (nolock) LEFT JOIN db_size ON sys.databases.database_id = db_size.database_id\n\tWHERE sys.databases.state = 0\n\t")).rows.map((e=>({options:{name:g(e[0]),state:g(e[1]),sizeInMB:g(e[2]),collation:g(e[3])}})))??[]}catch(e){return(0,a.logError)(a.TelemetryViews.Utils,a.TelemetryAction.GetDatabasesListFailed,e),[]}},t.collectSourceLogins=async function(e,t=!0){const i=await n.connection.getUriForConnection(e),r=n.dataprotocol.getProvider("MSSQL",n.DataProviderType.QueryProvider),o=t?d:u;return(await r.runQueryAndReturn(i,o)).rows.map((e=>({loginName:g(e[0]),loginType:g(e[1]),defaultDatabaseName:g(e[2]),status:g(e[3])})))??[]},t.collectTargetLogins=async function(e,t,i,r,o=!0){const l=_(e,t,i,r,!0,!0),c=await n.connection.connect(l,!1,!1);if(c.connected&&c.connectionId){const e=n.dataprotocol.getProvider("MSSQL",n.DataProviderType.QueryProvider),t=o?d:u,i=await n.connection.getUriForConnection(c.connectionId);return(await e.runQueryAndReturn(i,t)).rows.map((e=>g(e[0])))??[]}const p=s.COLLECTING_TARGET_LOGINS_FAILED(c.errorCode??0),h=new Error(c.errorMessage);throw(0,a.logError)(a.TelemetryViews.LoginMigrationWizard,p,h),h},t.isSourceConnectionSysAdmin=async function(){const e=await h(),t=await n.connection.getUriForConnection(e),i=n.dataprotocol.getProvider("MSSQL",n.DataProviderType.QueryProvider);return S((await i.runQueryAndReturn(t,"SELECT IS_SRVROLEMEMBER('sysadmin');")).rows[0][0])},t.canTargetConnectToStorageAccount=async function(e,t,i,n,o){const a="Allow",s=i.properties,c=!s.publicNetworkAccess||s.publicNetworkAccess.toLowerCase()==="Enabled".toLowerCase(),u=!s.networkAcls||s.networkAcls.defaultAction.toLowerCase()===a.toLowerCase(),d=s.networkAcls?s.networkAcls.virtualNetworkRules.filter((e=>e.action.toLowerCase()===a.toLowerCase())).map((e=>e.id)):[];var p,h=!1,_=!1;switch(p=c&&u,e){case r.MigrationTargetType.SQLMI:const e=t.properties.subnetId??"",i=t.properties.privateEndpointConnections??[],a=s.privateEndpointConnections??[];d.length>0&&(h=d.some((t=>t.toLowerCase()===e.toLowerCase()))),i.length>0&&(_=a.some((async t=>{const i=await l.NetworkInterfaceModel.getPrivateEndpoint(n,o,t.id),r=i.properties.subnet?i.properties.subnet.id:"";return l.NetworkInterfaceModel.getVirtualNetworkFromSubnet(r).toLowerCase()===l.NetworkInterfaceModel.getVirtualNetworkFromSubnet(e).toLowerCase()})));break;case r.MigrationTargetType.SQLVM:const c=Array.from((await l.NetworkInterfaceModel.getVmNetworkInterfaces(n,o,t)).values()).map((e=>(e.properties.ipConfigurations??[]).map((e=>e.properties.subnet.id.toLowerCase())))).flat();d.length>0&&(h=d.some((e=>c.some((t=>e.toLowerCase()===t.toLowerCase())))));break;default:return!0}return p||h||_}},3186:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAzureSqlMigrationServices=t.getStorageAccounts=t.getVirtualMachinesDropdownValues=t.getVirtualMachines=t.getAzureSqlDatabases=t.getAzureSqlDatabaseServers=t.getManagedInstancesDropdownValues=t.getManagedInstances=t.getAllResourceGroups=t.getSubscriptionIdFromResourceId=t.getServiceResourceGroupsByLocation=t.getResourceLocations=t.getAzureSubscriptionsDropdownValues=t.getAzureSubscriptions=t.getAzureTenants=t.isAccountTokenStale=t.getAzureAccountsDropdownValues=t.getAzureAccounts=t.getUserHome=t.clearDialogMessage=t.displayDialogErrorMessage=t.get12HourTime=t.getScriptDeploymentStatusImage=t.getScriptGenerationStatusImage=t.getObjectsCollectionStatusImage=t.getSchemaMigrationStatusImage=t.getMigrationStatusImage=t.getPipelineStatusImage=t.getLoginStatusImage=t.getLoginStatusMessage=t.getMigrationStatusWithErrors=t.decorate=t.debounce=t.hashString=t.selectDropDownIndex=t.selectDefaultDropdownValue=t.convertIsoTimeToLocalTime=t.convertByteSizeToReadableUnit=t.filterMigrations=t.getMigrationDuration=t.getMigrationTime=t.convertTimeDifferenceToDuration=t.getPackageInfo=t.isTargetSqlVm2014OrBelow=t.getSqlServerName=t.deepClone=t.MigrationTargetType=t.MenuCommands=t.DefaultSettingValue=t.SqlMigrationExtensionId=void 0,t.promptUserForFile=t.clearDropDownWithLoading=t.hasRecommendations=t.getRecommendedConfiguration=t.clearDropDown=t.createRegistrationInstructions=t.refreshAuthenticationKeyTable=t.createAuthenticationKeyTable=t.isAdmin=t.isWindows=t.promptUserForFolder=t.generateGuid=t.updateControlDisplay=t.getBlobFolderValues=t.getBlobLastBackupFileNamesValues=t.getAzureLocationsDropdownValues=t.getAzureTenantsDropdownValues=t.getResourceDropdownValues=t.getAzureResourceDropdownValues=t.getLastBackupFileNameWithoutFolder=t.getBlobContainerNameWithFolder=t.getBlobFolders=t.getBlobLastBackupFileNames=t.getBlobContainer=void 0;const n=i(9072),r=i(9496),o=i(1386),a=i(6113),s=i(4294),l=i(2074),c=i(7475),u=i(8777),d=i(1456),p=i(2037),h=i(9563),_=i(4294);var g;function m(e,t){const i=t.getTime()-e.getTime();let n=(i/1e3).toFixed(1),r=(i/6e4).toFixed(1),o=(i/36e5).toFixed(1),a=(i/864e5).toFixed(1);return i/1e3<60?l.SEC(parseFloat(n)):i/6e4<60?l.MINUTE(parseFloat(r)):i/36e5<24?l.HRS(parseFloat(o)):l.DAYS(parseFloat(a))}function S(e){return e?new Date(e).toLocaleString():t.DefaultSettingValue}function f(e,i){return e?m(new Date(e),i?new Date(i):new Date):t.DefaultSettingValue}function E(e,t){e.values&&e.values.length>0&&t>=0&&t<e.values.length?e.value=e.values[t]:e.value=void 0}function T(e){return(t,i,n)=>{let r=null,o=null;if("function"==typeof n.value?(r="value",o=n.value):"function"==typeof n.get&&(r="get",o=n.get),!o||!r)throw new Error("not supported");n[r]=e(o,i)}}function C(){return process.env.HOME||process.env.USERPROFILE}function y(e){return void 0===e||!0===e?.isStale}function v(e){let t=e?.split("/subscriptions/");if(t?.length>1&&(t=t[1]?.split("/resourcegroups/"),t?.length>0))return t[0]}function R(){return"win32"===p.platform()}function A(e){return!(!e._skuRecommendationResults?.recommendations||e._skuRecommendationResults?.recommendationError)}t.SqlMigrationExtensionId="microsoft.sql-migration",t.DefaultSettingValue="---",t.MenuCommands={Cutover:"sqlmigration.cutover",ViewDatabase:"sqlmigration.view.database",ViewTarget:"sqlmigration.view.target",ViewService:"sqlmigration.view.service",CopyMigration:"sqlmigration.copy.migration",CancelMigration:"sqlmigration.cancel.migration",DeleteMigration:"sqlmigration.delete.migration",RetryMigration:"sqlmigration.retry.migration",RestartMigration:"sqlmigration.restart.migration",StartMigration:"sqlmigration.start",StartLoginMigration:"sqlmigration.login.start",IssueReporter:"workbench.action.openIssueReporter",OpenNotebooks:"sqlmigration.openNotebooks",NewSupportRequest:"sqlmigration.newsupportrequest",SendFeedback:"sqlmigration.sendfeedback"},function(e){e.SQLVM="AzureSqlVirtualMachine",e.SQLMI="AzureSqlManagedInstance",e.SQLDB="AzureSqlDatabase"}(g||(t.MigrationTargetType=g={})),t.deepClone=function e(t){if(!t||"object"!=typeof t)return t;if(t instanceof RegExp)return t;const i=Array.isArray(t)?[]:{};return Object.keys(t).forEach((n=>{t[n]&&"object"==typeof t[n]?i[n]=e(t[n]):i[n]=t[n]})),i},t.getSqlServerName=function(e){switch(e){case 10:return"SQL Server 2008";case 11:return"SQL Server 2012";case 12:return"SQL Server 2014";case 13:return"SQL Server 2016";case 14:return"SQL Server 2017";case 15:return"SQL Server 2019";default:return}},t.isTargetSqlVm2014OrBelow=function(e){const t=e.properties.sqlImageOffer;return!(!t||!t.toUpperCase().startsWith("SQL"))&&parseInt(t.substring(3,7))<=2014},t.getPackageInfo=function(e){if(e)return{name:e.name,version:e.version,aiKey:e.aiKey}},t.convertTimeDifferenceToDuration=m,t.getMigrationTime=S,t.getMigrationDuration=f,t.filterMigrations=function(e,t,i){const n=[s.AzureResourceKind.SQLDB,s.AzureResourceKind.SQLMI,s.AzureResourceKind.SQLVM];let r=e.filter((e=>n.includes(e.properties?.kind)))||[];if(i){const e=i.toLowerCase();r=r.filter((t=>t.properties.sourceServerName?.toLowerCase().includes(e)||t.properties.sourceDatabaseName?.toLowerCase().includes(e)||(0,d.getMigrationStatus)(t)?.toLowerCase().includes(e)||(0,d.getMigrationMode)(t)?.toLowerCase().includes(e)||(0,d.getMigrationType)(t)?.toLocaleLowerCase().includes(e)||(0,d.getMigrationTargetType)(t)?.toLowerCase().includes(e)||s.getResourceName(t.properties.scope)?.toLowerCase().includes(e)||s.getResourceName(t.id)?.toLowerCase().includes(e)||f(t.properties.startedOn,t.properties.endedOn)?.toLowerCase().includes(e)||S(t.properties.startedOn)?.toLowerCase().includes(e)||S(t.properties.endedOn)?.toLowerCase().includes(e)||(0,d.getMigrationMode)(t)?.toLowerCase().includes(e)))}switch(t){case u.AdsMigrationStatus.ALL:return r;case u.AdsMigrationStatus.ONGOING:return r.filter((e=>{const t=(0,d.getMigrationStatus)(e);return t===l.MigrationState.InProgress||t===l.MigrationState.ReadyForCutover||t===l.MigrationState.UploadingFullBackup||t===l.MigrationState.UploadingLogBackup||t===l.MigrationState.Restoring||t===l.MigrationState.Retriable||t===l.MigrationState.Creating}));case u.AdsMigrationStatus.SUCCEEDED:return r.filter((e=>(0,d.getMigrationStatus)(e)===l.MigrationState.Succeeded));case u.AdsMigrationStatus.FAILED:return r.filter((e=>(0,d.getMigrationStatus)(e)===l.MigrationState.Failed));case u.AdsMigrationStatus.COMPLETING:return r.filter((e=>(0,d.getMigrationStatus)(e)===l.MigrationState.Completing))}return r},t.convertByteSizeToReadableUnit=function(e){const t=["B","KB","MB","GB","TB"];for(let i=1;i<t.length;i++){const n=e/1024;if(n<.1)return`${e.toFixed(2)} ${t[i-1]}`;e=n}return e.toString()},t.convertIsoTimeToLocalTime=function(e){let t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())},t.selectDefaultDropdownValue=function(e,t,i=!0){if(e.values&&e.values.length>0){let n;if(t){const r=t.toLowerCase();n=i?e.values?.findIndex((e=>e?.displayName?.toLowerCase()===r)):e.values?.findIndex((e=>e?.name?.toLowerCase()===r))}else n=-1;E(e,n>-1?n:0)}else e.value=void 0},t.selectDropDownIndex=E,t.hashString=function(e){return e?.length>0?a.createHash("sha512").update(e).digest("hex"):""},t.debounce=function(e){return T(((t,i)=>{const n=`$debounce$${i}`;return function(...i){clearTimeout(this[n]),this[n]=setTimeout((()=>t.apply(this,i)),e)}}))},t.decorate=T,t.getMigrationStatusWithErrors=function(e){const t=e.properties,i=(0,d.getMigrationStatus)(e)??"";let n=t.provisioningError?.length>0?1:0;return n+=t.migrationFailureError?.message?.length>0?1:0,n+=t.migrationStatusWarnings?.fileUploadBlockingErrorCount??0,n+=(0,d.hasRestoreBlockingReason)(e)?1:0,n+=(t.migrationStatusWarnings?.completeRestoreErrorMessage??"").length>0?1:0,l.STATUS_VALUE(i)+(l.STATUS_WARNING_COUNT(i,n)??"")},t.getLoginStatusMessage=function(e){return e?l.LOGINS_FOUND:l.LOGINS_NOT_FOUND},t.getLoginStatusImage=function(e){return e?o.IconPathHelper.completedMigration:o.IconPathHelper.notFound},t.getPipelineStatusImage=function(e){switch(e){case d.PipelineStatusCodes.Copying:return o.IconPathHelper.copy;case d.PipelineStatusCodes.CopyFinished:case d.PipelineStatusCodes.RebuildingIndexes:return o.IconPathHelper.inProgressMigration;case d.PipelineStatusCodes.Canceled:return o.IconPathHelper.cancel;case d.PipelineStatusCodes.PreparingForCopy:return o.IconPathHelper.notStartedMigration;case d.PipelineStatusCodes.Failed:return o.IconPathHelper.error;case d.PipelineStatusCodes.Succeeded:return o.IconPathHelper.completedMigration;case d.PipelineStatusCodes.Queued:return o.IconPathHelper.notStartedMigration;case d.PipelineStatusCodes.InProgress:return o.IconPathHelper.inProgressMigration;case d.PipelineStatusCodes.Cancelled:return o.IconPathHelper.cancel;default:return o.IconPathHelper.error}},t.getMigrationStatusImage=function(e){switch((0,d.getMigrationStatus)(e)){case l.MigrationState.InProgress:case l.MigrationState.UploadingFullBackup:case l.MigrationState.UploadingLogBackup:case l.MigrationState.Restoring:return o.IconPathHelper.inProgressMigration;case l.MigrationState.ReadyForCutover:return o.IconPathHelper.cutover;case l.MigrationState.Succeeded:return o.IconPathHelper.completedMigration;case l.MigrationState.Creating:return o.IconPathHelper.notStartedMigration;case l.MigrationState.Completing:return o.IconPathHelper.completingCutover;case l.MigrationState.Retriable:return o.IconPathHelper.retry;case l.MigrationState.Canceling:case l.MigrationState.Canceled:return o.IconPathHelper.cancel;case l.MigrationState.Failed:default:return o.IconPathHelper.error}},t.getSchemaMigrationStatusImage=function(e){switch((0,d.getSchemaMigrationStatus)(e)){case l.MigrationState.CollectionCompleted:case l.MigrationState.PrefetchObjects:case l.MigrationState.GetDependency:case l.MigrationState.ScriptObjects:case l.MigrationState.ScriptViewIndexes:case l.MigrationState.ScriptOwnership:case l.MigrationState.GeneratingScript:case l.MigrationState.DeployingSchema:case l.MigrationState.GeneratingScriptCompleted:case l.MigrationState.DeploymentCompleted:return o.IconPathHelper.inProgressMigration;case l.MigrationState.Completed:return o.IconPathHelper.completedMigration;case l.MigrationState.Failed:case l.MigrationState.CompletedWithError:return o.IconPathHelper.error;default:return o.IconPathHelper.notStartedMigration}},t.getObjectsCollectionStatusImage=function(e){switch((0,d.getSchemaMigrationStatus)(e)){case l.MigrationState.CollectionCompleted:case l.MigrationState.PrefetchObjects:case l.MigrationState.GetDependency:case l.MigrationState.ScriptObjects:case l.MigrationState.ScriptViewIndexes:case l.MigrationState.ScriptOwnership:case l.MigrationState.GeneratingScript:case l.MigrationState.GeneratingScriptCompleted:case l.MigrationState.DeployingSchema:case l.MigrationState.DeploymentCompleted:case l.MigrationState.Completed:case l.MigrationState.CompletedWithError:return o.IconPathHelper.completedMigration;default:return o.IconPathHelper.notStartedMigration}},t.getScriptGenerationStatusImage=function(e){var t=e?.properties.migrationStatusDetails?.sqlSchemaMigrationStatus?.scriptGeneration??void 0,i=void 0===t?[]:t.errors??[];switch((0,d.getSchemaMigrationStatus)(e)){case l.MigrationState.PrefetchObjects:case l.MigrationState.GetDependency:case l.MigrationState.ScriptObjects:case l.MigrationState.ScriptViewIndexes:case l.MigrationState.ScriptOwnership:case l.MigrationState.GeneratingScript:return o.IconPathHelper.inProgressMigration;case l.MigrationState.Completed:case l.MigrationState.CompletedWithError:case l.MigrationState.GeneratingScriptCompleted:case l.MigrationState.DeployingSchema:case l.MigrationState.DeploymentCompleted:return i.length>0?o.IconPathHelper.error:o.IconPathHelper.completedMigration;default:return o.IconPathHelper.notStartedMigration}},t.getScriptDeploymentStatusImage=function(e){var t=e?.properties.migrationStatusDetails?.sqlSchemaMigrationStatus?.scriptDeployment??void 0,i=void 0===t?[]:t.errors??[];switch((0,d.getSchemaMigrationStatus)(e)){case l.MigrationState.DeployingSchema:return o.IconPathHelper.inProgressMigration;case l.MigrationState.Completed:case l.MigrationState.DeploymentCompleted:return o.IconPathHelper.completedMigration;case l.MigrationState.CompletedWithError:return i.length>0?o.IconPathHelper.error:o.IconPathHelper.completedMigration;default:return o.IconPathHelper.notStartedMigration}},t.get12HourTime=function(e){return(e||new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},t.displayDialogErrorMessage=function(e,t,i){e.message={level:n.window.MessageLevel.Error,text:t,description:i.message}},t.clearDialogMessage=function(e){e.message={text:""}},t.getUserHome=C,t.getAzureAccounts=async function(){let e=[];try{e=await n.accounts.getAllAccounts()}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getAzureAccounts",e)}return e},t.getAzureAccountsDropdownValues=async function(e){let t=[];return e.forEach((e=>{t.push({name:e.displayInfo.userId,displayName:y(e)?l.ACCOUNT_CREDENTIALS_REFRESH(e.displayInfo.displayName):e.displayInfo.displayName})})),0===t.length&&(t=[{displayName:l.ACCOUNT_SELECTION_PAGE_NO_LINKED_ACCOUNTS_ERROR,name:""}]),t},t.isAccountTokenStale=y,t.getAzureTenants=function(e){return e?.properties.tenants||[]},t.getAzureSubscriptions=async function(e,t){let i=[];try{i=e&&!y(e)?await s.getSubscriptions(e):[]}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getAzureSubscriptions",e)}const n=i.filter((e=>e.tenant===t));return n.sort(((e,t)=>e.name.localeCompare(t.name))),n},t.getAzureSubscriptionsDropdownValues=async function(e){let t=[];return e.forEach((e=>{t.push({name:e.id,displayName:`${e.name} - ${e.id}`})})),0===t.length&&(t=[{displayName:l.NO_SUBSCRIPTIONS_FOUND,name:""}]),t},t.getResourceLocations=async function(e,t,i){try{if(e&&t&&i)return(await s.getLocations(e,t)).filter(((e,t)=>i.some((t=>t.location.toLowerCase()===e.name.toLowerCase())))).sort(((e,t)=>e.displayName.localeCompare(t.displayName)))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getResourceLocations",e)}return[]},t.getServiceResourceGroupsByLocation=function(e,t){let i=[];if(e&&t){const n=t.name.toLowerCase();i=e.filter((e=>e.location.toLowerCase()===n)).map((e=>({id:s.getFullResourceGroupFromId(e.id),name:s.getResourceGroupFromId(e.id),subscription:{id:v(e.id)},tenant:e.tenantId})))}return i.filter(((e,t,i)=>i.findIndex((t=>t.id===e.id))===t)).sort(((e,t)=>e.name.localeCompare(t.name)))},t.getSubscriptionIdFromResourceId=v,t.getAllResourceGroups=async function(e,t){let i=[];try{e&&t&&(i=await s.getResourceGroups(e,t))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getAllResourceGroups",e)}return i.sort(((e,t)=>e.name.localeCompare(t.name))),i},t.getManagedInstances=async function(e,t){let i=[];try{e&&t&&(i=await s.getAvailableManagedInstanceProducts(e,t))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getManagedInstances",e)}return i.sort(((e,t)=>e.name.localeCompare(t.name))),i},t.getManagedInstancesDropdownValues=async function(e,t,i){let n=[];return t&&i&&e.forEach((e=>{if(e.location.toLowerCase()===t.name.toLowerCase()&&e.resourceGroup?.toLowerCase()===i.name.toLowerCase()){let t;t=e.properties.state.toLowerCase()==="Ready".toLowerCase()?{name:e.id,displayName:e.name}:{name:e.id,displayName:l.UNAVAILABLE_TARGET_PREFIX(e.name)},n.push(t)}})),0===n.length&&(n=[{displayName:l.NO_MANAGED_INSTANCE_FOUND,name:""}]),n},t.getAzureSqlDatabaseServers=async function(e,t){let i=[];try{e&&t&&(i=await s.getAvailableSqlDatabaseServers(e,t))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getAzureSqlDatabaseServers",e)}return i.sort(((e,t)=>e.name.localeCompare(t.name))),i},t.getAzureSqlDatabases=async function(e,t,i,n){if(e&&t&&i&&n)try{return(await s.getAvailableSqlDatabases(e,t,i,n)).sort(((e,t)=>e.name.localeCompare(t.name)))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getAzureSqlDatabases",e)}return[]},t.getVirtualMachines=async function(e,t){let i=[];try{e&&t&&(i=(await s.getAvailableSqlVMs(e,t)).filter((e=>!e.properties.sqlImageOffer||e.properties.sqlImageOffer.toLowerCase().includes("-ws"))))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getVirtualMachines",e)}return i.sort(((e,t)=>e.name.localeCompare(t.name))),i},t.getVirtualMachinesDropdownValues=async function(e,t,i,n,r){let o=[];if(t&&i)for(const a of e)if(a.location.toLowerCase()===t.name.toLowerCase()&&s.getResourceGroupFromId(a.id).toLowerCase()===i.name.toLowerCase()){let e;e=(await s.getVMInstanceView(a,n,r)).statuses.some((e=>e.code.toLowerCase()==="PowerState/running".toLowerCase()))?a.properties.sqlManagement.toLowerCase()!=="Full".toLowerCase()?{name:a.id,displayName:l.UNAVAILABLE_TARGET_PREFIX(a.name)}:{name:a.id,displayName:a.name}:{name:a.id,displayName:l.UNAVAILABLE_TARGET_PREFIX(a.name)},o.push(e)}return 0===o.length&&(o=[{displayName:l.NO_VIRTUAL_MACHINE_FOUND,name:""}]),o},t.getStorageAccounts=async function(e,t){let i=[];try{e&&t&&(i=await s.getAvailableStorageAccounts(e,t))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getStorageAccounts",e)}return i.sort(((e,t)=>e.name.localeCompare(t.name))),i},t.getAzureSqlMigrationServices=async function(e,t){try{if(e&&t)return(await s.getSqlMigrationServices(e,t)).filter((e=>e.properties.provisioningState===l.ProvisioningState.Succeeded)).sort(((e,t)=>e.name.localeCompare(t.name)))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getAzureSqlMigrationServices",e)}return[]},t.getBlobContainer=async function(e,t,i){let n=[];try{e&&t&&i&&(n=await s.getBlobContainers(e,t,i))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getBlobContainer",e)}return n.sort(((e,t)=>e.name.localeCompare(t.name))),n},t.getBlobLastBackupFileNames=async function(e,t,i,n){let r=[];try{e&&t&&i&&n&&(await s.getBlobs(e,t,i,n.name)).forEach((e=>{1!==e.name.split("/").length&&2!==e.name.split("/").length||r.includes(e)||r.push(e)}))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getBlobLastBackupFileNames",e)}return r.sort(((e,t)=>e.name.localeCompare(t.name))),r},t.getBlobFolders=async function(e,t,i,n){let r=[];try{e&&t&&i&&n&&(await s.getBlobs(e,t,i,n.name)).forEach((e=>{let t="";1===e.name.split("/").length?t="/":2===e.name.split("/").length&&(t=e.name.split("/")[0]),t&&!r.includes(t)&&r.push(t)}))}catch(e){(0,c.logError)(c.TelemetryViews.Utils,"utils.getBlobLastBackupFolders",e)}return r.sort(),r},t.getBlobContainerNameWithFolder=function(e,t){const i=e.blobContainer.name;if(t){const t=e.lastBackupFile;return t&&2===t.split("/").length?i+"/"+t.split("/")[0]:i}{const t=e.folderName;return t&&"/"!==t&&"undefined"!==t?i+"/"+t:i}},t.getLastBackupFileNameWithoutFolder=function(e){const t=e.lastBackupFile;return t&&2===t.split("/").length?t.split("/")[1]:t},t.getAzureResourceDropdownValues=function(e,t,i,n){if(t?.name&&i&&e?.length>0){const n=t.name.toLowerCase(),r=i.toLowerCase();return e.filter((e=>e.location?.toLowerCase()===n&&s.getResourceGroupFromId(e.id)?.toLowerCase()===r)).map((e=>({name:e.id,displayName:e.name})))}return[{name:"",displayName:n}]},t.getResourceDropdownValues=function(e,t){return e&&e.length&&e?.map((e=>({name:e.id,displayName:e.name})))||[{name:"",displayName:t}]},t.getAzureTenantsDropdownValues=function(e){return e&&e.length&&e?.map((e=>({name:e.id,displayName:e.displayName})))||[{name:"",displayName:l.ACCOUNT_SELECTION_PAGE_NO_LINKED_ACCOUNTS_ERROR}]},t.getAzureLocationsDropdownValues=function(e){return e&&e.length&&e?.map((e=>({name:e.name,displayName:e.displayName})))||[{name:"",displayName:l.NO_LOCATION_FOUND}]},t.getBlobLastBackupFileNamesValues=function(e){return e&&e.length&&e?.map((e=>({name:e.name,displayName:e.name})))||[{name:"",displayName:l.NO_BLOBFILES_FOUND}]},t.getBlobFolderValues=function(e){return e&&e.length&&e?.map((e=>({name:e,displayName:e})))||[{name:"",displayName:l.NO_BLOBFOLDERS_FOUND}]},t.updateControlDisplay=async function(e,t,i="inline"){const n=t?i:"none";e.display=n,await e.updateCssStyles({display:n}),await e.updateProperties({display:n})},t.generateGuid=function(){const e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];let t,i="";for(let n=0;n<4;n++)t=4294967296*Math.random()|0,i+=e[15&t]+e[t>>4&15]+e[t>>8&15]+e[t>>12&15]+e[t>>16&15]+e[t>>20&15]+e[t>>24&15]+e[t>>28&15];const n=e[8+4*Math.random()|0];return`${i.substr(0,8)}-${i.substr(9,4)}-4${i.substr(13,3)}-${n}${i.substr(16,3)}-${i.substr(19,12)}`},t.promptUserForFolder=async function(){const e={defaultUri:r.Uri.file(C()),canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1},t=await r.window.showOpenDialog(e);return t&&t.length>0&&t[0]?t[0].fsPath:""},t.isWindows=R,t.isAdmin=async function(){let e=!1;try{e=R()?(await Promise.resolve().then((()=>i(9624))))():0===process.getuid?.()}catch(e){}return e},t.createAuthenticationKeyTable=function(e,t,i){return e.modelBuilder.declarativeTable().withProps({ariaLabel:l.DATABASE_MIGRATION_SERVICE_AUTHENTICATION_KEYS,columns:[{displayName:l.NAME,valueType:n.DeclarativeDataType.string,width:t,isReadOnly:!0,rowCssStyles:{...h.BODY_CSS},headerCssStyles:{...h.BODY_CSS,"font-weight":"600"}},{displayName:l.AUTH_KEY_COLUMN_HEADER,valueType:n.DeclarativeDataType.string,width:i,isReadOnly:!0,rowCssStyles:{...h.BODY_CSS},headerCssStyles:{...h.BODY_CSS,"font-weight":"600"}},{displayName:"",valueType:n.DeclarativeDataType.component,width:t,isReadOnly:!0,rowCssStyles:{...h.BODY_CSS},headerCssStyles:{...h.BODY_CSS}}],CSSStyles:{"margin-top":"5px",width:"600px"}}).component()},t.refreshAuthenticationKeyTable=async function(e,t,i,n,a,s,c){var u=[];const d=e.modelBuilder.button().withProps({title:l.COPY_KEY1,iconPath:o.IconPathHelper.copy,ariaLabel:l.COPY_KEY1}).component();u.push(d.onDidClick((async e=>{await r.env.clipboard.writeText(t.dataValues[0][1].value),r.window.showInformationMessage(l.SERVICE_KEY1_COPIED_HELP)})));const p=e.modelBuilder.button().withProps({title:l.COPY_KEY2,iconPath:o.IconPathHelper.copy,ariaLabel:l.COPY_KEY2}).component();u.push(p.onDidClick((async e=>{await r.env.clipboard.writeText(t.dataValues[1][1].value),r.window.showInformationMessage(l.SERVICE_KEY2_COPIED_HELP)})));const h=e.modelBuilder.button().withProps({title:l.REFRESH_KEY1,iconPath:o.IconPathHelper.refresh,ariaLabel:l.REFRESH_KEY1}).component();u.push(h.onDidClick((async e=>{const o=await(0,_.regenerateSqlMigrationServiceAuthKey)(i,n,a,s,c.name,"authKey1"),u=t.dataValues;u[0][1].value=o.authKey1,await t.setDataValues([]),await t.setDataValues(u),await r.window.showInformationMessage(l.AUTH_KEY_REFRESHED(l.SERVICE_KEY1_LABEL))})));const g=e.modelBuilder.button().withProps({title:l.REFRESH_KEY2,iconPath:o.IconPathHelper.refresh,ariaLabel:l.REFRESH_KEY2}).component();u.push(g.onDidClick((async e=>{const o=await(0,_.regenerateSqlMigrationServiceAuthKey)(i,n,a,s,c.name,"authKey2"),u=t.dataValues;u[1][1].value=o.authKey2,await t.setDataValues([]),await t.setDataValues(u),await r.window.showInformationMessage(l.AUTH_KEY_REFRESHED(l.SERVICE_KEY2_LABEL))})));const m=await(0,_.getSqlMigrationServiceAuthKeys)(i,n,a,s,c.name);await t.updateProperties({dataValues:[[{value:l.SERVICE_KEY1_LABEL},{value:m.authKey1},{value:e.modelBuilder.flexContainer().withItems([d,h]).component()}],[{value:l.SERVICE_KEY2_LABEL},{value:m.authKey2},{value:e.modelBuilder.flexContainer().withItems([p,g]).component()}]]})},t.createRegistrationInstructions=function(e,t){const i=e.modelBuilder.text().withProps({value:l.SERVICE_CONTAINER_HEADING,CSSStyles:{...h.LABEL_CSS}}).component(),n=e.modelBuilder.text().withProps({value:l.SERVICE_CONTAINER_DESCRIPTION1,CSSStyles:{...h.BODY_CSS}}).component(),r=e.modelBuilder.text().withProps({value:l.SERVICE_CONTAINER_DESCRIPTION2,CSSStyles:{...h.BODY_CSS}}).component(),o=e.modelBuilder.text().withProps({value:l.SERVICE_STEP1,CSSStyles:{...h.BODY_CSS},links:[{text:l.SERVICE_STEP1_LINK,url:"https://aka.ms/sql-migration-shir-download"}]}).component(),a=e.modelBuilder.text().withProps({value:l.SERVICE_STEP2,CSSStyles:{...h.BODY_CSS}}).component(),s=e.modelBuilder.text().withProps({value:l.SERVICE_STEP3(t),CSSStyles:{"margin-top":"10px","margin-bottom":"10px",...h.BODY_CSS}}).component();return e.modelBuilder.flexContainer().withItems([i,n,r,o,a,s]).withLayout({flexFlow:"column"}).component()},t.clearDropDown=async function(e){await e.updateProperty("value",void 0),await e.updateProperty("values",[])},t.getRecommendedConfiguration=async function(e,t){if(!A(t))return[];let i;switch(e){case g.SQLVM:return i=t._skuRecommendationResults.recommendations?.sqlVmRecommendationResults[0],i?.targetSku?[l.VM_CONFIGURATION(i.targetSku.virtualMachineSize.sizeName,i.targetSku.virtualMachineSize.vCPUsAvailable)]:[l.SKU_RECOMMENDATION_NO_RECOMMENDATION];case g.SQLDB:const e=t._skuEnableElastic?t._skuRecommendationResults.recommendations.elasticSqlDbRecommendationResults:t._skuRecommendationResults.recommendations.sqlDbRecommendationResults,n=e.filter((e=>null!==e.targetSku))?.length??0;return[l.RECOMMENDATIONS_AVAILABLE(n)];case g.SQLMI:if(i=t._skuEnableElastic?t._skuRecommendationResults.recommendations?.elasticSqlMiRecommendationResults[0]:t._skuRecommendationResults.recommendations?.sqlMiRecommendationResults[0],i?.targetSku){const e=0===i.targetSku.category?.sqlServiceTier?l.GENERAL_PURPOSE:l.BUSINESS_CRITICAL,t=0===i.targetSku.category?.hardwareType?l.GEN5:1===i.targetSku.category?.hardwareType?l.PREMIUM_SERIES:l.PREMIUM_SERIES_MEMORY_OPTIMIZED;return[l.MI_CONFIGURATION_PREVIEW(t,e,i.targetSku.computeSize,i.targetSku.storageMaxSizeInMb/1024)]}return[l.SKU_RECOMMENDATION_NO_RECOMMENDATION]}},t.hasRecommendations=A,t.clearDropDownWithLoading=async function(e){e.loading=!0,await e.updateProperty("value",void 0),await e.updateProperty("values",[])},t.promptUserForFile=async function(e){const t={defaultUri:r.Uri.file(C()),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:e},i=await r.window.showOpenDialog(t);return i&&i.length>0&&i[0]?i[0].fsPath:""}},1456:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaMigrationStatusString=t.getSchemaMigrationStatus=t.getMigrationType=t.selectDatabasesFromList=t.isOnlineMigration=t.isFullBackupRestored=t.isActiveMigration=t.canCutoverMigration=t.canRestartMigrationWizard=t.canRetryMigration=t.canDeleteMigration=t.canCancelMigration=t.hasRestoreBlockingReason=t.getMigrationFullBackupFiles=t.getMigrationBackupLocation=t.hasMigrationOperationId=t.getMigrationStatusString=t.getMigrationStatus=t.isTargetType=t.isFileShareMigration=t.isLogicalMigration=t.isShirMigration=t.isBlobMigration=t.isOfflineMigation=t.getMigrationModeEnum=t.getMigrationMode=t.getMigrationTargetTypeEnum=t.getMigrationTargetType=t.formatSizeKb=t.formatSizeBytes=t.formatCopyThroughPut=t.formatNumber=t.formatTime=t.formatDateTimeString=t.formatSecondsIntoReadableTime=t.IssueCategory=t.ColorCodes=t.ValidationErrorCodes=t.LoginMigrationStatusCodes=t.PipelineStatusCodes=t.ParallelCopyTypeCodes=t.InternalManagedDatabaseRestoreDetailsStatusCodes=t.InternalManagedDatabaseRestoreDetailsBackupSetStatusCodes=t.BackupTypeCodes=t.FileStorageTypeCodes=t.SQLTargetAssetType=void 0;const n=i(4294),r=i(3186),o=i(1285),a=i(2074);var s;!function(e){e.SQLMI="microsoft.sql/managedinstances",e.SQLVM="Microsoft.SqlVirtualMachine/sqlVirtualMachines",e.SQLDB="Microsoft.Sql/servers"}(s||(t.SQLTargetAssetType=s={})),t.FileStorageTypeCodes={FileShare:"FileShare",AzureBlob:"AzureBlob",None:"None"},t.BackupTypeCodes={Unknown:"Unknown",Database:"Database",TransactionLog:"TransactionLog",File:"File",DifferentialDatabase:"DifferentialDatabase",DifferentialFile:"DifferentialFile",Partial:"Partial",DifferentialPartial:"DifferentialPartial"},t.InternalManagedDatabaseRestoreDetailsBackupSetStatusCodes={None:"None",Skipped:"Skipped",Queued:"Queued",Restoring:"Restoring",Restored:"Restored"},t.InternalManagedDatabaseRestoreDetailsStatusCodes={None:"None",Initializing:"Initializing",NotStarted:"NotStarted",SearchingBackups:"SearchingBackups",Restoring:"Restoring",RestorePaused:"RestorePaused",RestoreCompleted:"RestoreCompleted",Waiting:"Waiting",CompletingMigration:"CompletingMigration",Cancelled:"Cancelled",Failed:"Failed",Completed:"Completed",Blocked:"Blocked"},t.ParallelCopyTypeCodes={None:"None",DynamicRange:"DynamicRange",PhysicalPartitionsOfTable:"PhysicalPartitionsOfTable"},t.PipelineStatusCodes={PreparingForCopy:"PreparingForCopy",Copying:"Copying",CopyFinished:"CopyFinished",RebuildingIndexes:"RebuildingIndexes",Succeeded:"Succeeded",Failed:"Failed",Canceled:"Canceled",Queued:"Queued",InProgress:"InProgress",Cancelled:"Cancelled"},t.LoginMigrationStatusCodes={InProgress:"InProgress",Succeeded:"Succeeded",Failed:"Failed"},t.ValidationErrorCodes={SqlInfoValidationFailed:"2056"},t.ColorCodes={NotReadyState_Red:"#E00B1C",ReadyState_Green:"#57A300",ReadyWithWarningState_Amber:"#DB7500"},t.IssueCategory={Issue:"Issue",Warning:"Warning"};const l=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),c=new Intl.NumberFormat(void 0,{style:"decimal",useGrouping:!0,minimumIntegerDigits:1,minimumFractionDigits:0,maximumFractionDigits:0}),u=new Intl.NumberFormat(void 0,{style:"decimal",useGrouping:!0,minimumIntegerDigits:2,minimumFractionDigits:0,maximumFractionDigits:0});function d(e){return a.formatSizeMb(e/1024)}function p(e){const t=e?.id?.toLowerCase()||"";return t?.indexOf(s.SQLMI.toLowerCase())>-1?a.SQL_MANAGED_INSTANCE:t?.indexOf(s.SQLVM.toLowerCase())>-1?a.SQL_VIRTUAL_MACHINE:t?.indexOf(s.SQLDB.toLowerCase())>-1?a.SQL_DATABASE:""}function h(e){switch(e?.properties?.kind){case n.AzureResourceKind.SQLMI:return r.MigrationTargetType.SQLMI;case n.AzureResourceKind.SQLVM:return r.MigrationTargetType.SQLVM;case n.AzureResourceKind.SQLDB:return r.MigrationTargetType.SQLDB;default:return}}function _(e){return g(e)?o.MigrationMode.OFFLINE:o.MigrationMode.ONLINE}function g(e){return!0===e?.properties?.offlineConfiguration?.offline}function m(e){return e?.properties?.kind===n.AzureResourceKind.ORACLETOSQLDB||e?.properties?.kind===n.AzureResourceKind.SQLDB}function S(e){return e?.properties?.backupConfiguration?.sourceLocation?.fileStorageType===t.FileStorageTypeCodes.FileShare}function f(e){return e?.properties.migrationStatus??e?.properties.provisioningState}function E(e){const t=e?.id??"",i=e?.properties?.migrationOperationId??"";return t.length>0&&i.length>0}function T(e){return(e?.properties.migrationStatusWarnings?.restoreBlockingReason??"").length>0}function C(e){const t=e?.properties?.migrationStatusDetails?.lastRestoredFilename??"";return e?.properties?.migrationStatusDetails?.isFullBackupRestored||t.length>0}function y(e){return _(e)===o.MigrationMode.ONLINE}function v(e){return e?.properties?.migrationStatusDetails?.sqlSchemaMigrationStatus?.status}t.formatSecondsIntoReadableTime=function(e){const t=e/3600,i=Math.floor(t),n=u.format(i),r=60*(t-i),o=Math.floor(r),a=u.format(o),s=60*(r-o),l=Math.floor(s);return n+":"+a+":"+u.format(l)},t.formatDateTimeString=function(e){return e?l.format(new Date(e)):""},t.formatTime=function(e){if(e>0){const t=new Date(e)?.toUTCString()?.match(/(\d\d:\d\d:\d\d)/)||[];return t?.length>0?t[0]??"":""}return""},t.formatNumber=function(e){return e>=0?c.format(e):""},t.formatCopyThroughPut=function(e){return e>=0?a.sizeFormatter.format(e/1024):""},t.formatSizeBytes=function(e){return d(e/1024)},t.formatSizeKb=d,t.getMigrationTargetType=p,t.getMigrationTargetTypeEnum=h,t.getMigrationMode=function(e){return g(e)?a.OFFLINE:a.ONLINE},t.getMigrationModeEnum=_,t.isOfflineMigation=g,t.isBlobMigration=function(e){return e?.properties?.backupConfiguration?.sourceLocation?.fileStorageType===o.FileStorageType.AzureBlob},t.isShirMigration=function(e){return m(e)||S(e)},t.isLogicalMigration=m,t.isFileShareMigration=S,t.isTargetType=function(e,t){return e?.properties?.kind===t},t.getMigrationStatus=f,t.getMigrationStatusString=function(e){const t=f(e)??r.DefaultSettingValue;return a.StatusLookup[t]??t},t.hasMigrationOperationId=E,t.getMigrationBackupLocation=function(e){return e?.properties?.backupConfiguration?.sourceLocation?.fileShare?.path??e?.properties?.backupConfiguration?.sourceLocation?.azureBlob?.blobContainerName??e?.properties?.migrationStatusDetails?.blobContainerName},t.getMigrationFullBackupFiles=function(e){return e?.properties?.migrationStatusDetails?.fullBackupSetInfo?.listOfBackupFiles?.map((e=>e.fileName)).join(",")},t.hasRestoreBlockingReason=T,t.canCancelMigration=function(e){const t=f(e);return E(e)&&(t===a.MigrationState.InProgress||t===a.MigrationState.Retriable||t===a.MigrationState.Creating||t===a.MigrationState.ReadyForCutover||t===a.MigrationState.UploadingFullBackup||t===a.MigrationState.UploadingLogBackup||t===a.MigrationState.Restoring)},t.canDeleteMigration=function(e){const t=f(e);return t===a.MigrationState.Canceled||t===a.MigrationState.Failed||t===a.MigrationState.Retriable||t===a.MigrationState.Succeeded},t.canRetryMigration=function(e){return f(e)===a.MigrationState.Retriable},t.canRestartMigrationWizard=function(e){const t=f(e);return t===a.MigrationState.Canceled||t===a.MigrationState.Retriable||t===a.MigrationState.Failed||t===a.MigrationState.Succeeded},t.canCutoverMigration=function(e){const t=f(e);return E(e)&&y(e)&&(t===a.MigrationState.ReadyForCutover||t===a.MigrationState.InProgress)&&C(e)&&!(p(e)===a.SQL_MANAGED_INSTANCE&&T(e))},t.isActiveMigration=function(e){const t=f(e);return t===a.MigrationState.Completing||t===a.MigrationState.Retriable||t===a.MigrationState.Creating||t===a.MigrationState.InProgress||t===a.MigrationState.ReadyForCutover||t===a.MigrationState.UploadingFullBackup||t===a.MigrationState.UploadingLogBackup||t===a.MigrationState.Restoring},t.isFullBackupRestored=C,t.isOnlineMigration=y,t.selectDatabasesFromList=function(e,t){const i=e?.map((e=>e.toLocaleLowerCase()))||[];if(i?.length>0)for(let e in t){const n=t[e],r=n[1].value?.toLocaleLowerCase();i.indexOf(r)>-1&&(n[0].value=!0)}return t},t.getMigrationType=function(e){var t=h(e);if(t===r.MigrationTargetType.SQLMI||t===r.MigrationTargetType.SQLVM)return a.BACKUP_AND_RESTORE;var i=e?.properties?.sqlSchemaMigrationConfiguration?.enableSchemaMigration??!1;return i&&e?.properties?.sqlDataMigrationConfiguration?.enableDataMigration?a.SCHEMA_AND_DATA:i?a.SCHEMA_ONLY:a.DATA_ONLY},t.getSchemaMigrationStatus=v,t.getSchemaMigrationStatusString=function(e){const t=v(e)??r.DefaultSettingValue;return a.SchemaMigrationStatusLookup[t]??t}},1386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconPathHelper=void 0;class i{static setExtensionContext(e){i.copy={light:e.asAbsolutePath("images/copy.svg"),dark:e.asAbsolutePath("images/copy.svg")},i.discard={light:e.asAbsolutePath("images/discard.svg"),dark:e.asAbsolutePath("images/discard.svg")},i.refresh={light:e.asAbsolutePath("images/refresh.svg"),dark:e.asAbsolutePath("images/refresh.svg")},i.sqlMiVideoThumbnail={light:e.asAbsolutePath("images/sqlMiVideoThumbnail.svg"),dark:e.asAbsolutePath("images/sqlMiVideoThumbnail.svg")},i.sqlVmVideoThumbnail={light:e.asAbsolutePath("images/sqlVmVideoThumbnail.svg"),dark:e.asAbsolutePath("images/sqlVmVideoThumbnail.svg")},i.migrationDashboardHeaderBackground={light:e.asAbsolutePath("images/dashboardWatermark.svg"),dark:e.asAbsolutePath("images/dashboardWatermark.svg")},i.sqlMigrationLogo={light:e.asAbsolutePath("images/migration.svg"),dark:e.asAbsolutePath("images/migration.svg")},i.inProgressMigration={light:e.asAbsolutePath("images/inProgress.svg"),dark:e.asAbsolutePath("images/inProgress.svg")},i.completedMigration={light:e.asAbsolutePath("images/succeeded.svg"),dark:e.asAbsolutePath("images/succeeded.svg")},i.notStartedMigration={light:e.asAbsolutePath("images/notStarted.svg"),dark:e.asAbsolutePath("images/notStarted.svg")},i.cutover={light:e.asAbsolutePath("images/cutover.svg"),dark:e.asAbsolutePath("images/cutover.svg")},i.sqlMiLogo={light:e.asAbsolutePath("images/sqlMI.svg"),dark:e.asAbsolutePath("images/sqlMI.svg")},i.sqlVmLogo={light:e.asAbsolutePath("images/sqlVM.svg"),dark:e.asAbsolutePath("images/sqlVM.svg")},i.sqlServerLogo={light:e.asAbsolutePath("images/sqlServer.svg"),dark:e.asAbsolutePath("images/sqlServer.svg")},i.sqlDatabaseLogo={light:e.asAbsolutePath("images/sqlDatabase.svg"),dark:e.asAbsolutePath("images/sqlDatabase.svg")},i.sqlDatabaseWarningLogo={light:e.asAbsolutePath("images/sqlDatabaseWarning.svg"),dark:e.asAbsolutePath("images/sqlDatabaseWarning.svg")},i.sqlDatabaseNotReadyLogo={light:e.asAbsolutePath("images/sqlDatabaseNotReady.svg"),dark:e.asAbsolutePath("images/sqlDatabaseNotReady.svg")},i.sqlDatabaseReadyLogo={light:e.asAbsolutePath("images/sqlDatabaseReady.svg"),dark:e.asAbsolutePath("images/sqlDatabaseReady.svg")},i.cancel={light:e.asAbsolutePath("images/cancel.svg"),dark:e.asAbsolutePath("images/cancel.svg")},i.warning={light:e.asAbsolutePath("images/warning.svg"),dark:e.asAbsolutePath("images/warning.svg")},i.info={light:e.asAbsolutePath("images/info.svg"),dark:e.asAbsolutePath("images/info.svg")},i.error={light:e.asAbsolutePath("images/error.svg"),dark:e.asAbsolutePath("images/error.svg")},i.completingCutover={light:e.asAbsolutePath("images/completingCutover.svg"),dark:e.asAbsolutePath("images/completingCutover.svg")},i.migrationService={light:e.asAbsolutePath("images/migrationService.svg"),dark:e.asAbsolutePath("images/migrationService.svg")},i.sendFeedback={light:e.asAbsolutePath("images/sendFeedback.svg"),dark:e.asAbsolutePath("images/sendFeedback.svg")},i.expandButtonClosed={light:e.asAbsolutePath("images/expandButtonClosedLight.svg"),dark:e.asAbsolutePath("images/expandButtonClosedDark.svg")},i.expandButtonOpen={light:e.asAbsolutePath("images/expandButtonOpenLight.svg"),dark:e.asAbsolutePath("images/expandButtonOpenDark.svg")},i.newSupportRequest={light:e.asAbsolutePath("images/newSupportRequest.svg"),dark:e.asAbsolutePath("images/newSupportRequest.svg")},i.emptyTable={light:e.asAbsolutePath("images/emptyTable.svg"),dark:e.asAbsolutePath("images/emptyTable.svg")},i.addAzureAccount={light:e.asAbsolutePath("images/noAzureAccount.svg"),dark:e.asAbsolutePath("images/noAzureAccount.svg")},i.retry={light:e.asAbsolutePath("images/retry.svg"),dark:e.asAbsolutePath("images/retry.svg")},i.redo={light:e.asAbsolutePath("images/redo.svg"),dark:e.asAbsolutePath("images/redo.svg")},i.edit={light:e.asAbsolutePath("images/edit.svg"),dark:e.asAbsolutePath("images/edit.svg")},i.restartDataCollection={light:e.asAbsolutePath("images/restartDataCollection.svg"),dark:e.asAbsolutePath("images/restartDataCollection.svg")},i.stop={light:e.asAbsolutePath("images/stop.svg"),dark:e.asAbsolutePath("images/stop.svg")},i.view={light:e.asAbsolutePath("images/view.svg"),dark:e.asAbsolutePath("images/view.svg")},i.sqlMigrationService={light:e.asAbsolutePath("images/sqlMigrationService.svg"),dark:e.asAbsolutePath("images/sqlMigrationService.svg")},i.addNew={light:e.asAbsolutePath("images/addNew.svg"),dark:e.asAbsolutePath("images/addNew.svg")},i.breadCrumb={light:e.asAbsolutePath("images/breadCrumb.svg"),dark:e.asAbsolutePath("images/breadCrumb.svg")},i.allTables={light:e.asAbsolutePath("images/allTables.svg"),dark:e.asAbsolutePath("images/allTables.svg")},i.notFound={light:e.asAbsolutePath("images/notFound.svg"),dark:e.asAbsolutePath("images/notFound.svg")},i.startDataCollection={light:e.asAbsolutePath("images/startDataCollection.svg"),dark:e.asAbsolutePath("images/startDataCollection.svg")},i.stopDataCollection={light:e.asAbsolutePath("images/stopDataCollection.svg"),dark:e.asAbsolutePath("images/stopDataCollection.svg")},i.import={light:e.asAbsolutePath("images/import.svg"),dark:e.asAbsolutePath("images/import.svg")},i.settings={light:e.asAbsolutePath("images/settings.svg"),dark:e.asAbsolutePath("images/settings.svg")},i.encryption={light:e.asAbsolutePath("images/encryption.svg"),dark:e.asAbsolutePath("images/encryption.svg")},i.openFolder={light:e.asAbsolutePath("images/openFolder.svg"),dark:e.asAbsolutePath("images/openFolder.svg")},i.emptyState={light:e.asAbsolutePath("images/blankCanvas.svg"),dark:e.asAbsolutePath("images/blankCanvas.svg")}}}t.IconPathHelper=i},9930:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookPathHelper=void 0;const n=i(2074);class r{static setExtensionContext(e){r.context=e,r.inlineMigrationNotebook={label:n.NOTEBOOK_INLINE_MIGRATION_TITLE,notebookPath:r.context.asAbsolutePath("notebooks/Inline_Migration_Notebook.ipynb")},r.sqlAssessmentNotebook={label:n.NOTEBOOK_SQL_MIGRATION_ASSESSMENT_TITLE,notebookPath:r.context.asAbsolutePath("notebooks/SQL_Assessment_Notebook.ipynb")}}static getAllMigrationNotebooks(){return[r.inlineMigrationNotebook,r.sqlAssessmentNotebook]}}t.NotebookPathHelper=r},2074:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLOCKERS=t.READY_WARN=t.NEEDS_REVIEW=t.READY=t.NOT_READY=t.ASSESSED_DBS_LABEL=t.SEVERITY_FINDINGS_LABEL=t.INSTANCE_FINDING_SUMMARY=t.ISSUES_LABEL=t.TOTAL_FINDINGS_LABEL=t.READINESS_SECTION_TITLE=t.ASSESSMENT_SUMMARY_TITLE=t.DETAILS_TITLE=t.SUMMARY_TITLE=t.MIGRATION_READINESS_LABEL=t.ASSESSMENT_FINDINGS_LABEL=t.MIGRATION_TIME_LABEL=t.DATABASES_ASSESSED_LABEL=t.ASSESSMENT_RESULTS_SUMMARY_LABEL_DESCRIPTION=t.IMPORT_ASSESSMENT_PAGE_HEADER=t.ASSESSMENT_RESULTS_PAGE_HEADER=t.ASSESSMENT_RESULTS_SUMMARY_LABEL_CAPS=t.ASSESSMENT_RESULTS_PAGE_TITLE=t.XEVENTS_ASSESSMENT_OPEN_FOLDER=t.XEVENTS_ASSESSMENT_HELPLINK=t.XEVENTS_ASSESSMENT_DESCRIPTION=t.XEVENTS_ASSESSMENT_TITLE=t.DATABASE_FOR_ASSESSMENT_DESCRIPTION=t.DATABASE_FOR_ASSESSMENT_PAGE_TITLE=t.RUN_VALIDATION=t.OPEN_SAVED_INFO_ERROR=t.RESUME_SESSION=t.START_NEW_SESSION=t.RESUME_TITLE=t.SAVE_AND_CLOSE_POPUP=t.SAVE_AND_CLOSE=t.WIZARD_TITLE=t.BackupFileInfoStatus=t.ProvisioningState=t.MigrationState=t.serviceProviderInitializationError=t.waitingForService=t.serviceCrashed=t.serviceCrashMessage=t.importAssessmentKey=t.configLogDebugInfo=t.sqlConfigSectionName=t.extensionConfigSectionName=t.providerId=t.serviceName=void 0,t.ASSESSMENT_TITLE=t.ASSESSMENT_FAILED=t.ASSESSMENT_COMPLETED=t.SELECT_DATABASE_TO_MIGRATE=t.SELECT_TARGET_TO_CONTINUE=t.SELECT_SKIP_ASSESSMENT_CHECK_TO_CONTINUE=t.TOTAL_DATABASES_SELECTED=t.VIEW_SELECT_BUTTON_LABEL=t.SKU_RECOMMENDATION_VIEW_ASSESSMENT_SQLDB=t.SKU_RECOMMENDATION_VIEW_ASSESSMENT_VM=t.SKU_RECOMMENDATION_VIEW_ASSESSMENT_MI=t.SELECT_AZURE_VM=t.SELECT_AZURE_MI=t.SKU_RECOMMENDATION_VM_TARGET_TEXT=t.SKU_RECOMMENDATION_SQLDB_TARGET_TEXT=t.SKU_RECOMMENDATION_MI_TARGET_TEXT=t.SKU_RECOMMENDATION_VM_CARD_TEXT=t.SKU_RECOMMENDATION_SQLDB_CARD_TEXT=t.SKU_RECOMMENDATION_MI_CARD_TEXT=t.ASSESSMENT_SUMMARY_AND_SKU_RECOMMENDATION_FOR_TARGETS_LABEL=t.AZURE_SQL_MI_DB_COUNT_UNDER_THRESHOLD=t.AZURE_SQL_MI_DB_COUNT_THRESHOLD_EXCEEDS_ERROR=t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_DETAIL=t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_BYPASS=t.PERF_DATA_COLLECTION_ERROR=t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_WITH_INFO=t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_WITH_STACK=t.SKU_RECOMMENDATION_ERROR_MESSAGE=t.SKU_RECOMMENDATION_ASSESSMENT_UNEXPECTED_ERROR=t.SKU_RECOMMENDATION_ASSESSMENT_ERROR=t.SKU_RECOMMENDATION_NO_RECOMMENDATION_REASON=t.SKU_RECOMMENDATION_NO_RECOMMENDATION=t.SKU_RECOMMENDATION_ERROR=t.SKU_RECOMMENDATION_ALL_SUCCESSFUL=t.ASSESSMENT_IN_PROGRESS_CONTENT=t.ASSESSMENT_IN_PROGRESS=t.ASSESSMENT_BLOCKING_ISSUE_TITLE=t.ASSESSMENT_SUMMARY_AND_RECOMMENDATIONS_PAGE_TITLE=t.ENCRYPTION_DESCRIPTION=t.ENCRYPTION_LABEL=t.FINDINGS_LABEL=t.NO_TARGET_SELECTED_LABEL=t.SELECT_TARGET_LABEL=t.READINESS_DESCRIPTION=t.WARNING_READINESS_DESCRIPTION=t.NON_READINESS_DESCRIPTION=t.DB_READINESS_SECTION_TITLE=t.SEVERITY_ISSUES_LABEL=t.TOTAL_ISSUES_LABEL=t.DATABASE_ISSUES_SUMMARY=void 0,t.AZURE_RECOMMENDATION_OPEN_EXISTING_FOLDER=t.AZURE_RECOMMENDATION_COLLECT_DATA_FOLDER=t.AZURE_RECOMMENDATION_OPEN_EXISTING=t.AZURE_RECOMMENDATION_COLLECT_DATA=t.AZURE_RECOMMENDATION_CHOOSE_METHOD=t.AZURE_RECOMMENDATION_DESCRIPTION2=t.AZURE_RECOMMENDATION_DESCRIPTION=t.AZURE_RECOMMENDATION_DATA_COLLECTION_CHOOSE_PATH=t.AZURE_RECOMMENDATION_DATA_COLLECTION_DEFAULT_PATH=t.AZURE_RECOMMENDATION_DATA_COLLECTION_POPUP_MESSAGE_LABEL=t.AZURE_RECOMMENDATION_STOP_POPUP=t.AZURE_RECOMMENDATION_START_POPUP=t.AZURE_RECOMMENDATION_START=t.AZURE_RECOMMENDATION_TOOLTIP_IN_PROGRESS=t.AZURE_RECOMMENDATION_TOOLTIP_NOT_STARTED=t.AZURE_RECOMMENDATION_STATUS_DATA_IMPORTED=t.AZURE_RECOMMENDATION_STATUS_MANUAL_REFRESH_TIMER=t.AZURE_RECOMMENDATION_STATUS_AUTO_REFRESH_TIMER=t.AZURE_RECOMMENDATION_STATUS_STOPPED=t.AZURE_RECOMMENDATION_STATUS_REFINING=t.AZURE_RECOMMENDATION_STATUS_IN_PROGRESS=t.AZURE_RECOMMENDATION_STATUS_NOT_ENABLED=t.AZURE_RECOMMENDATION_CARD_IN_PROGRESS=t.AZURE_RECOMMENDATION_CARD_NOT_ENABLED=t.IMPORT_PERFORMANCE_DATA_DIALOG_OPEN_FOLDER=t.IMPORT_PERFORMANCE_DATA_DIALOG_HELPER_MESSAGE=t.IMPORT_PERFORMANCE_DATA_DIALOG_DESCRIPTION=t.IMPORT_PERFORMANCE_DATA=t.RESTART_PERFORMANCE_COLLECTION=t.STOP_PERFORMANCE_COLLECTION=t.START_PERFORMANCE_COLLECTION=t.REFRESH_SKU_LABEL=t.REFRESH_ASSESSMENT_LABEL=t.GET_AZURE_RECOMMENDATION=t.RECOMMENDED_CONFIGURATION_SUMMARY_LABEL_DESCRIPTION=t.RECOMMENDED_CONFIGURATION_SUMMARY_LABEL_CAPS=t.RECOMMENDED_CONFIGURATION=t.RECOMMENDATIONS_TITLE=t.AZURE_RECOMMENDATION=t.SAVE_RECOMMENDATION_REPORT_SUCCESS=t.SAVE_ASSESSMENT_REPORT_SUCCESS=t.SAVE_RECOMMENDATION_REPORT=t.SAVE_ASSESSMENT_REPORT=t.LOAD_ASSESSMENT_REPORT=t.SQL_SERVER_INSTANCE=t.DATABASES_TABLE_TILE=t.ASSESSMENT_MIGRATION_WARNING_SQLMI=t.ASSESSMENT_MIGRATION_WARNING_SQLDB=t.ASSESSMENT_MIGRATION_WARNING=t.CAN_BE_MIGRATED=void 0,t.CPU_CORES=t.IO_LATENCY_REQUIREMENT=t.LOGS_IOPS_REQUIREMENT=t.DATA_IOPS_REQUIREMENT=t.LOG_STORAGE_REQUIREMENT=t.DATA_STORAGE_REQUIREMENT=t.MEMORY_REQUIREMENT=t.CPU_REQUIREMENT=t.VALUE=t.DIMENSION=t.CACHING_READ_WRITE=t.CACHING_READ_ONLY=t.CACHING_NONE=t.CACHING_NA=t.CACHING=t.UNKNOWN_DISK_TYPE=t.LOCAL_SSD=t.EPHEMERAL_TEMPDB=t.RECOMMENDED_STORAGE_CONFIGURATION=t.STORAGE_GB=t.STORAGE_HEADER=t.RECOMMENDED_TARGET_STORAGE_CONFIGURATION_INFO=t.RECOMMENDED_TARGET_STORAGE_CONFIGURATION=t.DISK_CONFIGURATION=t.STORAGE_CONFIGURATION=t.SQL_LOG_FILES=t.SQL_DATA_FILES=t.SQL_TEMPDB=t.SOURCE_PROPERTIES=t.RECOMMENDATION_REASON=t.PREMIUM_SERIES_MEMORY_OPTIMIZED=t.PREMIUM_SERIES=t.GEN5=t.HYPERSCALE=t.BUSINESS_CRITICAL=t.GENERAL_PURPOSE=t.MI_CONFIGURATION_PREVIEW=t.MI_CONFIGURATION=t.SQLDB_CONFIGURATION_PREVIEW=t.SQLDB_CONFIGURATION=t.VM_CONFIGURATION_PREVIEW=t.VM_CONFIGURATION=t.AZURE_CONFIGURATION=t.TARGET_DEPLOYMENT_TYPE=t.LOADING_RECOMMENDATIONS=t.RECOMMENDATIONS=t.RECOMMENDATIONS_AVAILABLE=t.ASSESSED_DBS=t.VIEW_DETAILS=t.FOLDER_NAME=void 0,t.LOGIN_MIGRATION_REFRESH_LOGIN_DATA_SUCCESSFUL=t.LOGIN_MIGRATION_REFRESHING_LOGIN_DATA=t.LOGIN_MIGRATION_IN_PROGRESS=t.LOGIN_MIGRATIONS_GET_CONNECTION_STRING=t.LOGIN_MIGRATE_BUTTON_TEXT=t.ENTER_AAD_DOMAIN_NAME=t.SELECT_LOGIN_TO_CONTINUE=t.LOGIN_MIGRATIONS_GET_LOGINS_ERROR=t.LOGIN_MIGRATIONS_GET_LOGINS_ERROR_TITLE=t.LOGIN_MIGRATIONS_GET_LOGINS_QUERY=t.LOGIN_MIGRATIONS_STATUS_PAGE_PREVIOUS_BUTTON_ERROR=t.LOGIN_MIGRATIONS_STATUS_PAGE_PREVIOUS_BUTTON_TITLE=t.LOGIN_MIGRATIONS_FAILED_STATUS_PAGE_DESCRIPTION=t.LOGIN_MIGRATIONS_COMPLETED_STATUS_PAGE_DESCRIPTION=t.LOGIN_MIGRATIONS_STATUS_PAGE_DESCRIPTION=t.LOGIN_MIGRATIONS_STATUS_PAGE_TITLE=t.LOGIN_MIGRATIONS_SELECT_LOGINS_WINDOWS_AUTH_WARNING=t.LOGIN_MIGRATIONS_SELECT_LOGINS_PAGE_TITLE=t.LOGIN_MIGRATIONS_AZURE_SQL_TARGET_PAGE_TITLE=t.LOGIN_MIGRATIONS_VM_TEXT=t.LOGIN_MIGRATIONS_DB_TEXT=t.LOGIN_MIGRATIONS_MI_TEXT=t.LOGIN_MIGRATIONS_TARGET_TYPE_SELECTION_TITLE=t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_PERMISSIONS_WARNING=t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_DATA_MIGRATION_WARNING=t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_PREVIEW_WARNING=t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_DESCRIPTION=t.LOGIN_WIZARD_TITLE=t.TIME_IN_MINUTES=t.LAST_REFRESHED_TIME=t.EMPTY_TIME=t.PERCENTILE=t.PERCENTAGE=t.ELASTIC_RECOMMENDATION_INFO=t.ELASTIC_RECOMMENDATION_LABEL=t.PERCENTAGE_UTILIZATION_TOOLTIP=t.PERCENTAGE_UTILIZATION=t.INVALID_SCALE_FACTOR=t.SCALE_FACTOR_TOOLTIP=t.SCALE_FACTOR=t.ENABLE_PREVIEW_SKU_INFO=t.ENABLE_PREVIEW_SKU=t.UPDATE=t.EDIT_PARAMETERS_TEXT=t.EDIT_RECOMMENDATION_PARAMETERS=t.EDIT_PARAMETERS=t.RECOMMENDATION_PARAMETERS=t.MS=t.IOPS=t.GB=void 0,t.TARGET_SUBSCRIPTION_INFO=t.INVALID_SQL_DATABASE_ERROR=t.NO_SQL_DATABASE_FOUND=t.NO_SQL_DATABASE_SERVER_FOUND=t.AZURE_SQL_DATABASE=t.INVALID_VIRTUAL_MACHINE_ERROR=t.NO_VIRTUAL_MACHINE_FOUND=t.AZURE_SQL_DATABASE_VIRTUAL_MACHINE_SHORT=t.AZURE_SQL_DATABASE_VIRTUAL_MACHINE=t.UNAVAILABLE_TARGET_PREFIX=t.INVALID_MANAGED_INSTANCE_ERROR=t.NO_MANAGED_INSTANCE_FOUND=t.AZURE_SQL_DATABASE_MANAGED_INSTANCE=t.SQL_MIGRATION_TROUBLESHOOTING_LINK=t.SQL_TARGET_SOURCE_COLLATION_NOT_SAME=t.SQL_TARGET_CONNECTION_SOURCE_NOT_MAPPED=t.SQL_TARGET_CONNECTION_DUPLICATE_TARGET_MAPPING=t.SQL_TARGET_MAPPING_ERROR_MISSING_TARGET=t.SQL_TARGET_CONNECTION_SUCCESS_LOGINS=t.SQL_TARGET_MISSING_SOURCE_DATABASES=t.SQL_TARGET_CONNECTION_SUCCESS=t.SQL_TARGET_CONNECTION_ERROR=t.AZURE_SQL_TARGET_CONNECTION_ERROR_TITLE=t.AZURE_SQL_TARGET_PAGE_DESCRIPTION=t.AZURE_SQL_TARGET_PAGE_TITLE=t.COLLECTING_TARGET_LOGINS_FAILED=t.LOGIN_MIGRATION_COMPLETED=t.MIGRATE_SERVER_ROLES_AND_SET_PERMISSIONS=t.ESTABLISH_USER_MAPPINGS=t.MIGRATE_LOGINS=t.NOT_STARTED=t.LOGIN_MIGRATIONS_LOGIN_STATUS_DETAILS_TITLE=t.LOGIN_MIGRATIONS_AAD_DOMAIN_NAME_INPUT_BOX_PLACEHOLDER=t.LOGIN_MIGRATIONS_AAD_DOMAIN_NAME_INPUT_BOX_LABEL=t.LOGIN_MIGRATION_STATUS_IN_PROGRESS=t.LOGIN_MIGRATION_STATUS_FAILED=t.LOGIN_MIGRATION_STATUS_SUCCEEDED=t.LOGINS_NOT_FOUND=t.LOGINS_FOUND=t.LOGIN_MIGRATIONS_ERROR=t.LOGIN_MIGRATIONS_FAILED=t.LOGIN_MIGRATIONS_COMPLETE=t.MIGRATING_SERVER_ROLES_AND_SET_PERMISSIONS_FAILED=t.MIGRATING_SERVER_ROLES_AND_SET_PERMISSIONS=t.ESTABLISHING_USER_MAPPINGS_FAILED=t.ESTABLISHING_USER_MAPPINGS=t.STARTING_LOGIN_MIGRATION_FAILED=t.STARTING_LOGIN_MIGRATION=t.LOGIN_MIGRATION_REFRESH_TARGET_LOGIN_DATA_FAILED=t.LOGIN_MIGRATION_REFRESH_SOURCE_LOGIN_DATA_FAILED=void 0,t.DATABASE_BACKUP_NETWORK_SHARE_AZURE_ACCOUNT_HEADER=t.DATABASE_BACKUP_NETWORK_SHARE_PASSWORD_PLACEHOLDER=t.DATABASE_BACKUP_NETWORK_SHARE_PASSWORD_LABEL=t.DATABASE_BACKUP_NETWORK_SHARE_WINDOWS_USER_LABEL=t.DATABASE_SERVICE_ACCOUNT_INFO_TEXT=t.DATABASE_BACKUP_NETWORK_SHARE_LOCATION_LABEL=t.DATABASE_BACKUP_NETWORK_SHARE_TABLE_HELP_TEXT=t.DATABASE_BACKUP_NC_NETWORK_SHARE_HELP_TEXT=t.DATABASE_BACKUP_NETWORK_SHARE_WINDOWS_USER_INFO=t.DATABASE_BACKUP_NETWORK_SHARE_LOCATION_INFO=t.DATABASE_BACKUP_NETWORK_SHARE_HEADER_TEXT=t.DATABASE_BACKUP_SQL_VM_PAGE_BLOB_URL_LABEL=t.DATABASE_BACKUP_SQL_VM_PAGE_BLOB_INFO=t.DATABASE_BACKUP_NC_BLOB_STORAGE_RADIO_LABEL=t.DATABASE_BACKUP_NC_NETWORK_SHARE_RADIO_LABEL=t.DATABASE_BACKUP_PAGE_DESCRIPTION=t.DATA_SOURCE_CONFIGURATION_PAGE_TITLE=t.SELECT_SERVICE_PLACEHOLDER=t.ACCOUNT_CREDENTIALS_REFRESH=t.SELECT_SERVICE_ERROR=t.SELECT_RESOURCE_GROUP_ERROR=t.SELECT_LOCATION_ERROR=t.SELECT_SUBSCRIPTION_ERROR=t.SELECT_TENANT_ERROR=t.SELECT_ACCOUNT_ERROR=t.SELECT_A_SERVICE=t.SELECT_A_RESOURCE_GROUP=t.SELECT_A_LOCATION=t.SELECT_A_SUBSCRIPTION=t.SELECT_A_TENANT=t.SELECT_AN_ACCOUNT=t.SELECT_AN_TARGET_TYPE=t.SQLDB_NOT_READY_ERROR=t.VM_NOT_READY_POWER_STATE_ERROR=t.VM_NOT_READY_IAAS_EXTENSION_ERROR=t.MI_NOT_READY_ERROR=t.AZURE_TENANT=t.accountLinkedMessage=t.INVALID_ACCOUNT_ERROR=t.ACCOUNT_LINK_BUTTON_LABEL=t.ACCOUNT_SELECTION_PAGE_NO_LINKED_ACCOUNTS_ERROR=t.ACCOUNTS_SELECTION_PAGE_DESCRIPTION=t.ACCOUNTS_SELECTION_PAGE_TITLE=t.DMS_RESOURCE_INFO=t.DMS_RESOURCE_GROUP_INFO=t.DMS_LOCATION_INFO=t.DMS_SUBSCRIPTION_INFO=t.TARGET_RESOURCE_INFO=t.TARGET_RESOURCE_GROUP_INFO=t.TARGET_LOCATION_INFO=void 0,t.TARGET_USERNAME_PLACEHOLDER=t.TARGET_USERNAME_LAbEL=t.TARGET_TABLE_MISSING=t.TARGET_TABLE_NOT_EMPTY=t.STORAGE_ACCOUNT_CONNECTIVITY_WARNING=t.MISSING_TARGET_PASSWORD_ERROR=t.MISSING_TARGET_USERNAME_ERROR=t.INVALID_STORAGE_ACCOUNT_ERROR=t.INVALID_RESOURCE_GROUP_ERROR=t.INVALID_LOCATION_ERROR=t.INVALID_SUBSCRIPTION_ERROR=t.NO_BLOBFOLDERS_FOUND=t.NO_BLOBFILES_FOUND=t.NO_BLOBCONTAINERS_FOUND=t.NO_FILESHARES_FOUND=t.NO_STORAGE_ACCOUNT_FOUND=t.RESOURCE_GROUP_NOT_FOUND=t.NO_LOCATION_FOUND=t.NO_SUBSCRIPTIONS_FOUND=t.WINDOWS_USER_ACCOUNT=t.NETWORK_SHARE_PATH_FORMAT=t.DATABASE_BACKUP_MIGRATION_MODE_OFFLINE_DESCRIPTION=t.DATABASE_BACKUP_MIGRATION_MODE_OFFLINE_LABEL=t.DATABASE_BACKUP_MIGRATION_MODE_ONLINE_DESCRIPTION=t.DATABASE_BACKUP_MIGRATION_MODE_ONLINE_LABEL=t.DATABASE_TABLE_VALIDATE_SELECTION_MESSAGE=t.DATABASE_TABLE_DATA_LOADING=t.DATABASE_TABLE_CONNECTION_ERROR_MESSAGE=t.DATABASE_TABLE_CONNECTION_ERROR=t.DATABASE_TABLE_SELECTED_TABLES_COLUMN_LABEL=t.DATABASE_TABLE_TARGET_DATABASE_COLUMN_LABEL=t.DATABASE_TABLE_SOURCE_DATABASE_COLUMN_LABEL=t.DATABASE_TABLE_REFRESH_LABEL=t.DATABASE_SCHEMA_MIGRATION_PROJECTS_EXTENSION=t.DATABASE_SCHEMA_MIGRATION_DACPAC_EXTENSION=t.DATABASE_SCHEMA_MIGRATION_HELP=t.DATABASE_TABLE_SELECTION_DESCRIPTION=t.DATABASE_TABLE_SELECTION_LABEL=t.DATABASE_BACKUP_MIGRATION_MODE_DESCRIPTION=t.DATABASE_BACKUP_MIGRATION_MODE_LABEL=t.DATABASE_BACKUP_BLOB_STORAGE_SUBSCRIPTION_LABEL=t.DATABASE_BACKUP_BLOB_STORAGE_TABLE_HELP_TEXT=t.DATABASE_BACKUP_BLOB_STORAGE_HELP_TEXT=t.DATABASE_BACKUP_BLOB_STORAGE_HEADER_TEXT=t.DATABASE_BACKUP_BLOB_FOLDER_STRUCTURE_WARNING=t.DATABASE_BACKUP_BLOB_FOLDER_STRUCTURE_INFO=t.DATABASE_ALREADY_EXISTS_VM_INFO=t.DATABASE_ALREADY_EXISTS_MI=t.DUPLICATE_NAME_ERROR=t.DATABASE_BACKUP_NETWORK_SHARE_AZURE_ACCOUNT_HELP=void 0,t.SQL_MIGRATION_SERVICE_DETAILS_HEADER=t.AUTHENTICATION_KEYS=t.SERVICE_OFFLINE_ERROR=t.INVALID_SERVICE_ERROR=t.CREATE_NEW_RESOURCE_GROUP=t.CREATE_NEW_MIGRATION_SERVICE=t.CREATE_NEW=t.SQL_MIGRATION_SERVICE_NOT_FOUND_ERROR=t.IR_PAGE_DESCRIPTION=t.IR_PAGE_TITLE=t.SELECT_RESOURCE_GROUP=t.VALIDATION_MESSAGE_NOT_RUN=t.VALIDATION_MESSAGE_CANCELED=t.VALIDATION_MESSAGE_CANCELED_ERRORS=t.VALIDATION_MESSAGE_SUCCESS=t.VALIDATION_DIALOG_TITLE=t.TABLE_SELECTION_HASROWS_COLUMN=t.TABLE_SELECTION_TABLENAME_COLUMN=t.TABLE_SELECTION_CANCEL_BUTTON=t.TABLE_SELECTION_UPDATE_BUTTON=t.TABLE_SELECTION_FILTER=t.DATABASE_LOADING_TABLES=t.SELECT_TABLES_FOR_MIGRATION=t.TABLE_SELECTED_COUNT=t.TABLE_SELECTION_COUNT=t.TABLE_SELECTION_EDIT=t.SELECT_DATABASE_TABLES_TITLE=t.MISSING_TABLE_NAME_COLUMN=t.SELECT_BLOB_CONTAINER=t.SELECT_STORAGE_ACCOUNT=t.SELECT_RESOURCE_GROUP_PROMPT=t.SQL_SOURCE_DETAILS=t.PROVIDE_UNIQUE_CONTAINERS=t.INVALID_TARGET_NAME_ERROR=t.INVALID_USER_ACCOUNT=t.INVALID_NETWORK_SHARE_LOCATION=t.INVALID_NON_PAGE_BLOB_BACKUP_FILE_ERROR=t.INVALID_BLOB_LAST_BACKUP_FOLDER_ERROR=t.INVALID_BLOB_LAST_BACKUP_FILE_ERROR=t.INVALID_BLOB_CONTAINER_ERROR=t.INVALID_BLOB_STORAGE_ACCOUNT_ERROR=t.INVALID_BLOB_RESOURCE_GROUP_ERROR=t.MAP_TARGET_PLACEHOLDER=t.MAP_TARGET_COLUMN=t.MAP_SOURCE_COLUMN=t.MAP_SOURCE_TARGET_DESCRIPTION=t.MAP_SOURCE_TARGET_HEADING=t.TARGET_CONNECTION_LABEL=t.TARGET_PASSWORD_PLACEHOLDER=t.TARGET_PASSWORD_LAbEL=void 0,t.VALIDATION_STATE_SUCCEEDED=t.VALIDATION_STATE_RUNNING=t.VALIDATION_STATE_PENDING=t.VALIDATION_STATE_CANCELED=t.SERVICE_SELECTION_LOCATION_MESSAGE=t.COPY_THROUGHPUT_INFO=t.DATA_UPLOADED_INFO=t.NAME_OF_NEW_RESOURCE_GROUP=t.RESOURCE_GROUP_DESCRIPTION=t.RESOURCE_GROUP_CREATED=t.CREATING_RESOURCE_GROUP=t.APPLY=t.DMS_PROVISIONING_FAILED=t.DATA_MIGRATION_SERVICE_CREATED_SUCCESSFULLY=t.TEST_CONNECTION=t.NEW_RESOURCE_GROUP=t.OK=t.SERVICE_STATUS_REFRESH_ERROR=t.SERVICE_NOT_FOUND=t.INVALID_SERVICE_NAME_ERROR=t.SERVICE_READY=t.SERVICE_ERROR_NOT_READY=t.SERVICE_NOT_READY=t.AUTH_KEY_REFRESHED=t.AUTH_KEY_COLUMN_HEADER=t.COPY_KEY2=t.COPY_KEY1=t.REFRESH_KEY2=t.REFRESH_KEY1=t.SERVICE_KEY2_COPIED_HELP=t.SERVICE_KEY1_COPIED_HELP=t.SERVICE_KEY2_LABEL=t.SERVICE_KEY1_LABEL=t.SERVICE_CONNECTION_STATUS=t.SERVICE_STEP3=t.SERVICE_STEP2=t.SERVICE_STEP1_LINK=t.SERVICE_STEP1=t.SERVICE_CONTAINER_DESCRIPTION2=t.SERVICE_CONTAINER_DESCRIPTION1=t.SERVICE_CONTAINER_HEADING=t.LOADING_MIGRATION_SERVICES=t.MIGRATION_SERVICE_DIALOG_DESCRIPTION=t.MIGRATION_SERVICE_TARGET_INFO=t.MIGRATION_SERVICE_NAME_INFO=t.MIGRATION_SERVICE_RESOURCE_GROUP_INFO=t.MIGRATION_SERVICE_LOCATION_INFO=t.MIGRATION_SERVICE_SUBSCRIPTION_INFO=t.CREATE_MIGRATION_SERVICE_TITLE=t.DATABASE_MIGRATION_SERVICE_AUTHENTICATION_KEYS=void 0,t.CLEAR=t.ALL_FIELDS_REQUIRED=t.IMPACT=t.NEW_SUPPORT_REQUEST=t.COPY_THROUGHPUT=t.DATA_UPLOADED=t.CLOSE=t.AZURE_SQL=t.TARGET=t.VIEW_ALL=t.USER_ACCOUNT=t.TYPE=t.CANCEL=t.IMPORT=t.CREATE=t.REFRESH=t.LOCATION=t.NAME=t.RESOURCE_GROUP=t.STORAGE_ACCOUNT=t.SUBSCRIPTION=t.LEARN_MORE_ABOUT_PRE_REQS=t.LEARN_MORE=t.ERROR=t.WARNING=t.VALIDATE_IR_SQLDB_VALIDATION_RESULT_ERROR=t.VALIDATE_IR_VALIDATION_RESULT_ERROR=t.VALIDATE_IR_VALIDATION_RESULT_API_ERROR=t.VALIDATE_IR_VALIDATION_RESULT_LABEL_TARGET_DATABASE=t.VALIDATE_IR_VALIDATION_RESULT_LABEL_NETWORK_SHARE=t.VALIDATE_IR_VALIDATION_RESULT_LABEL_SOURCE_DATABASE=t.VALIDATE_IR_VALIDATION_RESULT_LABEL_STORAGE=t.VALIDATE_IR_VALIDATION_RESULT_LABEL_SHIR=t.VALIDATE_IR_COLUMN_STATUS=t.VALIDATE_IR_COLUMN_VALIDATION_STEPS=t.VALIDATE_IR_VALIDATION_STATUS_ERROR=t.VALIDATE_IR_VALIDATION_STATUS_ERROR_COUNT=t.VALIDATE_IR_ERROR_GATEWAY_TIMEOUT=t.VALIDATE_IR_VALIDATION_STATUS=t.VALIDATE_IR_VALIDATION_COMPLETED_ERRORS=t.VALIDATE_IR_VALIDATION_CANCELED=t.VALIDATE_IR_VALIDATION_COMPLETED=t.VALIDATE_IR_RESULTS_HEADING=t.VALIDATE_IR_COPY_RESULTS=t.VALIDATE_IR_STOP_VALIDATION=t.VALIDATE_IR_UNSUCCESSFUL_REVALIDATION=t.VALIDATE_IR_START_VALIDATION=t.VALIDATE_IR_HEADING=t.VALIDATE_IR_DONE_BUTTON=t.VALIDATION_STATE_FAILED=void 0,t.SHOW_STATUS=t.MIGRATION_CUTOVER_CARD=t.MIGRATION_COMPLETED=t.MIGRATION_FAILED=t.MIGRATION_IN_PROGRESS=t.PRE_REQ_4=t.PRE_REQ_3=t.PRE_REQ_2=t.PRE_REQ_1=t.PRE_REQ_TITLE=t.HELP_TITLE=t.DATABASE_MIGRATION_STATUS=t.DASHBOARD_LOGIN_MIGRATE_TASK_BUTTON_DESCRIPTION=t.DASHBOARD_LOGIN_MIGRATE_TASK_BUTTON_TITLE=t.DASHBOARD_MIGRATE_TASK_BUTTON_DESCRIPTION=t.DASHBOARD_MIGRATE_TASK_BUTTON_TITLE=t.DASHBOARD_DESCRIPTION=t.DASHBOARD_TITLE=t.DASHBOARD_REFRESH_MIGRATIONS_LABEL=t.DASHBOARD_REFRESH_MIGRATIONS_TITLE=t.NOTEBOOK_OPEN_ERROR=t.NOTEBOOK_SQL_MIGRATION_ASSESSMENT_TITLE=t.NOTEBOOK_INLINE_MIGRATION_TITLE=t.NOTEBOOK_QUICK_PICK_PLACEHOLDER=t.TOTAL_TABLES_SELECTED=t.COUNT_DATABASES=t.DATABASE_TO_BE_MIGRATED=t.SHIR=t.AZURE_STORAGE_ACCOUNT_TO_UPLOAD_BACKUPS=t.BACKUP_LOCATION=t.MODE=t.SOURCE_DATABASES=t.BLOB_CONTAINER_STORAGE_ACCOUNT=t.BLOB_CONTAINER_RESOURCE_GROUP=t.BLOB_CONTAINER_FOLDER=t.BLOB_CONTAINER_LAST_BACKUP_FILE=t.BLOB_CONTAINER=t.NETWORK_SHARE_PATH=t.NETWORK_SHARE=t.SUMMARY_AZURE_STORAGE=t.SUMMARY_AZURE_STORAGE_SUBSCRIPTION=t.SUMMARY_DATABASE_COUNT_LABEL=t.SUMMARY_SQLDB_TYPE=t.SUMMARY_VM_TYPE=t.SUMMARY_MI_TYPE=t.SUMMARY_PAGE_TITLE=t.START_MIGRATION_TEXT=t.OPEN=t.BROWSE=t.SELECT=void 0,t.CANNOT_START_CUTOVER_ERROR=t.LAST_LSN=t.FIRST_LSN=t.BACKUP_START_TIME=t.STATUS=t.BACKUP_FILE_COLUMN_RESTORE_FINISH_DATE=t.BACKUP_FILE_COLUMN_RESTORE_START_DATE=t.BACKUP_FILE_COLUMN_NUMBER_OF_STRIPES=t.BACKUP_FILE_COLUMN_BACKUP_SIZE_MB=t.BACKUP_FILE_COLUMN_RESTORE_STATUS=t.BACKUP_FILE_COLUMN_FILE_STATUS=t.BACKUP_FILE_COLUMN_FILE_NAME=t.FIELD_LABEL_MI_RESTORE_STATE=t.FIELD_LABEL_RESTORE_PERCENT_COMPLETED=t.FIELD_LABEL_RESTORE_PLAN_SIZE=t.FIELD_LABEL_RESTORED_SIZE=t.FIELD_LABEL_RESTORING_FILES=t.FIELD_LABEL_RESTORED_FILES=t.FIELD_LABEL_LAST_RESTORED_FILE_TIME=t.FIELD_LABEL_UNRESTORABLE_FILES=t.FIELD_LABEL_SKIPPED_FILES=t.FIELD_LABEL_QUEUED_FILES=t.FIELD_LABEL_DETECTED_FILES=t.FIELD_LABEL_PENDING_DIFF_BACKUPS=t.FIELD_LABEL_LAST_UPLOADED_FILE_TIME=t.FIELD_LABEL_LAST_UPLOADED_FILE=t.MIGRATION_DELETE_ERROR=t.MIGRATION_CANCELLATION_ERROR=t.MIGRATION_STATUS_REFRESH_ERROR=t.ACTIVE_BACKUP_FILES=t.ALL_BACKUPS_RESTORED=t.CURRENTLY_RESTORING_FILE=t.LAST_APPLIED_BACKUP_FILES_TAKEN_ON=t.LAST_APPLIED_BACKUP_FILES=t.LAST_APPLIED_LSN=t.FULL_BACKUP_FILES=t.MIGRATION_STATUS_FILTER=t.MIGRATION_STATUS=t.TARGET_VERSION=t.TARGET_SERVER=t.TARGET_TABLE_COUNT_NAME=t.TARGET_DATABASE_NAME=t.SOURCE_VERSION=t.SOURCE_SERVER=t.SOURCE_DATABASE=t.COMPLETE_CUTOVER=t.MIGRATION_CUTOVER=t.BREADCRUMB_MIGRATIONS=t.FEEDBACK_ISSUE_TITLE=t.MIGRATION_INPROGRESS_WARNING=void 0,t.STATUS_ONGOING=t.STATUS_ALL=t.SELECT_SERVICE_MESSAGE=t.ADD_ACCOUNT_MESSAGE=t.ADD_ACCOUNT=t.NO_PENDING_BACKUPS=t.SIZE_COLUMN_HEADER=t.FILE_NAME=t.MIGRATION_CANNOT_CUTOVER=t.MIGRATION_CANNOT_DELETE=t.MIGRATION_CANNOT_CANCEL=t.CUTOVER_IN_PROGRESS=t.CONFIRM_CUTOVER_CHECKBOX=t.PENDING_BACKUPS=t.LAST_SCAN_COMPLETED=t.LAST_FILE_RESTORED=t.CUTOVER_HELP_STEP3_BLOB_CONTAINER=t.CUTOVER_HELP_STEP3_NETWORK_SHARE=t.CUTOVER_HELP_STEP2_BLOB_CONTAINER=t.CUTOVER_HELP_STEP2_NETWORK_SHARE=t.CUTOVER_HELP_STEP1=t.CUTOVER_HELP_MAIN=t.BUSINESS_CRITICAL_INFO=t.COMPLETING_CUTOVER_WARNING=t.FILTER_SERVER_OBJECTS_ARIA_LABEL=t.FILTER_SERVER_OBJECTS_PLACEHOLDER=t.SERVER_OBJECTS_CANCELLED_TABLES_LABEL=t.SERVER_OBJECTS_FAILED_TABLES_LABEL=t.SERVER_OBJECTS_SUCCESSFUL_TABLES_LABEL=t.SERVER_OBJECTS_IN_PROGRESS_TABLES_LABEL=t.SERVER_OBJECTS_ALL_TABLES_LABEL=t.SERVER_OBJECTS_LABEL=t.SERVER_OBJECTS_FIELD_LABEL=t.REFRESH_BUTTON_TEXT=t.MIGRATION_CUTOVER_ERROR=t.EMPTY_TABLE_SUBTEXT=t.EMPTY_TABLE_TEXT=t.NA=t.NO=t.YES=t.RETRY_MIGRATION_PROMPT=t.RETRY_MIGRATION_SUMMARY=t.RETRY_MIGRATION_TITLE=t.DELETE_MIGRATION_CONFIRMATION=t.CANCEL_MIGRATION_CONFIRMATION=t.DETAILS_COPIED=t.COPY_MIGRATION_DETAILS=t.ACTIVE_BACKUP_FILES_ITEMS=t.DELETE_MIGRATION=t.CANCEL_MIGRATION=void 0,t.ParallelCopyType=t.PipelineRunStatus=t.StatusLookup=t.ERROR_DIALOG_ARIA_CLICK_VIEW_ERROR_DETAILS=t.LOAD_MIGRATION_LIST_ERROR=t.OPEN_MIGRATION_SERVICE_ERROR=t.OPEN_MIGRATION_TARGET_ERROR=t.OPEN_MIGRATION_DETAILS_ERROR=t.MIGRATION_ERROR_DETAILS_LABEL=t.MIGRATION_ERROR_DETAILS_TITLE=t.STATUS_VALUE=t.CONTEXT_MENU_TOOL_TIP=t.FINISH_TIME_TOOL_TIP=t.START_TIME_TOOL_TIP=t.MIGRATION_MODE_TOOL_TIP=t.TARGET_DATABASE_TOOL_TIP=t.TARGET_SERVER_TOOL_TIP=t.AZURE_SQL_TARGET_TOOL_TIP=t.DURATION_TOOL_TIP=t.STATUS_TOOL_TIP=t.SRC_DATABASE_TOOL_TIP=t.SRC_SERVER_TOOL_TIP=t.FINISH_TIME=t.START_TIME=t.MIGRATION_MODE=t.TARGET_DATABASE_COLUMN=t.TARGET_SERVER_COLUMN=t.TARGET_AZURE_SQL_INSTANCE_NAME=t.SQL_DATABASE=t.SQL_VIRTUAL_MACHINE=t.SQL_MANAGED_INSTANCE=t.AZURE_SQL_TARGET=t.DURATION=t.DATABASE_MIGRATION_SERVICE=t.STATUS_COLUMN=t.LOGIN_MIGRATION_STATUS_COLUMN=t.LOGIN_TARGET_STATUS_COLUMN=t.LOGIN_STATUS_COLUMN=t.DEFAULT_DATABASE=t.LOGIN_TYPE=t.SOURCE_LOGIN=t.SRC_SERVER=t.SRC_DATABASE=t.DATABASE=t.OFFLINE=t.ONLINE=t.SEARCH_FOR_MIGRATIONS=t.STATUS_FAILED=t.STATUS_SUCCEEDED=t.STATUS_COMPLETING=void 0,t.DATABASES=t.IMPACT_OBJECT_NAME=t.IMPACT_OBJECT_TYPE=t.BLOCKING_ISSUE_ARIA_LABEL=t.NO_RESULTS_AVAILABLE=t.NO_ISSUES_FOUND_SQLDB=t.NO_ISSUES_FOUND_MI=t.NO_ISSUES_FOUND_VM=t.SELECT_DB_PROMPT=t.ISSUES_DETAILS=t.WARNINGS_DETAILS=t.TARGET_PLATFORM=t.MORE_INFO=t.RECOMMENDATION=t.DESCRIPTION=t.NAMES_LABEL=t.TYPES_LABEL=t.ASSESSMENT_RESULTS=t.OBJECT_DETAILS=t.IMPACTED_OBJECTS=t.WARNINGS=t.INSTANCE=t.SEARCH=t.ISSUES=t.SELECT_DATABASE_TO_CONTINUE=t.OFFLINE_CAPS=t.DATABASE_MIGRATE_TEXT=t.SIZE=t.USERNAME=t.SERVER=t.ENTER_YOUR_SQL_CREDS=t.SOURCE_CREDENTIALS=t.SOURCE_CONFIGURATION=t.SQL_MIGRATION_SERVICE_DETAILS_STATUS_UNAVAILABLE=t.SQL_MIGRATION_SERVICE_DETAILS_AUTH_KEYS_TITLE=t.SQL_MIGRATION_SERVICE_DETAILS_AUTH_KEYS_LABEL=t.SQL_MIGRATION_SERVICE_DETAILS_IR_LABEL=t.SQL_MIGRATION_SERVICE_DETAILS_BUTTON_LABEL=t.SQL_MIGRATION_SERVICE_DETAILS_SUB_TITLE=t.formatSizeMb=t.sizeFormatter=t.SEC=t.MINUTE=t.DAYS=t.HRS=t.STATUS_WARNING_COUNT=t.InternalManagedDatabaseRestoreDetailsStatusLookup=t.BackupSetRestoreStatusLookup=t.BackupTypeLookup=t.DiskTypeLookup=void 0,t.COMMUNITY_SUPPORT_NOTE=t.COMMUNITY_SUPPORT_DESCRIPTION=t.COMMUNITY_SUPPORT_TITLE=t.SUPPORT_REQUEST_NOTE=t.SUPPORT_REQUEST_DESCRIPTION=t.SUPPORT_REQUEST_TITLE=t.SUPPORT_RESOURCES_DESCRIPTION=t.SUPPORT_RESOURCES_TITLE=t.HELP_SUPPORT_TITLE=t.DESKTOP_MIGRATIONS_TAB_TITLE=t.DESKTOP_DASHBOARD_TAB_TITLE=t.DESKTOP_FEEDBACK_BUTTON_DESCRIPTION=t.DESKTOP_FEEDBACK_BUTTON_LABEL=t.DESKTOP_HELP_SUPPORT_BUTTON_DESCRIPTION=t.DESKTOP_HELP_SUPPORT_BUTTON_LABEL=t.DESKTOP_LOGIN_MIGRATION_BUTTON_DESCRIPTION=t.DESKTOP_LOGIN_MIGRATION_BUTTON_LABEL=t.DESKTOP_MIGRATION_BUTTON_DESCRIPTION=t.DESKTOP_IMPORT_MIGRATION_BUTTON_DESCRIPTION=t.DESKTOP_IMPORT_MIGRATION_BUTTON_LABEL=t.DESKTOP_MIGRATION_BUTTON_LABEL=t.MIGRATION_SERVICE_DESCRIPTION=t.MIGRATION_SERVICE_SERVICE_PROMPT=t.MIGRATION_SERVICE_SELECT_SERVICE_PROMPT=t.MIGRATION_SERVICE_SELECT_SERVICE_LABEL=t.MIGRATION_SERVICE_SELECT_HEADING=t.MIGRATION_SERVICE_CLEAR=t.MIGRATION_SERVICE_SELECT_APPLY_LABEL=t.MIGRATION_SERVICE_SELECT_TITLE=t.DATABASE_BACKUP_PAGE_LOAD_ERROR=t.INVALID_OWNER_URI=t.MIGRATION_RESTART_ERROR=t.RESTART_MIGRATION_WIZARD=t.MIGRATION_CANNOT_RESTART=t.MIGRATION_RETRY_ERROR=t.RETRY_MIGRATION=t.MIGRATION_CANNOT_RETRY=t.SAVED_ASSESSMENT_RESULT=t.CANCEL_LABEL=t.NEXT_LABEL=t.ASCENDING_LABEL=t.SORT_LABEL=t.STATUS_LABEL=t.REFRESH_BUTTON_LABEL=t.AUTHENTICATION_TYPE=t.WARNINGS_COUNT=t.ISSUES_COUNT=t.NUMBER_LOGINS_MIGRATING=t.LOGINS_SELECTED=t.DATABASES_SELECTED=void 0,t.TDE_VALIDATION_STATUS_SUCCEEDED=t.TDE_VALIDATION_STATUS_RUNNING=t.TDE_VALIDATION_STATUS_PENDING=t.TDE_VALIDATION_REQUIREMENTS_MESSAGE=t.TDE_VALIDATION_TITLE=t.TDE_VALIDATION_GROUP_TITLE=t.TDE_WIZARD_MSG_EMPTY=t.TDE_WIZARD_MSG_TDE=t.TDE_WIZARD_MSG_MANUAL=t.TDE_BUTTON_CAPTION=t.TDE_WIZARD_MIGRATION_OPTION_MANUAL=t.TDE_WIZARD_MIGRATION_OPTION_ADS_CONFIRM=t.TDE_WIZARD_MIGRATION_OPTION_ADS=t.TDE_WIZARD_MIGRATION_CAPTION=t.TDE_WIZARD_DESCRIPTION=t.TDE_WIZARD_TITLE=t.RESULTS_INFO_BOX_STATUS=t.ALL_STEPS_COMPLETED_ERRORS=t.ALL_STEPS_SUCCEEDED=t.SOME_STEPS_ARE_STILL_RUNNING=t.COMPLETED_MULTI_STEPS_HEADING=t.RUNNING_MULTI_STEPS_HEADING=t.STEPS_TITLE=t.MULTI_STEP_RESULTS_HEADING=t.COPY_RESULTS=t.SQLDB_COL_COPY_START=t.SQLDB_COL_USED_PARALLEL_COPIES=t.SQLDB_COL_PARRALEL_COPY_TYPE=t.SQLDB_COL_COPY_DURATION=t.SQLDB_COL_COPY_THROUGHPUT=t.SQLDB_COL_ROWS_COPIED=t.SQLDB_COL_ROWS_READ=t.SQLDB_COL_DATA_WRITTEN=t.SQLDB_COL_DATA_READ=t.SQLDB_COL_TABLE_NAME=t.TABLE_MIGRATION_STATUS_LABEL=t.LOGIN_MIGRATION_STATUS_LABEL=t.DATABASE_MIGRATION_STATUS_LABEL=t.TABLE_MIGRATION_STATUS_TITLE=t.DATABASE_MIGRATION_STATUS_TITLE=t.DASHBOARD_HELP_DESCRIPTION_DMS_GUIDE=t.DASHBOARD_HELP_LINK_DMS_GUIDE=t.DASHBOARD_HELP_DESCRIPTION_SQLDBTUTORIAL=t.DASHBOARD_HELP_LINK_SQLDB_TUTORIAL=t.DASHBOARD_HELP_DESCRIPTION_VMTUTORIAL=t.DASHBOARD_HELP_LINK_VM_TUTORIAL=t.DASHBOARD_HELP_DESCRIPTION_MI_TUTORIAL=t.DASHBOARD_HELP_LINK_MI_TUTORIAL=t.DASHBOARD_HELP_DESCRIPTION_MIGRATE_USING_ADS=t.DASHBOARD_HELP_LINK_MIGRATE_USING_ADS=void 0,t.SCHEMA_MIGRATION_CHECKBOX_INFO=t.DATA_MIGRATION_HEADER=t.SCHEMA_MIGRATION_HEADER=t.DATA_MIGRATION_INFO=t.SCHEMA_MIGRATION_INFO=t.ALL_SOURCE_TABLES_EMPTY=t.FULL_SCHEMA_ON_TARGET=t.PARTIAL_SCHEMA_ON_TARGET=t.FULL_SCHEMA_MISSING_ON_TARGET=t.TDE_COMPLETED_STATUS=t.TDE_MIGRATE_STATUS_ERROR=t.TDE_MIGRATE_MESSAGE_NOT_RUN=t.TDE_MIGRATE_MESSAGE_CANCELED=t.TDE_MIGRATE_MESSAGE_CANCELED_ERRORS=t.TDE_MIGRATE_MESSAGE_SUCCESS=t.TDE_MIGRATE_VALIDATION_STATUS=t.TDE_MIGRATE_VALIDATION_COMPLETED_ERRORS=t.TDE_MIGRATE_VALIDATION_CANCELED=t.TDE_MIGRATE_VALIDATION_COMPLETED=t.TDE_MIGRATE_RESULTS_HEADING_COMPLETED=t.TDE_MIGRATE_RESULTS_HEADING_PREVIOUS=t.TDE_MIGRATE_RESULTS_HEADING=t.TDE_MIGRATE_COPY_RESULTS=t.TDE_MIGRATE_RETRY_VALIDATION=t.TDE_MIGRATE_COLUMN_STATUS=t.TDE_MIGRATE_COLUMN_DATABASES=t.TDE_MIGRATE_REQUIRED=t.TDE_MIGRATE_HEADING=t.TDE_MIGRATE_DONE_BUTTON=t.TDE_MIGRATEDIALOG_TITLE=t.STATE_FAILED=t.STATE_SUCCEEDED=t.STATE_RUNNING=t.STATE_PENDING=t.STATE_CANCELED=t.TDE_WIZARD_CERT_MIGRATION_BUTTON_MUST_BE_CLICKED=t.TDE_MIGRATE_BUTTON=t.TDE_WIZARD_CERTS_NETWORK_SHARE_INFO=t.TDE_WIZARD_CERTS_NETWORK_SHARE_PLACEHOLDER=t.TDE_WIZARD_CERTS_NETWORK_SHARE_LABEL=t.TDE_WIZARD_ADS_CERTS_INFO=t.TDE_WIZARD_MIGRATION_OPTION_MANUAL_WARNING=t.TDE_WIZARD_DATABASES_SELECTED=t.TDE_MSG_DATABASES_SELECTED=t.TDE_MIGRATION_ERROR_DB=t.TDE_MIGRATION_ERROR=t.TDE_VALIDATION_TROUBLESHOOTING_TIPS=t.TDE_VALIDATION_ERROR=t.TDE_VALIDATION_DESCRIPTION=t.TDE_VALIDATION_STATUS_RUN_VALIDATION=void 0,t.SchemaMigrationStatusLookup=t.MIGRATION_TYPE_TOOL_TIP=t.DATABASE_MISSING_TABLES=t.UNAVAILABLE_SOURCE_TABLES_HEADING=t.MISSING_TABLES_HEADING=t.UNAVAILABLE_SOURCE_TABLES_COUNT=t.MISSING_TARGET_TABLES_COUNT=t.AVAILABLE_TABLE_COUNT_ON_TARGET=t.TABLE_SELECTION_COUNT_TO_TARGET=t.NOT_EXIST_IN_TARGET_TABLE_NAME_COLUMN=t.UNAVAILABLE_TABLE_NAME_COLUMN=t.SCHEMA_MIGRATION_COLUMN_LABLE=t.SchemaMigrationFailedRulesLookup=t.SCHEMA_MIGRATION_ASSESSMENT_WARNING_MESSAGE=t.DEPLOYMENT_ERROR_COUNT=t.DEPLOYMENT_COUNT=t.DEPLOYMENT_ENDED=t.DEPLOYMENT_STARTED=t.SCRIPT_DEPLOYMENT=t.MIGRATION_TYPE=t.SCRIPTING_ERROR_COUNT=t.SCRIPTED_OBJECTS_COUNT=t.SCRIPTING_ENDED=t.SCRIPTING_STARTED=t.SCRIPT_GENERATION=t.COLLECTION_ENDED=t.COLLECTION_STARTED=t.OBJECTS_COLLECTED=t.SCHEMA_MIGRATION_STATUS=t.BACKUP_AND_RESTORE=t.SCHEMA_AND_DATA=t.DATA_ONLY=t.SCHEMA_ONLY=void 0;const n=i(3403),r=i(2037),o=i(1285),a=i(1456),s=n.loadMessageBundle(i(1017).join(__dirname,"constants/strings.ts"));var l,c,u;t.serviceName="Sql Migration Service",t.providerId="SqlMigration",t.extensionConfigSectionName="sqlMigration",t.sqlConfigSectionName="sql",t.configLogDebugInfo="logDebugInfo",t.importAssessmentKey="ImportAssessment",t.serviceCrashMessage=function(e){return s(0,null,e)},t.serviceCrashed=s(1,null),t.waitingForService=function(e){return s(2,null,e)},t.serviceProviderInitializationError=s(3,null),function(e){e.Canceled="Canceled",e.Canceling="Canceling",e.Completing="Completing",e.Creating="Creating",e.Failed="Failed",e.InProgress="InProgress",e.ReadyForCutover="ReadyForCutover",e.Restoring="Restoring",e.Retriable="Retriable",e.Succeeded="Succeeded",e.UploadingFullBackup="UploadingFullBackup",e.UploadingLogBackup="UploadingLogBackup",e.CollectionCompleted="CollectionCompleted",e.GeneratingScript="GeneratingScript",e.PrefetchObjects="PrefetchObjects",e.GetDependency="GetDependency",e.ScriptObjects="ScriptObjects",e.ScriptViewIndexes="ScriptViewIndexes",e.ScriptOwnership="ScriptOwnership",e.GeneratingScriptCompleted="GeneratingScriptCompleted",e.DeployingSchema="DeployingSchema",e.DeploymentCompleted="DeploymentCompleted",e.Completed="Completed",e.CompletedWithError="CompletedWithError"}(l||(t.MigrationState=l={})),function(e){e.Failed="Failed",e.Succeeded="Succeeded",e.Creating="Creating"}(c||(t.ProvisioningState=c={})),function(e){e.Arrived="Arrived",e.Uploading="Uploading",e.Uploaded="Uploaded",e.Restoring="Restoring",e.Restored="Restored",e.Cancelled="Cancelled",e.Ignored="Ignored"}(u||(t.BackupFileInfoStatus=u={})),t.WIZARD_TITLE=function(e){return s(4,null,e)},t.SAVE_AND_CLOSE=s(5,null),t.SAVE_AND_CLOSE_POPUP=s(6,null),t.RESUME_TITLE=s(7,null),t.START_NEW_SESSION=s(8,null),t.RESUME_SESSION=s(9,null),t.OPEN_SAVED_INFO_ERROR=s(10,null),t.RUN_VALIDATION=s(11,null),t.DATABASE_FOR_ASSESSMENT_PAGE_TITLE=s(12,null),t.DATABASE_FOR_ASSESSMENT_DESCRIPTION=s(13,null),t.XEVENTS_ASSESSMENT_TITLE=s(14,null),t.XEVENTS_ASSESSMENT_DESCRIPTION=s(15,null),t.XEVENTS_ASSESSMENT_HELPLINK=s(16,null),t.XEVENTS_ASSESSMENT_OPEN_FOLDER=s(17,null),t.ASSESSMENT_RESULTS_PAGE_TITLE=s(18,null),t.ASSESSMENT_RESULTS_SUMMARY_LABEL_CAPS=s(19,null),t.ASSESSMENT_RESULTS_PAGE_HEADER=s(20,null),t.IMPORT_ASSESSMENT_PAGE_HEADER=s(21,null),t.ASSESSMENT_RESULTS_SUMMARY_LABEL_DESCRIPTION=s(22,null),t.DATABASES_ASSESSED_LABEL=s(23,null),t.MIGRATION_TIME_LABEL=s(24,null),t.ASSESSMENT_FINDINGS_LABEL=s(25,null),t.MIGRATION_READINESS_LABEL=s(26,null),t.SUMMARY_TITLE=s(27,null),t.DETAILS_TITLE=s(28,null),t.ASSESSMENT_SUMMARY_TITLE=s(29,null),t.READINESS_SECTION_TITLE=s(30,null),t.TOTAL_FINDINGS_LABEL=function(e){return s(31,null,e)},t.ISSUES_LABEL=s(32,null),t.INSTANCE_FINDING_SUMMARY=s(33,null),t.SEVERITY_FINDINGS_LABEL=s(34,null),t.ASSESSED_DBS_LABEL=function(e){return s(35,null,e)},t.NOT_READY=s(36,null),t.READY=s(37,null),t.NEEDS_REVIEW=s(38,null),t.READY_WARN=s(39,null),t.BLOCKERS=s(40,null),t.DATABASE_ISSUES_SUMMARY=s(41,null),t.TOTAL_ISSUES_LABEL=function(e){return s(42,null,e)},t.SEVERITY_ISSUES_LABEL=s(43,null),t.DB_READINESS_SECTION_TITLE=function(e){return s(44,null,e)},t.NON_READINESS_DESCRIPTION=function(e){return s(45,null,e)},t.WARNING_READINESS_DESCRIPTION=function(e){return s(46,null,e)},t.READINESS_DESCRIPTION=s(47,null),t.SELECT_TARGET_LABEL=s(48,null),t.NO_TARGET_SELECTED_LABEL=s(49,null),t.FINDINGS_LABEL=s(50,null),t.ENCRYPTION_LABEL=s(51,null),t.ENCRYPTION_DESCRIPTION=s(52,null),t.ASSESSMENT_SUMMARY_AND_RECOMMENDATIONS_PAGE_TITLE=s(53,null),t.ASSESSMENT_BLOCKING_ISSUE_TITLE=s(54,null),t.ASSESSMENT_IN_PROGRESS=s(55,null),t.ASSESSMENT_IN_PROGRESS_CONTENT=function(e){return s(56,null,e)},t.SKU_RECOMMENDATION_ALL_SUCCESSFUL=e=>s(57,null,e),t.SKU_RECOMMENDATION_ERROR=e=>s(58,null,e),t.SKU_RECOMMENDATION_NO_RECOMMENDATION=s(59,null),t.SKU_RECOMMENDATION_NO_RECOMMENDATION_REASON=s(60,null),t.SKU_RECOMMENDATION_ASSESSMENT_ERROR=e=>s(61,null,e),t.SKU_RECOMMENDATION_ASSESSMENT_UNEXPECTED_ERROR=(e,t)=>s(62,null,e,t.message,t.stack,r.EOL),t.SKU_RECOMMENDATION_ERROR_MESSAGE=e=>s(63,null,e.message),t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_WITH_STACK=e=>s(64,null,e.message,r.EOL,e.stack),t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_WITH_INFO=e=>s(65,null,e.message,r.EOL,e.errorSummary,r.EOL,e.possibleCauses,r.EOL,e.guidance,r.EOL,e.errorId),t.PERF_DATA_COLLECTION_ERROR=(e,t)=>s(66,null,e,t.join("\n")),t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_BYPASS=s(67,null),t.SKU_RECOMMENDATION_ASSESSMENT_ERROR_DETAIL=s(68,null),t.AZURE_SQL_MI_DB_COUNT_THRESHOLD_EXCEEDS_ERROR=e=>s(69,null,e),t.AZURE_SQL_MI_DB_COUNT_UNDER_THRESHOLD=s(70,null),t.ASSESSMENT_SUMMARY_AND_SKU_RECOMMENDATION_FOR_TARGETS_LABEL=s(71,null),t.SKU_RECOMMENDATION_MI_CARD_TEXT=s(72,null),t.SKU_RECOMMENDATION_SQLDB_CARD_TEXT=s(73,null),t.SKU_RECOMMENDATION_VM_CARD_TEXT=s(74,null),t.SKU_RECOMMENDATION_MI_TARGET_TEXT=s(75,null),t.SKU_RECOMMENDATION_SQLDB_TARGET_TEXT=s(76,null),t.SKU_RECOMMENDATION_VM_TARGET_TEXT=s(77,null),t.SELECT_AZURE_MI=s(78,null),t.SELECT_AZURE_VM=s(79,null),t.SKU_RECOMMENDATION_VIEW_ASSESSMENT_MI=s(80,null),t.SKU_RECOMMENDATION_VIEW_ASSESSMENT_VM=s(81,null),t.SKU_RECOMMENDATION_VIEW_ASSESSMENT_SQLDB=s(82,null),t.VIEW_SELECT_BUTTON_LABEL=s(83,null),t.TOTAL_DATABASES_SELECTED=function(e,t){return s(84,null,e,t)},t.SELECT_SKIP_ASSESSMENT_CHECK_TO_CONTINUE=s(85,null),t.SELECT_TARGET_TO_CONTINUE=s(86,null),t.SELECT_DATABASE_TO_MIGRATE=s(87,null),t.ASSESSMENT_COMPLETED=e=>s(88,null,e),t.ASSESSMENT_FAILED=e=>s(89,null,e),t.ASSESSMENT_TITLE=function(e){return s(90,null,e)},t.CAN_BE_MIGRATED=function(e,t){return s(91,null,e,t)},t.ASSESSMENT_MIGRATION_WARNING=s(92,null),t.ASSESSMENT_MIGRATION_WARNING_SQLDB=s(93,null),t.ASSESSMENT_MIGRATION_WARNING_SQLMI=s(94,null),t.DATABASES_TABLE_TILE=s(95,null),t.SQL_SERVER_INSTANCE=s(96,null),t.LOAD_ASSESSMENT_REPORT=s(97,null),t.SAVE_ASSESSMENT_REPORT=s(98,null),t.SAVE_RECOMMENDATION_REPORT=s(99,null),t.SAVE_ASSESSMENT_REPORT_SUCCESS=function(e){return s(100,null,e)},t.SAVE_RECOMMENDATION_REPORT_SUCCESS=function(e){return s(101,null,e)},t.AZURE_RECOMMENDATION=s(102,null),t.RECOMMENDATIONS_TITLE=function(e){return s(103,null,e)},t.RECOMMENDED_CONFIGURATION=s(104,null),t.RECOMMENDED_CONFIGURATION_SUMMARY_LABEL_CAPS=s(105,null),t.RECOMMENDED_CONFIGURATION_SUMMARY_LABEL_DESCRIPTION=s(106,null),t.GET_AZURE_RECOMMENDATION=s(107,null),t.REFRESH_ASSESSMENT_LABEL=s(108,null),t.REFRESH_SKU_LABEL=s(109,null),t.START_PERFORMANCE_COLLECTION=s(110,null),t.STOP_PERFORMANCE_COLLECTION=s(111,null),t.RESTART_PERFORMANCE_COLLECTION=s(112,null),t.IMPORT_PERFORMANCE_DATA=s(113,null),t.IMPORT_PERFORMANCE_DATA_DIALOG_DESCRIPTION=s(114,null),t.IMPORT_PERFORMANCE_DATA_DIALOG_HELPER_MESSAGE=s(115,null),t.IMPORT_PERFORMANCE_DATA_DIALOG_OPEN_FOLDER=s(116,null),t.AZURE_RECOMMENDATION_CARD_NOT_ENABLED=s(117,null),t.AZURE_RECOMMENDATION_CARD_IN_PROGRESS=s(118,null),t.AZURE_RECOMMENDATION_STATUS_NOT_ENABLED=s(119,null),t.AZURE_RECOMMENDATION_STATUS_IN_PROGRESS=s(120,null),t.AZURE_RECOMMENDATION_STATUS_REFINING=s(121,null),t.AZURE_RECOMMENDATION_STATUS_STOPPED=s(122,null),t.AZURE_RECOMMENDATION_STATUS_AUTO_REFRESH_TIMER=function(e){return s(123,null,e.toFixed(0))},t.AZURE_RECOMMENDATION_STATUS_MANUAL_REFRESH_TIMER=s(124,null),t.AZURE_RECOMMENDATION_STATUS_DATA_IMPORTED=s(125,null),t.AZURE_RECOMMENDATION_TOOLTIP_NOT_STARTED=s(126,null),t.AZURE_RECOMMENDATION_TOOLTIP_IN_PROGRESS=s(127,null),t.AZURE_RECOMMENDATION_START=s(128,null),t.AZURE_RECOMMENDATION_START_POPUP=s(129,null),t.AZURE_RECOMMENDATION_STOP_POPUP=s(130,null),t.AZURE_RECOMMENDATION_DATA_COLLECTION_POPUP_MESSAGE_LABEL=s(131,null),t.AZURE_RECOMMENDATION_DATA_COLLECTION_DEFAULT_PATH=s(132,null),t.AZURE_RECOMMENDATION_DATA_COLLECTION_CHOOSE_PATH=s(133,null),t.AZURE_RECOMMENDATION_DESCRIPTION=s(134,null),t.AZURE_RECOMMENDATION_DESCRIPTION2=s(135,null),t.AZURE_RECOMMENDATION_CHOOSE_METHOD=s(136,null),t.AZURE_RECOMMENDATION_COLLECT_DATA=s(137,null),t.AZURE_RECOMMENDATION_OPEN_EXISTING=s(138,null),t.AZURE_RECOMMENDATION_COLLECT_DATA_FOLDER=s(139,null),t.AZURE_RECOMMENDATION_OPEN_EXISTING_FOLDER=s(140,null),t.FOLDER_NAME=s(141,null),t.VIEW_DETAILS=s(142,null),t.ASSESSED_DBS=function(e){return s(143,null,e)},t.RECOMMENDATIONS_AVAILABLE=function(e){return s(1===e?144:145,null,e)},t.RECOMMENDATIONS=s(146,null),t.LOADING_RECOMMENDATIONS=s(147,null),t.TARGET_DEPLOYMENT_TYPE=s(148,null),t.AZURE_CONFIGURATION=s(149,null),t.VM_CONFIGURATION=function(e,t){return s(150,null,e,t)},t.VM_CONFIGURATION_PREVIEW=function(e,t,i){return s(151,null,e,t,i)},t.SQLDB_CONFIGURATION=function(e,t){return s(152,null,e,t)},t.SQLDB_CONFIGURATION_PREVIEW=function(e,t,i,n){return s(153,null,e,t,i,n)},t.MI_CONFIGURATION=function(e,t,i){return s(154,null,e,t,i)},t.MI_CONFIGURATION_PREVIEW=function(e,t,i,n){return s(155,null,e,t,i,n)},t.GENERAL_PURPOSE=s(156,null),t.BUSINESS_CRITICAL=s(157,null),t.HYPERSCALE=s(158,null),t.GEN5=s(159,null),t.PREMIUM_SERIES=s(160,null),t.PREMIUM_SERIES_MEMORY_OPTIMIZED=s(161,null),t.RECOMMENDATION_REASON=s(162,null),t.SOURCE_PROPERTIES=s(163,null),t.SQL_TEMPDB=s(164,null),t.SQL_DATA_FILES=s(165,null),t.SQL_LOG_FILES=s(166,null),t.STORAGE_CONFIGURATION=function(e,t){return s(167,null,e,t)},t.DISK_CONFIGURATION=function(e,t,i,n){return s(168,null,e,t,i,n)},t.RECOMMENDED_TARGET_STORAGE_CONFIGURATION=s(169,null),t.RECOMMENDED_TARGET_STORAGE_CONFIGURATION_INFO=s(170,null),t.STORAGE_HEADER=s(171,null),t.STORAGE_GB=function(e){return s(172,null,e)},t.RECOMMENDED_STORAGE_CONFIGURATION=s(173,null),t.EPHEMERAL_TEMPDB=s(174,null),t.LOCAL_SSD=s(175,null),t.UNKNOWN_DISK_TYPE=s(176,null),t.CACHING=s(177,null),t.CACHING_NA=s(178,null),t.CACHING_NONE=s(179,null),t.CACHING_READ_ONLY=s(180,null),t.CACHING_READ_WRITE=s(181,null),t.DIMENSION=s(182,null),t.VALUE=s(183,null),t.CPU_REQUIREMENT=s(184,null),t.MEMORY_REQUIREMENT=s(185,null),t.DATA_STORAGE_REQUIREMENT=s(186,null),t.LOG_STORAGE_REQUIREMENT=s(187,null),t.DATA_IOPS_REQUIREMENT=s(188,null),t.LOGS_IOPS_REQUIREMENT=s(189,null),t.IO_LATENCY_REQUIREMENT=s(190,null),t.CPU_CORES=function(e){return s(191,null,e.toFixed(2))},t.GB=function(e){return s(192,null,e.toFixed(2))},t.IOPS=function(e){return s(193,null,e.toFixed(2))},t.MS=function(e){return s(194,null,e.toFixed(2))},t.RECOMMENDATION_PARAMETERS=s(195,null),t.EDIT_PARAMETERS=s(196,null),t.EDIT_RECOMMENDATION_PARAMETERS=s(197,null),t.EDIT_PARAMETERS_TEXT=s(198,null),t.UPDATE=s(199,null),t.ENABLE_PREVIEW_SKU=s(200,null),t.ENABLE_PREVIEW_SKU_INFO=s(201,null),t.SCALE_FACTOR=s(202,null),t.SCALE_FACTOR_TOOLTIP=s(203,null),t.INVALID_SCALE_FACTOR=s(204,null),t.PERCENTAGE_UTILIZATION=s(205,null),t.PERCENTAGE_UTILIZATION_TOOLTIP=s(206,null),t.ELASTIC_RECOMMENDATION_LABEL=s(207,null),t.ELASTIC_RECOMMENDATION_INFO=s(208,null),t.PERCENTAGE=function(e){return s(209,null,e)},t.PERCENTILE=function(e){return s(210,null,e)},t.EMPTY_TIME=s(211,null),t.LAST_REFRESHED_TIME=function(e=t.EMPTY_TIME){return s(212,null,e)},t.TIME_IN_MINUTES=function(e){return 6e4*e},t.LOGIN_WIZARD_TITLE=function(e){return s(213,null,e)},t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_DESCRIPTION=s(214,null),t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_PREVIEW_WARNING=s(215,null),t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_DATA_MIGRATION_WARNING=s(216,null),t.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_PERMISSIONS_WARNING=function(e,t){return e&&e.length?s(218,null,e,t):s(217,null,t)},t.LOGIN_MIGRATIONS_TARGET_TYPE_SELECTION_TITLE=s(219,null),t.LOGIN_MIGRATIONS_MI_TEXT=s(220,null),t.LOGIN_MIGRATIONS_DB_TEXT=s(221,null),t.LOGIN_MIGRATIONS_VM_TEXT=s(222,null),t.LOGIN_MIGRATIONS_AZURE_SQL_TARGET_PAGE_TITLE=s(223,null),t.LOGIN_MIGRATIONS_SELECT_LOGINS_PAGE_TITLE=s(224,null),t.LOGIN_MIGRATIONS_SELECT_LOGINS_WINDOWS_AUTH_WARNING=s(225,null),t.LOGIN_MIGRATIONS_STATUS_PAGE_TITLE=s(226,null),t.LOGIN_MIGRATIONS_STATUS_PAGE_DESCRIPTION=function(e,t,i){return s(227,null,e,t,i)},t.LOGIN_MIGRATIONS_COMPLETED_STATUS_PAGE_DESCRIPTION=function(e,t,i){return s(228,null,e,t,i)},t.LOGIN_MIGRATIONS_FAILED_STATUS_PAGE_DESCRIPTION=function(e,t,i){return s(229,null,e,t,i)},t.LOGIN_MIGRATIONS_STATUS_PAGE_PREVIOUS_BUTTON_TITLE=s(230,null),t.LOGIN_MIGRATIONS_STATUS_PAGE_PREVIOUS_BUTTON_ERROR=s(231,null),t.LOGIN_MIGRATIONS_GET_LOGINS_QUERY=s(232,null),t.LOGIN_MIGRATIONS_GET_LOGINS_ERROR_TITLE=function(e){return s(233,null,e)},t.LOGIN_MIGRATIONS_GET_LOGINS_ERROR=function(e){return s(234,null,e)},t.SELECT_LOGIN_TO_CONTINUE=s(235,null),t.ENTER_AAD_DOMAIN_NAME=s(236,null),t.LOGIN_MIGRATE_BUTTON_TEXT=s(237,null),t.LOGIN_MIGRATIONS_GET_CONNECTION_STRING=function(e,t,i){return s(238,null,e,t,i)},t.LOGIN_MIGRATION_IN_PROGRESS=s(239,null),t.LOGIN_MIGRATION_REFRESHING_LOGIN_DATA=s(240,null),t.LOGIN_MIGRATION_REFRESH_LOGIN_DATA_SUCCESSFUL=function(e,t){return s(241,null,e,t)},t.LOGIN_MIGRATION_REFRESH_SOURCE_LOGIN_DATA_FAILED=s(242,null),t.LOGIN_MIGRATION_REFRESH_TARGET_LOGIN_DATA_FAILED=s(243,null),t.STARTING_LOGIN_MIGRATION=s(244,null),t.STARTING_LOGIN_MIGRATION_FAILED=s(245,null),t.ESTABLISHING_USER_MAPPINGS=s(246,null),t.ESTABLISHING_USER_MAPPINGS_FAILED=s(247,null),t.MIGRATING_SERVER_ROLES_AND_SET_PERMISSIONS=s(248,null),t.MIGRATING_SERVER_ROLES_AND_SET_PERMISSIONS_FAILED=s(249,null),t.LOGIN_MIGRATIONS_COMPLETE=s(250,null),t.LOGIN_MIGRATIONS_FAILED=s(251,null),t.LOGIN_MIGRATIONS_ERROR=function(e){return s(252,null,e)},t.LOGINS_FOUND=s(253,null),t.LOGINS_NOT_FOUND=s(254,null),t.LOGIN_MIGRATION_STATUS_SUCCEEDED=s(255,null),t.LOGIN_MIGRATION_STATUS_FAILED=s(256,null),t.LOGIN_MIGRATION_STATUS_IN_PROGRESS=s(257,null),t.LOGIN_MIGRATIONS_AAD_DOMAIN_NAME_INPUT_BOX_LABEL=s(258,null),t.LOGIN_MIGRATIONS_AAD_DOMAIN_NAME_INPUT_BOX_PLACEHOLDER=s(259,null),t.LOGIN_MIGRATIONS_LOGIN_STATUS_DETAILS_TITLE=function(e){return s(260,null,e)},t.NOT_STARTED=s(261,null),t.MIGRATE_LOGINS=s(262,null),t.ESTABLISH_USER_MAPPINGS=s(263,null),t.MIGRATE_SERVER_ROLES_AND_SET_PERMISSIONS=s(264,null),t.LOGIN_MIGRATION_COMPLETED=s(265,null),t.COLLECTING_TARGET_LOGINS_FAILED=function(e){return s(266,null,e)},t.AZURE_SQL_TARGET_PAGE_TITLE=s(267,null),t.AZURE_SQL_TARGET_PAGE_DESCRIPTION=function(e="instance"){return s(268,null,e)},t.AZURE_SQL_TARGET_CONNECTION_ERROR_TITLE=s(269,null),t.SQL_TARGET_CONNECTION_ERROR=function(e){return s(270,null,e)},t.SQL_TARGET_CONNECTION_SUCCESS=function(e){return s(271,null,e)},t.SQL_TARGET_MISSING_SOURCE_DATABASES=s(272,null),t.SQL_TARGET_CONNECTION_SUCCESS_LOGINS=function(e){return s(273,null,e)},t.SQL_TARGET_MAPPING_ERROR_MISSING_TARGET=s(274,null),t.SQL_TARGET_CONNECTION_DUPLICATE_TARGET_MAPPING=function(e,t,i){return s(275,null,e,t,e,i)},t.SQL_TARGET_CONNECTION_SOURCE_NOT_MAPPED=function(e){return s(276,null,e)},t.SQL_TARGET_SOURCE_COLLATION_NOT_SAME=function(e,t,i,n,r){return s(277,null,e,t,i,n,r)},t.SQL_MIGRATION_TROUBLESHOOTING_LINK=s(278,null),t.AZURE_SQL_DATABASE_MANAGED_INSTANCE=s(279,null),t.NO_MANAGED_INSTANCE_FOUND=s(280,null),t.INVALID_MANAGED_INSTANCE_ERROR=s(281,null),t.UNAVAILABLE_TARGET_PREFIX=function(e){return s(282,null,e)},t.AZURE_SQL_DATABASE_VIRTUAL_MACHINE=s(283,null),t.AZURE_SQL_DATABASE_VIRTUAL_MACHINE_SHORT=s(284,null),t.NO_VIRTUAL_MACHINE_FOUND=s(285,null),t.INVALID_VIRTUAL_MACHINE_ERROR=s(286,null),t.AZURE_SQL_DATABASE=s(287,null),t.NO_SQL_DATABASE_SERVER_FOUND=s(288,null),t.NO_SQL_DATABASE_FOUND=s(289,null),t.INVALID_SQL_DATABASE_ERROR=s(290,null),t.TARGET_SUBSCRIPTION_INFO=s(291,null),t.TARGET_LOCATION_INFO=s(292,null),t.TARGET_RESOURCE_GROUP_INFO=s(293,null),t.TARGET_RESOURCE_INFO=s(294,null),t.DMS_SUBSCRIPTION_INFO=s(295,null),t.DMS_LOCATION_INFO=s(296,null),t.DMS_RESOURCE_GROUP_INFO=s(297,null),t.DMS_RESOURCE_INFO=s(298,null),t.ACCOUNTS_SELECTION_PAGE_TITLE=s(299,null),t.ACCOUNTS_SELECTION_PAGE_DESCRIPTION=s(300,null),t.ACCOUNT_SELECTION_PAGE_NO_LINKED_ACCOUNTS_ERROR=s(301,null),t.ACCOUNT_LINK_BUTTON_LABEL=s(302,null),t.INVALID_ACCOUNT_ERROR=s(303,null),t.accountLinkedMessage=function(e){return s(1===e?304:305,null,e)},t.AZURE_TENANT=s(306,null),t.MI_NOT_READY_ERROR=function(e,t){return s(307,null,e,t)},t.VM_NOT_READY_IAAS_EXTENSION_ERROR=function(e,t){return s(308,null,e,t)},t.VM_NOT_READY_POWER_STATE_ERROR=function(e){return s(309,null,e)},t.SQLDB_NOT_READY_ERROR=function(e,t){return s(310,null,e,t)},t.SELECT_AN_TARGET_TYPE=s(311,null),t.SELECT_AN_ACCOUNT=s(312,null),t.SELECT_A_TENANT=s(313,null),t.SELECT_A_SUBSCRIPTION=s(314,null),t.SELECT_A_LOCATION=s(315,null),t.SELECT_A_RESOURCE_GROUP=s(316,null),t.SELECT_A_SERVICE=s(317,null),t.SELECT_ACCOUNT_ERROR=s(318,null),t.SELECT_TENANT_ERROR=s(319,null),t.SELECT_SUBSCRIPTION_ERROR=s(320,null),t.SELECT_LOCATION_ERROR=s(321,null),t.SELECT_RESOURCE_GROUP_ERROR=s(322,null),t.SELECT_SERVICE_ERROR=s(323,null),t.ACCOUNT_CREDENTIALS_REFRESH=function(e){return s(324,null,e)},t.SELECT_SERVICE_PLACEHOLDER=s(325,null),t.DATA_SOURCE_CONFIGURATION_PAGE_TITLE=s(326,null),t.DATABASE_BACKUP_PAGE_DESCRIPTION=s(327,null),t.DATABASE_BACKUP_NC_NETWORK_SHARE_RADIO_LABEL=s(328,null),t.DATABASE_BACKUP_NC_BLOB_STORAGE_RADIO_LABEL=s(329,null),t.DATABASE_BACKUP_SQL_VM_PAGE_BLOB_INFO=s(330,null),t.DATABASE_BACKUP_SQL_VM_PAGE_BLOB_URL_LABEL=s(331,null),t.DATABASE_BACKUP_NETWORK_SHARE_HEADER_TEXT=s(332,null),t.DATABASE_BACKUP_NETWORK_SHARE_LOCATION_INFO=s(333,null),t.DATABASE_BACKUP_NETWORK_SHARE_WINDOWS_USER_INFO=s(334,null),t.DATABASE_BACKUP_NC_NETWORK_SHARE_HELP_TEXT=s(335,null),t.DATABASE_BACKUP_NETWORK_SHARE_TABLE_HELP_TEXT=s(336,null),t.DATABASE_BACKUP_NETWORK_SHARE_LOCATION_LABEL=s(337,null),t.DATABASE_SERVICE_ACCOUNT_INFO_TEXT=s(338,null),t.DATABASE_BACKUP_NETWORK_SHARE_WINDOWS_USER_LABEL=s(339,null),t.DATABASE_BACKUP_NETWORK_SHARE_PASSWORD_LABEL=s(340,null),t.DATABASE_BACKUP_NETWORK_SHARE_PASSWORD_PLACEHOLDER=s(341,null),t.DATABASE_BACKUP_NETWORK_SHARE_AZURE_ACCOUNT_HEADER=s(342,null),t.DATABASE_BACKUP_NETWORK_SHARE_AZURE_ACCOUNT_HELP=s(343,null),t.DUPLICATE_NAME_ERROR=s(344,null),t.DATABASE_ALREADY_EXISTS_MI=function(e,t){return s(345,null,e,t)},t.DATABASE_ALREADY_EXISTS_VM_INFO=s(346,null),t.DATABASE_BACKUP_BLOB_FOLDER_STRUCTURE_INFO=s(347,null),t.DATABASE_BACKUP_BLOB_FOLDER_STRUCTURE_WARNING=s(348,null),t.DATABASE_BACKUP_BLOB_STORAGE_HEADER_TEXT=s(349,null),t.DATABASE_BACKUP_BLOB_STORAGE_HELP_TEXT=s(350,null),t.DATABASE_BACKUP_BLOB_STORAGE_TABLE_HELP_TEXT=s(351,null),t.DATABASE_BACKUP_BLOB_STORAGE_SUBSCRIPTION_LABEL=s(352,null),t.DATABASE_BACKUP_MIGRATION_MODE_LABEL=s(353,null),t.DATABASE_BACKUP_MIGRATION_MODE_DESCRIPTION=s(354,null),t.DATABASE_TABLE_SELECTION_LABEL=s(355,null),t.DATABASE_TABLE_SELECTION_DESCRIPTION=s(356,null),t.DATABASE_SCHEMA_MIGRATION_HELP=s(357,null),t.DATABASE_SCHEMA_MIGRATION_DACPAC_EXTENSION=s(358,null),t.DATABASE_SCHEMA_MIGRATION_PROJECTS_EXTENSION=s(359,null),t.DATABASE_TABLE_REFRESH_LABEL=s(360,null),t.DATABASE_TABLE_SOURCE_DATABASE_COLUMN_LABEL=s(361,null),t.DATABASE_TABLE_TARGET_DATABASE_COLUMN_LABEL=s(362,null),t.DATABASE_TABLE_SELECTED_TABLES_COLUMN_LABEL=s(363,null),t.DATABASE_TABLE_CONNECTION_ERROR=s(364,null),t.DATABASE_TABLE_CONNECTION_ERROR_MESSAGE=function(e){return s(365,null,r.EOL,e)},t.DATABASE_TABLE_DATA_LOADING=s(366,null),t.DATABASE_TABLE_VALIDATE_SELECTION_MESSAGE=s(367,null),t.DATABASE_BACKUP_MIGRATION_MODE_ONLINE_LABEL=s(368,null),t.DATABASE_BACKUP_MIGRATION_MODE_ONLINE_DESCRIPTION=s(369,null),t.DATABASE_BACKUP_MIGRATION_MODE_OFFLINE_LABEL=s(370,null),t.DATABASE_BACKUP_MIGRATION_MODE_OFFLINE_DESCRIPTION=s(371,null),t.NETWORK_SHARE_PATH_FORMAT=s(372,null),t.WINDOWS_USER_ACCOUNT=s(373,null),t.NO_SUBSCRIPTIONS_FOUND=s(374,null),t.NO_LOCATION_FOUND=s(375,null),t.RESOURCE_GROUP_NOT_FOUND=s(376,null),t.NO_STORAGE_ACCOUNT_FOUND=s(377,null),t.NO_FILESHARES_FOUND=s(378,null),t.NO_BLOBCONTAINERS_FOUND=s(379,null),t.NO_BLOBFILES_FOUND=s(380,null),t.NO_BLOBFOLDERS_FOUND=s(381,null),t.INVALID_SUBSCRIPTION_ERROR=s(382,null),t.INVALID_LOCATION_ERROR=s(383,null),t.INVALID_RESOURCE_GROUP_ERROR=s(384,null),t.INVALID_STORAGE_ACCOUNT_ERROR=s(385,null),t.MISSING_TARGET_USERNAME_ERROR=s(386,null),t.MISSING_TARGET_PASSWORD_ERROR=s(387,null),t.STORAGE_ACCOUNT_CONNECTIVITY_WARNING=function(e,t,i){return i?1===t.length?s(388,null,e,t[0]):s(389,null,e,t.join("', '")):1===t.length?s(390,null,e,t[0]):s(391,null,e,t.join("', '"))},t.TARGET_TABLE_NOT_EMPTY=s(392,null),t.TARGET_TABLE_MISSING=s(393,null),t.TARGET_USERNAME_LAbEL=s(394,null),t.TARGET_USERNAME_PLACEHOLDER=s(395,null),t.TARGET_PASSWORD_LAbEL=s(396,null),t.TARGET_PASSWORD_PLACEHOLDER=s(397,null),t.TARGET_CONNECTION_LABEL=s(398,null),t.MAP_SOURCE_TARGET_HEADING=s(399,null),t.MAP_SOURCE_TARGET_DESCRIPTION=s(400,null),t.MAP_SOURCE_COLUMN=s(401,null),t.MAP_TARGET_COLUMN=s(402,null),t.MAP_TARGET_PLACEHOLDER=s(403,null),t.INVALID_BLOB_RESOURCE_GROUP_ERROR=function(e){return s(404,null,e)},t.INVALID_BLOB_STORAGE_ACCOUNT_ERROR=function(e){return s(405,null,e)},t.INVALID_BLOB_CONTAINER_ERROR=function(e){return s(406,null,e)},t.INVALID_BLOB_LAST_BACKUP_FILE_ERROR=function(e){return s(407,null,e)},t.INVALID_BLOB_LAST_BACKUP_FOLDER_ERROR=function(e){return s(408,null,e)},t.INVALID_NON_PAGE_BLOB_BACKUP_FILE_ERROR=function(e){return s(409,null,e)},t.INVALID_NETWORK_SHARE_LOCATION=s(410,null,t.NETWORK_SHARE_PATH_FORMAT),t.INVALID_USER_ACCOUNT=s(411,null,t.WINDOWS_USER_ACCOUNT),t.INVALID_TARGET_NAME_ERROR=s(412,null),t.PROVIDE_UNIQUE_CONTAINERS=s(413,null),t.SQL_SOURCE_DETAILS=function(e,t,i=!1){switch(e){case o.MigrationSourceAuthenticationType.Integrated:return s(i?414:415,null,t);case o.MigrationSourceAuthenticationType.Sql:return s(i?416:417,null,t)}},t.SELECT_RESOURCE_GROUP_PROMPT=s(418,null),t.SELECT_STORAGE_ACCOUNT=s(419,null),t.SELECT_BLOB_CONTAINER=s(420,null),t.MISSING_TABLE_NAME_COLUMN=s(421,null),t.SELECT_DATABASE_TABLES_TITLE=function(e){return s(422,null,e)},t.TABLE_SELECTION_EDIT=s(423,null),t.TABLE_SELECTION_COUNT=function(e,t){return s(424,null,(0,a.formatNumber)(e),(0,a.formatNumber)(t))},t.TABLE_SELECTED_COUNT=function(e,t){return s(425,null,(0,a.formatNumber)(e),(0,a.formatNumber)(t))},t.SELECT_TABLES_FOR_MIGRATION=s(426,null),t.DATABASE_LOADING_TABLES=s(427,null),t.TABLE_SELECTION_FILTER=s(428,null),t.TABLE_SELECTION_UPDATE_BUTTON=s(429,null),t.TABLE_SELECTION_CANCEL_BUTTON=s(430,null),t.TABLE_SELECTION_TABLENAME_COLUMN=s(431,null),t.TABLE_SELECTION_HASROWS_COLUMN=s(432,null),t.VALIDATION_DIALOG_TITLE=s(433,null),t.VALIDATION_MESSAGE_SUCCESS=s(434,null),t.VALIDATION_MESSAGE_CANCELED_ERRORS=function(e){return s(435,null,r.EOL,e)},t.VALIDATION_MESSAGE_CANCELED=s(436,null),t.VALIDATION_MESSAGE_NOT_RUN=s(437,null),t.SELECT_RESOURCE_GROUP=s(438,null),t.IR_PAGE_TITLE=s(439,null),t.IR_PAGE_DESCRIPTION=s(440,null),t.SQL_MIGRATION_SERVICE_NOT_FOUND_ERROR=s(441,null),t.CREATE_NEW=s(442,null),t.CREATE_NEW_MIGRATION_SERVICE=s(443,null),t.CREATE_NEW_RESOURCE_GROUP=s(444,null),t.INVALID_SERVICE_ERROR=s(445,null),t.SERVICE_OFFLINE_ERROR=s(446,null),t.AUTHENTICATION_KEYS=s(447,null),t.SQL_MIGRATION_SERVICE_DETAILS_HEADER=function(e){return s(448,null,e)},t.DATABASE_MIGRATION_SERVICE_AUTHENTICATION_KEYS=s(449,null),t.CREATE_MIGRATION_SERVICE_TITLE=s(450,null),t.MIGRATION_SERVICE_SUBSCRIPTION_INFO=s(451,null),t.MIGRATION_SERVICE_LOCATION_INFO=s(452,null),t.MIGRATION_SERVICE_RESOURCE_GROUP_INFO=s(453,null),t.MIGRATION_SERVICE_NAME_INFO=s(454,null),t.MIGRATION_SERVICE_TARGET_INFO=s(455,null),t.MIGRATION_SERVICE_DIALOG_DESCRIPTION=function(e){return s(e?456:457,null)},t.LOADING_MIGRATION_SERVICES=s(458,null),t.SERVICE_CONTAINER_HEADING=s(459,null),t.SERVICE_CONTAINER_DESCRIPTION1=s(460,null),t.SERVICE_CONTAINER_DESCRIPTION2=s(461,null),t.SERVICE_STEP1=s(462,null),t.SERVICE_STEP1_LINK=s(463,null),t.SERVICE_STEP2=s(464,null),t.SERVICE_STEP3=function(e){return s(e?465:466,null)},t.SERVICE_CONNECTION_STATUS=s(467,null),t.SERVICE_KEY1_LABEL=s(468,null),t.SERVICE_KEY2_LABEL=s(469,null),t.SERVICE_KEY1_COPIED_HELP=s(470,null),t.SERVICE_KEY2_COPIED_HELP=s(471,null),t.REFRESH_KEY1=s(472,null),t.REFRESH_KEY2=s(473,null),t.COPY_KEY1=s(474,null),t.COPY_KEY2=s(475,null),t.AUTH_KEY_COLUMN_HEADER=s(476,null),t.AUTH_KEY_REFRESHED=function(e){return s(477,null,e)},t.SERVICE_NOT_READY=function(e,t){return s(t?478:479,null,e)},t.SERVICE_ERROR_NOT_READY=function(e,t){return s(480,null,e,t)},t.SERVICE_READY=function(e,t,i){return s(i?481:482,null,e,t)},t.INVALID_SERVICE_NAME_ERROR=s(483,null),t.SERVICE_NOT_FOUND=s(484,null),t.SERVICE_STATUS_REFRESH_ERROR=s(485,null),t.OK=s(486,null),t.NEW_RESOURCE_GROUP=function(e){return s(487,null,e)},t.TEST_CONNECTION=s(488,null),t.DATA_MIGRATION_SERVICE_CREATED_SUCCESSFULLY=s(489,null),t.DMS_PROVISIONING_FAILED=s(490,null),t.APPLY=s(491,null),t.CREATING_RESOURCE_GROUP=s(492,null),t.RESOURCE_GROUP_CREATED=s(493,null),t.RESOURCE_GROUP_DESCRIPTION=s(494,null),t.NAME_OF_NEW_RESOURCE_GROUP=s(495,null),t.DATA_UPLOADED_INFO=s(496,null),t.COPY_THROUGHPUT_INFO=s(497,null),t.SERVICE_SELECTION_LOCATION_MESSAGE=s(498,null),t.VALIDATION_STATE_CANCELED=s(499,null),t.VALIDATION_STATE_PENDING=s(500,null),t.VALIDATION_STATE_RUNNING=s(501,null),t.VALIDATION_STATE_SUCCEEDED=s(502,null),t.VALIDATION_STATE_FAILED=s(503,null),t.VALIDATE_IR_DONE_BUTTON=s(504,null),t.VALIDATE_IR_HEADING=s(505,null),t.VALIDATE_IR_START_VALIDATION=s(506,null),t.VALIDATE_IR_UNSUCCESSFUL_REVALIDATION=s(507,null),t.VALIDATE_IR_STOP_VALIDATION=s(508,null),t.VALIDATE_IR_COPY_RESULTS=s(509,null),t.VALIDATE_IR_RESULTS_HEADING=s(510,null),t.VALIDATE_IR_VALIDATION_COMPLETED=s(511,null),t.VALIDATE_IR_VALIDATION_CANCELED=s(512,null),t.VALIDATE_IR_VALIDATION_COMPLETED_ERRORS=function(e){return s(513,null,r.EOL,e)},t.VALIDATE_IR_VALIDATION_STATUS=function(e,t){const i=e??"";return t&&t.length>0?s(514,null,i,r.EOL,t.join(r.EOL)):s(515,null,i)},t.VALIDATE_IR_ERROR_GATEWAY_TIMEOUT=s(516,null),t.VALIDATE_IR_VALIDATION_STATUS_ERROR_COUNT=function(e,t){const i=e??"";return t>1?s(517,null,i,t):s(518,null,i)},t.VALIDATE_IR_VALIDATION_STATUS_ERROR=function(e,t){return s(519,null,e??"",r.EOL,t.join(r.EOL))},t.VALIDATE_IR_COLUMN_VALIDATION_STEPS=s(520,null),t.VALIDATE_IR_COLUMN_STATUS=s(521,null),t.VALIDATE_IR_VALIDATION_RESULT_LABEL_SHIR=s(522,null),t.VALIDATE_IR_VALIDATION_RESULT_LABEL_STORAGE=s(523,null),t.VALIDATE_IR_VALIDATION_RESULT_LABEL_SOURCE_DATABASE=function(e){return s(524,null,e)},t.VALIDATE_IR_VALIDATION_RESULT_LABEL_NETWORK_SHARE=function(e){return s(525,null,e)},t.VALIDATE_IR_VALIDATION_RESULT_LABEL_TARGET_DATABASE=function(e){return s(526,null,e)},t.VALIDATE_IR_VALIDATION_RESULT_API_ERROR=function(e,t){return s(527,null,r.EOL,e,t.name,t.message)},t.VALIDATE_IR_VALIDATION_RESULT_ERROR=function(e,t,i){return s(528,null,r.EOL,e,t,i.code,i.message)},t.VALIDATE_IR_SQLDB_VALIDATION_RESULT_ERROR=function(e,t,i){return s(529,null,r.EOL,e,t,i.code,i.message)},t.WARNING=s(530,null),t.ERROR=s(531,null),t.LEARN_MORE=s(532,null),t.LEARN_MORE_ABOUT_PRE_REQS=s(533,null),t.SUBSCRIPTION=s(534,null),t.STORAGE_ACCOUNT=s(535,null),t.RESOURCE_GROUP=s(536,null),t.NAME=s(537,null),t.LOCATION=s(538,null),t.REFRESH=s(539,null),t.CREATE=s(540,null),t.IMPORT=s(541,null),t.CANCEL=s(542,null),t.TYPE=s(543,null),t.USER_ACCOUNT=s(544,null),t.VIEW_ALL=s(545,null),t.TARGET=s(546,null),t.AZURE_SQL=s(547,null),t.CLOSE=s(548,null),t.DATA_UPLOADED=s(549,null),t.COPY_THROUGHPUT=s(550,null),t.NEW_SUPPORT_REQUEST=s(551,null),t.IMPACT=s(552,null),t.ALL_FIELDS_REQUIRED=s(553,null),t.CLEAR=s(554,null),t.SELECT=s(555,null),t.BROWSE=s(556,null),t.OPEN=s(557,null),t.START_MIGRATION_TEXT=s(558,null),t.SUMMARY_PAGE_TITLE=s(559,null),t.SUMMARY_MI_TYPE=s(560,null),t.SUMMARY_VM_TYPE=s(561,null),t.SUMMARY_SQLDB_TYPE=s(562,null),t.SUMMARY_DATABASE_COUNT_LABEL=s(563,null),t.SUMMARY_AZURE_STORAGE_SUBSCRIPTION=s(564,null),t.SUMMARY_AZURE_STORAGE=s(565,null),t.NETWORK_SHARE=s(566,null),t.NETWORK_SHARE_PATH=s(567,null),t.BLOB_CONTAINER=s(568,null),t.BLOB_CONTAINER_LAST_BACKUP_FILE=s(569,null),t.BLOB_CONTAINER_FOLDER=s(570,null),t.BLOB_CONTAINER_RESOURCE_GROUP=s(571,null),t.BLOB_CONTAINER_STORAGE_ACCOUNT=s(572,null),t.SOURCE_DATABASES=s(573,null),t.MODE=s(574,null),t.BACKUP_LOCATION=s(575,null),t.AZURE_STORAGE_ACCOUNT_TO_UPLOAD_BACKUPS=s(576,null),t.SHIR=s(577,null),t.DATABASE_TO_BE_MIGRATED=s(578,null),t.COUNT_DATABASES=function(e){return 1===e?s(579,null,e):s(580,null,(0,a.formatNumber)(e))},t.TOTAL_TABLES_SELECTED=function(e,t){return s(581,null,(0,a.formatNumber)(e),(0,a.formatNumber)(t))},t.NOTEBOOK_QUICK_PICK_PLACEHOLDER=s(582,null),t.NOTEBOOK_INLINE_MIGRATION_TITLE=s(583,null),t.NOTEBOOK_SQL_MIGRATION_ASSESSMENT_TITLE=s(584,null),t.NOTEBOOK_OPEN_ERROR=s(585,null),t.DASHBOARD_REFRESH_MIGRATIONS_TITLE=s(586,null),t.DASHBOARD_REFRESH_MIGRATIONS_LABEL=s(587,null),t.DASHBOARD_TITLE=s(588,null),t.DASHBOARD_DESCRIPTION=s(589,null),t.DASHBOARD_MIGRATE_TASK_BUTTON_TITLE=s(590,null),t.DASHBOARD_MIGRATE_TASK_BUTTON_DESCRIPTION=s(591,null),t.DASHBOARD_LOGIN_MIGRATE_TASK_BUTTON_TITLE=s(592,null),t.DASHBOARD_LOGIN_MIGRATE_TASK_BUTTON_DESCRIPTION=s(593,null),t.DATABASE_MIGRATION_STATUS=s(594,null),t.HELP_TITLE=s(595,null),t.PRE_REQ_TITLE=s(596,null),t.PRE_REQ_1=s(597,null),t.PRE_REQ_2=s(598,null),t.PRE_REQ_3=s(599,null),t.PRE_REQ_4=s(600,null),t.MIGRATION_IN_PROGRESS=s(601,null),t.MIGRATION_FAILED=s(602,null),t.MIGRATION_COMPLETED=s(603,null),t.MIGRATION_CUTOVER_CARD=s(604,null),t.SHOW_STATUS=s(605,null),t.MIGRATION_INPROGRESS_WARNING=function(e){return s(1===e?606:607,null,e)},t.FEEDBACK_ISSUE_TITLE=s(608,null),t.BREADCRUMB_MIGRATIONS=s(609,null),t.MIGRATION_CUTOVER=s(610,null),t.COMPLETE_CUTOVER=s(611,null),t.SOURCE_DATABASE=s(612,null),t.SOURCE_SERVER=s(613,null),t.SOURCE_VERSION=s(614,null),t.TARGET_DATABASE_NAME=s(615,null),t.TARGET_TABLE_COUNT_NAME=s(616,null),t.TARGET_SERVER=s(617,null),t.TARGET_VERSION=s(618,null),t.MIGRATION_STATUS=s(619,null),t.MIGRATION_STATUS_FILTER=s(620,null),t.FULL_BACKUP_FILES=s(621,null),t.LAST_APPLIED_LSN=s(622,null),t.LAST_APPLIED_BACKUP_FILES=s(623,null),t.LAST_APPLIED_BACKUP_FILES_TAKEN_ON=s(624,null),t.CURRENTLY_RESTORING_FILE=s(625,null),t.ALL_BACKUPS_RESTORED=s(626,null),t.ACTIVE_BACKUP_FILES=s(627,null),t.MIGRATION_STATUS_REFRESH_ERROR=s(628,null),t.MIGRATION_CANCELLATION_ERROR=s(629,null),t.MIGRATION_DELETE_ERROR=s(630,null),t.FIELD_LABEL_LAST_UPLOADED_FILE=s(631,null),t.FIELD_LABEL_LAST_UPLOADED_FILE_TIME=s(632,null),t.FIELD_LABEL_PENDING_DIFF_BACKUPS=s(633,null),t.FIELD_LABEL_DETECTED_FILES=s(634,null),t.FIELD_LABEL_QUEUED_FILES=s(635,null),t.FIELD_LABEL_SKIPPED_FILES=s(636,null),t.FIELD_LABEL_UNRESTORABLE_FILES=s(637,null),t.FIELD_LABEL_LAST_RESTORED_FILE_TIME=s(638,null),t.FIELD_LABEL_RESTORED_FILES=s(639,null),t.FIELD_LABEL_RESTORING_FILES=s(640,null),t.FIELD_LABEL_RESTORED_SIZE=s(641,null),t.FIELD_LABEL_RESTORE_PLAN_SIZE=s(642,null),t.FIELD_LABEL_RESTORE_PERCENT_COMPLETED=s(643,null),t.FIELD_LABEL_MI_RESTORE_STATE=s(644,null),t.BACKUP_FILE_COLUMN_FILE_NAME=s(645,null),t.BACKUP_FILE_COLUMN_FILE_STATUS=s(646,null),t.BACKUP_FILE_COLUMN_RESTORE_STATUS=s(647,null),t.BACKUP_FILE_COLUMN_BACKUP_SIZE_MB=s(648,null),t.BACKUP_FILE_COLUMN_NUMBER_OF_STRIPES=s(649,null),t.BACKUP_FILE_COLUMN_RESTORE_START_DATE=s(650,null),t.BACKUP_FILE_COLUMN_RESTORE_FINISH_DATE=s(651,null),t.STATUS=s(652,null),t.BACKUP_START_TIME=s(653,null),t.FIRST_LSN=s(654,null),t.LAST_LSN=s(655,null),t.CANNOT_START_CUTOVER_ERROR=s(656,null),t.CANCEL_MIGRATION=s(657,null),t.DELETE_MIGRATION=s(658,null),t.ACTIVE_BACKUP_FILES_ITEMS=function(e){return 1===e?s(659,null):s(660,null,e)},t.COPY_MIGRATION_DETAILS=s(661,null),t.DETAILS_COPIED=s(662,null),t.CANCEL_MIGRATION_CONFIRMATION=s(663,null),t.DELETE_MIGRATION_CONFIRMATION=s(664,null),t.RETRY_MIGRATION_TITLE=s(665,null),t.RETRY_MIGRATION_SUMMARY=s(666,null),t.RETRY_MIGRATION_PROMPT=s(667,null),t.YES=s(668,null),t.NO=s(669,null),t.NA=s(670,null),t.EMPTY_TABLE_TEXT=s(671,null),t.EMPTY_TABLE_SUBTEXT=s(672,null),t.MIGRATION_CUTOVER_ERROR=s(673,null),t.REFRESH_BUTTON_TEXT=s(674,null),t.SERVER_OBJECTS_FIELD_LABEL=s(675,null),t.SERVER_OBJECTS_LABEL=s(676,null),t.SERVER_OBJECTS_ALL_TABLES_LABEL=s(677,null),t.SERVER_OBJECTS_IN_PROGRESS_TABLES_LABEL=s(678,null),t.SERVER_OBJECTS_SUCCESSFUL_TABLES_LABEL=s(679,null),t.SERVER_OBJECTS_FAILED_TABLES_LABEL=s(680,null),t.SERVER_OBJECTS_CANCELLED_TABLES_LABEL=s(681,null),t.FILTER_SERVER_OBJECTS_PLACEHOLDER=s(682,null),t.FILTER_SERVER_OBJECTS_ARIA_LABEL=s(683,null),t.COMPLETING_CUTOVER_WARNING=s(684,null),t.BUSINESS_CRITICAL_INFO=s(685,null),t.CUTOVER_HELP_MAIN=s(686,null),t.CUTOVER_HELP_STEP1=s(687,null),t.CUTOVER_HELP_STEP2_NETWORK_SHARE=s(688,null),t.CUTOVER_HELP_STEP2_BLOB_CONTAINER=s(689,null),t.CUTOVER_HELP_STEP3_NETWORK_SHARE=s(690,null),t.CUTOVER_HELP_STEP3_BLOB_CONTAINER=s(691,null),t.LAST_FILE_RESTORED=function(e){return s(692,null,e)},t.LAST_SCAN_COMPLETED=function(e){return s(693,null,e)},t.PENDING_BACKUPS=function(e){return s(694,null,e)},t.CONFIRM_CUTOVER_CHECKBOX=s(695,null),t.CUTOVER_IN_PROGRESS=function(e){return s(696,null,e)},t.MIGRATION_CANNOT_CANCEL=s(697,null),t.MIGRATION_CANNOT_DELETE=s(698,null),t.MIGRATION_CANNOT_CUTOVER=s(699,null),t.FILE_NAME=s(700,null),t.SIZE_COLUMN_HEADER=s(701,null),t.NO_PENDING_BACKUPS=s(702,null),t.ADD_ACCOUNT=s(703,null),t.ADD_ACCOUNT_MESSAGE=s(704,null),t.SELECT_SERVICE_MESSAGE=s(705,null),t.STATUS_ALL=s(706,null),t.STATUS_ONGOING=s(707,null),t.STATUS_COMPLETING=s(708,null),t.STATUS_SUCCEEDED=s(709,null),t.STATUS_FAILED=s(710,null),t.SEARCH_FOR_MIGRATIONS=s(711,null),t.ONLINE=s(712,null),t.OFFLINE=s(713,null),t.DATABASE=s(714,null),t.SRC_DATABASE=s(715,null),t.SRC_SERVER=s(716,null),t.SOURCE_LOGIN=s(717,null),t.LOGIN_TYPE=s(718,null),t.DEFAULT_DATABASE=s(719,null),t.LOGIN_STATUS_COLUMN=s(720,null),t.LOGIN_TARGET_STATUS_COLUMN=s(721,null),t.LOGIN_MIGRATION_STATUS_COLUMN=s(722,null),t.STATUS_COLUMN=s(723,null),t.DATABASE_MIGRATION_SERVICE=s(724,null),t.DURATION=s(725,null),t.AZURE_SQL_TARGET=s(726,null),t.SQL_MANAGED_INSTANCE=s(727,null),t.SQL_VIRTUAL_MACHINE=s(728,null),t.SQL_DATABASE=s(729,null),t.TARGET_AZURE_SQL_INSTANCE_NAME=s(730,null),t.TARGET_SERVER_COLUMN=s(731,null),t.TARGET_DATABASE_COLUMN=s(732,null),t.MIGRATION_MODE=s(733,null),t.START_TIME=s(734,null),t.FINISH_TIME=s(735,null),t.SRC_SERVER_TOOL_TIP=s(736,null),t.SRC_DATABASE_TOOL_TIP=s(737,null),t.STATUS_TOOL_TIP=s(738,null),t.DURATION_TOOL_TIP=s(739,null),t.AZURE_SQL_TARGET_TOOL_TIP=s(740,null),t.TARGET_SERVER_TOOL_TIP=s(741,null),t.TARGET_DATABASE_TOOL_TIP=s(742,null),t.MIGRATION_MODE_TOOL_TIP=s(743,null),t.START_TIME_TOOL_TIP=s(744,null),t.FINISH_TIME_TOOL_TIP=s(745,null),t.CONTEXT_MENU_TOOL_TIP=s(746,null),t.STATUS_VALUE=function(e){return s(747,null,t.StatusLookup[e]??e)},t.MIGRATION_ERROR_DETAILS_TITLE=s(748,null),t.MIGRATION_ERROR_DETAILS_LABEL=s(749,null),t.OPEN_MIGRATION_DETAILS_ERROR=s(750,null),t.OPEN_MIGRATION_TARGET_ERROR=s(751,null),t.OPEN_MIGRATION_SERVICE_ERROR=s(752,null),t.LOAD_MIGRATION_LIST_ERROR=s(753,null),t.ERROR_DIALOG_ARIA_CLICK_VIEW_ERROR_DETAILS=s(754,null),t.StatusLookup={[l.Canceled]:s(755,null),[l.Canceling]:s(756,null),[l.Completing]:s(757,null),[l.Creating]:s(758,null),[l.Failed]:s(759,null),[l.InProgress]:s(760,null),[l.ReadyForCutover]:s(761,null),[l.Restoring]:s(762,null),[l.Retriable]:s(763,null),[l.Succeeded]:s(764,null),[l.UploadingFullBackup]:s(765,null),[l.UploadingLogBackup]:s(766,null),default:void 0},t.PipelineRunStatus={[a.PipelineStatusCodes.PreparingForCopy]:s(767,null),[a.PipelineStatusCodes.Copying]:s(768,null),[a.PipelineStatusCodes.CopyFinished]:s(769,null),[a.PipelineStatusCodes.RebuildingIndexes]:s(770,null),[a.PipelineStatusCodes.Succeeded]:s(771,null),[a.PipelineStatusCodes.Failed]:s(772,null),[a.PipelineStatusCodes.Canceled]:s(773,null),[a.PipelineStatusCodes.Queued]:s(774,null),[a.PipelineStatusCodes.InProgress]:s(775,null),[a.PipelineStatusCodes.Cancelled]:s(776,null)},t.ParallelCopyType={[a.ParallelCopyTypeCodes.None]:s(777,null),[a.ParallelCopyTypeCodes.PhysicalPartitionsOfTable]:s(778,null),[a.ParallelCopyTypeCodes.DynamicRange]:s(779,null)},t.DiskTypeLookup={1:s(780,null),2:s(781,null),4:s(782,null),8:s(783,null),16:s(784,null)},t.BackupTypeLookup={[a.BackupTypeCodes.Unknown]:s(785,null),[a.BackupTypeCodes.Database]:s(786,null),[a.BackupTypeCodes.TransactionLog]:s(787,null),[a.BackupTypeCodes.File]:s(788,null),[a.BackupTypeCodes.DifferentialDatabase]:s(789,null),[a.BackupTypeCodes.DifferentialFile]:s(790,null),[a.BackupTypeCodes.Partial]:s(791,null),[a.BackupTypeCodes.DifferentialPartial]:s(792,null)},t.BackupSetRestoreStatusLookup={[a.InternalManagedDatabaseRestoreDetailsBackupSetStatusCodes.None]:s(793,null),[a.InternalManagedDatabaseRestoreDetailsBackupSetStatusCodes.Queued]:s(794,null),[a.InternalManagedDatabaseRestoreDetailsBackupSetStatusCodes.Restored]:s(795,null),[a.InternalManagedDatabaseRestoreDetailsBackupSetStatusCodes.Restoring]:s(796,null),[a.InternalManagedDatabaseRestoreDetailsBackupSetStatusCodes.Skipped]:s(797,null)},t.InternalManagedDatabaseRestoreDetailsStatusLookup={[a.InternalManagedDatabaseRestoreDetailsStatusCodes.None]:s(798,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.Initializing]:s(799,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.NotStarted]:s(800,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.SearchingBackups]:s(801,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.Restoring]:s(802,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.RestorePaused]:s(803,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.RestoreCompleted]:s(804,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.Waiting]:s(805,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.CompletingMigration]:s(806,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.Cancelled]:s(807,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.Failed]:s(808,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.Completed]:s(809,null),[a.InternalManagedDatabaseRestoreDetailsStatusCodes.Blocked]:s(810,null)},t.STATUS_WARNING_COUNT=function(e,t){if(e===l.InProgress||e===l.ReadyForCutover||e===l.UploadingFullBackup||e===l.UploadingLogBackup||e===l.Restoring||e===l.Creating||e===l.Completing)switch(t){case 0:return;case 1:return s(811,null,t);default:return s(812,null,t)}else switch(t){case 0:return;case 1:return s(813,null,t);default:return s(814,null,t)}},t.HRS=function(e){return s(e>1?815:816,null,e)},t.DAYS=function(e){return s(e>1?817:818,null,e)},t.MINUTE=function(e){return s(e>1?819:820,null,e)},t.SEC=function(e){return s(821,null,e)},t.sizeFormatter=new Intl.NumberFormat(void 0,{style:"decimal",useGrouping:!0,minimumIntegerDigits:1,minimumFractionDigits:2,maximumFractionDigits:2}),t.formatSizeMb=function(e){return void 0===e||isNaN(e)||e<0?"":e<1024?s(822,null,t.sizeFormatter.format(e)):e<1048576?s(823,null,t.sizeFormatter.format(e/1024)):s(824,null,t.sizeFormatter.format(e/1024/1024))},t.SQL_MIGRATION_SERVICE_DETAILS_SUB_TITLE=s(825,null),t.SQL_MIGRATION_SERVICE_DETAILS_BUTTON_LABEL=s(826,null),t.SQL_MIGRATION_SERVICE_DETAILS_IR_LABEL=s(827,null),t.SQL_MIGRATION_SERVICE_DETAILS_AUTH_KEYS_LABEL=s(828,null),t.SQL_MIGRATION_SERVICE_DETAILS_AUTH_KEYS_TITLE=s(829,null),t.SQL_MIGRATION_SERVICE_DETAILS_STATUS_UNAVAILABLE=s(830,null),t.SOURCE_CONFIGURATION=s(831,null),t.SOURCE_CREDENTIALS=s(832,null),t.ENTER_YOUR_SQL_CREDS=s(833,null),t.SERVER=s(834,null),t.USERNAME=s(835,null),t.SIZE=s(836,null),t.DATABASE_MIGRATE_TEXT=s(837,null),t.OFFLINE_CAPS=s(838,null),t.SELECT_DATABASE_TO_CONTINUE=s(839,null),t.ISSUES=s(840,null),t.SEARCH=s(841,null),t.INSTANCE=s(842,null),t.WARNINGS=s(843,null),t.IMPACTED_OBJECTS=s(844,null),t.OBJECT_DETAILS=s(845,null),t.ASSESSMENT_RESULTS=s(846,null),t.TYPES_LABEL=s(847,null),t.NAMES_LABEL=s(848,null),t.DESCRIPTION=s(849,null),t.RECOMMENDATION=s(850,null),t.MORE_INFO=s(851,null),t.TARGET_PLATFORM=s(852,null),t.WARNINGS_DETAILS=s(853,null),t.ISSUES_DETAILS=s(854,null),t.SELECT_DB_PROMPT=s(855,null),t.NO_ISSUES_FOUND_VM=s(856,null),t.NO_ISSUES_FOUND_MI=s(857,null),t.NO_ISSUES_FOUND_SQLDB=s(858,null),t.NO_RESULTS_AVAILABLE=s(859,null),t.BLOCKING_ISSUE_ARIA_LABEL=function(e){return s(860,null,e)},t.IMPACT_OBJECT_TYPE=function(e){return e?s(861,null,e):""},t.IMPACT_OBJECT_NAME=function(e){return e?s(862,null,e):""},t.DATABASES=function(e,t){return s(863,null,e,t)},t.DATABASES_SELECTED=function(e,t){return s(864,null,e,t)},t.LOGINS_SELECTED=function(e,t){return s(865,null,e,t)},t.NUMBER_LOGINS_MIGRATING=function(e,t){return s(866,null,e,t)},t.ISSUES_COUNT=function(e){return s(867,null,e)},t.WARNINGS_COUNT=function(e){return s(868,null,e)},t.AUTHENTICATION_TYPE=s(869,null),t.REFRESH_BUTTON_LABEL=s(870,null),t.STATUS_LABEL=s(871,null),t.SORT_LABEL=s(872,null),t.ASCENDING_LABEL=s(873,null),t.NEXT_LABEL=s(874,null),t.CANCEL_LABEL=s(875,null),t.SAVED_ASSESSMENT_RESULT=s(876,null),t.MIGRATION_CANNOT_RETRY=s(877,null),t.RETRY_MIGRATION=s(878,null),t.MIGRATION_RETRY_ERROR=s(879,null),t.MIGRATION_CANNOT_RESTART=s(880,null),t.RESTART_MIGRATION_WIZARD=s(881,null),t.MIGRATION_RESTART_ERROR=s(882,null),t.INVALID_OWNER_URI=s(883,null),t.DATABASE_BACKUP_PAGE_LOAD_ERROR=s(884,null),t.MIGRATION_SERVICE_SELECT_TITLE=s(885,null),t.MIGRATION_SERVICE_SELECT_APPLY_LABEL=s(886,null),t.MIGRATION_SERVICE_CLEAR=s(887,null),t.MIGRATION_SERVICE_SELECT_HEADING=s(888,null),t.MIGRATION_SERVICE_SELECT_SERVICE_LABEL=s(889,null),t.MIGRATION_SERVICE_SELECT_SERVICE_PROMPT=s(890,null),t.MIGRATION_SERVICE_SERVICE_PROMPT=function(e){return s(891,null,e)},t.MIGRATION_SERVICE_DESCRIPTION=s(892,null),t.DESKTOP_MIGRATION_BUTTON_LABEL=s(893,null),t.DESKTOP_IMPORT_MIGRATION_BUTTON_LABEL=s(894,null),t.DESKTOP_IMPORT_MIGRATION_BUTTON_DESCRIPTION=s(895,null),t.DESKTOP_MIGRATION_BUTTON_DESCRIPTION=s(896,null),t.DESKTOP_LOGIN_MIGRATION_BUTTON_LABEL=s(897,null),t.DESKTOP_LOGIN_MIGRATION_BUTTON_DESCRIPTION=s(898,null),t.DESKTOP_HELP_SUPPORT_BUTTON_LABEL=s(899,null),t.DESKTOP_HELP_SUPPORT_BUTTON_DESCRIPTION=s(900,null),t.DESKTOP_FEEDBACK_BUTTON_LABEL=s(901,null),t.DESKTOP_FEEDBACK_BUTTON_DESCRIPTION=s(902,null),t.DESKTOP_DASHBOARD_TAB_TITLE=s(903,null),t.DESKTOP_MIGRATIONS_TAB_TITLE=s(904,null),t.HELP_SUPPORT_TITLE=s(905,null),t.SUPPORT_RESOURCES_TITLE=s(906,null),t.SUPPORT_RESOURCES_DESCRIPTION=s(907,null),t.SUPPORT_REQUEST_TITLE=s(908,null),t.SUPPORT_REQUEST_DESCRIPTION=s(909,null),t.SUPPORT_REQUEST_NOTE=s(910,null),t.COMMUNITY_SUPPORT_TITLE=s(911,null),t.COMMUNITY_SUPPORT_DESCRIPTION=s(912,null),t.COMMUNITY_SUPPORT_NOTE=s(913,null),t.DASHBOARD_HELP_LINK_MIGRATE_USING_ADS=s(914,null),t.DASHBOARD_HELP_DESCRIPTION_MIGRATE_USING_ADS=s(915,null),t.DASHBOARD_HELP_LINK_MI_TUTORIAL=s(916,null),t.DASHBOARD_HELP_DESCRIPTION_MI_TUTORIAL=s(917,null),t.DASHBOARD_HELP_LINK_VM_TUTORIAL=s(918,null),t.DASHBOARD_HELP_DESCRIPTION_VMTUTORIAL=s(919,null),t.DASHBOARD_HELP_LINK_SQLDB_TUTORIAL=s(920,null),t.DASHBOARD_HELP_DESCRIPTION_SQLDBTUTORIAL=s(921,null),t.DASHBOARD_HELP_LINK_DMS_GUIDE=s(922,null),t.DASHBOARD_HELP_DESCRIPTION_DMS_GUIDE=s(923,null),t.DATABASE_MIGRATION_STATUS_TITLE=s(924,null),t.TABLE_MIGRATION_STATUS_TITLE=s(925,null),t.DATABASE_MIGRATION_STATUS_LABEL=function(e){return s(926,null,e??"")},t.LOGIN_MIGRATION_STATUS_LABEL=function(e){return s(927,null,e??"")},t.TABLE_MIGRATION_STATUS_LABEL=function(e){return s(928,null,e??"")},t.SQLDB_COL_TABLE_NAME=s(929,null),t.SQLDB_COL_DATA_READ=s(930,null),t.SQLDB_COL_DATA_WRITTEN=s(931,null),t.SQLDB_COL_ROWS_READ=s(932,null),t.SQLDB_COL_ROWS_COPIED=s(933,null),t.SQLDB_COL_COPY_THROUGHPUT=s(934,null),t.SQLDB_COL_COPY_DURATION=s(935,null),t.SQLDB_COL_PARRALEL_COPY_TYPE=s(936,null),t.SQLDB_COL_USED_PARALLEL_COPIES=s(937,null),t.SQLDB_COL_COPY_START=s(938,null),t.COPY_RESULTS=s(939,null),t.MULTI_STEP_RESULTS_HEADING=s(940,null),t.STEPS_TITLE=s(941,null),t.RUNNING_MULTI_STEPS_HEADING=s(942,null),t.COMPLETED_MULTI_STEPS_HEADING=s(943,null),t.SOME_STEPS_ARE_STILL_RUNNING=s(944,null),t.ALL_STEPS_SUCCEEDED=s(945,null),t.ALL_STEPS_COMPLETED_ERRORS=function(e){return s(946,null,r.EOL,e)},t.RESULTS_INFO_BOX_STATUS=function(e,t){const i=e??"";return t&&t.length>0?s(947,null,i,r.EOL,t.join(r.EOL)):s(948,null,i)},t.TDE_WIZARD_TITLE=s(949,null),t.TDE_WIZARD_DESCRIPTION=s(950,null),t.TDE_WIZARD_MIGRATION_CAPTION=s(951,null),t.TDE_WIZARD_MIGRATION_OPTION_ADS=s(952,null),t.TDE_WIZARD_MIGRATION_OPTION_ADS_CONFIRM=s(953,null),t.TDE_WIZARD_MIGRATION_OPTION_MANUAL=s(954,null),t.TDE_BUTTON_CAPTION=s(955,null),t.TDE_WIZARD_MSG_MANUAL=s(956,null),t.TDE_WIZARD_MSG_TDE=s(957,null),t.TDE_WIZARD_MSG_EMPTY=s(958,null),t.TDE_VALIDATION_GROUP_TITLE=s(959,null),t.TDE_VALIDATION_TITLE=s(960,null),t.TDE_VALIDATION_REQUIREMENTS_MESSAGE=s(961,null),t.TDE_VALIDATION_STATUS_PENDING=s(962,null);t.TDE_VALIDATION_STATUS_RUNNING=s(963,null),t.TDE_VALIDATION_STATUS_SUCCEEDED=s(964,null),t.TDE_VALIDATION_STATUS_RUN_VALIDATION=s(965,null),t.TDE_VALIDATION_DESCRIPTION=s(966,null),t.TDE_VALIDATION_ERROR=s(967,null),t.TDE_VALIDATION_TROUBLESHOOTING_TIPS=s(968,null),t.TDE_MIGRATION_ERROR=function(e){return s(969,null,e)},t.TDE_MIGRATION_ERROR_DB=function(e,t){return s(970,null,e,t)},t.TDE_MSG_DATABASES_SELECTED=function(e,t){return s(971,null,e,t)},t.TDE_WIZARD_DATABASES_SELECTED=function(e,t){return s(972,null,e,t)},t.TDE_WIZARD_MIGRATION_OPTION_MANUAL_WARNING=s(973,null),t.TDE_WIZARD_ADS_CERTS_INFO=s(974,null),t.TDE_WIZARD_CERTS_NETWORK_SHARE_LABEL=s(975,null),t.TDE_WIZARD_CERTS_NETWORK_SHARE_PLACEHOLDER=s(976,null),t.TDE_WIZARD_CERTS_NETWORK_SHARE_INFO=s(977,null),t.TDE_MIGRATE_BUTTON=s(978,null),t.TDE_WIZARD_CERT_MIGRATION_BUTTON_MUST_BE_CLICKED=s(979,null,t.TDE_MIGRATE_BUTTON),t.STATE_CANCELED=s(980,null),t.STATE_PENDING=s(981,null),t.STATE_RUNNING=s(982,null),t.STATE_SUCCEEDED=s(983,null),t.STATE_FAILED=s(984,null),t.TDE_MIGRATEDIALOG_TITLE=s(985,null),t.TDE_MIGRATE_DONE_BUTTON=s(986,null),t.TDE_MIGRATE_HEADING=s(987,null),t.TDE_MIGRATE_REQUIRED=s(988,null),t.TDE_MIGRATE_COLUMN_DATABASES=s(989,null),t.TDE_MIGRATE_COLUMN_STATUS=s(990,null),t.TDE_MIGRATE_RETRY_VALIDATION=s(991,null),t.TDE_MIGRATE_COPY_RESULTS=s(992,null),t.TDE_MIGRATE_RESULTS_HEADING=s(993,null),t.TDE_MIGRATE_RESULTS_HEADING_PREVIOUS=s(994,null),t.TDE_MIGRATE_RESULTS_HEADING_COMPLETED=s(995,null),t.TDE_MIGRATE_VALIDATION_COMPLETED=s(996,null),t.TDE_MIGRATE_VALIDATION_CANCELED=s(997,null),t.TDE_MIGRATE_VALIDATION_COMPLETED_ERRORS=function(e){return s(998,null,r.EOL,e)},t.TDE_MIGRATE_VALIDATION_STATUS=function(e,t){return s(999,null,e??"",r.EOL,t)},t.TDE_MIGRATE_MESSAGE_SUCCESS=s(1e3,null),t.TDE_MIGRATE_MESSAGE_CANCELED_ERRORS=function(e){return s(1001,null,r.EOL,e)},t.TDE_MIGRATE_MESSAGE_CANCELED=s(1002,null),t.TDE_MIGRATE_MESSAGE_NOT_RUN=s(1003,null),t.TDE_MIGRATE_STATUS_ERROR=function(e,t){return s(1004,null,e??"",r.EOL,t)},t.TDE_COMPLETED_STATUS=function(e,t){return s(1005,null,e,t)},t.FULL_SCHEMA_MISSING_ON_TARGET=s(1006,null),t.PARTIAL_SCHEMA_ON_TARGET=s(1007,null),t.FULL_SCHEMA_ON_TARGET=s(1008,null),t.ALL_SOURCE_TABLES_EMPTY=s(1009,null),t.SCHEMA_MIGRATION_INFO=s(1010,null),t.DATA_MIGRATION_INFO=s(1011,null),t.SCHEMA_MIGRATION_HEADER=s(1012,null),t.DATA_MIGRATION_HEADER=s(1013,null),t.SCHEMA_MIGRATION_CHECKBOX_INFO=s(1014,null),t.SCHEMA_ONLY=s(1015,null),t.DATA_ONLY=s(1016,null),t.SCHEMA_AND_DATA=s(1017,null),t.BACKUP_AND_RESTORE=s(1018,null),t.SCHEMA_MIGRATION_STATUS=s(1019,null),t.OBJECTS_COLLECTED=s(1020,null),t.COLLECTION_STARTED=s(1021,null),t.COLLECTION_ENDED=s(1022,null),t.SCRIPT_GENERATION=s(1023,null),t.SCRIPTING_STARTED=s(1024,null),t.SCRIPTING_ENDED=s(1025,null),t.SCRIPTED_OBJECTS_COUNT=s(1026,null),t.SCRIPTING_ERROR_COUNT=s(1027,null),t.MIGRATION_TYPE=s(1028,null),t.SCRIPT_DEPLOYMENT=s(1029,null),t.DEPLOYMENT_STARTED=s(1030,null),t.DEPLOYMENT_ENDED=s(1031,null),t.DEPLOYMENT_COUNT=s(1032,null),t.DEPLOYMENT_ERROR_COUNT=s(1033,null),t.SCHEMA_MIGRATION_ASSESSMENT_WARNING_MESSAGE=s(1034,null),t.SchemaMigrationFailedRulesLookup={ComputeClause:s(1035,null),CrossDatabaseReferences:s(1036,null),FileStream:s(1037,null),OpenRowsetWithNonBlobDataSourceBulk:s(1038,null),OpenRowsetWithSQLAndNonSQLProvider:s(1039,null),BulkInsert:s(1040,null),CryptographicProvider:s(1041,null),MSDTCTransactSQL:s(1042,null),DisableDefCNSTCHK:s(1043,null),FastFirstRowHint:s(1044,null),default:void 0},t.SCHEMA_MIGRATION_COLUMN_LABLE=s(1045,null),t.UNAVAILABLE_TABLE_NAME_COLUMN=s(1046,null),t.NOT_EXIST_IN_TARGET_TABLE_NAME_COLUMN=s(1047,null),t.TABLE_SELECTION_COUNT_TO_TARGET=function(e,t){return s(1048,null,(0,a.formatNumber)(e),(0,a.formatNumber)(t))},t.AVAILABLE_TABLE_COUNT_ON_TARGET=function(e){return s(1049,null,(0,a.formatNumber)(e))},t.MISSING_TARGET_TABLES_COUNT=function(e){return s(1050,null,(0,a.formatNumber)(e))},t.UNAVAILABLE_SOURCE_TABLES_COUNT=function(e){return s(1051,null,(0,a.formatNumber)(e))},t.MISSING_TABLES_HEADING=s(1052,null),t.UNAVAILABLE_SOURCE_TABLES_HEADING=s(1053,null),t.DATABASE_MISSING_TABLES=s(1054,null),t.MIGRATION_TYPE_TOOL_TIP=s(1055,null),t.SchemaMigrationStatusLookup={[l.CollectionCompleted]:s(1056,null),[l.PrefetchObjects]:s(1057,null),[l.GetDependency]:s(1058,null),[l.ScriptObjects]:s(1059,null),[l.ScriptViewIndexes]:s(1060,null),[l.ScriptOwnership]:s(1061,null),[l.GeneratingScript]:s(1062,null),[l.GeneratingScriptCompleted]:s(1063,null),[l.DeployingSchema]:s(1064,null),[l.DeploymentCompleted]:s(1065,null),[l.Completed]:s(1066,null),[l.CompletedWithError]:s(1067,null),default:void 0}},9563:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TDE_VALIDATION_INFO_TEXT=t.TDE_VALIDATION_INFO_LABEL=t.PERFORMANCE_DATA_DIALOG_CSS=t.ASSESSMENT_SUMMARY_CARD_CSS=t.CARD_AXES_LABEL=t.TOOLBAR_CSS=t.CARD_CSS=t.SUBTITLE_LABEL_CSS=t.BIG_NUMBER_CSS=t.SMALL_NOTE_CSS=t.BOLD_NOTE_CSS=t.NOTE_CSS=t.LIGHT_LABEL_CSS=t.LABEL_CSS=t.BODY_CSS=t.SECTION_HEADER_CSS=t.PAGE_SUBTITLE_CSS=t.PAGE_TITLE_CSS=t.DASHBOARD_TITLE_CSS=void 0,t.DASHBOARD_TITLE_CSS={"font-size":"36px","line-height":"48px",margin:"16px 0 8px 0"},t.PAGE_TITLE_CSS={"font-size":"18px","line-height":"24px","font-weight":"600",margin:"0 0 4px 0"},t.PAGE_SUBTITLE_CSS={"font-size":"15px","line-height":"19px",margin:"0 0 12px 0"},t.SECTION_HEADER_CSS={"font-size":"14px","line-height":"20px","font-weight":"600",margin:"4px 0"},t.BODY_CSS={"font-size":"13px","line-height":"18px",margin:"4px 0"},t.LABEL_CSS={...t.BODY_CSS,margin:"0 0 4px 0","font-weight":"600"},t.LIGHT_LABEL_CSS={...t.BODY_CSS,"font-weight":"350"},t.NOTE_CSS={"font-size":"12px","line-height":"16px",margin:"0","font-weight":"350"},t.BOLD_NOTE_CSS={...t.NOTE_CSS,"font-weight":"600"},t.SMALL_NOTE_CSS={"font-size":"10px","line-height":"14px",margin:"0"},t.BIG_NUMBER_CSS={"font-size":"28px","line-height":"36px",margin:"0"},t.SUBTITLE_LABEL_CSS={...t.BODY_CSS,"font-weight":"400"},t.CARD_CSS={width:"190px","box-shadow":"0px 1px 4px rgba(0, 0, 0, 0.13)",padding:"8px 0px 8px 12px","border-radius":"4px","margin-top":"8px"},t.TOOLBAR_CSS={"font-size":"12px","line-height":"16px","font-weight":"400",margin:"0"},t.CARD_AXES_LABEL={"font-size":"12px",height:"14px","line-height":"14px",margin:"0px","text-align":"right","font-weight":"600"},t.ASSESSMENT_SUMMARY_CARD_CSS={"font-size":"16px","line-height":"21.28px","font-weight":"700",margin:"0px"},t.PERFORMANCE_DATA_DIALOG_CSS={"font-size":"13px","line-height":"18px","font-weight":"600"},t.TDE_VALIDATION_INFO_LABEL={"font-size":"14px","line-height":"20px","font-weight":"600",margin:"0 0 0 0px",width:"400px",display:"inline-block"},t.TDE_VALIDATION_INFO_TEXT={"font-size":"13px","line-height":"18px",margin:"0 0 0 0px",width:"440px",overflow:"scroll",display:"inline-block"}},7527:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardStatusBar=void 0;const n=i(9072),r=i(9496),o=i(2074);t.DashboardStatusBar=class{constructor(e,t,i,n){this._errorTitle="",this._errorLabel="",this._errorDescription="",this._errorDialogIsOpen=!1,this._errorEvent=new r.EventEmitter,this._disposables=[],this._context=e,this._statusInfoBox=i,this._errorEvent=n,this._disposables.push(this._errorEvent.event((async e=>{if(e.connectionId===t)return e.title.length>0&&e.label.length>0?await this.showError(e.title,e.label,e.message):await this.clearError()})))}dispose(){this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}async showError(e,t,i){this._errorTitle=e,this._errorLabel=t,this._errorDescription=i,this._statusInfoBox.style="error",this._statusInfoBox.text=e,this._statusInfoBox.ariaLabel=e,await this._updateStatusDisplay(this._statusInfoBox,!0)}async clearError(){await this._updateStatusDisplay(this._statusInfoBox,!1),this._errorTitle="",this._errorLabel="",this._errorDescription="",this._statusInfoBox.style="success",this._statusInfoBox.text=""}async openErrorDialog(){if(!this._errorDialogIsOpen)try{const e=n.window.createTab(this._errorTitle);e.registerContent((async e=>{const t=e.modelBuilder.flexContainer().withItems([e.modelBuilder.text().withProps({value:this._errorLabel,CSSStyles:{margin:"0px 0px 5px 5px"}}).component(),e.modelBuilder.inputBox().withProps({value:this._errorDescription,readOnly:!0,multiline:!0,height:400,inputType:"text",display:"inline-block",CSSStyles:{overflow:"hidden auto",margin:"0px 0px 0px 5px"}}).component()]).withLayout({flexFlow:"column",width:420}).withProps({CSSStyles:{margin:"0 10px 0 10px"}}).component();await e.initializeModel(t)}));const t=n.window.createModelViewDialog(this._errorTitle,"errorDialog",450,"flyout");t.content=[e],t.okButton.label=o.CLEAR,t.okButton.focused=!0,t.okButton.position="left",t.cancelButton.label=o.CLOSE,t.cancelButton.position="left",this._context.subscriptions.push(t.onClosed((async e=>{"ok"===e&&await this.clearError(),this._errorDialogIsOpen=!1}))),n.window.openDialog(t)}catch(e){this._errorDialogIsOpen=!1}}async _updateStatusDisplay(e,t){await e.updateCssStyles({display:t?"inline":"none"})}}},303:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardTab=t.DashboardTabId=void 0;const n=i(9072),r=i(9496),o=i(1386),a=i(9563),s=i(2074),l=i(3186),c=i(1419),u=i(2987),d=i(7475),p=i(8777),h=i(3963);t.DashboardTabId="DashboardTab";const _={"font-size":"13px","line-height":"18px",margin:"4px 0","text-align":"left"};class g extends p.TabBase{constructor(){super(),this.title=s.DESKTOP_DASHBOARD_TAB_TITLE,this.id=t.DashboardTabId,this.icon=o.IconPathHelper.sqlMigrationLogo}async create(e,t,i,n,r){return this.context=e,this.view=t,this.openMigrationsFcn=i,this.serviceContextChangedEvent=n,this.statusBar=r,await this.initialize(this.view),this}async refresh(){if(!this.isRefreshing&&void 0!==this._migrationStatusCardLoadingContainer)try{this.isRefreshing=!0,this._refreshButton.enabled=!1,this._migrationStatusCardLoadingContainer.loading=!0,await this.statusBar.clearError();const e=await(0,c.getCurrentMigrations)(),t=(0,l.filterMigrations)(e,p.AdsMigrationStatus.ONGOING);let i=0;for(let e=0;e<t.length;e++)(t[e].properties.migrationFailureError?.message||t[e].properties.migrationStatusDetails?.fileUploadBlockingErrors||t[e].properties.migrationStatusDetails?.restoreBlockingReason)&&(i+=1);i>0?(this._inProgressWarningMigrationButton.warningText.value=s.MIGRATION_INPROGRESS_WARNING(i),this._inProgressMigrationButton.container.display="none",this._inProgressWarningMigrationButton.container.display=""):(this._inProgressMigrationButton.container.display="",this._inProgressWarningMigrationButton.container.display="none"),this._inProgressMigrationButton.count.value=t.length.toString(),this._inProgressWarningMigrationButton.count.value=t.length.toString(),this._updateStatusCard(e,this._successfulMigrationButton,p.AdsMigrationStatus.SUCCEEDED,!0),this._updateStatusCard(e,this._failedMigrationButton,p.AdsMigrationStatus.FAILED),this._updateStatusCard(e,this._completingMigrationButton,p.AdsMigrationStatus.COMPLETING),this._updateStatusCard(e,this._allMigrationButton,p.AdsMigrationStatus.ALL,!0),await this._updateSummaryStatus()}catch(e){await this.statusBar.showError(s.DASHBOARD_REFRESH_MIGRATIONS_TITLE,s.DASHBOARD_REFRESH_MIGRATIONS_LABEL,e.message),(0,d.logError)(d.TelemetryViews.SqlServerDashboard,"RefreshgMigrationFailed",e)}finally{this._migrationStatusCardLoadingContainer.loading=!1,this._refreshButton.enabled=!0,this.isRefreshing=!1}}async initialize(e){const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:"100%",height:"100%"}).component(),i=e.modelBuilder.toolbarContainer();i.addToolbarItems([{component:this.createNewMigrationButton()},{component:this.createNewLoginMigrationButton()},{component:this.createImportMigrationButton()},{component:this.createNewHelpAndSupportButton()},{component:this.createFeedbackButton()}]),t.addItem(i.component(),{CSSStyles:{flex:"0 0 auto"}});const n=this._createHeader(e),a=r.Uri.file(o.IconPathHelper.migrationDashboardHeaderBackground.light).with({scheme:"vscode-file"});t.addItem(n,{CSSStyles:{"background-image":`\n\t\t\t\t\turl(${a}),\n\t\t\t\t\tlinear-gradient(0deg, rgba(0, 0, 0, 0.05) 0%, rgba(0, 0, 0, 0) 100%)`,"background-repeat":"no-repeat","background-position":"91.06% 100%","margin-bottom":"20px"}});const s=await this._createTasks(e);n.addItem(s,{CSSStyles:{width:"800px",margin:"24px"}}),t.addItem(await this._createFooter(e),{CSSStyles:{margin:"0 24px"}}),this.content=t}_createHeader(e){const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:800}).component(),i=e.modelBuilder.text().withProps({value:s.DASHBOARD_TITLE,width:"750px",CSSStyles:{...a.DASHBOARD_TITLE_CSS}}).component(),n=e.modelBuilder.text().withProps({value:s.DASHBOARD_DESCRIPTION,CSSStyles:{...a.NOTE_CSS}}).component();return t.addItems([i,n],{CSSStyles:{width:"800px","padding-left":"24px"}}),t}async _createTasks(e){const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",width:"100%"}).component(),i={title:s.DASHBOARD_MIGRATE_TASK_BUTTON_TITLE,description:s.DASHBOARD_MIGRATE_TASK_BUTTON_DESCRIPTION,iconPath:o.IconPathHelper.sqlMigrationLogo,command:l.MenuCommands.StartMigration},n=e.modelBuilder.text().withProps({value:s.PRE_REQ_TITLE,CSSStyles:{...a.BODY_CSS,margin:"0px"}}).component(),r=this._createTaskButton(e,i),c=e.modelBuilder.text().withProps({value:[s.PRE_REQ_1,s.PRE_REQ_2,s.PRE_REQ_3,s.PRE_REQ_4],CSSStyles:{...a.SMALL_NOTE_CSS,"padding-left":"12px",margin:"-0.5em 0px"}}).component(),u=e.modelBuilder.hyperlink().withProps({label:s.LEARN_MORE,ariaLabel:s.LEARN_MORE_ABOUT_PRE_REQS,url:"https://aka.ms/azuresqlmigrationextension"}).component(),d=e.modelBuilder.flexContainer().withItems([n,c,u]).withLayout({flexFlow:"column"}).component();return t.addItem(r,{}),t.addItems([d],{CSSStyles:{"margin-left":"20px"}}),t}_createTaskButton(e,t){const i=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Informational,description:t.description,height:84,iconHeight:32,iconPath:t.iconPath,iconWidth:32,label:t.title,title:t.title,width:236,CSSStyles:{border:"1px solid",display:"flex","flex-direction":"column","justify-content":"flex-start","border-radius":"4px",transition:"all .5s ease"}}).component();return this.disposables.push(i.onDidClick((async()=>{t.command&&await r.commands.executeCommand(t.command)}))),e.modelBuilder.divContainer().withItems([i]).component()}async _createFooter(e){const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",width:800,justifyContent:"flex-start"}).component(),i=await this._createMigrationStatusContainer(e),n=this._createVideoLinks(e);return t.addItem(i),t.addItem(n,{CSSStyles:{"padding-left":"8px"}}),t}_createVideoLinks(e){const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:"440px",height:"436px",justifyContent:"flex-start"}).withProps({CSSStyles:{border:"1px solid rgba(0, 0, 0, 0.1)",padding:"10px",overflow:"scroll"}}).component(),i=e.modelBuilder.text().withProps({value:s.HELP_TITLE,CSSStyles:{...a.SECTION_HEADER_CSS}}).component();t.addItems([i],{CSSStyles:{"margin-bottom":"16px"}});const n=[{title:s.DASHBOARD_HELP_LINK_MIGRATE_USING_ADS,description:s.DASHBOARD_HELP_DESCRIPTION_MIGRATE_USING_ADS,link:"https://learn.microsoft.com/azure/dms/migration-using-azure-data-studio"},{title:s.DASHBOARD_HELP_LINK_MI_TUTORIAL,description:s.DASHBOARD_HELP_DESCRIPTION_MI_TUTORIAL,link:"https://learn.microsoft.com/azure/dms/tutorial-sql-server-managed-instance-online-ads"},{title:s.DASHBOARD_HELP_LINK_VM_TUTORIAL,description:s.DASHBOARD_HELP_DESCRIPTION_VMTUTORIAL,link:"https://learn.microsoft.com/azure/dms/tutorial-sql-server-to-virtual-machine-online-ads"},{title:s.DASHBOARD_HELP_LINK_SQLDB_TUTORIAL,description:s.DASHBOARD_HELP_DESCRIPTION_SQLDBTUTORIAL,link:"https://learn.microsoft.com/azure/dms/tutorial-sql-server-azure-sql-database-offline-ads"},{title:s.DASHBOARD_HELP_LINK_DMS_GUIDE,description:s.DASHBOARD_HELP_DESCRIPTION_DMS_GUIDE,link:"https://learn.microsoft.com/data-migration/"}];t.addItems(n.map((t=>this._createLink(e,t))),{});const r=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",width:800}).component();return r.addItems([].map((t=>this._createVideoLink(e,t))),{}),t.addItem(r),t}_createLink(e,t){const i=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column",width:"400px","justify-content":"flex-start","margin-bottom":"12px"}}).component(),n=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"row",width:"400px","justify-content":"flex-start","margin-bottom":"4px"}}).component(),r=e.modelBuilder.text().withProps({value:t.description,width:400,CSSStyles:{...a.NOTE_CSS}}).component(),o=e.modelBuilder.hyperlink().withProps({label:t.title,url:t.link,showLinkIcon:!0,CSSStyles:{...a.BODY_CSS}}).component();return n.addItem(o),i.addItems([n,r]),i}_createVideoLink(e,t){const i=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:150,justifyContent:"flex-start"}).component(),n=e.modelBuilder.divContainer().withProps({clickable:!0,width:150,height:"100px"}).component(),o=e.modelBuilder.text().withProps({value:t.description,width:150,height:"50px",CSSStyles:{...a.BODY_CSS}}).component();return this.disposables.push(n.onDidClick((async()=>{t.link&&await r.env.openExternal(r.Uri.parse(t.link))}))),i.addItem(n,{CSSStyles:{"background-image":`url(${r.Uri.file(t.iconPath?.light)})`,"background-repeat":"no-repeat","background-position":"top",width:"150px",height:"104px","background-size":"150px 120px"}}),i.addItem(o),i}_createStatusCard(e,t,i,n=!1){const r=n?"70px":"50px",l=e.modelBuilder.flexContainer().withProps({CSSStyles:{width:"400px",height:r,"align-items":"center"}}).component(),c=e.modelBuilder.image().withProps({iconPath:t.light,iconHeight:24,iconWidth:24,height:32,CSSStyles:{margin:"0 8px"}}).component(),u=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component(),d=e.modelBuilder.text().withProps({value:i}).withProps({CSSStyles:{...a.SECTION_HEADER_CSS,width:"240px"}}).component();u.addItem(d);const p=e.modelBuilder.text().withProps({value:"0",CSSStyles:{...a.BIG_NUMBER_CSS,margin:"0 0 0 8px","text-align":"center"}}).component();let h,_;if(n){const t=e.modelBuilder.image().withProps({iconPath:o.IconPathHelper.warning,iconWidth:12,iconHeight:12,width:12,height:18}).component(),i="";_=e.modelBuilder.text().withProps({value:i,CSSStyles:{...a.BODY_CSS,"padding-left":"8px"}}).component(),h=e.modelBuilder.flexContainer().withItems([t,_],{flex:"0 0 auto"}).withProps({CSSStyles:{"align-items":"center"}}).component(),u.addItem(h)}return l.addItems([c,u,p]),{container:e.modelBuilder.divContainer().withItems([l]).withProps({ariaRole:"button",ariaLabel:s.SHOW_STATUS,clickable:!0,CSSStyles:{height:r,"margin-bottom":"16px",border:"1px solid",display:"flex","flex-direction":"column","justify-content":"flex-start","border-radius":"4px",transition:"all .5s ease"}}).component(),count:p,textContainer:u,warningContainer:h,warningText:_}}async _createMigrationStatusContainer(e){const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:"400px",height:"436px",justifyContent:"flex-start"}).withProps({CSSStyles:{border:"1px solid rgba(0, 0, 0, 0.1)",padding:"10px"}}).component(),i=e.modelBuilder.text().withProps({value:s.DATABASE_MIGRATION_STATUS,width:"100%",CSSStyles:{...a.SECTION_HEADER_CSS}}).component();this._refreshButton=e.modelBuilder.button().withProps({label:s.REFRESH,iconPath:o.IconPathHelper.refresh,iconHeight:16,iconWidth:16,width:70,CSSStyles:{float:"right"}}).component();const n=e.modelBuilder.flexContainer().withItems([i,this._refreshButton]).withLayout({alignContent:"center",alignItems:"center",flexFlow:"row"}).component();this.disposables.push(this._refreshButton.onDidClick((async e=>await this.refresh())));const r=e.modelBuilder.flexContainer().withProps({CSSStyles:{"justify-content":"left","align-iems":"center"}}).component();r.addItem(await this._createServiceSelector(e)),this._selectServiceText=e.modelBuilder.text().withProps({value:s.SELECT_SERVICE_MESSAGE,CSSStyles:{"font-size":"12px",margin:"10px","font-weight":"350","text-align":"center",display:"none"}}).component();const l=e.modelBuilder.flexContainer().withItems([n,r]).withLayout({flexFlow:"column"}).component();return this._migrationStatusCardsContainer=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"272px"}).withProps({CSSStyles:{overflow:"hidden auto"}}).component(),await this._updateSummaryStatus(),this._inProgressMigrationButton=this._createStatusCard(e,o.IconPathHelper.inProgressMigration,s.MIGRATION_IN_PROGRESS),this.disposables.push(this._inProgressMigrationButton.container.onDidClick((async e=>await this.openMigrationsFcn(p.AdsMigrationStatus.ONGOING)))),this._migrationStatusCardsContainer.addItem(this._inProgressMigrationButton.container,{flex:"0 0 auto"}),this._inProgressWarningMigrationButton=this._createStatusCard(e,o.IconPathHelper.inProgressMigration,s.MIGRATION_IN_PROGRESS,!0),this.disposables.push(this._inProgressWarningMigrationButton.container.onDidClick((async e=>await this.openMigrationsFcn(p.AdsMigrationStatus.ONGOING)))),this._migrationStatusCardsContainer.addItem(this._inProgressWarningMigrationButton.container,{flex:"0 0 auto"}),this._successfulMigrationButton=this._createStatusCard(e,o.IconPathHelper.completedMigration,s.MIGRATION_COMPLETED),this.disposables.push(this._successfulMigrationButton.container.onDidClick((async e=>await this.openMigrationsFcn(p.AdsMigrationStatus.SUCCEEDED)))),this._migrationStatusCardsContainer.addItem(this._successfulMigrationButton.container,{flex:"0 0 auto"}),this._completingMigrationButton=this._createStatusCard(e,o.IconPathHelper.completingCutover,s.MIGRATION_CUTOVER_CARD),this.disposables.push(this._completingMigrationButton.container.onDidClick((async e=>await this.openMigrationsFcn(p.AdsMigrationStatus.COMPLETING)))),this._migrationStatusCardsContainer.addItem(this._completingMigrationButton.container,{flex:"0 0 auto"}),this._failedMigrationButton=this._createStatusCard(e,o.IconPathHelper.error,s.MIGRATION_FAILED),this.disposables.push(this._failedMigrationButton.container.onDidClick((async e=>await this.openMigrationsFcn(p.AdsMigrationStatus.FAILED)))),this._migrationStatusCardsContainer.addItem(this._failedMigrationButton.container,{flex:"0 0 auto"}),this._allMigrationButton=this._createStatusCard(e,o.IconPathHelper.view,s.VIEW_ALL),this.disposables.push(this._allMigrationButton.container.onDidClick((async e=>await this.openMigrationsFcn(p.AdsMigrationStatus.ALL)))),this._migrationStatusCardsContainer.addItem(this._allMigrationButton.container,{flex:"0 0 auto"}),this._migrationStatusCardLoadingContainer=e.modelBuilder.loadingComponent().withItem(this._migrationStatusCardsContainer).component(),t.addItem(l,{CSSStyles:{"margin-bottom":"10px"}}),t.addItem(this._selectServiceText,{}),t.addItem(this._migrationStatusCardLoadingContainer,{}),t}async _createServiceSelector(e){const t=await(0,c.getSelectedServiceStatus)();return this._serviceContextButton=e.modelBuilder.button().withProps({iconPath:o.IconPathHelper.sqlMigrationService,iconHeight:22,iconWidth:22,label:t,title:t,description:s.MIGRATION_SERVICE_DESCRIPTION,buttonType:n.ButtonType.Informational,width:375,CSSStyles:{..._}}).component(),this.disposables.push(this._serviceContextButton.onDidClick((async()=>{const e=new u.SelectMigrationServiceDialog(this.serviceContextChangedEvent);await e.initialize()}))),this.disposables.push(this.serviceContextChangedEvent.event((async e=>{e.connectionId===await(0,h.getSourceConnectionId)()&&(await this.updateServiceButtonContext(this._serviceContextButton),await this.refresh())}))),await this.updateServiceButtonContext(this._serviceContextButton),this._serviceContextButton}_updateStatusCard(e,t,i,n){const r=(0,l.filterMigrations)(e,i),o=r?.length||0;t.container.display=o>0||n?"":"none",t.count.value=o.toString()}async _updateSummaryStatus(){const e=await c.MigrationLocalStorage.getMigrationServiceContext(),t=(0,c.isServiceContextValid)(e);await this._selectServiceText.updateCssStyles({display:t?"none":"block"}),await this._migrationStatusCardsContainer.updateCssStyles({visibility:t?"visible":"hidden"}),this._refreshButton.enabled=t}}t.DashboardTab=g},9380:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationDetailsTab=void 0;const n=i(9072),r=i(1386),o=i(2074),a=i(3186),s=i(7475),l=i(9563),c=i(1456),u=i(4294),d=i(3186),p=i(1456),h=i(8777),_=i(1145);class g extends _.MigrationDetailsTabBase{constructor(){super(),this.id="MigrationDetailsTab"}async create(e,t,i,n){return this.view=t,this.context=e,this.openMigrationsListFcn=i,this.statusBar=n,await this.initialize(this.view),this}async refresh(e){if(!this.isRefreshing&&void 0!==this.refreshLoader&&void 0!==this.model?.migration)try{this.isRefreshing=!0,this.refreshLoader.loading=!0,await this.statusBar.clearError(),e&&(this._clearControlsValue(),await d.updateControlDisplay(this._fileTable,!1),await this._fileTable.updateProperty("columns",this._getTableColumns(this.model?.migration)),await this._showControls(this.model?.migration)),await this._fileTable.updateProperty("data",[]),await this.model.fetchStatus();const t=this.model?.migration;await this.cutoverButton.updateCssStyles({display:(0,c.isOfflineMigation)(t)?"none":"block"}),await this.showMigrationErrors(t);let i="",n="";const r=[];t?.properties?.migrationStatusDetails?.activeBackupSets?.forEach((e=>{r.push(...e?.listOfBackupFiles?.map((t=>({backupFileName:t.fileName,backupType:o.BackupTypeLookup[e.backupType]??e.backupType,backupStatus:o.BackupSetRestoreStatusLookup[t.status]??t.status,restoreStatus:o.InternalManagedDatabaseRestoreDetailsStatusLookup[e.restoreStatus]??e.restoreStatus,backupSizeMB:o.formatSizeMb(e.backupSizeMB),numberOfStripes:e.numberOfStripes,dataUploadRate:`${(0,a.convertByteSizeToReadableUnit)(t.dataWritten??0)} / ${(0,a.convertByteSizeToReadableUnit)(t.totalSize)}`,dataUploaded:t.copyThroughput?(t.copyThroughput/1024).toFixed(2):h.EmptySettingValue,backupStartTime:p.formatDateTimeString(e.backupStartDate),restoreStartDate:p.formatDateTimeString(e.restoreStartDate),restoreFinishDate:p.formatDateTimeString(e.restoreFinishDate),firstLSN:e.firstLSN,lastLSN:e.lastLSN})))),e.listOfBackupFiles?.length>0&&e.listOfBackupFiles[0].fileName===t?.properties?.migrationStatusDetails?.lastRestoredFilename&&(i=e.lastLSN,n=e.backupFinishDate)})),this.databaseLabel.value=t?.properties?.sourceDatabaseName,this._updateInfoFieldValue(this._sourceDatabaseInfoField,t?.properties?.sourceDatabaseName),this._updateInfoFieldValue(this._sourceDetailsInfoField,t?.properties?.sourceServerName),this._updateInfoFieldValue(this._migrationStatusInfoField,(0,c.getMigrationStatusString)(t)),this._migrationStatusInfoField.icon.iconPath=(0,a.getMigrationStatusImage)(t),this._updateInfoFieldValue(this._fullBackupFileOnInfoField,p.getMigrationFullBackupFiles(t)??h.EmptySettingValue),this._updateInfoFieldValue(this._backupLocationInfoField,p.getMigrationBackupLocation(t)??h.EmptySettingValue);const s=t?.properties?.migrationStatusDetails;this._updateInfoFieldValue(this._lastUploadedFileNameField,s?.lastUploadedFileName??h.EmptySettingValue),this._updateInfoFieldValue(this._lastUploadedFileTimeField,s?.lastUploadedFileTime?p.formatDateTimeString(n):h.EmptySettingValue),this._updateInfoFieldValue(this._pendingDiffBackupsCountField,s?.pendingDiffBackupsCount?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._detectedFilesField,s?.detectedFiles?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._queuedFilesField,s?.queuedFiles?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._skippedFilesField,s?.skippedFiles?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._unrestorableFilesField,s?.unrestorableFiles?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._targetDatabaseInfoField,t.name??h.EmptySettingValue),this._updateInfoFieldValue(this._targetServerInfoField,(0,u.getResourceName)(t?.properties?.scope)??h.EmptySettingValue),this._updateInfoFieldValue(this._targetVersionInfoField,_.MigrationTargetTypeName[(0,c.getMigrationTargetTypeEnum)(t)??""]??h.EmptySettingValue),this._updateInfoFieldValue(this._lastLSNInfoField,i?.length>0?i:h.EmptySettingValue),this._updateInfoFieldValue(this._lastAppliedBackupInfoField,t?.properties?.migrationStatusDetails?.lastRestoredFilename??h.EmptySettingValue),this._updateInfoFieldValue(this._lastAppliedBackupTakenOnInfoField,n?.length>0?p.formatDateTimeString(n):h.EmptySettingValue),this._updateInfoFieldValue(this._currentRestoringFileInfoField,this.getMigrationCurrentlyRestoringFile(t)??h.EmptySettingValue);const g=t?.properties?.migrationStatusDetails?.lastRestoredFileTime??"";this._updateInfoFieldValue(this._lastRestoredFileTimeInfoField,g.length>0?(0,a.convertIsoTimeToLocalTime)(g).toLocaleString():h.EmptySettingValue),this._updateInfoFieldValue(this._restoredFilesInfoField,t?.properties?.migrationStatusDetails?.restoredFiles?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._restoringFilesInfoField,t?.properties?.migrationStatusDetails?.restoringFiles?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._currentRestoredSizeInfoField,t?.properties?.migrationStatusDetails?.currentRestoredSize?o.formatSizeMb(t?.properties?.migrationStatusDetails?.currentRestoredSize):h.EmptySettingValue),this._updateInfoFieldValue(this._currentRestorePlanSizeInfoField,t?.properties?.migrationStatusDetails?.currentRestorePlanSize?o.formatSizeMb(t?.properties?.migrationStatusDetails?.currentRestorePlanSize):h.EmptySettingValue),this._updateInfoFieldValue(this._restorePercentCompletedInfoField,t?.properties?.migrationStatusDetails?.restorePercentCompleted?.toLocaleString()??h.EmptySettingValue),this._updateInfoFieldValue(this._miRestoreStateInfoField,o.InternalManagedDatabaseRestoreDetailsStatusLookup[t?.properties?.migrationStatusDetails?.miRestoreState??""]??t?.properties?.migrationStatusDetails?.miRestoreState??h.EmptySettingValue);const m=p.isBlobMigration(t),S=p.isTargetType(t,u.AzureResourceKind.SQLVM);m||S||(await this._fileCount.updateCssStyles({...l.SECTION_HEADER_CSS,display:"inline"}),this._fileCount.value=o.ACTIVE_BACKUP_FILES_ITEMS(r.length)),0===r.length?(m||S||await this._emptyTableFill.updateCssStyles({display:"flex"}),this._fileTable.height="50px",await this._fileTable.updateProperty("data",[])):(await this._emptyTableFill.updateCssStyles({display:"none"}),this._fileTable.height="340px",r.sort(((e,t)=>new Date(e.backupStartTime)>new Date(t.backupStartTime)?-1:1)));const f=r.map((e=>[e.backupFileName,e.backupType,e.backupStatus,e.restoreStatus,e.backupSizeMB,e.numberOfStripes,e.dataUploadRate,e.dataUploaded,e.backupStartTime,e.restoreStartDate,e.restoreFinishDate,e.firstLSN,e.lastLSN]))||[],E=this._getTableData(t,f);await this._fileTable.updateProperty("data",E),this.cutoverButton.enabled=(0,c.canCutoverMigration)(t),this.cancelButton.enabled=(0,c.canCancelMigration)(t),this.deleteButton.enabled=(0,c.canDeleteMigration)(t),this.restartButton.enabled=(0,c.canRestartMigrationWizard)(t)}catch(e){await this.statusBar.showError(o.MIGRATION_STATUS_REFRESH_ERROR,o.MIGRATION_STATUS_REFRESH_ERROR,e.message)}finally{this.refreshLoader.loading=!1,this.isRefreshing=!1}}_clearControlsValue(){this._updateInfoFieldValue(this._sourceDatabaseInfoField,""),this._updateInfoFieldValue(this._sourceDetailsInfoField,""),this._updateInfoFieldValue(this._targetDatabaseInfoField,""),this._updateInfoFieldValue(this._targetServerInfoField,""),this._updateInfoFieldValue(this._targetVersionInfoField,""),this._updateInfoFieldValue(this._migrationStatusInfoField,""),this._updateInfoFieldValue(this._fullBackupFileOnInfoField,""),this._updateInfoFieldValue(this._backupLocationInfoField,""),this._updateInfoFieldValue(this._lastUploadedFileNameField,""),this._updateInfoFieldValue(this._lastUploadedFileTimeField,""),this._updateInfoFieldValue(this._pendingDiffBackupsCountField,""),this._updateInfoFieldValue(this._detectedFilesField,""),this._updateInfoFieldValue(this._queuedFilesField,""),this._updateInfoFieldValue(this._skippedFilesField,""),this._updateInfoFieldValue(this._unrestorableFilesField,""),this._updateInfoFieldValue(this._lastLSNInfoField,""),this._updateInfoFieldValue(this._lastAppliedBackupInfoField,""),this._updateInfoFieldValue(this._currentRestoringFileInfoField,""),this._updateInfoFieldValue(this._lastAppliedBackupTakenOnInfoField,""),this._updateInfoFieldValue(this._lastRestoredFileTimeInfoField,""),this._updateInfoFieldValue(this._restoredFilesInfoField,""),this._updateInfoFieldValue(this._restoringFilesInfoField,""),this._updateInfoFieldValue(this._currentRestoredSizeInfoField,""),this._updateInfoFieldValue(this._currentRestorePlanSizeInfoField,""),this._updateInfoFieldValue(this._restorePercentCompletedInfoField,""),this._updateInfoFieldValue(this._miRestoreStateInfoField,"")}async _showControls(e){const t=p.isShirMigration(e),i=p.isTargetType(e,u.AzureResourceKind.SQLMI),n=p.isTargetType(e,u.AzureResourceKind.SQLVM),r=p.isBlobMigration(e);await d.updateControlDisplay(this._fullBackupFileOnInfoField.flexContainer,t),await d.updateControlDisplay(this._lastUploadedFileNameField.flexContainer,i),await d.updateControlDisplay(this._lastUploadedFileTimeField.flexContainer,i),await d.updateControlDisplay(this._pendingDiffBackupsCountField.flexContainer,i),await d.updateControlDisplay(this._detectedFilesField.flexContainer,i),await d.updateControlDisplay(this._queuedFilesField.flexContainer,i),await d.updateControlDisplay(this._skippedFilesField.flexContainer,i),await d.updateControlDisplay(this._unrestorableFilesField.flexContainer,i),await d.updateControlDisplay(this._lastLSNInfoField.flexContainer,t),await d.updateControlDisplay(this._currentRestoringFileInfoField.flexContainer,r),await d.updateControlDisplay(this._lastAppliedBackupTakenOnInfoField.flexContainer,t),await d.updateControlDisplay(this._lastRestoredFileTimeInfoField.flexContainer,i),await d.updateControlDisplay(this._restoredFilesInfoField.flexContainer,i),await d.updateControlDisplay(this._restoringFilesInfoField.flexContainer,i),await d.updateControlDisplay(this._currentRestoredSizeInfoField.flexContainer,i),await d.updateControlDisplay(this._currentRestorePlanSizeInfoField.flexContainer,i),await d.updateControlDisplay(this._restorePercentCompletedInfoField.flexContainer,i),await d.updateControlDisplay(this._miRestoreStateInfoField.flexContainer,i);const o=!(r&&n);await d.updateControlDisplay(this._emptyTableFill,o,"flex"),await d.updateControlDisplay(this._fileCount,o),await d.updateControlDisplay(this._fileTable,o)}_addItemIfTrue(e,t,i){i&&e.push(t)}_getTableColumns(e){const t=[],i=(0,c.isShirMigration)(e),r=p.isTargetType(e,u.AzureResourceKind.SQLMI);return this._addItemIfTrue(t,{value:"backupFileName",name:o.BACKUP_FILE_COLUMN_FILE_NAME,tooltip:o.BACKUP_FILE_COLUMN_FILE_NAME,type:n.ColumnType.text},!0),this._addItemIfTrue(t,{value:"backupType",name:o.TYPE,tooltip:o.TYPE,type:n.ColumnType.text},!0),this._addItemIfTrue(t,{value:"backupStatus",name:o.BACKUP_FILE_COLUMN_FILE_STATUS,tooltip:o.BACKUP_FILE_COLUMN_FILE_STATUS,type:n.ColumnType.text},i),this._addItemIfTrue(t,{value:"restoreStatus",name:o.BACKUP_FILE_COLUMN_RESTORE_STATUS,tooltip:o.BACKUP_FILE_COLUMN_RESTORE_STATUS,type:n.ColumnType.text},r),this._addItemIfTrue(t,{value:"backupSizeMB",name:o.BACKUP_FILE_COLUMN_BACKUP_SIZE_MB,tooltip:o.BACKUP_FILE_COLUMN_BACKUP_SIZE_MB,type:n.ColumnType.text},r),this._addItemIfTrue(t,{value:"numberOfStripes",name:o.BACKUP_FILE_COLUMN_NUMBER_OF_STRIPES,tooltip:o.BACKUP_FILE_COLUMN_NUMBER_OF_STRIPES,type:n.ColumnType.text},r),this._addItemIfTrue(t,{value:"dataUploadRate",name:o.DATA_UPLOADED,tooltip:o.DATA_UPLOADED,type:n.ColumnType.text},i),this._addItemIfTrue(t,{value:"throughput",name:o.COPY_THROUGHPUT,tooltip:o.COPY_THROUGHPUT,type:n.ColumnType.text},i),this._addItemIfTrue(t,{value:"backupStartTime",name:o.BACKUP_START_TIME,tooltip:o.BACKUP_START_TIME,type:n.ColumnType.text},i),this._addItemIfTrue(t,{value:"restoreStartDate",name:o.BACKUP_FILE_COLUMN_RESTORE_START_DATE,tooltip:o.BACKUP_FILE_COLUMN_RESTORE_START_DATE,type:n.ColumnType.text},r),this._addItemIfTrue(t,{value:"restoreFinishDate",name:o.BACKUP_FILE_COLUMN_RESTORE_FINISH_DATE,tooltip:o.BACKUP_FILE_COLUMN_RESTORE_FINISH_DATE,type:n.ColumnType.text},r),this._addItemIfTrue(t,{value:"firstLsn",name:o.FIRST_LSN,tooltip:o.FIRST_LSN,type:n.ColumnType.text},i),this._addItemIfTrue(t,{value:"lastLsn",name:o.LAST_LSN,tooltip:o.LAST_LSN,type:n.ColumnType.text},i),t}_getTableData(e,t){const i=(0,c.isShirMigration)(e),n=p.isTargetType(e,u.AzureResourceKind.SQLMI);return t?.map((e=>{const t=[];return this._addItemIfTrue(t,e[0],!0),this._addItemIfTrue(t,e[1],!0),this._addItemIfTrue(t,e[2],i),this._addItemIfTrue(t,e[3],n),this._addItemIfTrue(t,e[4],n),this._addItemIfTrue(t,e[5],n),this._addItemIfTrue(t,e[6],i),this._addItemIfTrue(t,e[7],i),this._addItemIfTrue(t,e[8],i),this._addItemIfTrue(t,e[9],n),this._addItemIfTrue(t,e[10],n),this._addItemIfTrue(t,e[11],i),this._addItemIfTrue(t,e[12],i),t}))||[]}async initialize(e){try{this._fileCount=this.view.modelBuilder.text().withProps({width:"500px",CSSStyles:{...l.BODY_CSS}}).component(),this._fileTable=this.view.modelBuilder.table().withProps({ariaLabel:o.ACTIVE_BACKUP_FILES,CSSStyles:{padding:"0px"},forceFitColumns:n.ColumnSizingMode.ForceFit,display:"inline-flex",data:[],height:"340px",columns:[]}).component();const e=this.view.modelBuilder.image().withProps({iconPath:r.IconPathHelper.emptyTable,iconHeight:"100px",iconWidth:"100px",height:"100px",width:"100px",CSSStyles:{"text-align":"center"}}).component(),t=this.view.modelBuilder.text().withProps({value:o.EMPTY_TABLE_TEXT,CSSStyles:{...l.NOTE_CSS,"margin-top":"8px","text-align":"center",width:"300px"}}).component();this._emptyTableFill=this.view.modelBuilder.flexContainer().withLayout({flexFlow:"column",alignItems:"center"}).withItems([e,t]).withProps({width:"100%",display:"none"}).component();const i=this.view.modelBuilder.flexContainer().withItems([this.createMigrationToolbarContainer(),await this.migrationInfoGrid(),this.view.modelBuilder.separator().withProps({width:"100%",CSSStyles:{padding:"0"}}).component(),this._fileCount,this._fileTable,this._emptyTableFill],{CSSStyles:{padding:"0 15px 0 15px"}}).withLayout({flexFlow:"column"}).withProps({width:"100%"}).component();await d.updateControlDisplay(this.retryButton,!1),this.content=i}catch(e){(0,s.logError)(s.TelemetryViews.MigrationCutoverDialog,"IntializingFailed",e)}}async migrationInfoGrid(){this._sourceDatabaseInfoField=await this.createInfoField(o.SOURCE_DATABASE,""),this._sourceDetailsInfoField=await this.createInfoField(o.SOURCE_SERVER,""),this._migrationStatusInfoField=await this.createInfoField(o.MIGRATION_STATUS,"",!1," "),this._fullBackupFileOnInfoField=await this.createInfoField(o.FULL_BACKUP_FILES,"",!1),this._backupLocationInfoField=await this.createInfoField(o.BACKUP_LOCATION,""),this._lastUploadedFileNameField=await this.createInfoField(o.FIELD_LABEL_LAST_UPLOADED_FILE,""),this._lastUploadedFileTimeField=await this.createInfoField(o.FIELD_LABEL_LAST_UPLOADED_FILE_TIME,""),this._pendingDiffBackupsCountField=await this.createInfoField(o.FIELD_LABEL_PENDING_DIFF_BACKUPS,""),this._detectedFilesField=await this.createInfoField(o.FIELD_LABEL_DETECTED_FILES,""),this._queuedFilesField=await this.createInfoField(o.FIELD_LABEL_QUEUED_FILES,""),this._skippedFilesField=await this.createInfoField(o.FIELD_LABEL_SKIPPED_FILES,""),this._unrestorableFilesField=await this.createInfoField(o.FIELD_LABEL_UNRESTORABLE_FILES,""),this._targetDatabaseInfoField=await this.createInfoField(o.TARGET_DATABASE_NAME,""),this._targetServerInfoField=await this.createInfoField(o.TARGET_SERVER,""),this._targetVersionInfoField=await this.createInfoField(o.TARGET_VERSION,""),this._lastLSNInfoField=await this.createInfoField(o.LAST_APPLIED_LSN,"",!1),this._lastAppliedBackupInfoField=await this.createInfoField(o.LAST_APPLIED_BACKUP_FILES,""),this._lastAppliedBackupTakenOnInfoField=await this.createInfoField(o.LAST_APPLIED_BACKUP_FILES_TAKEN_ON,"",!1),this._currentRestoringFileInfoField=await this.createInfoField(o.CURRENTLY_RESTORING_FILE,"",!1),this._lastRestoredFileTimeInfoField=await this.createInfoField(o.FIELD_LABEL_LAST_RESTORED_FILE_TIME,"",!1),this._restoredFilesInfoField=await this.createInfoField(o.FIELD_LABEL_RESTORED_FILES,"",!1),this._restoringFilesInfoField=await this.createInfoField(o.FIELD_LABEL_RESTORING_FILES,"",!1),this._currentRestoredSizeInfoField=await this.createInfoField(o.FIELD_LABEL_RESTORED_SIZE,"",!1),this._currentRestorePlanSizeInfoField=await this.createInfoField(o.FIELD_LABEL_RESTORE_PLAN_SIZE,"",!1),this._restorePercentCompletedInfoField=await this.createInfoField(o.FIELD_LABEL_RESTORE_PERCENT_COMPLETED,"",!1),this._miRestoreStateInfoField=await this.createInfoField(o.FIELD_LABEL_MI_RESTORE_STATE,"",!1);const e=this.view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({width:"50%"}).withItems([this._sourceDatabaseInfoField.flexContainer,this._sourceDetailsInfoField.flexContainer,this._migrationStatusInfoField.flexContainer,this._fullBackupFileOnInfoField.flexContainer,this._backupLocationInfoField.flexContainer,this._lastUploadedFileNameField.flexContainer,this._lastUploadedFileTimeField.flexContainer,this._pendingDiffBackupsCountField.flexContainer,this._detectedFilesField.flexContainer,this._queuedFilesField.flexContainer,this._skippedFilesField.flexContainer,this._unrestorableFilesField.flexContainer]).component(),t=this.view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({width:"50%"}).withItems([this._targetDatabaseInfoField.flexContainer,this._targetServerInfoField.flexContainer,this._targetVersionInfoField.flexContainer,this._lastLSNInfoField.flexContainer,this._lastAppliedBackupInfoField.flexContainer,this._lastAppliedBackupTakenOnInfoField.flexContainer,this._currentRestoringFileInfoField.flexContainer,this._lastRestoredFileTimeInfoField.flexContainer,this._restoredFilesInfoField.flexContainer,this._restoringFilesInfoField.flexContainer,this._currentRestoredSizeInfoField.flexContainer,this._currentRestorePlanSizeInfoField.flexContainer,this._restorePercentCompletedInfoField.flexContainer,this._miRestoreStateInfoField.flexContainer]).component();return this.view.modelBuilder.flexContainer().withItems([e,t],{flex:"0 0 auto"}).withLayout({flexFlow:"row",flexWrap:"wrap"}).component()}}t.MigrationDetailsTab=g},1145:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationDetailsTabBase=t.MigrationTargetTypeName=t.infoFieldWidth=t.infoFieldLgWidth=void 0;const n=i(9072),r=i(9496),o=i(1386),a=i(2074),s=i(4294),l=i(8777),c=i(8637),u=i(8548),d=i(252),p=i(1456),h=i(7475),_=i(3186),g=i(9411);t.infoFieldLgWidth="330px",t.infoFieldWidth="250px",t.MigrationTargetTypeName={[_.MigrationTargetType.SQLMI]:a.SQL_MANAGED_INSTANCE,[_.MigrationTargetType.SQLVM]:a.SQL_VIRTUAL_MACHINE,[_.MigrationTargetType.SQLDB]:a.SQL_DATABASE};class m extends l.TabBase{constructor(){super(),this.summaryTextComponent=[],this.title=""}async setMigrationContext(e,t){this.serviceContext=e,this.model=new c.MigrationCutoverDialogModel(e,t),await this.refresh(!0)}createBreadcrumbContainer(){const e=this.view.modelBuilder.hyperlink().withProps({label:a.BREADCRUMB_MIGRATIONS,url:"",title:a.BREADCRUMB_MIGRATIONS,CSSStyles:{padding:"5px 5px 5px 0","font-size":"13px"}}).component();this.disposables.push(e.onDidClick((async e=>await this.openMigrationsListFcn())));const t=this.view.modelBuilder.image().withProps({iconPath:o.IconPathHelper.breadCrumb,iconHeight:8,iconWidth:8,width:8,height:8,CSSStyles:{padding:"4px"}}).component();return this.databaseLabel=this.view.modelBuilder.text().withProps({textType:n.TextType.Normal,value:"...",CSSStyles:{"font-size":"16px","font-weight":"600","margin-block-start":"0","margin-block-end":"0"}}).component(),this.view.modelBuilder.flexContainer().withItems([e,t,this.databaseLabel],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignItems:"center",alignContent:"center"}).withProps({height:20,CSSStyles:{padding:"0","margin-bottom":"5px"}}).component()}createMigrationToolbarContainer(){const e=this.view.modelBuilder.toolbarContainer(),t=20;return this.cutoverButton=this.view.modelBuilder.button().withProps({iconPath:o.IconPathHelper.cutover,iconHeight:"16px",iconWidth:"16px",label:a.COMPLETE_CUTOVER,height:t,enabled:!1,CSSStyles:{display:"none"}}).component(),this.disposables.push(this.cutoverButton.onDidClick((async e=>{await this.statusBar.clearError(),await this.refresh();const t=new u.ConfirmCutoverDialog(this.model);await t.initialize(),await this.refresh(),this.model.CutoverError&&await this.statusBar.showError(a.MIGRATION_CUTOVER_ERROR,a.MIGRATION_CUTOVER_ERROR,this.model.CutoverError.message)}))),this.cancelButton=this.view.modelBuilder.button().withProps({iconPath:o.IconPathHelper.cancel,iconHeight:"16px",iconWidth:"16px",label:a.CANCEL_MIGRATION,height:t,enabled:!1}).component(),this.disposables.push(this.cancelButton.onDidClick((e=>{r.window.showInformationMessage(a.CANCEL_MIGRATION_CONFIRMATION,{modal:!0},a.YES,a.NO).then((async e=>{e===a.YES&&(await this.statusBar.clearError(),await this.model.cancelMigration(),await this.refresh(),this.model.CancelMigrationError&&await this.statusBar.showError(a.MIGRATION_CANCELLATION_ERROR,a.MIGRATION_CANCELLATION_ERROR,this.model.CancelMigrationError.message))}))}))),this.deleteButton=this.view.modelBuilder.button().withProps({iconPath:o.IconPathHelper.discard,iconHeight:"16px",iconWidth:"16px",label:a.DELETE_MIGRATION,height:t,enabled:!1}).component(),this.disposables.push(this.deleteButton.onDidClick((async e=>{await this.statusBar.clearError();try{(0,p.canDeleteMigration)(this.model.migration)?await r.window.showInformationMessage(a.DELETE_MIGRATION_CONFIRMATION,{modal:!0},a.YES,a.NO)===a.YES&&(await(0,s.deleteMigration)(this.serviceContext.azureAccount,this.serviceContext.subscription,this.model.migration.id),await this.openMigrationsListFcn(!0)):(await r.window.showInformationMessage(a.MIGRATION_CANNOT_DELETE),(0,h.logError)(h.TelemetryViews.MigrationDetailsTab,_.MenuCommands.DeleteMigration,"cannot delete migration"))}catch(e){await this.statusBar.showError(a.MIGRATION_DELETE_ERROR,a.MIGRATION_DELETE_ERROR,e.message),(0,h.logError)(h.TelemetryViews.MigrationDetailsTab,_.MenuCommands.DeleteMigration,e)}}))),this.retryButton=this.view.modelBuilder.button().withProps({label:a.RETRY_MIGRATION,iconPath:o.IconPathHelper.retry,enabled:!1,iconHeight:"16px",iconWidth:"16px",height:t}).component(),this.disposables.push(this.retryButton.onDidClick((async e=>{if(await this.statusBar.clearError(),(0,p.canRetryMigration)(this.model.migration)){const e=(0,s.getMigrationErrors)(this.model.migration);(0,g.openRetryMigrationDialog)(e,(async()=>{try{await(0,s.retryMigration)(this.serviceContext.azureAccount,this.serviceContext.subscription,this.model.migration),await this.refresh()}catch(e){await this.statusBar.showError(a.MIGRATION_RETRY_ERROR,a.MIGRATION_RETRY_ERROR,e.message),(0,h.logError)(h.TelemetryViews.MigrationDetailsTab,_.MenuCommands.RetryMigration,e)}}))}else await r.window.showInformationMessage(a.MIGRATION_CANNOT_RETRY),(0,h.logError)(h.TelemetryViews.MigrationDetailsTab,_.MenuCommands.RetryMigration,"cannot retry migration")}))),this.restartButton=this.view.modelBuilder.button().withProps({label:a.RESTART_MIGRATION_WIZARD,iconPath:o.IconPathHelper.retry,enabled:!1,iconHeight:"16px",iconWidth:"16px",height:t}).component(),this.disposables.push(this.restartButton.onDidClick((async e=>{await this.refresh();const t=new d.RestartMigrationDialog(this.context,this.serviceContext,this.model.migration,this.serviceContextChangedEvent);await t.openDialog()}))),this.copyDatabaseMigrationDetails=this.view.modelBuilder.button().withProps({iconPath:o.IconPathHelper.copy,iconHeight:"16px",iconWidth:"16px",label:a.COPY_MIGRATION_DETAILS,height:t}).component(),this.disposables.push(this.copyDatabaseMigrationDetails.onDidClick((async e=>{await this.refresh(),await r.env.clipboard.writeText(this._getMigrationDetails()),r.window.showInformationMessage(a.DETAILS_COPIED)}))),this.newSupportRequest=this.view.modelBuilder.button().withProps({label:a.NEW_SUPPORT_REQUEST,iconPath:o.IconPathHelper.newSupportRequest,iconHeight:"16px",iconWidth:"16px",height:t}).component(),this.disposables.push(this.newSupportRequest.onDidClick((async e=>{const t=`https://portal.azure.com/#resource${this.model.migration.properties.migrationService}/supportrequest`;await r.env.openExternal(r.Uri.parse(t))}))),this.refreshButton=this.view.modelBuilder.button().withProps({iconPath:o.IconPathHelper.refresh,iconHeight:"16px",iconWidth:"16px",label:a.REFRESH_BUTTON_TEXT,height:t}).component(),this.disposables.push(this.refreshButton.onDidClick((async e=>await this.refresh()))),this.refreshLoader=this.view.modelBuilder.loadingComponent().withItem(this.refreshButton).withProps({loading:!1,CSSStyles:{height:"8px","margin-top":"4px"}}).component(),e.addToolbarItems([{component:this.cutoverButton},{component:this.cancelButton},{component:this.deleteButton},{component:this.retryButton},{component:this.restartButton},{component:this.copyDatabaseMigrationDetails,toolbarSeparatorAfter:!0},{component:this.newSupportRequest,toolbarSeparatorAfter:!0},{component:this.refreshLoader}]),this.view.modelBuilder.flexContainer().withItems([this.createBreadcrumbContainer(),e.component()]).withLayout({flexFlow:"column",width:"100%"}).component()}async createInfoCard(e,t){const i=(0).toLocaleString(),n=this.view.modelBuilder.flexContainer().withProps({width:168,CSSStyles:{"flex-direction":"column",margin:"0 12px 0 0","box-sizing":"border-box",border:"1px solid rgba(204, 204, 204, 0.5)","box-shadow":"0px 2px 4px rgba(0, 0, 0, 0.1)","border-radius":"2px"}}).component(),r=this.view.modelBuilder.text().withProps({value:e,CSSStyles:{"font-size":"13px","font-weight":"600",margin:"5px"}}).component();n.addItem(r);const o=this.view.modelBuilder.image().withProps({iconPath:t,iconHeight:16,iconWidth:16,height:16,width:16,CSSStyles:{margin:"5px 5px 5px 5px",padding:"0"}}).component(),a=this.view.modelBuilder.text().withProps({value:i,title:i,CSSStyles:{"font-size":"20px","font-weight":"600",margin:"0 5px 0 5px"}}).component();this.summaryTextComponent.push(a);const s=this.view.modelBuilder.flexContainer().withItems([o,a]).withLayout({alignItems:"center"}).withProps({CSSStyles:{"flex-direction":"row",margin:"0 0 0 5px",padding:"0"},display:"inline-flex"}).component();return n.addItem(s),n}async createInfoField(e,t,i=!1,n){const r=this.view.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"row"}}).component(),o=this.view.modelBuilder.text().withProps({value:e,title:e,width:"170px",CSSStyles:{"font-size":"13px","line-height":"18px",margin:"2px 0 2px 0",float:"left",overflow:"hidden","text-overflow":"ellipsis",display:"inline-block","white-space":"nowrap"}}).component();r.addItem(o,{flex:"0 0 auto"});const a=this.view.modelBuilder.text().withProps({value:":",title:":",width:"15px",CSSStyles:{"font-size":"13px","line-height":"18px",margin:"2px 0 2px 0",float:"left"}}).component();r.addItem(a,{flex:"0 0 auto"});const s=this.view.modelBuilder.text().withProps({value:t,title:t,width:"300px",CSSStyles:{"font-size":"13px","line-height":"18px",margin:"2px 15px 2px 0",overflow:"hidden","text-overflow":"ellipsis",display:"inline-block",float:"left","white-space":"nowrap"}}).component();let l;if(n){l=this.view.modelBuilder.image().withProps({iconPath:" "===n?void 0:n,iconHeight:14,iconWidth:14,height:14,width:14,title:t,CSSStyles:{margin:"4px 4px 0 0",padding:"0"}}).component();const e=this.view.modelBuilder.flexContainer().withItems([l,s]).withProps({CSSStyles:{margin:"0",padding:"0",height:"18px"},display:"inline-flex"}).component();r.addItem(e,{flex:"0 0 auto"})}else r.addItem(s,{flex:"0 0 auto"});return{flexContainer:r,text:s,icon:l}}async showMigrationErrors(e){const t=(0,s.getMigrationErrors)(e);t?.length>0&&await this.statusBar.showError(a.MIGRATION_ERROR_DETAILS_TITLE,a.MIGRATION_ERROR_DETAILS_LABEL,t)}getMigrationCurrentlyRestoringFile(e){const t=this.getMigrationLastAppliedBackupFile(e),i=e?.properties?.migrationStatusDetails?.currentRestoringFilename;return i===t&&i&&i.length>0?a.ALL_BACKUPS_RESTORED:i}getMigrationLastAppliedBackupFile(e){return e?.properties?.migrationStatusDetails?.lastRestoredFilename||e?.properties?.offlineConfiguration?.lastBackupName}_getMigrationDetails(){return JSON.stringify(this.model.migration,void 0,2)}_updateInfoFieldValue(e,t){e.text.value=t,e.text.title=t,e.text.description=t,e.icon&&(e.icon.title=t)}}t.MigrationDetailsTabBase=m},4591:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationDetailsTableTab=void 0;const n=i(9072),r=i(2074),o=i(3186),a=i(7475),s=i(1456),l=i(4294),c=i(1145),u=i(1386),d=i(2037),p=i(8777),h=i(3186),_="tableName",g="status",m="dataRead",S="dataWritten",f="rowsRead",E="rowsCopied",T="copyThroughput",C="copyDuration",y="parallelCopyType",v="usedParallelCopies",R="copyStart";var A;!function(e){e[e.TotalTables=0]="TotalTables",e[e.InProgressTables=1]="InProgressTables",e[e.SuccessfulTables=2]="SuccessfulTables",e[e.FailedTables=3]="FailedTables",e[e.CanceledTables=4]="CanceledTables"}(A||(A={}));class I extends c.MigrationDetailsTabBase{constructor(){super(),this._progressDetail=[],this.id="MigrationDetailsTableTab"}async create(e,t,i,n){return this.view=t,this.context=e,this.openMigrationsListFcn=i,this.statusBar=n,await this.initialize(this.view),this}async refresh(e){if(!this.isRefreshing&&void 0!==this.refreshLoader&&void 0!==this.model?.migration)try{this.isRefreshing=!0,this.refreshLoader.loading=!0,await this.statusBar.clearError(),e&&(this._clearControlsValue(),await this._showControls()),await this.model.fetchStatus(),await this._loadData()}catch(e){await this.statusBar.showError(r.MIGRATION_STATUS_REFRESH_ERROR,r.MIGRATION_STATUS_REFRESH_ERROR,e.message)}finally{this.refreshLoader.loading=!1,this.isRefreshing=!1}}async initialize(e){try{this._progressTable=this.view.modelBuilder.table().withProps({ariaLabel:r.ACTIVE_BACKUP_FILES,CSSStyles:{"padding-left":"0px"},forceFitColumns:n.ColumnSizingMode.ForceFit,display:"inline-flex",data:[],height:"340px",columns:[{value:_,name:r.SQLDB_COL_TABLE_NAME,type:n.ColumnType.text,width:170},{name:r.STATUS,value:g,width:106,type:n.ColumnType.hyperlink,icon:u.IconPathHelper.inProgressMigration,showText:!0},{value:m,name:r.SQLDB_COL_DATA_READ,width:64,type:n.ColumnType.text},{value:S,name:r.SQLDB_COL_DATA_WRITTEN,width:77,type:n.ColumnType.text},{value:f,name:r.SQLDB_COL_ROWS_READ,width:68,type:n.ColumnType.text},{value:E,name:r.SQLDB_COL_ROWS_COPIED,width:77,type:n.ColumnType.text},{value:T,name:r.SQLDB_COL_COPY_THROUGHPUT,width:102,type:n.ColumnType.text},{value:C,name:r.SQLDB_COL_COPY_DURATION,width:87,type:n.ColumnType.text},{value:y,name:r.SQLDB_COL_PARRALEL_COPY_TYPE,width:104,type:n.ColumnType.text},{value:v,name:r.SQLDB_COL_USED_PARALLEL_COPIES,width:116,type:n.ColumnType.text},{value:R,name:r.SQLDB_COL_COPY_START,width:140,type:n.ColumnType.text}]}).component();const e=this.view.modelBuilder.flexContainer().withItems([this.createMigrationToolbarContainer(),await this.migrationInfoGrid(),this.view.modelBuilder.separator().withProps({width:"100%",CSSStyles:{padding:"0"}}).component(),await this._createStatusBar(),await this._createTableFilter(),this._progressTable],{CSSStyles:{padding:"15px 15px 0 15px"}}).withLayout({flexFlow:"column"}).withProps({width:"100%"}).component();this.disposables.push(this._progressTable.onCellAction((async e=>{const t=e;if(1===t?.column){const t=this._progressTable.data[e.row][0]||null,i=this.model.migration.properties.migrationStatusDetails?.listOfCopyProgressDetails?.find((e=>e.tableName===t)),n=i?.errors||[],o=r.PipelineRunStatus[i?.status??""]??i?.status,a=r.TABLE_MIGRATION_STATUS_LABEL(o),s=n.join(d.EOL);this.showDialogMessage(r.TABLE_MIGRATION_STATUS_TITLE,a,s)}}))),this.content=e}catch(e){(0,a.logError)(a.TelemetryViews.MigrationCutoverDialog,"IntializingFailed",e)}}async migrationInfoGrid(){this._sourceDatabaseInfoField=await this.createInfoField(r.SOURCE_DATABASE,""),this._sourceDetailsInfoField=await this.createInfoField(r.SOURCE_SERVER,""),this._migrationStatusInfoField=await this.createInfoField(r.MIGRATION_STATUS,"",!1," "),this._schemaMigrationStatusInfoField=await this.createInfoField(r.SCHEMA_MIGRATION_STATUS,"",!1," "),this._objectsCollectionCountInfoField=await this.createInfoField(r.OBJECTS_COLLECTED,"",!1," "),this._objectsCollectionStartedInfoField=await this.createInfoField(r.COLLECTION_STARTED,""),this._objectsCollectionEndedInfoField=await this.createInfoField(r.COLLECTION_ENDED,""),this._scriptGenerationProgressInfoField=await this.createInfoField(r.SCRIPT_GENERATION,"",!1," "),this._scriptGenerationStartedInfoField=await this.createInfoField(r.SCRIPTING_STARTED,""),this._scriptGenerationEndedInfoField=await this.createInfoField(r.SCRIPTING_ENDED,""),this._succeededScriptCountInfoField=await this.createInfoField(r.SCRIPTED_OBJECTS_COUNT,""),this._failedScriptCountInfoField=await this.createInfoField(r.SCRIPTING_ERROR_COUNT,""),this._targetDatabaseInfoField=await this.createInfoField(r.TARGET_DATABASE_NAME,""),this._targetServerInfoField=await this.createInfoField(r.TARGET_SERVER,""),this._targetVersionInfoField=await this.createInfoField(r.TARGET_VERSION,""),this._migrationType=await this.createInfoField(r.MIGRATION_TYPE,"",!1,""),this._scriptDeploymentProgressInfoField=await this.createInfoField(r.SCRIPT_DEPLOYMENT,"",!1," "),this._scriptDeploymentStartedField=await this.createInfoField(r.DEPLOYMENT_STARTED,""),this._scriptDeploymentEndedInfoField=await this.createInfoField(r.DEPLOYMENT_ENDED,""),this._succeededDeploymentCountInfoField=await this.createInfoField(r.DEPLOYMENT_COUNT,""),this._failedDeploymentCountInfoField=await this.createInfoField(r.DEPLOYMENT_ERROR_COUNT,"");const e=this.view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({width:"50%"}).withItems([this._sourceDatabaseInfoField.flexContainer,this._sourceDetailsInfoField.flexContainer,this._migrationStatusInfoField.flexContainer,this._schemaMigrationStatusInfoField.flexContainer,this._objectsCollectionCountInfoField.flexContainer,this._objectsCollectionStartedInfoField.flexContainer,this._objectsCollectionEndedInfoField.flexContainer,this._scriptGenerationProgressInfoField.flexContainer,this._scriptGenerationStartedInfoField.flexContainer,this._scriptGenerationEndedInfoField.flexContainer,this._succeededScriptCountInfoField.flexContainer,this._failedScriptCountInfoField.flexContainer]).component(),t=this.view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({width:"50%"}).withItems([this._targetDatabaseInfoField.flexContainer,this._targetServerInfoField.flexContainer,this._targetVersionInfoField.flexContainer,this._migrationType.flexContainer,this._scriptDeploymentProgressInfoField.flexContainer,this._scriptDeploymentStartedField.flexContainer,this._scriptDeploymentEndedInfoField.flexContainer,this._succeededDeploymentCountInfoField.flexContainer,this._failedDeploymentCountInfoField.flexContainer,this._scriptDeploymentStartedField.flexContainer,this._scriptDeploymentStartedField.flexContainer]).component();return this.view.modelBuilder.flexContainer().withItems([e,t],{flex:"0 0 auto"}).withLayout({flexFlow:"row",flexWrap:"wrap"}).component()}async _showControls(){const e=this.model?.migration,t=e.properties.sqlSchemaMigrationConfiguration.enableSchemaMigration;await h.updateControlDisplay(this._schemaMigrationStatusInfoField.flexContainer,t),await h.updateControlDisplay(this._objectsCollectionCountInfoField.flexContainer,t),await h.updateControlDisplay(this._objectsCollectionStartedInfoField.flexContainer,t),await h.updateControlDisplay(this._objectsCollectionEndedInfoField.flexContainer,t),await h.updateControlDisplay(this._scriptGenerationProgressInfoField.flexContainer,t),await h.updateControlDisplay(this._scriptGenerationStartedInfoField.flexContainer,t),await h.updateControlDisplay(this._scriptGenerationEndedInfoField.flexContainer,t),await h.updateControlDisplay(this._succeededScriptCountInfoField.flexContainer,t),await h.updateControlDisplay(this._failedScriptCountInfoField.flexContainer,t),await h.updateControlDisplay(this._scriptDeploymentProgressInfoField.flexContainer,t,"inline-flex"),await h.updateControlDisplay(this._scriptDeploymentStartedField.flexContainer,t),await h.updateControlDisplay(this._scriptDeploymentEndedInfoField.flexContainer,t),await h.updateControlDisplay(this._succeededDeploymentCountInfoField.flexContainer,t),await h.updateControlDisplay(this._failedDeploymentCountInfoField.flexContainer,t)}async _loadData(){const e=this.model?.migration;await this.showMigrationErrors(this.model?.migration),await this.cutoverButton.updateCssStyles({display:(0,s.isOfflineMigation)(e)?"none":"block"});const t=e?.properties.sourceServerName,i=e?.properties.sourceDatabaseName,n=e?.name,a=(0,l.getResourceName)(e?.properties.scope),u=(0,s.getMigrationTargetTypeEnum)(e),d=c.MigrationTargetTypeName[u??""];this._progressDetail=e?.properties.migrationStatusDetails?.listOfCopyProgressDetails??[];const h=e?.properties?.migrationStatusDetails?.sqlSchemaMigrationStatus,_=h?.objectsCollection,g=h?.scriptGeneration,m=h?.scriptDeployment,S={};await this._populateTableData(S);const f=S[s.PipelineStatusCodes.Succeeded]??0,E=(S[s.PipelineStatusCodes.Canceled]??0)+(S[s.PipelineStatusCodes.Cancelled]??0),T=S[s.PipelineStatusCodes.Failed]??0,C=(S[s.PipelineStatusCodes.Queued]??0)+(S[s.PipelineStatusCodes.CopyFinished]??0)+(S[s.PipelineStatusCodes.Copying]??0)+(S[s.PipelineStatusCodes.PreparingForCopy]??0)+(S[s.PipelineStatusCodes.RebuildingIndexes]??0)+(S[s.PipelineStatusCodes.InProgress]??0),y=this._progressDetail.length;this._updateSummaryComponent(A.TotalTables,y),this._updateSummaryComponent(A.InProgressTables,C),this._updateSummaryComponent(A.SuccessfulTables,f),this._updateSummaryComponent(A.FailedTables,T),this._updateSummaryComponent(A.CanceledTables,E),this.databaseLabel.value=i,this._updateInfoFieldValue(this._sourceDatabaseInfoField,i??p.EmptySettingValue),this._updateInfoFieldValue(this._sourceDetailsInfoField,t??p.EmptySettingValue),this._updateInfoFieldValue(this._migrationStatusInfoField,(0,s.getMigrationStatusString)(e)??p.EmptySettingValue),this._migrationStatusInfoField.icon.iconPath=(0,o.getMigrationStatusImage)(e),this._updateInfoFieldValue(this._schemaMigrationStatusInfoField,(0,s.getSchemaMigrationStatusString)(e)??p.EmptySettingValue),this._schemaMigrationStatusInfoField.icon.iconPath=(0,o.getSchemaMigrationStatusImage)(e),this._updateInfoFieldValue(this._objectsCollectionCountInfoField,_?.totalCountOfObjectsCollected?.toString()??p.EmptySettingValue),this._objectsCollectionCountInfoField.icon.iconPath=(0,o.getObjectsCollectionStatusImage)(e),this._updateInfoFieldValue(this._objectsCollectionStartedInfoField,this._convertToLocalDateTime(_?.startedOn)),this._updateInfoFieldValue(this._objectsCollectionEndedInfoField,this._convertToLocalDateTime(_?.endedOn)),this._updateInfoFieldValue(this._scriptGenerationProgressInfoField,void 0===g?.progressInPercentage?p.EmptySettingValue:g?.progressInPercentage+"%"),this._scriptGenerationProgressInfoField.icon.iconPath=(0,o.getScriptGenerationStatusImage)(e),this._updateInfoFieldValue(this._scriptGenerationStartedInfoField,this._convertToLocalDateTime(g?.startedOn)),this._updateInfoFieldValue(this._scriptGenerationEndedInfoField,this._convertToLocalDateTime(g?.endedOn)),this._updateInfoFieldValue(this._succeededScriptCountInfoField,g?.scriptedObjectsCount?.toString()??p.EmptySettingValue),this._updateInfoFieldValue(this._failedScriptCountInfoField,g?.scriptedObjectsFailedCount?.toString()??p.EmptySettingValue),this._updateInfoFieldValue(this._targetDatabaseInfoField,n??p.EmptySettingValue),this._updateInfoFieldValue(this._targetServerInfoField,a??p.EmptySettingValue),this._updateInfoFieldValue(this._targetVersionInfoField,d??p.EmptySettingValue),e.properties.sqlSchemaMigrationConfiguration.enableSchemaMigration&&e.properties.sqlDataMigrationConfiguration.enableDataMigration?this._updateInfoFieldValue(this._migrationType,r.SCHEMA_AND_DATA):e.properties.sqlSchemaMigrationConfiguration.enableSchemaMigration?this._updateInfoFieldValue(this._migrationType,r.SCHEMA_ONLY):e.properties.sqlDataMigrationConfiguration.enableDataMigration&&this._updateInfoFieldValue(this._migrationType,r.DATA_ONLY),this._updateInfoFieldValue(this._scriptDeploymentProgressInfoField,void 0===m?.progressInPercentage?p.EmptySettingValue:m?.progressInPercentage+"%"),this._scriptDeploymentProgressInfoField.icon.iconPath=(0,o.getScriptDeploymentStatusImage)(e),this._updateInfoFieldValue(this._scriptDeploymentStartedField,this._convertToLocalDateTime(m?.startedOn)),this._updateInfoFieldValue(this._scriptDeploymentEndedInfoField,this._convertToLocalDateTime(m?.endedOn)),this._updateInfoFieldValue(this._succeededDeploymentCountInfoField,m?.succeededDeploymentCount?.toString()??p.EmptySettingValue),this._updateInfoFieldValue(this._failedDeploymentCountInfoField,m?.failedDeploymentCount?.toString()??p.EmptySettingValue),this.cutoverButton.enabled=(0,s.canCutoverMigration)(e),this.cancelButton.enabled=(0,s.canCancelMigration)(e),this.deleteButton.enabled=(0,s.canDeleteMigration)(e),this.retryButton.enabled=(0,s.canRetryMigration)(e),this.restartButton.enabled=(0,s.canRestartMigrationWizard)(e)}_convertToLocalDateTime(e){return e?new Date(e).toLocaleString():p.EmptySettingValue}async _populateTableData(e={}){this._progressTable.data.length>0&&await this._progressTable.updateProperty("data",[]),this._sortTableMigrations(this._progressDetail,this._columnSortDropdown.value.name,!0===this._columnSortCheckbox.checked);const t=this._progressDetail.map((t=>(e[t.status]=(e[t.status]??0)+1,[t.tableName,{icon:(0,o.getPipelineStatusImage)(t.status),title:r.PipelineRunStatus[t.status]??t.status?.toUpperCase()},(0,s.formatSizeBytes)(t.dataRead),(0,s.formatSizeBytes)(t.dataWritten),(0,s.formatNumber)(t.rowsRead),(0,s.formatNumber)(t.rowsCopied),(0,s.formatSizeKb)(t.copyThroughput),(0,s.formatSecondsIntoReadableTime)(t.copyDuration??0),r.ParallelCopyType[t.parallelCopyType]??t.parallelCopyType,t.usedParallelCopies,(0,s.formatDateTimeString)(t.copyStart)])))??[],i=this._filterTables(t,this._tableFilterInputBox.value);await this._progressTable.updateProperty("data",i)}_clearControlsValue(){this._updateInfoFieldValue(this._sourceDatabaseInfoField,""),this._updateInfoFieldValue(this._sourceDetailsInfoField,""),this._updateInfoFieldValue(this._migrationStatusInfoField,""),this._updateInfoFieldValue(this._schemaMigrationStatusInfoField,""),this._updateInfoFieldValue(this._objectsCollectionCountInfoField,""),this._updateInfoFieldValue(this._objectsCollectionStartedInfoField,""),this._updateInfoFieldValue(this._objectsCollectionEndedInfoField,""),this._updateInfoFieldValue(this._scriptGenerationProgressInfoField,""),this._updateInfoFieldValue(this._scriptGenerationStartedInfoField,""),this._updateInfoFieldValue(this._scriptGenerationEndedInfoField,""),this._updateInfoFieldValue(this._succeededScriptCountInfoField,""),this._updateInfoFieldValue(this._failedScriptCountInfoField,""),this._updateInfoFieldValue(this._targetDatabaseInfoField,""),this._updateInfoFieldValue(this._targetServerInfoField,""),this._updateInfoFieldValue(this._targetVersionInfoField,""),this._updateInfoFieldValue(this._migrationType,""),this._updateInfoFieldValue(this._scriptDeploymentProgressInfoField,""),this._updateInfoFieldValue(this._scriptDeploymentStartedField,""),this._updateInfoFieldValue(this._scriptDeploymentEndedInfoField,""),this._updateInfoFieldValue(this._succeededDeploymentCountInfoField,""),this._updateInfoFieldValue(this._failedDeploymentCountInfoField,"")}_sortTableMigrations(e,t,i){const n=i?-1:1;switch(t){case _:return void e.sort(((e,t)=>this.stringCompare(e.tableName,t.tableName,n)));case g:return void e.sort(((e,t)=>this.stringCompare(e.status,t.status,n)));case m:return void e.sort(((e,t)=>this.numberCompare(e.dataRead,t.dataRead,n)));case S:return void e.sort(((e,t)=>this.numberCompare(e.dataWritten,t.dataWritten,n)));case f:return void e.sort(((e,t)=>this.numberCompare(e.rowsRead,t.rowsRead,n)));case E:return void e.sort(((e,t)=>this.numberCompare(e.rowsCopied,t.rowsCopied,n)));case T:return void e.sort(((e,t)=>this.numberCompare(e.copyThroughput,t.copyThroughput,n)));case C:return void e.sort(((e,t)=>this.numberCompare(e.copyDuration,t.copyDuration,n)));case y:return void e.sort(((e,t)=>this.stringCompare(e.parallelCopyType,t.parallelCopyType,n)));case v:return void e.sort(((e,t)=>this.numberCompare(e.usedParallelCopies,t.usedParallelCopies,n)));case R:return void e.sort(((e,t)=>this.dateCompare(e.copyStart,t.copyStart,n)))}}_updateSummaryComponent(e,t){const i=t.toLocaleString(),n=this.summaryTextComponent[e];n.value=i,n.title=i}_filterTables(e,t){const i=t?.toLowerCase()??"";return i.length>0?e.filter((e=>e.some((e=>"string"==typeof e?e.toLowerCase().includes(i):e.title?.toLowerCase().includes(i))))):e}async _createTableFilter(){this._tableFilterInputBox=this.view.modelBuilder.inputBox().withProps({inputType:"text",maxLength:100,width:268,placeHolder:r.FILTER_SERVER_OBJECTS_PLACEHOLDER,ariaLabel:r.FILTER_SERVER_OBJECTS_ARIA_LABEL}).component(),this.disposables.push(this._tableFilterInputBox.onTextChanged((async e=>await this._populateTableData())));const e=this.view.modelBuilder.text().withProps({value:r.SORT_LABEL,CSSStyles:{"font-size":"13px","font-weight":"600",margin:"3px 0 0 0"}}).component();this._columnSortDropdown=this.view.modelBuilder.dropDown().withProps({editable:!1,width:150,CSSStyles:{"margin-left":"5px"},value:{name:R,displayName:r.START_TIME},values:[{name:_,displayName:r.SQLDB_COL_TABLE_NAME},{name:g,displayName:r.STATUS},{name:m,displayName:r.SQLDB_COL_DATA_READ},{name:S,displayName:r.SQLDB_COL_DATA_WRITTEN},{name:f,displayName:r.SQLDB_COL_ROWS_READ},{name:E,displayName:r.SQLDB_COL_ROWS_COPIED},{name:T,displayName:r.SQLDB_COL_COPY_THROUGHPUT},{name:C,displayName:r.SQLDB_COL_COPY_DURATION},{name:y,displayName:r.SQLDB_COL_PARRALEL_COPY_TYPE},{name:v,displayName:r.SQLDB_COL_USED_PARALLEL_COPIES},{name:R,displayName:r.SQLDB_COL_COPY_START}]}).component(),this.disposables.push(this._columnSortDropdown.onValueChanged((async e=>await this._populateTableData()))),this._columnSortCheckbox=this.view.modelBuilder.checkBox().withProps({label:r.ASCENDING_LABEL,checked:!1,CSSStyles:{"margin-left":"15px"}}).component(),this.disposables.push(this._columnSortCheckbox.onChanged((async e=>await this._populateTableData())));const t=this.view.modelBuilder.flexContainer().withItems([e,this._columnSortDropdown]).withProps({CSSStyles:{"justify-content":"left","align-items":"center",padding:"0px",display:"flex","flex-direction":"row"}}).component();t.addItem(this._columnSortCheckbox,{flex:"0 0 auto"});const i=this.view.modelBuilder.flexContainer().withProps({width:"100%",CSSStyles:{"justify-content":"left","align-items":"center",padding:"0px",display:"flex","flex-direction":"row","flex-flow":"wrap"}}).component();return i.addItem(this._tableFilterInputBox,{flex:"0"}),i.addItem(t,{flex:"0",CSSStyles:{"margin-left":"10px"}}),i}async _createStatusBar(){const e=this.view.modelBuilder.text().withProps({value:r.SERVER_OBJECTS_LABEL,CSSStyles:{"font-weight":"600","font-size":"14px",margin:"0 0 5px 0"}}).component(),t=this.view.modelBuilder.flexContainer().withLayout({flexFlow:"row",flexWrap:"wrap"}).component();return t.addItems([await this.createInfoCard(r.SERVER_OBJECTS_ALL_TABLES_LABEL,u.IconPathHelper.allTables),await this.createInfoCard(r.SERVER_OBJECTS_IN_PROGRESS_TABLES_LABEL,u.IconPathHelper.inProgressMigration),await this.createInfoCard(r.SERVER_OBJECTS_SUCCESSFUL_TABLES_LABEL,u.IconPathHelper.completedMigration),await this.createInfoCard(r.SERVER_OBJECTS_FAILED_TABLES_LABEL,u.IconPathHelper.error),await this.createInfoCard(r.SERVER_OBJECTS_CANCELLED_TABLES_LABEL,u.IconPathHelper.cancel)],{flex:"0 0 auto",CSSStyles:{width:"168px"}}),this.view.modelBuilder.flexContainer().withItems([e,t]).withLayout({flexFlow:"column"}).component()}}t.MigrationDetailsTableTab=I},3207:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationsListTab=t.MigrationsListTabId=void 0;const n=i(9072),r=i(1386),o=i(1419),a=i(2074),s=i(3186),l=i(1456),c=i(4294),u=i(7475),d=i(2987),p=i(8777),h=i(3963);t.MigrationsListTabId="MigrationsListTab";const _="sourceDatabase",g="sourceServer",m="status",S="mode",f="type",E="targetType",T="targetDatabase",C="TargetServer",y="duration",v="startTime",R="finishTime";class A extends p.TabBase{constructor(){super(),this._filteredMigrations=[],this._migrations=[],this._statusDropdownValues=[{displayName:a.STATUS_ALL,name:p.AdsMigrationStatus.ALL},{displayName:a.STATUS_ONGOING,name:p.AdsMigrationStatus.ONGOING},{displayName:a.STATUS_COMPLETING,name:p.AdsMigrationStatus.COMPLETING},{displayName:a.STATUS_SUCCEEDED,name:p.AdsMigrationStatus.SUCCEEDED},{displayName:a.STATUS_FAILED,name:p.AdsMigrationStatus.FAILED}],this.id=t.MigrationsListTabId}async create(e,t,i,n,r){return this.view=t,this.context=e,this._openMigrationDetails=i,this.serviceContextChangedEvent=n,this.statusBar=r,await this.initialize(),this}async setMigrationFilter(e){if(this._statusDropdown.values&&this._statusDropdown.values.length>0){const t=this._statusDropdown.values.find((t=>t.name===e.toString()));await this._statusDropdown.updateProperties({value:t})}}async refresh(e){if(!this.isRefreshing&&void 0!==this._refreshLoader)try{this.isRefreshing=!0,this._refreshLoader.loading=!0,await this.statusBar.clearError(),e&&await this.updateServiceButtonContext(this._serviceContextButton),await this._statusTable.updateProperty("data",[]),this._migrations=await(0,o.getCurrentMigrations)(),await this._populateMigrationTable()}catch(e){await this.statusBar.showError(a.DASHBOARD_REFRESH_MIGRATIONS_TITLE,a.DASHBOARD_REFRESH_MIGRATIONS_LABEL,e.message),(0,u.logError)(u.TelemetryViews.MigrationsTab,"refreshMigrations",e)}finally{this._refreshLoader.loading=!1,this.isRefreshing=!1}}async initialize(){this._createStatusTable(),this.content=this.view.modelBuilder.flexContainer().withItems([this._createToolbar(),await this._createSearchAndSortContainer(),this._statusTable],{CSSStyles:{width:"100%"}}).withLayout({width:"100%",flexFlow:"column"}).withProps({CSSStyles:{padding:"0px"}}).component()}_createToolbar(){const e=this.view.modelBuilder.toolbarContainer();return this._refresh=this.view.modelBuilder.button().withProps({iconPath:r.IconPathHelper.refresh,iconHeight:24,iconWidth:24,height:24,label:a.REFRESH_BUTTON_LABEL}).component(),this.disposables.push(this._refresh.onDidClick((async e=>await this.refresh()))),this._refreshLoader=this.view.modelBuilder.loadingComponent().withItem(this._refresh).withProps({loading:!1,CSSStyles:{height:"8px","margin-top":"6px"}}).component(),e.addToolbarItems([{component:this.createNewMigrationButton(),toolbarSeparatorAfter:!0},{component:this.createNewLoginMigrationButton(),toolbarSeparatorAfter:!0},{component:this.createImportMigrationButton(),toolbarSeparatorAfter:!0},{component:this.createNewHelpAndSupportButton()},{component:this.createFeedbackButton(),toolbarSeparatorAfter:!0},{component:this._refreshLoader}]),e.component()}async _createSearchAndSortContainer(){const e=await(0,o.getSelectedServiceStatus)();this._serviceContextButton=this.view.modelBuilder.button().withProps({iconPath:r.IconPathHelper.sqlMigrationService,iconHeight:22,iconWidth:22,label:e,title:e,description:a.MIGRATION_SERVICE_DESCRIPTION,buttonType:n.ButtonType.Informational,width:230}).component(),this.disposables.push(this._serviceContextButton.onDidClick((async()=>{const e=new d.SelectMigrationServiceDialog(this.serviceContextChangedEvent);await e.initialize()}))),this.disposables.push(this.serviceContextChangedEvent.event((async e=>{e.connectionId===await(0,h.getSourceConnectionId)()&&await this.refresh(!0)}))),await this.updateServiceButtonContext(this._serviceContextButton),this._searchBox=this.view.modelBuilder.inputBox().withProps({stopEnterPropagation:!0,placeHolder:a.SEARCH_FOR_MIGRATIONS,width:"200px"}).component(),this.disposables.push(this._searchBox.onTextChanged((async e=>await this._populateMigrationTable())));const t=this.view.modelBuilder.text().withProps({value:a.STATUS_LABEL,CSSStyles:{"font-size":"13px","font-weight":"600",margin:"3px 0 0 0"}}).component();this._statusDropdown=this.view.modelBuilder.dropDown().withProps({ariaLabel:a.MIGRATION_STATUS_FILTER,values:this._statusDropdownValues,width:"150px",fireOnTextChange:!0,value:this._statusDropdownValues[0]}).component(),this.disposables.push(this._statusDropdown.onValueChanged((async e=>await this._populateMigrationTable())));const i=this.view.modelBuilder.flexContainer().withLayout({alignContent:"center",alignItems:"center"}).withProps({CSSStyles:{"margin-left":"10px"}}).component();i.addItem(t,{flex:"0"}),i.addItem(this._statusDropdown,{flex:"0",CSSStyles:{"margin-left":"5px"}});const s=this.view.modelBuilder.text().withProps({value:a.SORT_LABEL,CSSStyles:{"font-size":"13px","font-weight":"600",margin:"3px 0 0 0"}}).component();this._columnSortDropdown=this.view.modelBuilder.dropDown().withProps({editable:!1,width:120,CSSStyles:{"margin-left":"5px"},value:{name:v,displayName:a.START_TIME},values:[{name:_,displayName:a.SRC_DATABASE},{name:g,displayName:a.SRC_SERVER},{name:m,displayName:a.STATUS_COLUMN},{name:S,displayName:a.MIGRATION_MODE},{name:f,displayName:a.MIGRATION_TYPE},{name:E,displayName:a.AZURE_SQL_TARGET},{name:T,displayName:a.TARGET_DATABASE_COLUMN},{name:C,displayName:a.TARGET_SERVER_COLUMN},{name:y,displayName:a.DURATION},{name:v,displayName:a.START_TIME},{name:R,displayName:a.FINISH_TIME}]}).component(),this.disposables.push(this._columnSortDropdown.onValueChanged((async e=>await this._populateMigrationTable()))),this._columnSortCheckbox=this.view.modelBuilder.checkBox().withProps({label:a.ASCENDING_LABEL,checked:!1,CSSStyles:{"margin-left":"15px"}}).component(),this.disposables.push(this._columnSortCheckbox.onChanged((async e=>await this._populateMigrationTable())));const l=this.view.modelBuilder.flexContainer().withItems([s,this._columnSortDropdown]).withProps({CSSStyles:{"justify-content":"left","align-items":"center",padding:"0px",display:"flex","flex-direction":"row"}}).component();l.addItem(this._columnSortCheckbox,{flex:"0 0 auto"});const c=this.view.modelBuilder.flexContainer().withProps({width:"100%",CSSStyles:{"justify-content":"left","align-items":"center",padding:"0px",display:"flex","flex-direction":"row","flex-flow":"wrap"}}).component();c.addItem(this._serviceContextButton,{flex:"0",CSSStyles:{"margin-left":"10px"}}),c.addItem(this._searchBox,{flex:"0",CSSStyles:{"margin-left":"10px"}}),c.addItem(i,{flex:"0",CSSStyles:{"margin-left":"10px"}}),c.addItem(l,{flex:"0",CSSStyles:{"margin-left":"10px"}});const u=this.view.modelBuilder.flexContainer().withProps({width:"100%"}).component();return u.addItem(c),u}_sortMigrations(e,t,i){const n=i?-1:1;switch(t){case _:return void e.sort(((e,t)=>this.stringCompare(e.properties.sourceDatabaseName,t.properties.sourceDatabaseName,n)));case g:return void e.sort(((e,t)=>this.stringCompare(e.properties.sourceServerName,t.properties.sourceServerName,n)));case m:return void e.sort(((e,t)=>this.stringCompare((0,s.getMigrationStatusWithErrors)(e),(0,s.getMigrationStatusWithErrors)(t),n)));case S:return void e.sort(((e,t)=>this.stringCompare((0,l.getMigrationMode)(e),(0,l.getMigrationMode)(t),n)));case f:return void e.sort(((e,t)=>this.stringCompare((0,l.getMigrationType)(e),(0,l.getMigrationType)(t),n)));case E:return void e.sort(((e,t)=>this.stringCompare((0,l.getMigrationTargetType)(e),(0,l.getMigrationTargetType)(t),n)));case T:return void e.sort(((e,t)=>this.stringCompare((0,c.getResourceName)(e.id),(0,c.getResourceName)(t.id),n)));case C:return void e.sort(((e,t)=>this.stringCompare((0,c.getResourceName)(e.properties.scope),(0,c.getResourceName)(t.properties.scope),n)));case y:return void e.sort(((e,t)=>{if(!e.properties.startedOn)return n;if(!t.properties.startedOn)return-n;const i=new Date(e.properties.startedOn),r=new Date(t.properties.startedOn),o=new Date(e.properties.endedOn??Date.now()),a=new Date(t.properties.endedOn??Date.now());return o.getTime()-i.getTime()>a.getTime()-r.getTime()?-n:n}));case v:return void e.sort(((e,t)=>this.dateCompare(e.properties.startedOn,t.properties.startedOn,n)));case R:return void e.sort(((e,t)=>this.dateCompare(e.properties.endedOn,t.properties.endedOn,n)))}}async _populateMigrationTable(){try{this._filteredMigrations=(0,s.filterMigrations)(this._migrations,this._statusDropdown.value.name,this._searchBox.value),this._sortMigrations(this._filteredMigrations,this._columnSortDropdown.value.name,!0===this._columnSortCheckbox.checked);const e=await(0,h.getSourceConnectionId)(),t=this._filteredMigrations.map(((t,i)=>[{icon:r.IconPathHelper.sqlDatabaseLogo,title:t.properties.sourceDatabaseName??p.EmptySettingValue,role:"button"},t.properties.sourceServerName??p.EmptySettingValue,{icon:(0,s.getMigrationStatusImage)(t),title:(0,s.getMigrationStatusWithErrors)(t),role:"button"},(0,l.getMigrationMode)(t),(0,l.getMigrationType)(t),(0,l.getMigrationTargetType)(t),(0,c.getResourceName)(t.id),(0,c.getResourceName)(t.properties.scope),(0,s.getMigrationDuration)(t.properties.startedOn,t.properties.endedOn),(0,s.getMigrationTime)(t.properties.startedOn),(0,s.getMigrationTime)(t.properties.endedOn),{title:"",context:{connectionId:e,migrationId:t.id,migrationOperationId:t.properties.migrationOperationId},commands:this._getMenuCommands(t)}]));await this._statusTable.updateProperty("data",t)}catch(e){await this.statusBar.showError(a.LOAD_MIGRATION_LIST_ERROR,a.LOAD_MIGRATION_LIST_ERROR,e.message),(0,u.logError)(u.TelemetryViews.MigrationStatusDialog,"Error populating migrations list page",e)}}_createStatusTable(){const e=void 0,t=void 0;return this._statusTable=this.view.modelBuilder.table().withProps({ariaLabel:a.MIGRATION_STATUS,CSSStyles:{"margin-left":"10px"},data:[],forceFitColumns:n.ColumnSizingMode.AutoFit,height:"500px",columns:[{cssClass:t,headerCssClass:e,name:a.SRC_DATABASE,value:"sourceDatabase",width:170,type:n.ColumnType.hyperlink,toolTip:a.SRC_DATABASE_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.SRC_SERVER,value:"sourceServer",width:170,type:n.ColumnType.text,toolTip:a.SRC_SERVER_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.STATUS_COLUMN,value:"status",width:160,type:n.ColumnType.hyperlink,toolTip:a.STATUS_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.MIGRATION_MODE,value:"mode",width:120,type:n.ColumnType.text,toolTip:a.MIGRATION_MODE_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.MIGRATION_TYPE,value:"type",width:120,type:n.ColumnType.text,toolTip:a.MIGRATION_TYPE_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.AZURE_SQL_TARGET,value:"targetType",width:120,type:n.ColumnType.text,toolTip:a.AZURE_SQL_TARGET_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.TARGET_DATABASE_COLUMN,value:"targetDatabase",width:125,type:n.ColumnType.text,toolTip:a.TARGET_DATABASE_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.TARGET_SERVER_COLUMN,value:"targetServer",width:125,type:n.ColumnType.text,toolTip:a.TARGET_SERVER_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.DURATION,value:"duration",width:55,type:n.ColumnType.text,toolTip:a.DURATION_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.START_TIME,value:"startTime",width:115,type:n.ColumnType.text,toolTip:a.START_TIME_TOOL_TIP},{cssClass:t,headerCssClass:e,name:a.FINISH_TIME,value:"finishTime",width:115,type:n.ColumnType.text,toolTip:a.FINISH_TIME_TOOL_TIP},{cssClass:t,headerCssClass:e,name:"",value:"contextMenu",width:25,type:n.ColumnType.contextMenu,toolTip:a.CONTEXT_MENU_TOOL_TIP}]}).component(),this.disposables.push(this._statusTable.onCellAction((async e=>{const t=e,i=this._filteredMigrations[e.row];switch(t?.column){case 2:const e=a.DATABASE_MIGRATION_STATUS_LABEL((0,s.getMigrationStatusWithErrors)(i)),t=(0,c.getMigrationErrors)(i);this.showDialogMessage(a.DATABASE_MIGRATION_STATUS_TITLE,e,t);break;case 0:await this._openMigrationDetails(i)}}))),this._statusTable}_getMenuCommands(e){const t=[];return(0,l.canCutoverMigration)(e)&&t.push(s.MenuCommands.Cutover),t.push(s.MenuCommands.ViewDatabase,s.MenuCommands.ViewTarget,s.MenuCommands.ViewService),(0,l.canCancelMigration)(e)&&t.push(s.MenuCommands.CancelMigration),(0,l.canDeleteMigration)(e)&&t.push(s.MenuCommands.DeleteMigration),(0,l.canRetryMigration)(e)&&t.push(s.MenuCommands.RetryMigration),t.push(s.MenuCommands.CopyMigration),t}}t.MigrationsListTab=A},5378:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationsTab=t.MigrationsTabId=void 0;const n=i(2074),r=i(8777),o=i(3207),a=i(4294),s=i(1419),l=i(1285),c=i(9380),u=i(4591),d=i(3963);t.MigrationsTabId="MigrationsTab";class p extends r.TabBase{constructor(){super(),this._selectedTabId=void 0,this.title=n.DESKTOP_MIGRATIONS_TAB_TITLE,this.id=t.MigrationsTabId}async create(e,t,i,n,r){return this.context=e,this.view=t,this.serviceContextChangedEvent=i,this._migrationDetailsEvent=n,this.statusBar=r,await this.initialize(t),await this._openTab(this._migrationsListTab),this}async refresh(){switch(this._selectedTabId){case void 0:case o.MigrationsListTabId:return this._migrationsListTab.refresh(!0);default:return this._migrationDetailsViewTab.refresh()}}async initialize(e){this._tab=this.view.modelBuilder.divContainer().withLayout({height:"100%"}).withProps({CSSStyles:{margin:"0px",padding:"0px",width:"100%"}}).component(),this._migrationsListTab=await(new o.MigrationsListTab).create(this.context,this.view,(async e=>await this.openMigrationDetails(e)),this.serviceContextChangedEvent,this.statusBar),this.disposables.push(this._migrationsListTab);const t=async e=>{await this.statusBar.clearError(),await this._openTab(this._migrationsListTab),e&&await this._migrationsListTab.refresh()};this._migrationDetailsTab=await(new c.MigrationDetailsTab).create(this.context,this.view,t,this.statusBar),this.disposables.push(this._migrationDetailsTab),this._migrationDetailsTableTab=await(new u.MigrationDetailsTableTab).create(this.context,this.view,t,this.statusBar),this.disposables.push(this._migrationDetailsTableTab),this.disposables.push(this._migrationDetailsEvent.event((async e=>{if(e.connectionId===await(0,d.getSourceConnectionId)()){const t=await this._getMigrationDetails(e.migrationId,e.migrationOperationId);t&&await this.openMigrationDetails(t)}}))),this.content=this._tab}async setMigrationFilter(e){await this._openTab(this._migrationsListTab),await this._migrationsListTab.setMigrationFilter(e)}async openMigrationDetails(e){switch(e.properties.backupConfiguration?.sourceLocation?.fileStorageType){case l.FileStorageType.AzureBlob:case l.FileStorageType.FileShare:this._migrationDetailsViewTab=this._migrationDetailsTab;break;case l.FileStorageType.None:this._migrationDetailsViewTab=this._migrationDetailsTableTab}await this._migrationDetailsViewTab.setMigrationContext(await s.MigrationLocalStorage.getMigrationServiceContext(),e);const t=this._migrationDetailsViewTab.refresh();await this._openTab(this._migrationDetailsViewTab),await t}async _getMigrationDetails(e,t){const i=await s.MigrationLocalStorage.getMigrationServiceContext();if(i.azureAccount&&i.subscription)return(0,a.getMigrationDetails)(i.azureAccount,i.subscription,e,t)}async _openTab(e){e.id!==this._selectedTabId&&(await this.statusBar.clearError(),this._tab.clearItems(),this._tab.addItem(e.content),this._selectedTabId=e.id)}}t.MigrationsTab=p},3636:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardWidget=void 0;const n=i(9072),r=i(9496),o=i(7147),a=i(4294),s=i(3186),l=i(1456),c=i(1386),u=i(9930),d=i(2074),p=i(2751),h=i(8548),_=i(8637),g=i(252),m=i(2107),S=i(1419),f=i(1285),E=i(7475),T=i(2816),C=i(7527),y=i(303),v=i(5378),R=i(8777),A=i(3137),I=i(9785),w=i(3963),O=i(9411),b=i(196);t.DashboardWidget=class{constructor(e){this._context=e,u.NotebookPathHelper.setExtensionContext(e),c.IconPathHelper.setExtensionContext(e),S.MigrationLocalStorage.setExtensionContext(e),this._onServiceContextChanged=new r.EventEmitter,this._errorEvent=new r.EventEmitter,this._migrationDetailsEvent=new r.EventEmitter,e.subscriptions.push(this._onServiceContextChanged),e.subscriptions.push(this._errorEvent),e.subscriptions.push(this._migrationDetailsEvent)}async register(){await this._registerCommands(),n.ui.registerModelViewProvider("migration-dashboard",(async e=>{const t=[],i=e,r=e.modelBuilder.infoBox().withProps({style:"error",text:"",clickableButtonAriaLabel:d.ERROR_DIALOG_ARIA_CLICK_VIEW_ERROR_DETAILS,announceText:!0,isClickable:!0,display:"none",CSSStyles:{"font-size":"14px",display:"none"}}).component(),o=new C.DashboardStatusBar(this._context,await(0,w.getSourceConnectionId)(),r,this._errorEvent);t.push(r.onDidClick((async e=>await o.openErrorDialog()))),t.push(i.onClosed((e=>t.forEach((e=>{try{e.dispose()}catch{}})))));const a=async e=>{if(c){const t=this._migrationsTab.setMigrationFilter(e);l.selectTab(v.MigrationsTabId),await t}else c=!0,l.selectTab(v.MigrationsTabId),await this._migrationsTab.setMigrationFilter(R.AdsMigrationStatus.ALL),await this._migrationsTab.refresh(),await this._migrationsTab.setMigrationFilter(e)},s=await(new y.DashboardTab).create(this._context,e,(async e=>await a(e)),this._onServiceContextChanged,o);t.push(s),this._migrationsTab=await(new v.MigrationsTab).create(this._context,e,this._onServiceContextChanged,this._migrationDetailsEvent,o),t.push(this._migrationsTab);const l=e.modelBuilder.tabbedPanel().withTabs([s,this._migrationsTab]).withLayout({alwaysShowTabs:!0,orientation:n.TabOrientation.Horizontal}).withProps({CSSStyles:{margin:"0px",padding:"0px",width:"100%"}}).component();let c=!1;t.push(l.onTabChanged((async e=>{await this.clearError(await(0,w.getSourceConnectionId)()),e===v.MigrationsTabId?await this._migrationsTab.refresh():e===y.DashboardTabId&&(await s.refresh(),await this._migrationsTab.refresh())})));const u=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([r,l]).component();await e.initializeModel(u),await s.refresh()}))}async _registerCommands(){this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.Cutover,(async e=>{try{await this.clearError(e.connectionId);const t=await this._getMigrationById(e.migrationId,e.migrationOperationId);if((0,l.canCutoverMigration)(t)){const e=new _.MigrationCutoverDialogModel(await S.MigrationLocalStorage.getMigrationServiceContext(),t);await e.fetchStatus();const i=new h.ConfirmCutoverDialog(e);await i.initialize(),e.CutoverError&&(r.window.showErrorMessage(d.MIGRATION_CUTOVER_ERROR),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.Cutover,e.CutoverError))}else await r.window.showInformationMessage(d.MIGRATION_CANNOT_CUTOVER)}catch(t){await this.showError(e.connectionId,d.MIGRATION_CUTOVER_ERROR,d.MIGRATION_CUTOVER_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.Cutover,t)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.ViewDatabase,(async e=>{try{await this.clearError(e.connectionId),this._migrationDetailsEvent.fire({connectionId:e.connectionId,migrationId:e.migrationId,migrationOperationId:e.migrationOperationId})}catch(t){await this.showError(e.connectionId,d.OPEN_MIGRATION_DETAILS_ERROR,d.OPEN_MIGRATION_DETAILS_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.ViewDatabase,t)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.ViewTarget,(async e=>{try{const t=await this._getMigrationById(e.migrationId,e.migrationOperationId);if(t){const e="https://portal.azure.com/#resource/"+t.properties.scope;await r.env.openExternal(r.Uri.parse(e))}}catch(t){await this.showError(e.connectionId,d.OPEN_MIGRATION_TARGET_ERROR,d.OPEN_MIGRATION_TARGET_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.ViewTarget,t)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.ViewService,(async e=>{try{await this.clearError(e.connectionId);const t=await this._getMigrationById(e.migrationId,e.migrationOperationId),i=await S.MigrationLocalStorage.getMigrationServiceContext();if(t&&i){const e=new m.SqlMigrationServiceDetailsDialog(i,t);await e.initialize()}}catch(t){await this.showError(e.connectionId,d.OPEN_MIGRATION_SERVICE_ERROR,d.OPEN_MIGRATION_SERVICE_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.ViewService,t)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.CopyMigration,(async e=>{await this.clearError(e.connectionId);const t=await this._getMigrationById(e.migrationId,e.migrationOperationId);if(t){const i=new _.MigrationCutoverDialogModel(await S.MigrationLocalStorage.getMigrationServiceContext(),t);try{await i.fetchStatus()}catch(t){await this.showError(e.connectionId,d.MIGRATION_STATUS_REFRESH_ERROR,d.MIGRATION_STATUS_REFRESH_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.CopyMigration,t)}await r.env.clipboard.writeText(JSON.stringify(i.migration,void 0,2)),await r.window.showInformationMessage(d.DETAILS_COPIED)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.CancelMigration,(async e=>{try{await this.clearError(e.connectionId);const t=await this._getMigrationById(e.migrationId,e.migrationOperationId);t&&(0,l.canCancelMigration)(t)?r.window.showInformationMessage(d.CANCEL_MIGRATION_CONFIRMATION,d.YES,d.NO).then((async e=>{if(e===d.YES){const e=new _.MigrationCutoverDialogModel(await S.MigrationLocalStorage.getMigrationServiceContext(),t);await e.fetchStatus(),await e.cancelMigration(),e.CancelMigrationError&&(r.window.showErrorMessage(d.MIGRATION_CANNOT_CANCEL),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.CancelMigration,e.CancelMigrationError))}})):await r.window.showInformationMessage(d.MIGRATION_CANNOT_CANCEL)}catch(t){await this.showError(e.connectionId,d.MIGRATION_CANCELLATION_ERROR,d.MIGRATION_CANCELLATION_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.CancelMigration,t)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.DeleteMigration,(async e=>{await this.clearError(e.connectionId);try{const t=await S.MigrationLocalStorage.getMigrationServiceContext(),i=await this._getMigrationById(e.migrationId,e.migrationOperationId);t&&(i&&(0,l.canDeleteMigration)(i)||void 0===i&&e.migrationId?.length>0)?await r.window.showInformationMessage(d.DELETE_MIGRATION_CONFIRMATION,{modal:!0},d.YES,d.NO)===d.YES&&(await(0,a.deleteMigration)(t.azureAccount,t.subscription,e.migrationId),await this._migrationsTab.refresh()):(await r.window.showInformationMessage(d.MIGRATION_CANNOT_DELETE),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.DeleteMigration,"cannot delete migration"))}catch(t){await this.showError(e.connectionId,d.MIGRATION_DELETE_ERROR,d.MIGRATION_DELETE_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.DeleteMigration,t)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.RetryMigration,(async e=>{await this.clearError(e.connectionId);const t=await S.MigrationLocalStorage.getMigrationServiceContext(),i=await this._getMigrationById(e.migrationId,e.migrationOperationId);if(t&&i&&(0,l.canRetryMigration)(i)){const n=(0,a.getMigrationErrors)(i);(0,O.openRetryMigrationDialog)(n,(async()=>{try{await(0,a.retryMigration)(t.azureAccount,t.subscription,i),await this._migrationsTab.refresh()}catch(t){await this.showError(e.connectionId,d.MIGRATION_RETRY_ERROR,d.MIGRATION_RETRY_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.RetryMigration,t)}}))}else await r.window.showInformationMessage(d.MIGRATION_CANNOT_RETRY),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.RetryMigration,"cannot retry migration")}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.RestartMigration,(async e=>{try{await this.clearError(e.connectionId);const t=await this._getMigrationById(e.migrationId,e.migrationOperationId);if(t&&(0,l.canRestartMigrationWizard)(t)){const e=new g.RestartMigrationDialog(this._context,await S.MigrationLocalStorage.getMigrationServiceContext(),t,this._onServiceContextChanged);await e.openDialog()}else await r.window.showInformationMessage(d.MIGRATION_CANNOT_RESTART)}catch(t){await this.showError(e.connectionId,d.MIGRATION_RESTART_ERROR,d.MIGRATION_RESTART_ERROR,t.message),(0,E.logError)(E.TelemetryViews.MigrationsTab,s.MenuCommands.RestartMigration,t)}}))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.StartMigration,(async()=>await this.launchMigrationWizard()))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.StartLoginMigration,(async()=>await this.launchLoginMigrationWizard()))),this._context.subscriptions.push(r.commands.registerCommand(s.MenuCommands.OpenNotebooks,(async()=>{const e=r.window.createQuickPick();e.placeholder=d.NOTEBOOK_QUICK_PICK_PLACEHOLDER,e.items=u.NotebookPathHelper.getAllMigrationNotebooks(),this._context.subscriptions.push(e.onDidAccept((async t=>{const i=e.selectedItems[0];if(i){try{await n.nb.showNotebookDocument(r.Uri.parse(`untitled: ${i.label}`),{preview:!1,initialContent:(await o.promises.readFile(i.notebookPath)).toString(),initialDirtyState:!1})}catch(t){r.window.showErrorMessage(`${d.NOTEBOOK_OPEN_ERROR} - ${t.toString()}`)}e.hide()}}))),e.show()}))),this._context.subscriptions.push(n.tasks.registerTask(s.MenuCommands.StartMigration,(async()=>await this.launchMigrationWizard()))),this._context.subscriptions.push(n.tasks.registerTask(s.MenuCommands.StartLoginMigration,(async()=>await this.launchLoginMigrationWizard()))),this._context.subscriptions.push(n.tasks.registerTask(s.MenuCommands.NewSupportRequest,(async()=>await this.launchNewSupportRequest()))),this._context.subscriptions.push(n.tasks.registerTask(s.MenuCommands.SendFeedback,(async()=>{const e=s.MenuCommands.IssueReporter,t={extensionId:s.SqlMigrationExtensionId,issueTitle:d.FEEDBACK_ISSUE_TITLE};return await r.commands.executeCommand(e,t)})))}async clearError(e){this._errorEvent.fire({connectionId:e,title:"",label:"",message:""})}async showError(e,t,i,n){this._errorEvent.fire({connectionId:e,title:t,label:i,message:n})}async _getMigrationById(e,t){const i=await S.MigrationLocalStorage.getMigrationServiceContext();if(i.azureAccount&&i.subscription)try{return(0,a.getMigrationDetails)(i.azureAccount,i.subscription,e,t)}catch(e){(0,E.logError)(E.TelemetryViews.MigrationsTab,"_getMigrationById",e)}}async launchMigrationWizard(){const e=await(0,w.getSourceConnectionProfile)();let t="";if(e)t=e.serverName;else{const e=await n.connection.openConnectionDialog();e&&(t=e.options.server)}if(t){const e=await A.migrationServiceProvider.getService(I.ApiType.SqlMigrationProvider);if(e){this.stateModel=new f.MigrationStateModel(this._context,e),this._context.subscriptions.push(this.stateModel);const i=new T.WizardController(this._context,this.stateModel,this._onServiceContextChanged),n=this.checkSavedInfo(t);if(n){this.stateModel.savedInfo=n,this.stateModel.serverName=t;const e=this.checkSavedInfo(d.importAssessmentKey);if(e&&e.closedPage===f.Page.ImportAssessment){await this.clearSavedInfo(d.importAssessmentKey),null!==e.serverAssessment&&(this.stateModel._assessmentResults=e.serverAssessment,this.stateModel.savedInfo=e,await this.stateModel.loadSavedInfo(),t=e.serverAssessment?.issues[0]?.serverName??e.serverAssessment?.databaseAssessments[0]?.issues[0]?.serverName,this.stateModel.serverName=t);const i=new b.ImportAssessmentDialog("ownerUri",this.stateModel,t);await i.openDialog()}else{const e=new p.SavedAssessmentDialog(this._context,this.stateModel,this._onServiceContextChanged);await e.openDialog()}}else await i.openWizard()}}}async launchLoginMigrationWizard(){const e=await(0,w.getSourceConnectionProfile)();let t="";if(e)t=e.serverName;else{const e=await n.connection.openConnectionDialog();e&&(t=e.options.server)}if(t){const e=await A.migrationServiceProvider.getService(I.ApiType.SqlMigrationProvider);if(e){this.stateModel=new f.MigrationStateModel(this._context,e),this._context.subscriptions.push(this.stateModel);const t=new T.WizardController(this._context,this.stateModel,this._onServiceContextChanged);await t.openLoginWizard()}}}checkSavedInfo(e){return this._context.globalState.get(`${this.stateModel.mementoString}.${e}`)}async clearSavedInfo(e){await this._context.globalState.update(`${this.stateModel.mementoString}.${e}`,{})}async launchNewSupportRequest(){await r.env.openExternal(r.Uri.parse("https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest"))}}},8777:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabBase=t.AdsMigrationStatus=t.EmptySettingValue=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(1386),s=i(1419),l=i(3186),c=i(9073),u=i(3186),d=i(7147),p=i(5448),h=i(9261);var _;t.EmptySettingValue="-",function(e){e.ALL="all",e.ONGOING="ongoing",e.SUCCEEDED="succeeded",e.FAILED="failed",e.COMPLETING="completing"}(_||(t.AdsMigrationStatus=_={})),t.TabBase=class{constructor(){this.title="",this.disposables=[],this.isRefreshing=!1,this.mementoToken="sqlMigration.assessmentResults"}dispose(){this.disposables.forEach((e=>{try{e.dispose()}catch{}}))}numberCompare(e,t,i){return e?t?e>t?-i:i:-i:i}stringCompare(e,t,i){return e?t?e.localeCompare(t)*-i:-i:i}dateCompare(e,t,i){return e?t?new Date(e)>new Date(t)?-i:i:-i:i}async updateServiceButtonContext(e){const t=await(0,s.getSelectedServiceStatus)();await e.updateProperty("label",""),await e.updateProperty("title",""),await e.updateProperty("label",t),await e.updateProperty("title",t)}createNewLoginMigrationButton(){const e=this.view.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:o.DESKTOP_LOGIN_MIGRATION_BUTTON_LABEL,description:o.DESKTOP_LOGIN_MIGRATION_BUTTON_DESCRIPTION,height:24,iconHeight:24,iconWidth:24,iconPath:a.IconPathHelper.addNew}).component();return this.disposables.push(e.onDidClick((async()=>{const e=l.MenuCommands.StartLoginMigration,t={extensionId:l.SqlMigrationExtensionId,issueTitle:o.DASHBOARD_LOGIN_MIGRATE_TASK_BUTTON_TITLE};return await r.commands.executeCommand(e,t)}))),e}createNewMigrationButton(){const e=this.view.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:o.DESKTOP_MIGRATION_BUTTON_LABEL,description:o.DESKTOP_MIGRATION_BUTTON_DESCRIPTION,height:24,iconHeight:24,iconWidth:24,iconPath:a.IconPathHelper.addNew}).component();return this.disposables.push(e.onDidClick((async()=>{const e=l.MenuCommands.StartMigration,t={extensionId:l.SqlMigrationExtensionId,issueTitle:o.DASHBOARD_MIGRATE_TASK_BUTTON_TITLE};return await r.commands.executeCommand(e,t)}))),e}createImportMigrationButton(){const e=this.view.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:o.DESKTOP_IMPORT_MIGRATION_BUTTON_LABEL,description:o.DESKTOP_IMPORT_MIGRATION_BUTTON_DESCRIPTION,height:24,iconHeight:24,iconWidth:24,iconPath:a.IconPathHelper.addNew}).component();return this.disposables.push(e.onDidClick((async()=>{const e=await u.promptUserForFile({"Json (*.json)":["json"]});if(e){try{const t=d.readFileSync(e,"utf-8"),i=JSON.parse(t),n=(0,p.parseAssessmentReport)(i);await this.context.globalState.update(`${this.mementoToken}.${o.importAssessmentKey}`,n)}catch(e){r.window.showErrorMessage(e.message)}const t=l.MenuCommands.StartMigration,i={extensionId:l.SqlMigrationExtensionId,issueTitle:o.DASHBOARD_MIGRATE_TASK_BUTTON_TITLE};await r.commands.executeCommand(t,i)}}))),e}createNewHelpAndSupportButton(){const e=this.view.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:o.DESKTOP_HELP_SUPPORT_BUTTON_LABEL,description:o.DESKTOP_HELP_SUPPORT_BUTTON_DESCRIPTION,height:24,iconHeight:24,iconWidth:24,iconPath:a.IconPathHelper.newSupportRequest}).component();return this.disposables.push(e.onDidClick((async()=>{const e=new h.HelpAndSupportDialog;await e.openDialog()}))),e}createFeedbackButton(){const e=this.view.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:o.DESKTOP_FEEDBACK_BUTTON_LABEL,description:o.DESKTOP_FEEDBACK_BUTTON_DESCRIPTION,height:24,iconHeight:24,iconWidth:24,iconPath:a.IconPathHelper.sendFeedback}).component();return this.disposables.push(e.onDidClick((async()=>{const e=l.MenuCommands.IssueReporter,t={extensionId:l.SqlMigrationExtensionId,issueTitle:o.FEEDBACK_ISSUE_TITLE};return await r.commands.executeCommand(e,t)}))),e}showDialogMessage(e,t,i){(0,c.ShowStatusMessageDialog)(e,t,i)}}},5448:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIssueCategory=t.parseAssessmentReport=void 0;const n=i(3186),r=i(1456),o=i(1285);function a(e){switch(e){case"Error":return r.IssueCategory.Issue;case"Warning":return r.IssueCategory.Warning}return""}t.parseAssessmentReport=function(e){const t={xEventsFilesFolderPath:null,closedPage:o.Page.ImportAssessment,databaseAssessment:[],databaseList:[],databaseInfoList:[],migrationTargetType:null,azureAccount:null,azureTenant:null,subscription:null,location:null,resourceGroup:null,targetServerInstance:null,migrationMode:null,networkContainerType:null,networkShares:[],blobs:[],targetDatabaseNames:[],sqlMigrationService:void 0,serverAssessment:null,skuRecommendation:null,serviceResourceGroup:null,serviceSubscription:null};if(void 0!==e.DmaVersion){switch(e.TargetPlatform){case"VMSqlServer":t.migrationTargetType=n.MigrationTargetType.SQLVM;break;case"ManagedSqlServer":t.migrationTargetType=n.MigrationTargetType.SQLMI;break;case"AzureSqlDatabase":t.migrationTargetType=n.MigrationTargetType.SQLDB;break;default:throw new Error("Unsupported type")}const i=e.ServerInstances[0];t.serverAssessment={issues:i.AssessmentRecommendations.map((e=>({serverName:i.ServerName,rulesetVersion:"N/A",rulesetName:"N/A",ruleId:e.RuleId,targetType:t.migrationTargetType,checkId:e.Title,tags:[],displayName:e.Title,description:e.Recommendation,helpLink:e.MoreInfo,level:e.Severity,timestamp:"N/A",kind:e.Category,message:e.Impact,appliesToMigrationTargetPlatform:t.migrationTargetType,issueCategory:a(e.Severity),impactedObjects:e.ImpactedObjects.map((e=>({name:e.Name,objectType:e.ObjectType,impactDetail:e.ImpactDetail,databaseObjectType:e.DatabaseObjectType}))),databaseRestoreFails:[]}))),databaseAssessments:e.Databases?.map((e=>({name:e.Name,issues:e.AssessmentRecommendations.map((n=>({serverName:i.ServerName,rulesetVersion:"N/A",rulesetName:"N/A",ruleId:n.RuleId,targetType:t.migrationTargetType,checkId:n.Title,tags:[],displayName:n.Title,description:n.Recommendation,helpLink:n.MoreInfo,level:n.Severity,timestamp:"N/A",kind:n.Category,message:n.Impact,appliesToMigrationTargetPlatform:t.migrationTargetType,issueCategory:a(n.Severity),databaseName:e.Name,impactedObjects:n.ImpactedObjects.map((e=>({name:e.Name,objectType:e.ObjectType,impactDetail:e.ImpactDetail,databaseObjectType:e.DatabaseObjectType}))),databaseRestoreFails:[]}))),errors:e.Errors||[]}))),errors:e.Errors??[]}}else{const i=e.Servers[0];t.serverAssessment={issues:i.ServerAssessments.map((e=>({serverName:e.ServerName,rulesetVersion:"N/A",rulesetName:"N/A",ruleId:e.RuleMetadata.Id,targetType:e.AppliesToMigrationTargetPlatform,checkId:e.RuleMetadata.Id,tags:e.RuleMetadata.Tags,displayName:e.RuleMetadata.Id,description:e.RuleMetadata.Description,helpLink:e.RuleMetadata.HelpLink,level:e.RuleMetadata.Level,timestamp:e.Timestamp,kind:e.IssueCategory,message:e.RuleMetadata.Message,appliesToMigrationTargetPlatform:e.AppliesToMigrationTargetPlatform,issueCategory:e.IssueCategory,databaseName:e.DatabaseName,impactedObjects:e.ImpactedObjects.map((e=>({name:e.Name,objectType:e.ObjectType,impactDetail:e.ImpactDetail,databaseObjectType:e.DatabaseObjectType}))),databaseRestoreFails:e.DatabaseRestoreFails})))??[],databaseAssessments:i.Databases.map((e=>({name:e.Properties.Name,issues:e.DatabaseAssessments.map((e=>({serverName:e.ServerName,rulesetVersion:"N/A",rulesetName:"N/A",ruleId:e.RuleMetadata.Id,targetType:e.AppliesToMigrationTargetPlatform,checkId:e.RuleMetadata.Id,tags:e.RuleMetadata.Tags,displayName:e.RuleMetadata.Id,description:e.RuleMetadata.Description,helpLink:e.RuleMetadata.HelpLink,level:e.RuleMetadata.Level,timestamp:e.Timestamp,kind:e.IssueCategory,message:e.RuleMetadata.Message,appliesToMigrationTargetPlatform:e.AppliesToMigrationTargetPlatform,issueCategory:e.IssueCategory,databaseName:e.DatabaseName,impactedObjects:e.ImpactedObjects.map((e=>({name:e.Name,objectType:e.ObjectType,impactDetail:e.ImpactDetail,databaseObjectType:e.DatabaseObjectType}))),databaseRestoreFails:e.DatabaseRestoreFails}))),errors:e.Errors||[]})))??[],errors:e.Errors??[]}}const i=[];for(const t in e.Databases)i.push(e.Databases[t].Name);return t.databaseList=i.sort(),t},t.getIssueCategory=a},196:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportAssessmentDialog=void 0;const n=i(9072),r=i(2074),o=i(9563),a=i(3186),s=i(8153),l=i(5982),c=i(3186);class u{constructor(e,t,i){this.ownerUri=e,this.model=t,this.title=i,this._isOpen=!1,this._disposables=[],this._header=new l.AssessmentDetailsHeader(t,!0),this._body=new s.AssessmentDetailsBody(t,{},!0)}async initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async e=>{try{const i=e.modelBuilder.text().withProps({CSSStyles:{...o.PAGE_TITLE_CSS,margin:"0px 15px 0px 15px"},value:r.IMPORT_ASSESSMENT_PAGE_HEADER}).component(),n=this._header.createAssessmentDetailsHeader(e);this._bodySection=await this._body.createAssessmentDetailsBodyAsync(e),void 0===this.model._targetType&&(this.model._targetType=c.MigrationTargetType.SQLMI),await this.displayAssessmentAsync(),await this._header.populateAssessmentDetailsHeader(this.model),await this._body.populateAssessmentBodyAsync(),this._disposables.push(this._header.targetTypeDropdown.onValueChanged((async e=>{if(e){const t=this.getTargetTypeBasedOnSelection(e);this.model._targetType=t,await this._header.populateAssessmentDetailsHeader(this.model),await this._body.populateAssessmentBodyAsync()}})));const a=e.modelBuilder.formContainer().withFormItems([{component:i},{component:n},{component:this._bodySection}]).withProps({CSSStyles:{"padding-top":"0"}}).component();this._disposables.push(e.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await e.initializeModel(a),t()}catch(e){i(e)}}))}))}async openDialog(e){if(!this._isOpen){this._isOpen=!0,this.dialog=n.window.createModelViewDialog(this.title,"AssessmentResults","wide"),this.dialog.okButton.hidden=!0,this.dialog.cancelButton.label=u.OkButtonText,this.dialog.cancelButton.position="left";const e=[];e.push(this.initializeDialog(this.dialog)),n.window.openDialog(this.dialog),await Promise.all(e),await this._body.populateAssessmentBodyAsync()}}async displayAssessmentAsync(){await a.updateControlDisplay(this._header.noTargetSelectedContainer,!1),await a.updateControlDisplay(this._bodySection,!0,"flex"),await a.updateControlDisplay(this._header.headerCardsContainer,!0,"flex")}getTargetTypeBasedOnSelection(e){switch(e){case r.SUMMARY_SQLDB_TYPE:return c.MigrationTargetType.SQLDB;case r.SUMMARY_VM_TYPE:return c.MigrationTargetType.SQLVM;case r.SUMMARY_MI_TYPE:return c.MigrationTargetType.SQLMI;default:throw new Error("Unsupported type")}}}t.ImportAssessmentDialog=u,u.OkButtonText="OK"},2751:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SavedAssessmentDialog=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(2816),s=i(9563);class l{constructor(e,t,i){this._disposables=[],this._isOpen=!1,this.stateModel=t,this.context=e,this._serviceContextChangedEvent=i}async initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async n=>{try{this._rootContainer=this.initializePageContent(n),await n.initializeModel(this._rootContainer),this._disposables.push(e.okButton.onClick((async e=>await this.execute()))),this._disposables.push(e.cancelButton.onClick((e=>this.cancel()))),this._disposables.push(n.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),t()}catch(e){i(e)}})),e.registerCloseValidator((async()=>!(this.stateModel.resumeAssessment&&!this.stateModel.loadSavedInfo()&&(r.window.showInformationMessage(o.OPEN_SAVED_INFO_ERROR),1))))}))}async openDialog(e){if(!this._isOpen){this._isOpen=!0,this.dialog=n.window.createModelViewDialog(o.SAVED_ASSESSMENT_RESULT,o.SAVED_ASSESSMENT_RESULT,"60%"),this.dialog.okButton.label=l.OkButtonText,this.dialog.okButton.position="left",this.dialog.cancelButton.label=l.CancelButtonText,this.dialog.cancelButton.position="left";const e=[];e.push(this.initializeDialog(this.dialog)),n.window.openDialog(this.dialog),await Promise.all(e)}}async execute(){const e=new a.WizardController(this.context,this.stateModel,this._serviceContextChangedEvent);await e.openWizard(),this._isOpen=!1}cancel(){this._isOpen=!1}get isOpen(){return this._isOpen}initializePageContent(e){const t="resumeMigration",i=e.modelBuilder.radioButton().withProps({label:o.START_NEW_SESSION,name:t,CSSStyles:{...s.BODY_CSS,"margin-bottom":"8px"},checked:!0}).component();this._disposables.push(i.onDidChangeCheckedState((e=>{e&&(this.stateModel.resumeAssessment=!1)})));const n=e.modelBuilder.radioButton().withProps({label:o.RESUME_SESSION,name:t,CSSStyles:{...s.BODY_CSS},checked:!1}).component();this._disposables.push(n.onDidChangeCheckedState((e=>{e&&(this.stateModel.resumeAssessment=!0)})));const r=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({CSSStyles:{padding:"20px 15px"}}).component();return r.addItem(i,{flex:"0 0 auto"}),r.addItem(n,{flex:"0 0 auto"}),r}}t.SavedAssessmentDialog=l,l.OkButtonText=o.NEXT_LABEL,l.CancelButtonText=o.CANCEL_LABEL},1721:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateResourceGroupDialog=void 0;const n=i(9072),r=i(2361),o=i(4294),a=i(2074),s=i(9563);t.CreateResourceGroupDialog=class{constructor(e,t,i){this._azureAccount=e,this._subscription=t,this._location=i,this._creationEvent=new r.EventEmitter,this._disposables=[],this._dialogObject=n.window.createModelViewDialog("","CreateResourceGroupDialog",550,"callout","below",!1,!0,{height:20,width:20,xPos:0,yPos:0})}async initialize(){let e=n.window.createTab("sql.migration.CreateResourceGroupDialog");return e.registerContent((async e=>{this._view=e;const t=e.modelBuilder.text().withProps({value:a.RESOURCE_GROUP_DESCRIPTION,CSSStyles:{...s.BODY_CSS,"margin-bottom":"8px"}}).component(),i=e.modelBuilder.text().withProps({value:a.NAME,CSSStyles:{...s.LABEL_CSS}}).component(),n=e.modelBuilder.inputBox().withProps({ariaLabel:a.NAME_OF_NEW_RESOURCE_GROUP}).withValidation((e=>{let t=!1;return e.value.length>0&&e.value.length<=90&&/^[-\w\._\(\)]+$/.test(e.value)&&(t=!0),r.enabled=t,t})).component();this._disposables.push(n.onTextChanged((async e=>{await d.updateCssStyles({display:"none"})})));const r=e.modelBuilder.button().withProps({label:a.OK,width:"80px",enabled:!1}).component();this._disposables.push(r.onDidClick((async e=>{await d.updateCssStyles({display:"none"}),r.enabled=!1,l.enabled=!1,c.loading=!0;try{const e=await(0,o.createResourceGroup)(this._azureAccount,this._subscription,n.value,this._location);this._creationEvent.emit("done",e)}catch(e){await d.updateCssStyles({display:"inline"}),d.text=e.toString(),l.enabled=!0,await n.validate()}finally{c.loading=!1}})));const l=e.modelBuilder.button().withProps({label:a.CANCEL,width:"80px"}).component();this._disposables.push(l.onDidClick((e=>{this._creationEvent.emit("done",void 0)})));const c=e.modelBuilder.loadingComponent().withProps({loading:!1,loadingText:a.CREATING_RESOURCE_GROUP,loadingCompletedText:a.RESOURCE_GROUP_CREATED}).component(),u=e.modelBuilder.flexContainer().withProps({CSSStyles:{"margin-top":"5px"}}).component();u.addItem(r,{flex:"0",CSSStyles:{width:"80px"}}),u.addItem(l,{flex:"0",CSSStyles:{"margin-left":"8px",width:"80px"}}),u.addItem(c,{flex:"0",CSSStyles:{"margin-left":"8px"}});const d=this._view.modelBuilder.infoBox().withProps({style:"error",text:"",CSSStyles:{display:"none"}}).component(),p=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([t,i,n,d,u]).component(),h=e.modelBuilder.formContainer().withFormItems([{component:p}],{horizontal:!1}).withLayout({width:"100%"}).withProps({CSSStyles:{padding:"0px !important"}}).component();return this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),e.initializeModel(h).then((async e=>{await n.focus()}))})),this._dialogObject.okButton.label=a.APPLY,this._dialogObject.okButton.position="left",this._dialogObject.content=[e],n.window.openDialog(this._dialogObject),new Promise((e=>{this._creationEvent.once("done",(async t=>{n.window.closeDialog(this._dialogObject),e(t)}))}))}}},1981:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateSqlMigrationServiceDialog=void 0;const n=i(9072),r=i(9496),o=i(4294),a=i(7475),s=i(2074),l=i(2037),c=i(1721),u=i(2361),d=i(3186),p=i(9563);t.CreateSqlMigrationServiceDialog=class{constructor(){this._doneButtonEvent=new u,this._isBlobContainerUsed=!1,this.irNodes=[],this._disposables=[]}async createNewDms(e,t){this._model=e,this._resourceGroupPreset=t,this._dialogObject=n.window.createModelViewDialog(s.CREATE_MIGRATION_SERVICE_TITLE,"MigrationServiceDialog","medium"),this._dialogObject.okButton.position="left",this._dialogObject.cancelButton.position="left";const i=n.window.createTab("");return this._dialogObject.registerCloseValidator((async()=>!0)),i.registerContent((async e=>{this._view=e,this._formSubmitButton=e.modelBuilder.button().withProps({label:s.CREATE,width:"80px"}).component(),this._disposables.push(this._formSubmitButton.onDidClick((async e=>{d.clearDialogMessage(this._dialogObject),this._statusLoadingComponent.loading=!0,this.migrationServiceResourceGroupDropdown.loading=!1,this.setFormEnabledState(!1);const t=this._model._sqlMigrationServiceSubscription,i=this._selectedResourceGroup,r=this._model._location.name,a=this.migrationServiceNameText.value,l=this.validateCreateServiceForm(t,i.name,r,a);try{if(l.length>0)return this.setDialogMessage(l),void this.setFormEnabledState(!0);if(d.clearDialogMessage(this._dialogObject),this._createdMigrationService=await(0,o.createSqlMigrationService)(this._model._azureAccount,t,i.name,r,a,this._model._sessionId),this._createdMigrationService.error)return this.setDialogMessage(`${this._createdMigrationService.error.code} : ${this._createdMigrationService.error.message}`),void this.setFormEnabledState(!0);this._isBlobContainerUsed&&!this._model.isSqlDbTarget?(this._dialogObject.okButton.enabled=!0,this._setupContainer.display="none",this._dialogObject.message={text:s.DATA_MIGRATION_SERVICE_CREATED_SUCCESSFULLY,level:n.window.MessageLevel.Information}):(await this.refreshStatus(),await d.refreshAuthenticationKeyTable(this._view,this.migrationServiceAuthKeyTable,this._model._azureAccount,t,i.name,r,this._createdMigrationService),this._setupContainer.display="inline",this._testConnectionButton.hidden=!1)}catch(e){console.log(e),this.setDialogMessage(e.message),this.setFormEnabledState(!0)}finally{this._statusLoadingComponent.loading=!1}}))),this._statusLoadingComponent=e.modelBuilder.loadingComponent().withProps({loadingText:s.LOADING_MIGRATION_SERVICES,loading:!1}).component();const t=this.createServiceStatus(),i=e.modelBuilder.formContainer().withFormItems([{component:await this.migrationServiceDropdownContainer()},{component:this._formSubmitButton},{component:this._statusLoadingComponent},{component:t}],{horizontal:!1}).withLayout({width:"100%"}).component();return this._disposables.push(e.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),e.initializeModel(i).then((async()=>{await this.populateSubscriptions()}))})),this._testConnectionButton=n.window.createButton(s.TEST_CONNECTION),this._testConnectionButton.hidden=!0,this._disposables.push(this._testConnectionButton.onClick((async e=>{this._refreshLoadingComponent.loading=!0,await this._connectionStatus.updateCssStyles({display:"none"});try{await this.refreshStatus()}catch(e){r.window.showErrorMessage(e)}await this._connectionStatus.updateCssStyles({display:"inline"}),this._refreshLoadingComponent.loading=!1}))),this._dialogObject.customButtons=[this._testConnectionButton],this._dialogObject.content=[i],this._dialogObject.okButton.enabled=!1,n.window.openDialog(this._dialogObject),this._disposables.push(this._dialogObject.cancelButton.onClick((e=>{}))),this._disposables.push(this._dialogObject.okButton.onClick((e=>{this._doneButtonEvent.emit("done",this._createdMigrationService,this._selectedResourceGroup)}))),this._isBlobContainerUsed=this._model.isBackupContainerBlobContainer,new Promise((e=>{this._doneButtonEvent.once("done",((t,i)=>{n.window.closeDialog(this._dialogObject),e({service:t,resourceGroup:i})}))}))}async migrationServiceDropdownContainer(){const e=this._view.modelBuilder.text().withProps({value:s.MIGRATION_SERVICE_DIALOG_DESCRIPTION(!this._model.isSqlDbTarget),CSSStyles:{...p.BODY_CSS}}).component(),t=this._view.modelBuilder.text().withProps({value:s.SUBSCRIPTION,description:s.MIGRATION_SERVICE_SUBSCRIPTION_INFO,CSSStyles:{...p.LABEL_CSS}}).component();this.migrationServiceSubscription=this._view.modelBuilder.text().withProps({enabled:!1,CSSStyles:{margin:"-1em 0 0"}}).component();const i=this._view.modelBuilder.text().withProps({value:s.RESOURCE_GROUP,description:s.MIGRATION_SERVICE_RESOURCE_GROUP_INFO,requiredIndicator:!0,CSSStyles:{...p.LABEL_CSS}}).component();this.migrationServiceResourceGroupDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.RESOURCE_GROUP,required:!0,editable:!0,fireOnTextChange:!0,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this.migrationServiceResourceGroupDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this._resourceGroups.find((t=>t.name===e||s.NEW_RESOURCE_GROUP(t.name)===e));this._selectedResourceGroup=t||void 0}})));const n=this._view.modelBuilder.text().withProps({value:s.NAME,description:s.MIGRATION_SERVICE_NAME_INFO,requiredIndicator:!0,CSSStyles:{...p.LABEL_CSS}}).component();this._createResourceGroupLink=this._view.modelBuilder.hyperlink().withProps({label:s.CREATE_NEW,ariaLabel:s.CREATE_NEW_RESOURCE_GROUP,url:"",CSSStyles:{...p.BODY_CSS}}).component(),this._disposables.push(this._createResourceGroupLink.onDidClick((async e=>{const t=new c.CreateResourceGroupDialog(this._model._azureAccount,this._model._sqlMigrationServiceSubscription,this._model._location.name),i=await t.initialize();i&&(this._resourceGroups.push(i),this._selectedResourceGroup=i,this.migrationServiceResourceGroupDropdown.loading=!0,this.migrationServiceResourceGroupDropdown.values.unshift({displayName:s.NEW_RESOURCE_GROUP(i.name),name:i.name}),this.migrationServiceResourceGroupDropdown.value={displayName:i.name,name:i.name},this.migrationServiceResourceGroupDropdown.loading=!1,await this.migrationServiceResourceGroupDropdown.focus())}))),this.migrationServiceNameText=this._view.modelBuilder.inputBox().withProps({ariaLabel:s.NAME,CSSStyles:{"margin-top":"-1em"}}).component();const r=this._view.modelBuilder.text().withProps({value:s.LOCATION,description:s.MIGRATION_SERVICE_LOCATION_INFO,CSSStyles:{...p.LABEL_CSS}}).component();this.migrationServiceLocation=this._view.modelBuilder.text().withProps({enabled:!1,value:this._model._location.displayName,CSSStyles:{margin:"-1em 0 0"}}).component();const o=this._view.modelBuilder.text().withProps({value:s.TARGET,description:s.MIGRATION_SERVICE_TARGET_INFO,CSSStyles:{...p.LABEL_CSS}}).component(),a=this._view.modelBuilder.text().withProps({enabled:!1,value:s.AZURE_SQL,CSSStyles:{"margin-top":"-1em"}}).component();return this._view.modelBuilder.flexContainer().withItems([e,t,this.migrationServiceSubscription,r,this.migrationServiceLocation,i,this.migrationServiceResourceGroupDropdown,this._createResourceGroupLink,n,this.migrationServiceNameText,o,a]).withLayout({flexFlow:"column"}).component()}validateCreateServiceForm(e,t,i,n){const r=[];return e||r.push(s.INVALID_SUBSCRIPTION_ERROR),t||r.push(s.INVALID_RESOURCE_GROUP_ERROR),i||r.push(s.INVALID_LOCATION_ERROR),(!n||n.length<3||n.length>63||!/^[A-Za-z0-9]+(?:-[A-Za-z0-9]+)*$/.test(n))&&r.push(s.INVALID_SERVICE_NAME_ERROR),r.join(l.EOL)}async populateSubscriptions(){this.migrationServiceResourceGroupDropdown.loading=!0,this.migrationServiceSubscription.value=this._model._sqlMigrationServiceSubscription.name,await this.populateResourceGroups()}async populateResourceGroups(){this.migrationServiceResourceGroupDropdown.loading=!0;try{this._resourceGroups=await d.getAllResourceGroups(this._model._azureAccount,this._model._sqlMigrationServiceSubscription),this.migrationServiceResourceGroupDropdown.values=d.getResourceDropdownValues(this._resourceGroups,s.RESOURCE_GROUP_NOT_FOUND);const e=this.migrationServiceResourceGroupDropdown.values.find((e=>e.name.toLowerCase()===this._resourceGroupPreset.toLowerCase()));this.migrationServiceResourceGroupDropdown.value=e||(this.migrationServiceResourceGroupDropdown.values?.length>0?this.migrationServiceResourceGroupDropdown.values[0]:"")}finally{this.migrationServiceResourceGroupDropdown.loading=!1}}createServiceStatus(){const e=d.createRegistrationInstructions(this._view,!0);return this._connectionStatus=this._view.modelBuilder.infoBox().withProps({text:"",style:"error",CSSStyles:{...p.BODY_CSS}}).component(),this._connectionStatus.CSSStyles={width:"350px"},this._refreshLoadingComponent=this._view.modelBuilder.loadingComponent().withProps({loading:!1,CSSStyles:{...p.BODY_CSS}}).component(),this.migrationServiceAuthKeyTable=d.createAuthenticationKeyTable(this._view,"50px","500px"),this._setupContainer=this._view.modelBuilder.flexContainer().withItems([e,this.migrationServiceAuthKeyTable,this._connectionStatus,this._refreshLoadingComponent],{CSSStyles:{"margin-bottom":"5px"}}).withLayout({flexFlow:"column"}).component(),this._setupContainer.display="none",this._testConnectionButton.hidden=!0,this._setupContainer}async refreshStatus(){const e=this._model._sqlMigrationServiceSubscription,t=this.migrationServiceResourceGroupDropdown.value.name,i=(0,o.getResourceName)(t),r=this._model._location.name;let l;for(let t=0;t<5;t++){try{d.clearDialogMessage(this._dialogObject),l=await(0,o.getSqlMigrationService)(this._model._azureAccount,e,i,r,this._createdMigrationService.name);break}catch(e){this._dialogObject.message={text:s.SERVICE_STATUS_REFRESH_ERROR,description:e.message,level:n.window.MessageLevel.Error},(0,a.logError)(a.TelemetryViews.CreateDataMigrationServiceDialog,"FetchSqlMigrationServiceFailed",e)}await new Promise((e=>setTimeout(e,5e3)))}const c=await(0,o.getSqlMigrationServiceMonitoringData)(this._model._azureAccount,e,i,r,this._createdMigrationService.name);this.irNodes=c.nodes.map((e=>e.nodeName)),l&&("Online"===l.properties.integrationRuntimeState?await this._connectionStatus.updateProperties({text:s.SERVICE_READY(this._createdMigrationService.name,this.irNodes.join(", "),!1),style:"success",CSSStyles:{...p.BODY_CSS}}):(this._connectionStatus.text=s.SERVICE_NOT_READY(this._createdMigrationService.name,!1),await this._connectionStatus.updateProperties({text:s.SERVICE_NOT_READY(this._createdMigrationService.name,!1),style:"warning",CSSStyles:{...p.BODY_CSS}})),this._dialogObject.okButton.enabled=!0)}setDialogMessage(e,t=n.window.MessageLevel.Error){this._dialogObject.message={text:e,level:t}}setFormEnabledState(e){this._formSubmitButton.enabled=e,this.migrationServiceResourceGroupDropdown.enabled=e,this.migrationServiceNameText.enabled=e,this._createResourceGroupLink.enabled=e}}},9073:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowStatusMessageDialog=void 0;const n=i(9072),r=i(2074);t.ShowStatusMessageDialog=function(e,t,i){const o=n.window.createTab(e);o.registerContent((async e=>{const n=e.modelBuilder.flexContainer().withItems([e.modelBuilder.text().withProps({value:t}).component()]).withLayout({flexFlow:"column",width:420}).withProps({CSSStyles:{margin:"0 15px"}}).component();i.length>0&&n.addItem(e.modelBuilder.inputBox().withProps({value:i,readOnly:!0,multiline:!0,inputType:"text",height:100,CSSStyles:{overflow:"hidden auto"}}).component()),await e.initializeModel(n)}));const a=n.window.createModelViewDialog(e,"messageDialog",450,"normal");a.content=[o],a.okButton.hidden=!0,a.cancelButton.focused=!0,a.cancelButton.label=r.CLOSE,a.cancelButton.position="left",n.window.openDialog(a)}},8479:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepStatusDialog=t.GetMultiStepStatusString=t.MultiStepState=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(2037),s=i(1386);var l,c;function u(e){switch(e){case c.Canceled:return o.VALIDATION_STATE_CANCELED;case c.Failed:return o.VALIDATION_STATE_FAILED;case c.Pending:return o.VALIDATION_STATE_PENDING;case c.Running:return o.VALIDATION_STATE_RUNNING;case c.Succeeded:return o.VALIDATION_STATE_SUCCEEDED;default:return""}}!function(e){e[e.message=0]="message",e[e.icon=1]="icon",e[e.status=2]="status",e[e.errors=3]="errors",e[e.state=4]="state"}(l||(l={})),function(e){e.Pending="Pending",e.Running="Running",e.Succeeded="Succeeded",e.Failed="Failed",e.Canceled="Canceled"}(c||(t.MultiStepState=c={})),t.GetMultiStepStatusString=u,t.MultiStepStatusDialog=class{constructor(e){this._disposables=[],this._isOpen=!1,this._results=[],this._errors=[],this._areStepsComplete=!1,this._onClosed=e}async openDialog(e,t,i=!1){if(!this._isOpen){this._isOpen=!0,this._dialog=n.window.createModelViewDialog(e,"MultiStepStatusDialog",600),this._dialog.cancelButton.hidden=!0;const r=this._initializeDialog(this._dialog);return n.window.openDialog(this._dialog),await r,this._areStepsComplete=i,this._loadResults(t)}}async _initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async n=>{try{this._disposables.push(e.cancelButton.onClick((e=>{this._onClosed()}))),this._disposables.push(e.okButton.onClick((e=>this._onClosed()))),this._headingText=n.modelBuilder.text().withProps({value:o.RUNNING_MULTI_STEPS_HEADING,CSSStyles:{"font-size":"13px","font-weight":"400","margin-bottom":"10px"}}).component(),this._startLoader=n.modelBuilder.loadingComponent().withProps({loading:!1,CSSStyles:{margin:"5px 0 0 10px"}}).component();const i=n.modelBuilder.flexContainer().withLayout({flexFlow:"row",justifyContent:"flex-start"}).withItems([this._headingText,this._startLoader],{flex:"0 0 auto"}).component();this._resultsTable=await this._createResultsTable(n),this._copyButton=n.modelBuilder.button().withProps({iconPath:s.IconPathHelper.copy,iconHeight:18,iconWidth:18,width:88,label:o.COPY_RESULTS}).component(),this._disposables.push(this._copyButton.onDidClick((async e=>this._copyResults())));const r=n.modelBuilder.text().withProps({value:o.MULTI_STEP_RESULTS_HEADING,CSSStyles:{"font-size":"16px","font-weight":"600",margin:"0px 0px 0px 0px"}}).component(),a=n.modelBuilder.toolbarContainer().withToolbarItems([{component:r,toolbarSeparatorAfter:!0},{component:this._copyButton}]).component(),l=n.modelBuilder.inputBox().withProps({inputType:"text",height:200,multiline:!0,CSSStyles:{overflow:"none auto"}}).component();this._disposables.push(this._resultsTable.onRowSelected((async e=>await this._updateResultsInfoBox(l))));const c=n.modelBuilder.flexContainer().withItems([i,this._resultsTable,a,l],{flex:"0 0 auto"}).withProps({CSSStyles:{margin:"0 0 0 15px"}}).withLayout({flexFlow:"column",height:"100%",width:565}).component();this._disposables.push(n.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),e.okButton.focused=!0,await n.initializeModel(c),t()}catch(e){i(e)}}))}))}async _loadResults(e){this._areStepsComplete?(this._startLoader.loading=!1,this._headingText.value=o.COMPLETED_MULTI_STEPS_HEADING):(this._startLoader.loading=!0,this._headingText.value=o.RUNNING_MULTI_STEPS_HEADING),await this._initializeResults(e)}async _copyResults(){const e=this._errors.join(a.EOL),t=this._areStepsComplete?0===e.length?o.ALL_STEPS_SUCCEEDED:o.ALL_STEPS_COMPLETED_ERRORS(e):o.SOME_STEPS_ARE_STILL_RUNNING;return r.env.clipboard.writeText(t)}async _updateResultsInfoBox(e){const t=this._resultsTable.selectedRows??[],i=[];if(t.length>0)for(let e=0;e<t.length;e++){const n=t[e],r=this._results[n],a=r[l.status],s=r[l.errors];i.push(o.RESULTS_INFO_BOX_STATUS(u(a),s))}const n=i.length>0?i.join(a.EOL):"";e.value=n}async _createResultsTable(e){return e.modelBuilder.table().withProps({columns:[{value:"step",name:o.STEPS_TITLE,type:n.ColumnType.text,width:380,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"},{value:"image",name:"",type:n.ColumnType.icon,width:20,headerCssClass:"no-borders display-none",cssClass:"no-borders align-with-header"},{value:"message",name:o.STATUS,type:n.ColumnType.text,width:150,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"}],data:[],width:580,height:300,CSSStyles:{"margin-top":"10px","margin-bottom":"10px"}}).component()}async _initializeResults(e){if(this._results=[],e&&e.length>0)for(let t=0;t<e.length;t++)this._addStepResult(e[t].stepName,e[t].state,e[t].errors);await this._updateTable()}_addStepResult(e,t,i=[]){const n=u(t),r=t===c.Failed&&i.length>0?o.VALIDATE_IR_VALIDATION_STATUS_ERROR_COUNT(n,i.length):n,a=i.length>0?o.VALIDATE_IR_VALIDATION_STATUS_ERROR(n,i):r;this._results.push([e,{icon:this._getValidationStateImage(t),title:a},r,i,t]),this._errors.push(...i)}_getValidationStateImage(e){switch(e){case c.Canceled:return s.IconPathHelper.cancel;case c.Failed:return s.IconPathHelper.error;case c.Running:return s.IconPathHelper.inProgressMigration;case c.Succeeded:return s.IconPathHelper.completedMigration;case c.Pending:default:return s.IconPathHelper.notStartedMigration}}async _updateTable(){const e=this._results.map((e=>[e[l.message],e[l.icon],e[l.status]]));await this._resultsTable.updateProperty("data",e)}}},9261:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HelpAndSupportDialog=t.communitySupportLink=t.supportRequestLink=t.supportResourcesLink=void 0;const n=i(9496),r=i(9072),o=i(2074),a=i(1386);t.supportResourcesLink="https://aka.ms/dms-overview",t.supportRequestLink="https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest",t.communitySupportLink="https://aka.ms/DMSqna",t.HelpAndSupportDialog=class{async initializeDialog(e){e.registerContent((async e=>{const t=this.initializePageContent(e);return e.initializeModel(t)})),e.cancelButton.hidden=!0,e.okButton.label=o.CLOSE,e.okButton.position="left"}async openDialog(){this.dialog=r.window.createModelViewDialog(o.HELP_SUPPORT_TITLE,o.HELP_SUPPORT_TITLE,"585px");const e=[];e.push(this.initializeDialog(this.dialog)),r.window.openDialog(this.dialog),await Promise.all(e)}initializePageContent(e){const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:"474px",justifyContent:"flex-start"}).withProps({CSSStyles:{padding:"15px"}}).component(),i=[{title:o.SUPPORT_RESOURCES_TITLE,description:o.SUPPORT_RESOURCES_DESCRIPTION,link:"",iconPath:a.IconPathHelper.info},{title:o.COMMUNITY_SUPPORT_TITLE,description:o.COMMUNITY_SUPPORT_DESCRIPTION,link:"",iconPath:a.IconPathHelper.newSupportRequest},{title:o.SUPPORT_REQUEST_TITLE,description:o.SUPPORT_REQUEST_DESCRIPTION,link:"",iconPath:a.IconPathHelper.newSupportRequest}];return t.addItems(i.map((t=>this.createSupportContainer(e,t)))),t}createSupportContainer(e,i){const n=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column",width:"474px","justify-content":"flex-start","margin-bottom":"12px"}}).component(),r=e.modelBuilder.text().withProps({value:i.title,CSSStyles:{"font-size":"14px","line-height":"20px","font-weight":"600","margin-bottom":"5px"}}).component();n.addItems([r]);const a=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"row",width:"484px","justify-content":"flex-start"}}).component(),s=e.modelBuilder.image().withProps({iconPath:i.iconPath,iconHeight:"16px",iconWidth:"16px",width:"16px",height:"16px"}).component();a.addItems([s]);const l=e.modelBuilder.hyperlink().withProps({label:i.description,url:i.link,showLinkIcon:!0,CSSStyles:{"font-size":"13px","line-height":"18px","margin-left":"-225px","text-decoration":"none"}}).component(),c=e.modelBuilder.text().withProps({value:o.SUPPORT_REQUEST_NOTE,CSSStyles:{"margin-block-end":"-1px"}}).component(),u=e.modelBuilder.text().withProps({value:o.COMMUNITY_SUPPORT_NOTE,CSSStyles:{"margin-block-end":"-1px"}}).component();return a.addItems([l]),n.addItems([a]),i.title===o.SUPPORT_REQUEST_TITLE?(l.onDidClick((async()=>await this.launchNewSupportRequest())),n.addItem(c)):i.title===o.COMMUNITY_SUPPORT_TITLE?(l.onDidClick((async()=>await this.launchCommunityRequest())),n.addItem(u)):l.url=t.supportResourcesLink,n}async launchNewSupportRequest(){await n.env.openExternal(n.Uri.parse(t.supportRequestLink))}async launchCommunityRequest(){await n.env.openExternal(n.Uri.parse(t.communitySupportLink))}}},8548:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfirmCutoverDialog=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(4294),s=i(1386),l=i(3186),c=i(9563),u=i(1456),d=i(1285);t.ConfirmCutoverDialog=class{constructor(e){this.migrationCutoverModel=e,this._disposables=[],this._dialogObject=n.window.createModelViewDialog("","ConfirmCutoverDialog",500)}async initialize(){const e=n.window.createTab("");e.registerContent((async e=>{this._view=e;const t=e.modelBuilder.text().withProps({value:o.COMPLETE_CUTOVER,CSSStyles:{...c.PAGE_TITLE_CSS}}).component(),i=e.modelBuilder.text().withProps({value:this.migrationCutoverModel.migration.properties.sourceDatabaseName,CSSStyles:{...c.SMALL_NOTE_CSS,margin:"4px 0px 8px"}}).component(),n=this._view.modelBuilder.separator().withProps({width:"800px"}).component(),s=this._view.modelBuilder.text().withProps({value:o.CUTOVER_HELP_MAIN,CSSStyles:{...c.BODY_CSS}}).component(),p=this._view.modelBuilder.text().withProps({value:this.migrationCutoverModel.confirmCutoverStepsString(),CSSStyles:{...c.BODY_CSS,padding:"8px"}}).component(),h=(0,u.isBlobMigration)(this.migrationCutoverModel.migration)?this.createBlobFileContainer():this.createNetworkShareFileContainer(),_=this._view.modelBuilder.checkBox().withProps({CSSStyles:{...c.BODY_CSS,"margin-bottom":"12px"},label:o.CONFIRM_CUTOVER_CHECKBOX}).component();this._disposables.push(_.onChanged((e=>{this._dialogObject.okButton.enabled=e})));const g=this._view.modelBuilder.infoBox().withProps({text:o.COMPLETING_CUTOVER_WARNING,style:"warning",CSSStyles:{...c.BODY_CSS}}).component();let m="none";if((0,u.getMigrationTargetTypeEnum)(this.migrationCutoverModel.migration)===l.MigrationTargetType.SQLMI){const e=await(0,a.getMigrationTargetInstance)(this.migrationCutoverModel.serviceContext.azureAccount,this.migrationCutoverModel.serviceContext.subscription,this.migrationCutoverModel.migration);e?.sku?.tier===d.ServiceTier.BusinessCritical&&(m="inline")}const S=this._view.modelBuilder.infoBox().withProps({text:o.BUSINESS_CRITICAL_INFO,style:"information",CSSStyles:{...c.BODY_CSS,display:m}}).component(),f=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([t,i,n,s,p,h,_,g,S]).component();this._dialogObject.okButton.enabled=!1,this._dialogObject.okButton.label=o.COMPLETE_CUTOVER,this._disposables.push(this._dialogObject.okButton.onClick((async e=>{await this.migrationCutoverModel.startCutover(),r.window.showInformationMessage(o.CUTOVER_IN_PROGRESS(this.migrationCutoverModel.migration.properties.sourceDatabaseName))})));const E=e.modelBuilder.formContainer().withFormItems([{component:f}],{horizontal:!1}).withLayout({width:"100%"}).component();return this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),e.initializeModel(E)})),this._dialogObject.content=[e],n.window.openDialog(this._dialogObject)}createBlobFileContainer(){const e=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{margin:"8px 0"}}).component(),t=this._view.modelBuilder.text().withProps({value:o.PENDING_BACKUPS(this.migrationCutoverModel.getPendingLogBackupsCount()??0),width:250,CSSStyles:{...c.LABEL_CSS}}).component();e.addItem(t,{flex:"0"});const i=this._view.modelBuilder.button().withProps({iconPath:s.IconPathHelper.refresh,iconHeight:16,iconWidth:16,width:70,height:20,label:o.REFRESH}).component();this._disposables.push(i.onDidClick((async e=>{try{r.loading=!0,await this.migrationCutoverModel.fetchStatus(),t.value=o.PENDING_BACKUPS(this.migrationCutoverModel.getPendingLogBackupsCount()??0)}catch(e){this._dialogObject.message={level:n.window.MessageLevel.Error,text:e.message}}finally{r.loading=!1}}))),e.addItem(i,{flex:"0"});const r=this._view.modelBuilder.loadingComponent().withProps({loading:!1,CSSStyles:{"margin-top":"-4px","margin-left":"8px"}}).component();return e.addItem(r,{flex:"0"}),e}createNetworkShareFileContainer(){const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component(),t=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"row"}).component();let i=!1;const r=this._view.modelBuilder.button().withProps({label:o.PENDING_BACKUPS(this.migrationCutoverModel.getPendingLogBackupsCount()??0),width:220,height:14,iconHeight:12,iconWidth:8,iconPath:s.IconPathHelper.expandButtonClosed,CSSStyles:{...c.LABEL_CSS,margin:"16px 8px 0px 0px"}}).component();this._disposables.push(r.onDidClick((async e=>{i?(r.iconPath=s.IconPathHelper.expandButtonClosed,r.iconHeight=12,await p.updateCssStyles({display:"none"})):(r.iconPath=s.IconPathHelper.expandButtonOpen,r.iconHeight=8,await p.updateCssStyles({display:"inline"})),i=!i})));const a=this._view.modelBuilder.button().withProps({iconPath:s.IconPathHelper.refresh,iconHeight:16,iconWidth:16,width:70,height:20,label:o.REFRESH,CSSStyles:{"margin-top":"13px"}}).component();t.addItem(r,{flex:"0"}),this._disposables.push(a.onDidClick((async e=>{try{u.loading=!0,await this.migrationCutoverModel.fetchStatus(),r.label=o.PENDING_BACKUPS(this.migrationCutoverModel.getPendingLogBackupsCount()??0),d.value=o.LAST_SCAN_COMPLETED((0,l.get12HourTime)(new Date)),this.refreshFileTable(p)}catch(e){this._dialogObject.message={level:n.window.MessageLevel.Error,text:e.message}}finally{u.loading=!1}}))),t.addItem(a,{flex:"0"});const u=this._view.modelBuilder.loadingComponent().withProps({loading:!1,CSSStyles:{"margin-top":"15px","margin-left":"5px",height:"13px"}}).component();t.addItem(u,{flex:"0"}),e.addItem(t);const d=this._view.modelBuilder.text().withProps({value:o.LAST_SCAN_COMPLETED((0,l.get12HourTime)(new Date)),CSSStyles:{...c.NOTE_CSS}}).component();e.addItem(d);const p=this._view.modelBuilder.table().withProps({columns:[{value:o.FILE_NAME,type:n.ColumnType.text,width:250},{value:o.STATUS,type:n.ColumnType.text,width:80},{value:o.SIZE_COLUMN_HEADER,type:n.ColumnType.text,width:70}],data:[],width:400,height:150,CSSStyles:{display:"none"}}).component();return e.addItem(p),this.refreshFileTable(p),e}refreshFileTable(e){const t=this.migrationCutoverModel.getPendingFiles();t.length>0?e.data=t.map((e=>[e.fileName,e.status,(0,l.convertByteSizeToReadableUnit)(e.totalSize)])):e.data=[[o.NO_PENDING_BACKUPS]]}}},8637:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationCutoverDialogModel=void 0;const n=i(4294),r=i(7475),o=i(2074),a=i(1456);t.MigrationCutoverDialogModel=class{constructor(e,t){this.serviceContext=e,this.migration=t}async fetchStatus(){try{const e=await(0,n.getMigrationDetails)(this.serviceContext.azureAccount,this.serviceContext.subscription,this.migration.id,this.migration.properties?.migrationOperationId);this.migration=e}catch(e){(0,r.logError)(r.TelemetryViews.MigrationDetailsTab,"fetchStatus",e)}finally{(0,r.sendSqlMigrationActionEvent)(r.TelemetryViews.MigrationDetailsTab,r.TelemetryAction.MigrationStatus,{migrationStatus:this.migration.properties?.migrationStatus},{})}}async startCutover(){try{if(this.CutoverError=void 0,this.migration){const e=await(0,n.startMigrationCutover)(this.serviceContext.azureAccount,this.serviceContext.subscription,this.migration);return(0,r.sendSqlMigrationActionEvent)(r.TelemetryViews.MigrationCutoverDialog,r.TelemetryAction.CutoverMigration,{...this.getTelemetryProps(this.serviceContext,this.migration),migrationEndTime:(new Date).toString()},{}),e}}catch(e){this.CutoverError=e,(0,r.logError)(r.TelemetryViews.MigrationCutoverDialog,"StartCutoverError",e)}}async cancelMigration(){try{if(this.CancelMigrationError=void 0,this.migration){const e=(new Date).toString();await(0,n.stopMigration)(this.serviceContext.azureAccount,this.serviceContext.subscription,this.migration),(0,r.sendSqlMigrationActionEvent)(r.TelemetryViews.MigrationCutoverDialog,r.TelemetryAction.CancelMigration,{...this.getTelemetryProps(this.serviceContext,this.migration),migrationMode:(0,a.getMigrationMode)(this.migration),cutoverStartTime:e},{})}}catch(e){this.CancelMigrationError=e,(0,r.logError)(r.TelemetryViews.MigrationCutoverDialog,"CancelMigrationError",e)}}confirmCutoverStepsString(){return(0,a.isBlobMigration)(this.migration)?`${o.CUTOVER_HELP_STEP1}\n\t\t\t${o.CUTOVER_HELP_STEP2_BLOB_CONTAINER}\n\t\t\t${o.CUTOVER_HELP_STEP3_BLOB_CONTAINER}`:`${o.CUTOVER_HELP_STEP1}\n\t\t\t${o.CUTOVER_HELP_STEP2_NETWORK_SHARE}\n\t\t\t${o.CUTOVER_HELP_STEP3_NETWORK_SHARE}`}getLastBackupFileRestoredName(){return this.migration.properties.migrationStatusDetails?.lastRestoredFilename}getPendingLogBackupsCount(){return this.migration.properties.migrationStatusDetails?.pendingLogBackupsCount}getPendingFiles(){const e=[];return this.migration.properties.migrationStatusDetails?.activeBackupSets?.forEach((t=>{t.listOfBackupFiles.forEach((t=>{t.status!==o.BackupFileInfoStatus.Restored&&e.push(t)}))})),e}getTelemetryProps(e,t){return{subscriptionId:e.subscription.id,resourceGroup:(0,n.getResourceGroupFromId)(t.id),sqlServerName:t.properties.sourceServerName,sourceDatabaseName:t.properties.sourceDatabaseName,targetType:(0,a.getMigrationTargetType)(t),targetDatabaseName:t.name,targetServerName:(0,n.getMigrationTargetName)(t)}}}},252:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestartMigrationDialog=void 0;const n=i(9072),r=i(9496),o=i(9785),a=i(4294),s=i(1285),l=i(2816),c=i(1456),u=i(2074),d=i(3137),p=i(3963);t.RestartMigrationDialog=class{constructor(e,t,i,n){this._context=e,this._serviceContext=t,this._migration=i,this._serviceContextChangedEvent=n}async createMigrationStateModel(e,t,i,n,r){const o=new s.MigrationStateModel(this._context,n),l=t.properties.sourceDatabaseName,u={closedPage:0,databaseAssessment:[l],databaseList:[l],databaseInfoList:[],serverAssessment:null,skuRecommendation:null,migrationTargetType:(0,c.getMigrationTargetTypeEnum)(t),azureAccount:e.azureAccount,azureTenant:e.tenant,subscription:e.subscription,location:r,resourceGroup:{id:(0,a.getFullResourceGroupFromId)(t.id),name:(0,a.getResourceGroupFromId)(t.id),subscription:e.subscription},targetServerInstance:await(0,a.getMigrationTargetInstance)(e.azureAccount,e.subscription,t),migrationMode:(0,c.getMigrationModeEnum)(t),targetDatabaseNames:[t.name],networkContainerType:null,networkShares:[],blobs:[],sqlMigrationService:e.migrationService,serviceSubscription:null,serviceResourceGroup:null,xEventsFilesFolderPath:null},d=e=>({id:(0,a.getFullResourceGroupFromId)(e),name:(0,a.getResourceGroupFromId)(e),subscription:this._serviceContext.subscription}),p=e=>{const t=(0,a.getResourceName)(e);return{type:"microsoft.storage/storageaccounts",id:e,tenantId:u.azureTenant?.id,subscriptionId:this._serviceContext.subscription?.id,name:t,location:u.location.name}},h=t.properties.backupConfiguration?.sourceLocation;if(h?.fileShare){u.networkContainerType=s.NetworkContainerType.NETWORK_SHARE;const e=t.properties.backupConfiguration?.targetLocation?.storageAccountResourceId;u.networkShares=[{password:"",networkShareLocation:h?.fileShare?.path,windowsUser:h?.fileShare?.username,storageAccount:p(e),resourceGroup:d(e),storageKey:""}]}else if(h?.azureBlob){u.networkContainerType=s.NetworkContainerType.BLOB_CONTAINER;const e=h?.azureBlob?.storageAccountResourceId;u.blobs=[{blobContainer:{id:(0,a.getBlobContainerId)((0,a.getFullResourceGroupFromId)(e),(0,a.getResourceName)(e),h?.azureBlob.blobContainerName),name:h?.azureBlob.blobContainerName,subscription:this._serviceContext.subscription},lastBackupFile:(0,c.getMigrationModeEnum)(t)===s.MigrationMode.OFFLINE?t.properties.offlineConfiguration?.lastBackupName:void 0,storageAccount:p(e),resourceGroup:d(e),storageKey:""}]}return o.restartMigration=!0,o.savedInfo=u,o.serverName=i,o}async openDialog(e){const t=await(0,a.getLocations)(this._serviceContext.azureAccount,this._serviceContext.subscription),i=await(0,a.getMigrationTargetInstance)(this._serviceContext.azureAccount,this._serviceContext.subscription,this._migration);let s;t.forEach((e=>{e.name===i.location&&(s=e)}));const c=await(0,p.getSourceConnectionProfile)();let h="";if(c)h=c.serverName;else{const e=await n.connection.openConnectionDialog();e&&(h=e.options.server)}const _=await d.migrationServiceProvider.getService(o.ApiType.SqlMigrationProvider),g=await this.createMigrationStateModel(this._serviceContext,this._migration,h,_,s);if(await g.loadSavedInfo()){const e=new l.WizardController(this._context,g,this._serviceContextChangedEvent);await e.openWizard()}else r.window.showInformationMessage(u.MIGRATION_CANNOT_RESTART)}}},9411:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openRetryMigrationDialog=void 0;const n=i(9072),r=i(2074);t.openRetryMigrationDialog=function(e,t){const i=[],o=n.window.createTab("");o.registerContent((async t=>{i.push(t.onClosed((e=>i.forEach((e=>{try{e.dispose()}catch{}})))));const n=t.modelBuilder.flexContainer().withItems([t.modelBuilder.text().withProps({value:r.RETRY_MIGRATION_TITLE,title:r.RETRY_MIGRATION_TITLE,CSSStyles:{"font-weight":"600",margin:"10px 0px 5px 0px"}}).component(),t.modelBuilder.inputBox().withProps({value:e,title:e,readOnly:!0,multiline:!0,inputType:"text",rows:10,CSSStyles:{overflow:"hidden auto",margin:"0px 0px 10px 0px"}}).component(),t.modelBuilder.text().withProps({value:r.RETRY_MIGRATION_SUMMARY,title:r.RETRY_MIGRATION_SUMMARY,CSSStyles:{margin:"0px 0px 10px 0px"}}).component(),t.modelBuilder.text().withProps({value:r.RETRY_MIGRATION_PROMPT,title:r.RETRY_MIGRATION_PROMPT,CSSStyles:{margin:"0px 0px 5px 0px"}}).component()]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{margin:"0 15px 0 15px"}}).component();await t.initializeModel(n)}));const a=n.window.createModelViewDialog("","retryMigrationDialog",500,"normal",void 0,!1);a.content=[o],a.okButton.label=r.YES,a.okButton.position="left",a.cancelButton.label=r.NO,a.cancelButton.position="left",a.cancelButton.focused=!0,i.push(a.okButton.onClick((async e=>await t()))),n.window.openDialog(a)}},2987:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectMigrationServiceDialog=t.BODY_CSS=void 0;const n=i(9072),r=i(9496),o=i(1419),a=i(9563),s=i(2074),l=i(3186),c=i(7475),u="100%",d={display:"none"},p={display:"inline"};t.BODY_CSS={"font-size":"13px","line-height":"18px",margin:"4px 0"};const h={...a.LABEL_CSS,margin:"0 0 0 0","font-weight":"600"},_={margin:"-1em 0 0 0"},g={margin:"1em 0 0 0"};t.SelectMigrationServiceDialog=class{constructor(e){this.onServiceContextChanged=e,this._disposables=[],this._dialog=n.window.createModelViewDialog(s.MIGRATION_SERVICE_SELECT_TITLE,"SelectMigraitonServiceDialog",460,"normal")}async initialize(){this._serviceContext=await o.MigrationLocalStorage.getMigrationServiceContext(),this._dialog.registerContent((async e=>{this._disposables.push(e.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await this.registerContent(e)})),this._dialog.okButton.label=s.MIGRATION_SERVICE_SELECT_APPLY_LABEL,this._dialog.okButton.position="left",this._dialog.cancelButton.position="left",this._deleteButton=n.window.createButton(s.MIGRATION_SERVICE_CLEAR,"right"),this._disposables.push(this._deleteButton.onClick((async e=>{await o.MigrationLocalStorage.saveMigrationServiceContext({},this.onServiceContextChanged),n.window.closeDialog(this._dialog)}))),this._dialog.customButtons=[this._deleteButton],n.window.openDialog(this._dialog)}async registerContent(e){this._view=e;const t=this._view.modelBuilder.flexContainer().withItems([this._createHeading(),this._createAzureAccountsDropdown(),this._createAzureTenantContainer(),this._createServiceSelectionContainer()]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{padding:"20px"}}).component();await this._view.initializeModel(t),await this._populateAzureAccountsDropdown()}_createHeading(){return this._view.modelBuilder.text().withProps({value:s.MIGRATION_SERVICE_SELECT_HEADING,CSSStyles:{...a.BODY_CSS}}).component()}_createAzureAccountsDropdown(){const e=this._view.modelBuilder.text().withProps({value:s.ACCOUNTS_SELECTION_PAGE_TITLE,requiredIndicator:!0,CSSStyles:{...h}}).component();this._azureAccountsDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.ACCOUNTS_SELECTION_PAGE_TITLE,width:u,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_AN_ACCOUNT,CSSStyles:{..._}}).component(),this._disposables.push(this._azureAccountsDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this._azureAccounts.find((t=>t.displayInfo.displayName===e));this._serviceContext.azureAccount=t?l.deepClone(t):void 0}else this._serviceContext.azureAccount=void 0;await l.clearDropDown(this._accountTenantDropdown),await this._populateTentantsDropdown()})));const t=this._view.modelBuilder.hyperlink().withProps({label:s.ACCOUNT_LINK_BUTTON_LABEL,url:"",CSSStyles:{...a.BODY_CSS}}).component();return this._disposables.push(t.onDidClick((async e=>{await r.commands.executeCommand("workbench.actions.modal.linkedAccount"),await this._populateAzureAccountsDropdown()}))),this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,this._azureAccountsDropdown,t]).component()}_createAzureTenantContainer(){const e=this._view.modelBuilder.text().withProps({value:s.AZURE_TENANT,CSSStyles:{...h,...g}}).component();return this._accountTenantDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.AZURE_TENANT,width:u,editable:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_TENANT}).component(),this._disposables.push(this._accountTenantDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this._accountTenants.find((t=>t.displayName===e));this._serviceContext.tenant=t?l.deepClone(t):void 0}else this._serviceContext.tenant=void 0;await l.clearDropDown(this._azureSubscriptionDropdown),await this._populateSubscriptionDropdown()}))),this._accountTenantFlexContainer=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,this._accountTenantDropdown]).withProps({CSSStyles:{...d}}).component(),this._accountTenantFlexContainer}_createServiceSelectionContainer(){const e=this._view.modelBuilder.text().withProps({value:s.SUBSCRIPTION,description:s.DMS_SUBSCRIPTION_INFO,requiredIndicator:!0,CSSStyles:{...h}}).component();this._azureSubscriptionDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.SUBSCRIPTION,width:u,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_SUBSCRIPTION,CSSStyles:{..._}}).component(),this._disposables.push(this._azureSubscriptionDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this._subscriptions.find((t=>`${t.name} - ${t.id}`===e));this._serviceContext.subscription=t?l.deepClone(t):void 0}else this._serviceContext.subscription=void 0;await l.clearDropDown(this._azureLocationDropdown),await this._populateLocationDropdown()})));const t=this._view.modelBuilder.text().withProps({value:s.LOCATION,description:s.DMS_LOCATION_INFO,requiredIndicator:!0,CSSStyles:{...h}}).component();this._azureLocationDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.LOCATION,width:u,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_LOCATION,CSSStyles:{..._}}).component(),this._disposables.push(this._azureLocationDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this._locations.find((t=>t.displayName===e));this._serviceContext.location=t?l.deepClone(t):void 0}else this._serviceContext.location=void 0;await l.clearDropDown(this._azureResourceGroupDropdown),await this._populateResourceGroupDropdown()})));const i=this._view.modelBuilder.text().withProps({value:s.RESOURCE_GROUP,description:s.DMS_RESOURCE_GROUP_INFO,requiredIndicator:!0,CSSStyles:{...h}}).component();return this._azureResourceGroupDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.RESOURCE_GROUP,width:u,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_RESOURCE_GROUP,CSSStyles:{..._}}).component(),this._disposables.push(this._azureResourceGroupDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this._resourceGroups.find((t=>t.name===e));this._serviceContext.resourceGroup=t?l.deepClone(t):void 0}else this._serviceContext.resourceGroup=void 0;await l.clearDropDown(this._azureServiceDropdown),this._populateMigrationServiceDropdown()}))),this._azureServiceDropdownLabel=this._view.modelBuilder.text().withProps({value:s.MIGRATION_SERVICE_SELECT_SERVICE_LABEL,description:s.TARGET_RESOURCE_INFO,requiredIndicator:!0,CSSStyles:{...h}}).component(),this._azureServiceDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.MIGRATION_SERVICE_SELECT_SERVICE_LABEL,width:u,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_SERVICE,CSSStyles:{..._}}).component(),this._disposables.push(this._azureServiceDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this._sqlMigrationServices.find((t=>t.name===e));this._serviceContext.migrationService=t?l.deepClone(t):void 0}else this._serviceContext.migrationService=void 0;await this._updateButtonState()}))),this._disposables.push(this._dialog.okButton.onClick((async e=>await o.MigrationLocalStorage.saveMigrationServiceContext(this._serviceContext,this.onServiceContextChanged)))),this._view.modelBuilder.flexContainer().withItems([e,this._azureSubscriptionDropdown,t,this._azureLocationDropdown,i,this._azureResourceGroupDropdown,this._azureServiceDropdownLabel,this._azureServiceDropdown]).withLayout({flexFlow:"column"}).component()}async _updateButtonState(){this._dialog.okButton.enabled=void 0!==this._serviceContext.migrationService}async _populateAzureAccountsDropdown(){try{this._azureAccountsDropdown.loading=!0,await l.clearDropDown(this._azureAccountsDropdown),this._azureAccounts=await l.getAzureAccounts(),this._azureAccountsDropdown.values=await l.getAzureAccountsDropdownValues(this._azureAccounts),l.selectDefaultDropdownValue(this._azureAccountsDropdown,this._serviceContext.azureAccount?.displayInfo?.userId,!1)}catch(e){(0,c.logError)(c.TelemetryViews.SelectMigrationServiceDialog,"_populateAzureAccountsDropdown",e),r.window.showErrorMessage(s.SELECT_ACCOUNT_ERROR,e.message)}finally{this._azureAccountsDropdown.loading=!1}}async _populateTentantsDropdown(){try{this._accountTenantDropdown.loading=!0,this._accountTenants=l.getAzureTenants(this._serviceContext.azureAccount),this._accountTenantDropdown.values=l.getAzureTenantsDropdownValues(this._accountTenants),await this._accountTenantFlexContainer.updateCssStyles(this._accountTenants.length>1?p:d),l.selectDefaultDropdownValue(this._accountTenantDropdown,this._serviceContext.tenant?.id,!1)}catch(e){(0,c.logError)(c.TelemetryViews.SelectMigrationServiceDialog,"_populateTentantsDropdown",e),r.window.showErrorMessage(s.SELECT_TENANT_ERROR,e.message)}finally{this._accountTenantDropdown.loading=!1}}async _populateSubscriptionDropdown(){try{this._azureSubscriptionDropdown.loading=!0,this._subscriptions=await l.getAzureSubscriptions(this._serviceContext.azureAccount,this._serviceContext.tenant?.id),this._azureSubscriptionDropdown.values=await l.getAzureSubscriptionsDropdownValues(this._subscriptions),l.selectDefaultDropdownValue(this._azureSubscriptionDropdown,this._serviceContext.subscription?.id,!1)}catch(e){(0,c.logError)(c.TelemetryViews.SelectMigrationServiceDialog,"_populateSubscriptionDropdown",e),r.window.showErrorMessage(s.SELECT_SUBSCRIPTION_ERROR,e.message)}finally{this._azureSubscriptionDropdown.loading=!1}}async _populateLocationDropdown(){try{this._azureLocationDropdown.loading=!0,this._sqlMigrationServices=await l.getAzureSqlMigrationServices(this._serviceContext.azureAccount,this._serviceContext.subscription),this._locations=await l.getResourceLocations(this._serviceContext.azureAccount,this._serviceContext.subscription,this._sqlMigrationServices),this._azureLocationDropdown.values=l.getAzureLocationsDropdownValues(this._locations),l.selectDefaultDropdownValue(this._azureLocationDropdown,this._serviceContext.location?.displayName,!0)}catch(e){(0,c.logError)(c.TelemetryViews.SelectMigrationServiceDialog,"_populateLocationDropdown",e),r.window.showErrorMessage(s.SELECT_LOCATION_ERROR,e.message)}finally{this._azureLocationDropdown.loading=!1}}async _populateResourceGroupDropdown(){try{this._azureResourceGroupDropdown.loading=!0,this._resourceGroups=l.getServiceResourceGroupsByLocation(this._sqlMigrationServices,this._serviceContext.location),this._azureResourceGroupDropdown.values=l.getResourceDropdownValues(this._resourceGroups,s.RESOURCE_GROUP_NOT_FOUND),l.selectDefaultDropdownValue(this._azureResourceGroupDropdown,this._serviceContext.resourceGroup?.id,!1)}catch(e){(0,c.logError)(c.TelemetryViews.SelectMigrationServiceDialog,"_populateResourceGroupDropdown",e),r.window.showErrorMessage(s.SELECT_RESOURCE_GROUP_ERROR,e.message)}finally{this._azureResourceGroupDropdown.loading=!1}}_populateMigrationServiceDropdown(){try{this._azureServiceDropdown.loading=!0,this._azureServiceDropdown.values=l.getAzureResourceDropdownValues(this._sqlMigrationServices,this._serviceContext.location,this._serviceContext.resourceGroup?.name,s.SQL_MIGRATION_SERVICE_NOT_FOUND_ERROR),l.selectDefaultDropdownValue(this._azureServiceDropdown,this._serviceContext?.migrationService?.id,!1)}catch(e){(0,c.logError)(c.TelemetryViews.SelectMigrationServiceDialog,"_populateMigrationServiceDropdown",e),r.window.showErrorMessage(s.SELECT_SERVICE_ERROR,e.message)}finally{this._azureServiceDropdown.loading=!1}}}},4757:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportPerformanceDataDialog=void 0;const n=i(9072),r=i(9563),o=i(3186),a=i(2074),s=i(1386),l=i(1285),c=i(3963),u=i(2037),d=i(2781);t.ImportPerformanceDataDialog=class{constructor(e,t,i){this.skuRecommendationPage=e,this.wizard=t,this.migrationStateModel=i,this._disposables=[],this._creationEvent=new d.EventEmitter,this._isOpen=!1,this._performanceDataSource=l.PerformanceDataSourceOptions.OpenExisting}async initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async e=>{try{const i=this.createContainer(e);this._disposables.push(e.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),await e.initializeModel(i),this._creationEvent.once("done",(async()=>{n.window.closeDialog(this.dialog),t()}))}catch(e){i(e)}}))}))}createContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{margin:"0px","flex-direction":"column"}}).component(),i=e.modelBuilder.text().withProps({value:a.IMPORT_PERFORMANCE_DATA,CSSStyles:{...r.PAGE_TITLE_CSS,"margin-top":"5px"}}).component(),n=e.modelBuilder.text().withProps({value:a.IMPORT_PERFORMANCE_DATA_DIALOG_DESCRIPTION,CSSStyles:{...r.TOOLBAR_CSS}}).component();this._openExistingContainer=this.createOpenExistingFolderContainer(e),this._importButton=e.modelBuilder.button().withProps({label:a.IMPORT,width:"80px",enabled:!1,CSSStyles:{...r.PERFORMANCE_DATA_DIALOG_CSS,padding:"3px 20px 3px 20px",gap:"10px"}}).component(),this._disposables.push(this._importButton.onDidClick((async()=>{await this.skuRecommendationPage.startCardLoading(),this.execute(),this._creationEvent.emit("done")})));const o=e.modelBuilder.button().withProps({label:a.CANCEL,secondary:!0,width:"80px",CSSStyles:{...r.PERFORMANCE_DATA_DIALOG_CSS,padding:"3px 20px 3px 20px",gap:"10px"}}).component();this._disposables.push(o.onDidClick((e=>{this._creationEvent.emit("done")})));const s=e.modelBuilder.flexContainer().withProps({CSSStyles:{height:"48px","margin-top":"20px","margin-left":"70px"}}).component();return s.addItem(this._importButton,{flex:"0"}),s.addItem(o,{flex:"0",CSSStyles:{"margin-left":"2px",width:"80px"}}),t.addItems([i,n,this._openExistingContainer,s]),t}async openDialog(e){if(!this._isOpen){this._isOpen=!0,this.dialog=n.window.createModelViewDialog("","ImportPerformanceDataDialog",350,"callout","below",!1,!1,{height:51,width:0,xPos:0,yPos:0});const e=this.initializeDialog(this.dialog);n.window.openDialog(this.dialog),await e}}createOpenExistingFolderContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column","margin-top":"10px"}}).component(),i=e.modelBuilder.text().withProps({value:a.IMPORT_PERFORMANCE_DATA_DIALOG_HELPER_MESSAGE,CSSStyles:{"font-size":"13px","line-height":"18px","font-weight":"600"}}).component(),n=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"row","align-items":"center","marign-right":"30px"}}).component();this._openExistingFolderInput=e.modelBuilder.inputBox().withProps({placeHolder:a.IMPORT_PERFORMANCE_DATA_DIALOG_OPEN_FOLDER,readOnly:!0,height:24,width:222,CSSStyles:{"font-size":"13px","line-height":"18px","font-weight":"400",margin:"0px"}}).component(),this._disposables.push(this._openExistingFolderInput.onTextChanged((async e=>{e&&(this.migrationStateModel._skuRecommendationPerformanceLocation=e.trim(),this.dialog.okButton.enabled=!0,this._importButton.enabled=!0)})));const r=e.modelBuilder.button().withProps({iconHeight:24,iconWidth:24,iconPath:s.IconPathHelper.openFolder,CSSStyles:{margin:"0",padding:"0"}}).component();return this._disposables.push(r.onDidClick((async e=>this._openExistingFolderInput.value=await o.promptUserForFolder()))),n.addItems([this._openExistingFolderInput,r]),t.addItems([i,n]),t}async execute(){this._isOpen=!1,this.migrationStateModel._skuRecommendationPerformanceDataSource=this._performanceDataSource;const e=(await(0,c.getSourceConnectionProfile)()).serverName,t=[];try{await this.migrationStateModel.getSkuRecommendations();const e=this.migrationStateModel._skuRecommendationResults?.recommendationError;e&&t.push(a.SKU_RECOMMENDATION_ERROR_MESSAGE(e))}catch(i){console.log(i),t.push(a.SKU_RECOMMENDATION_ASSESSMENT_UNEXPECTED_ERROR(e,i))}finally{t.length>0&&(this.wizard.message={text:a.SKU_RECOMMENDATION_ERROR(e),description:t.join(u.EOL),level:n.window.MessageLevel.Error})}await this.skuRecommendationPage.refreshSkuRecommendationComponents()}}},4267:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkuEditParametersDialog=t.TARGET_PERCENTILE_VALUES=void 0;const n=i(9072),r=i(2074),o=i(9563),a=i(3186);t.TARGET_PERCENTILE_VALUES=[99,97,95,90,75,50];class s{constructor(e,t){this.skuRecommendationPage=e,this.migrationStateModel=t,this._isOpen=!1,this._disposables=[]}async initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async e=>{try{const i=this.createContainer(e);this._disposables.push(e.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),await e.initializeModel(i),t()}catch(e){i(e)}}))}))}createContainer(e){const i=e.modelBuilder.flexContainer().withProps({CSSStyles:{margin:"8px 16px","flex-direction":"column"}}).component(),n=e.modelBuilder.text().withProps({value:r.EDIT_PARAMETERS_TEXT,CSSStyles:{...o.BODY_CSS}}).component(),a="300px",s=e.modelBuilder.text().withProps({value:r.SCALE_FACTOR,description:r.SCALE_FACTOR_TOOLTIP,width:a,requiredIndicator:!0,CSSStyles:{...o.LABEL_CSS}}).component();this._scaleFactorInput=e.modelBuilder.inputBox().withProps({required:!0,validationErrorMessage:r.INVALID_SCALE_FACTOR,width:a,CSSStyles:{"margin-top":"-1em","margin-bottom":"8px"}}).withValidation((e=>!!(Number(e.value)&&Number(e.value)>0))).component();const l=e.modelBuilder.text().withProps({value:r.PERCENTAGE_UTILIZATION,description:r.PERCENTAGE_UTILIZATION_TOOLTIP,width:a,requiredIndicator:!0,CSSStyles:{...o.LABEL_CSS}}).component();this._targetPercentileDropdown=e.modelBuilder.dropDown().withProps({values:(()=>{const e=[];return t.TARGET_PERCENTILE_VALUES.forEach((t=>{const i=t.toString();e.push({displayName:r.PERCENTILE(i),name:i})})),e})(),ariaLabel:r.PERCENTAGE_UTILIZATION,width:a,editable:!1,required:!0,fireOnTextChange:!0,CSSStyles:{"margin-top":"-1em","margin-bottom":"8px"}}).component();const c=e.modelBuilder.text().withProps({value:r.ENABLE_PREVIEW_SKU,width:a,requiredIndicator:!0,CSSStyles:{...o.LABEL_CSS}}).component(),u="enablePreviewSKUs",d=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"row",width:"fit-content","margin-top":"-1em","margin-bottom":"8px"}}).component(),p=e.modelBuilder.radioButton().withProps({name:u,label:r.YES,checked:this._enablePreviewValue,CSSStyles:{...o.BODY_CSS,width:"fit-content",margin:"0"}}).component();this._disposables.push(p.onDidChangeCheckedState((async e=>{e&&(this._enablePreviewValue=!0)})));const h=e.modelBuilder.radioButton().withProps({name:u,label:r.NO,checked:!this._enablePreviewValue,CSSStyles:{...o.BODY_CSS,width:"fit-content",margin:"0 12px"}}).component();this._disposables.push(h.onDidChangeCheckedState((e=>{e&&(this._enablePreviewValue=!1)}))),d.addItems([p,h]);const _=e.modelBuilder.infoBox().withProps({text:r.ENABLE_PREVIEW_SKU_INFO,style:"information",CSSStyles:{...o.BODY_CSS}}).component(),g=e.modelBuilder.text().withProps({value:r.ELASTIC_RECOMMENDATION_LABEL,width:a,requiredIndicator:!0,CSSStyles:{...o.LABEL_CSS}}).component(),m="enableElasticRecommendations",S=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"row",width:"fit-content","margin-top":"-1em","margin-bottom":"8px"}}).component(),f=e.modelBuilder.radioButton().withProps({name:m,label:r.YES,checked:this._enableElasticRecommendation,CSSStyles:{...o.BODY_CSS,width:"fit-content",margin:"0"}}).component();this._disposables.push(f.onDidChangeCheckedState((async e=>{e&&(this._enableElasticRecommendation=!0)})));const E=e.modelBuilder.radioButton().withProps({name:m,label:r.NO,checked:!this._enableElasticRecommendation,CSSStyles:{...o.BODY_CSS,width:"fit-content",margin:"0 12px"}}).component();this._disposables.push(E.onDidChangeCheckedState((async e=>{e&&(this._enableElasticRecommendation=!1)}))),S.addItems([f,E]);const T=e.modelBuilder.infoBox().withProps({text:r.ELASTIC_RECOMMENDATION_INFO,style:"information",CSSStyles:{...o.BODY_CSS}}).component();return i.addItems([n,s,this._scaleFactorInput,l,this._targetPercentileDropdown,c,d,_,g,S,T]),i}async openDialog(e){if(!this._isOpen){this._isOpen=!0,this.dialog=n.window.createModelViewDialog(r.EDIT_RECOMMENDATION_PARAMETERS,"SkuEditParametersDialog","narrow"),this.dialog.okButton.label=s.UpdateButtonText,this.dialog.okButton.position="left",this.dialog.cancelButton.position="left",this._disposables.push(this.dialog.okButton.onClick((async()=>await this.execute()))),this._disposables.push(this.dialog.cancelButton.onClick((()=>this._isOpen=!1)));const e=[];e.push(this.initializeDialog(this.dialog)),n.window.openDialog(this.dialog),await Promise.all(e),this._scaleFactorInput.value=this.migrationStateModel._skuScalingFactor.toString(),this._enablePreviewValue=this.migrationStateModel._skuEnablePreview,this._enableElasticRecommendation=this.migrationStateModel._skuEnableElastic,this._targetPercentileDropdown.values?.forEach(((e,t)=>{e.name.toLowerCase()===this.migrationStateModel._skuTargetPercentile.toString()&&(0,a.selectDropDownIndex)(this._targetPercentileDropdown,t)}))}}async execute(){this._isOpen=!1,this.migrationStateModel._skuScalingFactor=Number(this._scaleFactorInput.value),this.migrationStateModel._skuTargetPercentile=Number(this._targetPercentileDropdown.value.name),this.migrationStateModel._skuEnablePreview=this._enablePreviewValue,this.migrationStateModel._skuEnableElastic=this._enableElasticRecommendation,(0,a.hasRecommendations)(this.migrationStateModel)&&await this.skuRecommendationPage.refreshAzureRecommendation()}get isOpen(){return this._isOpen}}t.SkuEditParametersDialog=s,s.UpdateButtonText=r.UPDATE},732:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkuRecommendationResultsDialog=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(9563),s=i(3186),l=i(3186),c=i(7147),u=i(1017);class d{constructor(e,t){switch(this.model=e,this._targetType=t,this._isOpen=!1,this._disposables=[],this._targetType){case l.MigrationTargetType.SQLMI:this.targetName=o.SKU_RECOMMENDATION_MI_TARGET_TEXT;break;case l.MigrationTargetType.SQLVM:this.targetName=o.SKU_RECOMMENDATION_VM_TARGET_TEXT;break;case l.MigrationTargetType.SQLDB:this.targetName=o.SKU_RECOMMENDATION_SQLDB_TARGET_TEXT}this.title=o.RECOMMENDATIONS_TITLE(this.targetName),this.migrationStateModel=e}async initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async e=>{try{const i=this.createContainer(e);this._disposables.push(e.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await e.initializeModel(i),t()}catch(e){i(e)}}))}))}createContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{margin:"8px 16px","flex-direction":"column"}}).component();return this.targetRecommendations?.forEach(((i,n)=>{if(n>0){const i=e.modelBuilder.separator().withProps({width:750}).component();t.addItem(i)}t.addItem(this.createRecommendation(e,i))})),t}createRecommendation(e,t){let i,n=o.NA,r=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();switch(this._targetType){case l.MigrationTargetType.SQLVM:i=t,i.targetSku&&(n=o.VM_CONFIGURATION(i.targetSku.virtualMachineSize.azureSkuName,i.targetSku.virtualMachineSize.vCPUsAvailable),r=this.createSqlVmTargetStorageSection(e,i));break;case l.MigrationTargetType.SQLMI:case l.MigrationTargetType.SQLDB:if(i=t,i.targetSku){const t=0===i.targetSku.category?.sqlServiceTier?o.GENERAL_PURPOSE:2===i.targetSku.category?.sqlServiceTier?o.HYPERSCALE:o.BUSINESS_CRITICAL,s=0===i.targetSku.category?.hardwareType?o.GEN5:1===i.targetSku.category?.hardwareType?o.PREMIUM_SERIES:o.PREMIUM_SERIES_MEMORY_OPTIMIZED;n=this._targetType===l.MigrationTargetType.SQLDB?o.SQLDB_CONFIGURATION(t,i.targetSku.computeSize):o.MI_CONFIGURATION(s,t,i.targetSku.computeSize);const c=e.modelBuilder.text().withProps({value:o.STORAGE_HEADER,CSSStyles:{...a.LABEL_CSS,margin:"12px 0 0"}}).component(),u=e.modelBuilder.text().withProps({value:o.STORAGE_GB(i.targetSku.storageMaxSizeInMb/1024),CSSStyles:{...a.BODY_CSS}}).component();r.addItems([c,u])}}const s=e.modelBuilder.flexContainer().withProps({CSSStyles:{"margin-bottom":"20px","flex-direction":"column"}}).component();if(this._targetType===l.MigrationTargetType.SQLDB){const t=e.modelBuilder.text().withProps({value:o.SOURCE_DATABASE,CSSStyles:{...a.LABEL_CSS,margin:"0"}}).component(),n=e.modelBuilder.text().withProps({value:i.databaseName,CSSStyles:{...a.BODY_CSS,margin:"0"}}).component();s.addItem(t),s.addItem(n)}const c=e.modelBuilder.text().withProps({value:o.TARGET_DEPLOYMENT_TYPE,CSSStyles:{...a.LABEL_CSS,margin:"12px 0 0"}}).component(),u=e.modelBuilder.text().withProps({value:this.targetName,CSSStyles:{...a.BODY_CSS,margin:"0"}}).component(),d=e.modelBuilder.text().withProps({value:o.AZURE_CONFIGURATION,CSSStyles:{...a.LABEL_CSS,margin:"12px 0 0"}}).component(),p=e.modelBuilder.text().withProps({value:n,CSSStyles:{...a.BODY_CSS,margin:"0"}}).component();s.addItems([c,u,c,u,d,p,r]);const h=e.modelBuilder.text().withProps({value:o.RECOMMENDATION_REASON,CSSStyles:{...a.SECTION_HEADER_CSS,margin:"12px 0 0"}}).component(),_=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component(),g=i?.positiveJustifications?.concat(i?.negativeJustifications)||[o.SKU_RECOMMENDATION_NO_RECOMMENDATION_REASON];g?.forEach((t=>{_.addItem(e.modelBuilder.text().withProps({value:t,CSSStyles:{...a.BODY_CSS}}).component())}));const m=this.createStoragePropertiesTable(e,i?.databaseName);return s.addItems([h,_,m]),s}createSqlVmTargetStorageSection(e,t){const i=e.modelBuilder.text().withProps({value:o.RECOMMENDED_TARGET_STORAGE_CONFIGURATION,CSSStyles:{...a.SECTION_HEADER_CSS,"margin-top":"12px"}}).component(),r=e.modelBuilder.text().withProps({value:o.RECOMMENDED_TARGET_STORAGE_CONFIGURATION_INFO,CSSStyles:{...a.BODY_CSS}}).component(),s={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"1px solid"},l={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"};let c=[{valueType:n.DeclarativeDataType.string,displayName:o.STORAGE_HEADER,isReadOnly:!0,width:150,rowCssStyles:l,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.RECOMMENDED_STORAGE_CONFIGURATION,isReadOnly:!0,width:150,rowCssStyles:l,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.CACHING,isReadOnly:!0,width:150,rowCssStyles:l,headerCssStyles:s}],u=[[{value:o.SQL_TEMPDB},{value:t.targetSku.tempDbDiskSizes?.length>0?this.getStorageConfigurationText(t.targetSku.logDiskSizes):o.EPHEMERAL_TEMPDB},{value:t.targetSku.tempDbDiskSizes?.length>0?this.getCachingText(t.targetSku.logDiskSizes[0].caching):o.CACHING_NA}],[{value:o.SQL_DATA_FILES},{value:this.getStorageConfigurationText(t.targetSku.dataDiskSizes)},{value:this.getCachingText(t.targetSku.dataDiskSizes[0].caching)}],[{value:o.SQL_LOG_FILES},{value:this.getStorageConfigurationText(t.targetSku.logDiskSizes)},{value:this.getCachingText(t.targetSku.logDiskSizes[0].caching)}]];const d=e.modelBuilder.declarativeTable().withProps({ariaLabel:o.RECOMMENDED_TARGET_STORAGE_CONFIGURATION,columns:c,dataValues:u,width:700}).component();return e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([i,r,d]).component()}getCachingText(e){switch(e){case 0:return o.CACHING_NA;case 1:return o.CACHING_NONE;case 2:return o.CACHING_READ_ONLY;case 3:return o.CACHING_READ_WRITE}}getStorageConfigurationText(e){const t={};e?.length>0&&e.forEach((e=>{const i=this.GetDiskConfigurationText(e);i in t?t[i]++:t[i]=1}));let i="";for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];i=i.concat(o.STORAGE_CONFIGURATION(n,e))}return i}GetDiskConfigurationText(e){return 16===e?.type?o.DISK_CONFIGURATION(this.getDiskTypeText(e.type),e.maxSizeInGib,e.maxIOPS,e.maxThroughputInMbps):e.size}getDiskTypeText(e){const t=o.DiskTypeLookup[e];return void 0!==t?t:o.UNKNOWN_DISK_TYPE}createStoragePropertiesTable(e,t){let i;switch(this._targetType){case l.MigrationTargetType.SQLVM:case l.MigrationTargetType.SQLMI:i=this.instanceRequirements;break;case l.MigrationTargetType.SQLDB:i=this.instanceRequirements?.databaseLevelRequirements.filter((e=>t===e.databaseName))[0]}const r=e.modelBuilder.text().withProps({value:o.SOURCE_PROPERTIES,CSSStyles:{...a.SECTION_HEADER_CSS,"margin-top":"12px"}}).component(),s={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"1px solid"},c={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},u=[{valueType:n.DeclarativeDataType.string,displayName:o.DIMENSION,isReadOnly:!0,width:80,rowCssStyles:c,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.VALUE,isReadOnly:!0,width:80,rowCssStyles:c,headerCssStyles:s}],d=(e,t)=>[{value:e},{value:t}],p=[d(o.CPU_REQUIREMENT,o.CPU_CORES(i?.cpuRequirementInCores)),d(o.MEMORY_REQUIREMENT,o.GB(i?.memoryRequirementInMB/1024)),d(o.DATA_STORAGE_REQUIREMENT,o.GB(i?.dataStorageRequirementInMB/1024)),d(o.LOG_STORAGE_REQUIREMENT,o.GB(i?.logStorageRequirementInMB/1024)),d(o.DATA_IOPS_REQUIREMENT,o.IOPS(i?.dataIOPSRequirement)),d(o.LOGS_IOPS_REQUIREMENT,o.IOPS(i?.logIOPSRequirement)),d(o.IO_LATENCY_REQUIREMENT,i?.ioThroughputRequirementInMBps<5?o.NA:o.MS(i?.ioLatencyRequirementInMs))],h=e.modelBuilder.declarativeTable().withProps({ariaLabel:o.RECOMMENDED_TARGET_STORAGE_CONFIGURATION,columns:u,dataValues:p,width:300}).component();return e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([r,h]).component()}async openDialog(e,t){if(!this._isOpen){switch(this._isOpen=!0,this.instanceRequirements=t?.instanceRequirements,this._targetType){case l.MigrationTargetType.SQLMI:this.migrationStateModel._skuEnableElastic?this.targetRecommendations=t?.elasticSqlMiRecommendationResults:this.targetRecommendations=t?.sqlMiRecommendationResults;break;case l.MigrationTargetType.SQLVM:this.targetRecommendations=t?.sqlVmRecommendationResults;break;case l.MigrationTargetType.SQLDB:this.migrationStateModel._skuEnableElastic?this.targetRecommendations=t?.elasticSqlDbRecommendationResults:this.targetRecommendations=t?.sqlDbRecommendationResults}this.dialog=n.window.createModelViewDialog(this.title,"SkuRecommendationResultsDialog","medium"),this.dialog.okButton.label=d.OpenButtonText,this.dialog.okButton.position="left",this._disposables.push(this.dialog.okButton.onClick((async()=>await this.execute()))),this.dialog.cancelButton.hidden=!0,this._saveButton=n.window.createButton(o.SAVE_RECOMMENDATION_REPORT,"right"),this._disposables.push(this._saveButton.onClick((async()=>{const e=await s.promptUserForFolder();if(e)if(this.model._skuRecommendationReportFilePaths){let t,i;switch(this._targetType){case l.MigrationTargetType.SQLMI:t=this.model._skuRecommendationReportFilePaths.find((e=>e.includes("SkuRecommendationReport-AzureSqlManagedInstance"))),i=u.join(e,"SkuRecommendationReport-AzureSqlManagedInstance.html");break;case l.MigrationTargetType.SQLVM:t=this.model._skuRecommendationReportFilePaths.find((e=>e.includes("SkuRecommendationReport-AzureSqlVirtualMachine"))),i=u.join(e,"SkuRecommendationReport-AzureSqlVirtualMachine.html");break;case l.MigrationTargetType.SQLDB:t=this.model._skuRecommendationReportFilePaths.find((e=>e.includes("SkuRecommendationReport-AzureSqlDatabase"))),i=u.join(e,"SkuRecommendationReport-AzureSqlDatabase.html")}c.copyFile(t,i,(e=>{e?console.log(e):r.window.showInformationMessage(o.SAVE_RECOMMENDATION_REPORT_SUCCESS(i))}))}else console.log("recommendation report not found")}))),this.dialog.customButtons=[this._saveButton];const e=this.initializeDialog(this.dialog);n.window.openDialog(this.dialog),await e}}async execute(){this._isOpen=!1}get isOpen(){return this._isOpen}}t.SkuRecommendationResultsDialog=d,d.OpenButtonText="Close"},2107:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlMigrationServiceDetailsDialog=void 0;const n=i(9072),r=i(4294),o=i(1386),a=i(2074),s=i(9563),l=i(3186),c="10px",u="0 10px 0 10px",d="0 10px 10px 10px",p="28px";t.SqlMigrationServiceDetailsDialog=class{constructor(e,t){this._serviceContext=e,this._migration=t,this._disposables=[],this._dialog=n.window.createModelViewDialog("","SqlMigrationServiceDetailsDialog",750,"flyout")}async initialize(){this._dialog.registerContent((async e=>{this._disposables.push(e.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await this.createServiceContent(e,this._serviceContext,this._migration)})),this._dialog.okButton.label=a.SQL_MIGRATION_SERVICE_DETAILS_BUTTON_LABEL,this._dialog.okButton.focused=!0,this._dialog.okButton.position="left",this._dialog.cancelButton.hidden=!0,n.window.openDialog(this._dialog)}async createServiceContent(e,t,i){const n=(0,l.createRegistrationInstructions)(e,!1);await n.updateCssStyles({...s.BODY_CSS,margin:u}),this._migrationServiceAuthKeyTable=(0,l.createAuthenticationKeyTable)(e,"50px","100%");const o=await(0,r.getSqlMigrationServiceMonitoringData)(t.azureAccount,t.subscription,t.migrationService?.properties.resourceGroup,t.migrationService?.location,t.migrationService?.name),p=o.nodes?.map((e=>e.nodeName)).join(", ")||a.SQL_MIGRATION_SERVICE_DETAILS_STATUS_UNAVAILABLE,h=e.modelBuilder.flexContainer().withItems([this._createHeading(e,this._migration),e.modelBuilder.separator().withProps({width:"100%"}).component(),this._createTextItem(e,a.SUBSCRIPTION,u),this._createTextItem(e,t.subscription?.name,d),this._createTextItem(e,a.LOCATION,u),this._createTextItem(e,t.migrationService?.location?.toUpperCase(),d),this._createTextItem(e,a.RESOURCE_GROUP,u),this._createTextItem(e,t.migrationService?.properties.resourceGroup,d),this._createTextItem(e,a.SQL_MIGRATION_SERVICE_DETAILS_IR_LABEL,u),this._createTextItem(e,p,d),n,this._migrationServiceAuthKeyTable]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{padding:c}}).component();await e.initializeModel(h),await(0,l.refreshAuthenticationKeyTable)(e,this._migrationServiceAuthKeyTable,t.azureAccount,t.subscription,t.migrationService?.properties.resourceGroup,t.migrationService?.location.toUpperCase(),t.migrationService)}_createHeading(e,t){return e.modelBuilder.flexContainer().withItems([e.modelBuilder.image().withProps({iconPath:o.IconPathHelper.migrationService,iconHeight:p,iconWidth:p,height:p,width:p}).withProps({CSSStyles:{"margin-right":c}}).component(),e.modelBuilder.flexContainer().withItems([e.modelBuilder.text().withProps({value:this._serviceContext.migrationService?.name,CSSStyles:{...s.SECTION_HEADER_CSS}}).component(),e.modelBuilder.text().withProps({value:a.SQL_MIGRATION_SERVICE_DETAILS_SUB_TITLE,CSSStyles:{...s.SMALL_NOTE_CSS}}).component()]).withLayout({flexFlow:"column",textAlign:"left"}).component()]).withLayout({flexFlow:"row"}).withProps({display:"inline-flex",CSSStyles:{margin:u}}).component()}_createTextItem(e,t,i,n){return e.modelBuilder.text().withProps({value:t,description:n,title:t,CSSStyles:{...s.BODY_CSS,margin:i}}).component()}}},9208:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaMigrationAssessmentDialog=void 0;const n=i(9072),r=i(2074),o=i(9563),a=i(1386),s=i(3186),l={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"1px solid"};t.SchemaMigrationAssessmentDialog=class{constructor(e,t,i){this._disposables=[],this._isOpen=!1,this._model=e,this._sourceDatabaseName=t,this._onSaveCallback=i}async _initializeDialog(e){e.registerContent((async t=>{e.message={level:n.window.MessageLevel.Warning,text:r.SCHEMA_MIGRATION_ASSESSMENT_WARNING_MESSAGE},e.okButton.hidden=!0,e.cancelButton.label=r.CLOSE,e.cancelButton.position="left",this._disposables.push(e.cancelButton.onClick((async()=>{await this._onSaveCallback(),this._isOpen=!1})));const i=t.modelBuilder.flexContainer().withLayout({flexFlow:"row",height:"100%",width:"100%"}).component();i.addItem(await this._createRootContainer(t),{flex:"1 1 auto"}),this._disposables.push(t.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await t.initializeModel(i),await this._loadData()}))}async openDialog(e){if(!this._isOpen){this._isOpen=!0,this._dialog=n.window.createModelViewDialog(e,"SchemaMigrationAssessment","830px",void 0,void 0,!1);const t=this._initializeDialog(this._dialog);n.window.openDialog(this._dialog),await t}}async _loadData(){this._activeIssues=this._model._assessmentResults?.databaseAssessments.find((e=>e.name===this._sourceDatabaseName))?.issues.filter((e=>e.appliesToMigrationTargetPlatform===s.MigrationTargetType.SQLDB&&void 0!==r.SchemaMigrationFailedRulesLookup[e.ruleId])).sort(((e,t)=>this.stringCompare(e.ruleId,t.ruleId,-1)))??[],this._dbName.value=this._sourceDatabaseName,this._recommendationTitle.value=r.ISSUES_COUNT(this._activeIssues?.length),this._recommendation.value=r.ISSUES_DETAILS,await this._resultComponent.updateCssStyles({display:"block"}),await this.refreshResults()}async _createRootContainer(e){return this._view=e,this._resultComponent=await this.createComponentResult(e),this._rootContainer=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",height:"100%",width:"100%"}).component(),this._rootContainer.addItem(this._resultComponent,{flex:"0 0 auto"}),this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),this._rootContainer}async refreshResults(){0===this._activeIssues?.length?(await this._assessmentsTable.updateCssStyles({display:"none","border-right":"none"}),await this._assessmentContainer.updateCssStyles({display:"none"})):(await this._assessmentContainer.updateCssStyles({display:"flex"}),await this._assessmentsTable.updateCssStyles({display:"flex","border-right":"solid 1px"}));let e=this._activeIssues.map(((e,t)=>({id:t.toString(),label:r.SchemaMigrationFailedRulesLookup[e.ruleId]??"",icon:e.databaseRestoreFails?a.IconPathHelper.error:void 0,ariaLabel:e.databaseRestoreFails?r.BLOCKING_ISSUE_ARIA_LABEL(e.checkId):e.checkId})));this._assessmentResultsList.options=e,this._assessmentResultsList.options.length&&(this._assessmentResultsList.selectedOptionId="0")}async createComponentResult(e){this._view=e;const t=this.createTopContainer(),i=this.createBottomContainer(),n=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"100%"}).withProps({CSSStyles:{margin:"32px 0px 0px 18px","overflow-y":"hidden",display:"none"}}).component();return n.addItem(t,{flex:"0 0 auto"}),n.addItem(i,{flex:"1 1 auto",CSSStyles:{"overflow-y":"hidden"}}),n}createTopContainer(){const e=this.createTitleComponent(),t=this.createPlatformComponent(),i=this.createRecommendationComponent(),n=this.createAssessmentResultsTitle(),r=this.createAssessmentDetailsTitle(),o=this._view.modelBuilder.flexContainer().withItems([]).withProps({CSSStyles:{"border-bottom":"solid 1px",width:"800px"}}).component();return o.addItem(n,{flex:"0 0 auto"}),o.addItem(r,{flex:"0 0 auto"}),this._view.modelBuilder.flexContainer().withItems([e,t,i,o]).withLayout({flexFlow:"column"}).component()}createBottomContainer(){this._assessmentsTable=this.createImpactedObjectsTable(),this._assessmentContainer=this.createAssessmentContainer();const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"row",height:"100%"}).withProps({CSSStyles:{height:"100%"}}).component();return e.addItem(this._assessmentsTable,{flex:"1 1 auto",CSSStyles:{"overflow-y":"auto"}}),e.addItem(this._assessmentContainer,{flex:"1 1 auto",CSSStyles:{"overflow-y":"auto"}}),e}createAssessmentContainer(){const e=this.createAssessmentTitle(),t=this.createDescriptionContainer();return this._view.modelBuilder.flexContainer().withItems([e,t]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{"margin-left":"24px"}}).component()}createAssessmentTitle(){return this._assessmentTitle=this._view.modelBuilder.text().withProps({value:"",CSSStyles:{...o.LABEL_CSS,"margin-top":"12px",height:"48px",width:"540px","border-bottom":"solid 1px"}}).component(),this._assessmentTitle}createDescriptionContainer(){const e=this.createDescription(),t=this.createImpactedObjectsDescription(),i=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"row"}).withProps({CSSStyles:{height:"100%"}}).component();return i.addItem(e,{flex:"0 0 auto",CSSStyles:{width:"200px","margin-right":"35px"}}),i.addItem(t,{flex:"0 0 auto",CSSStyles:{width:"280px"}}),i}createImpactedObjectsDescription(){const e=this._view.modelBuilder.text().withProps({value:r.IMPACTED_OBJECTS,CSSStyles:{...o.LIGHT_LABEL_CSS,width:"280px",margin:"10px 0px 0px 0px"}}).component(),t={border:"none","text-align":"left","border-bottom":"1px solid"};this._impactedObjectsTable=this._view.modelBuilder.declarativeTable().withProps({ariaLabel:r.IMPACTED_OBJECTS,enableRowSelection:!0,width:"100%",columns:[{displayName:r.TYPE,valueType:n.DeclarativeDataType.string,width:"120px",isReadOnly:!0,headerCssStyles:l,rowCssStyles:t},{displayName:r.NAME,valueType:n.DeclarativeDataType.string,width:"130px",isReadOnly:!0,headerCssStyles:l,rowCssStyles:t}],dataValues:[[{value:""},{value:""}]],CSSStyles:{"margin-top":"12px"}}).component(),this._disposables.push(this._impactedObjectsTable.onRowSelected((e=>{const t=e.row>-1?this._impactedObjects[e.row]:void 0;this.refreshImpactedObject(t)})));const i=this._view.modelBuilder.text().withProps({value:r.OBJECT_DETAILS,CSSStyles:{...o.LIGHT_LABEL_CSS,margin:"12px 0px 0px 0px"}}).component(),a={...o.BODY_CSS,margin:"5px 0px 0px 0px","word-wrap":"break-word"};return this._objectDetailsType=this._view.modelBuilder.text().withProps({value:r.TYPES_LABEL,CSSStyles:a}).component(),this._objectDetailsName=this._view.modelBuilder.text().withProps({value:r.NAMES_LABEL,CSSStyles:a}).component(),this._objectDetailsSample=this._view.modelBuilder.text().withProps({value:"",CSSStyles:a}).component(),this._view.modelBuilder.flexContainer().withItems([e,this._impactedObjectsTable,i,this._objectDetailsType,this._objectDetailsName,this._objectDetailsSample]).withLayout({flexFlow:"column"}).component()}createDescription(){const e={...o.LIGHT_LABEL_CSS,width:"200px",margin:"12px 0 0"},t={...o.BODY_CSS,width:"200px","word-wrap":"break-word"},i=this._view.modelBuilder.text().withProps({value:r.DESCRIPTION,CSSStyles:e}).component();this._descriptionText=this._view.modelBuilder.text().withProps({CSSStyles:t}).component();const n=this._view.modelBuilder.text().withProps({value:r.RECOMMENDATION,CSSStyles:e}).component();return this._recommendationText=this._view.modelBuilder.text().withProps({CSSStyles:t}).component(),this._moreInfoTitle=this._view.modelBuilder.text().withProps({value:r.MORE_INFO,CSSStyles:e}).component(),this._moreInfoText=this._view.modelBuilder.hyperlink().withProps({label:"",url:"",CSSStyles:t,ariaLabel:r.MORE_INFO,showLinkIcon:!0}).component(),this._view.modelBuilder.flexContainer().withItems([i,this._descriptionText,n,this._recommendationText,this._moreInfoTitle,this._moreInfoText]).withLayout({flexFlow:"column"}).component()}createTitleComponent(){return this._view.modelBuilder.text().withProps({value:r.TARGET_PLATFORM,CSSStyles:{...o.BODY_CSS,margin:"0 0 4px 0"}}).component()}createPlatformComponent(){return this._view.modelBuilder.text().withProps({value:r.SUMMARY_SQLDB_TYPE,CSSStyles:{...o.PAGE_SUBTITLE_CSS}}).component()}createRecommendationComponent(){return this._dbName=this._view.modelBuilder.text().withProps({CSSStyles:{...o.LABEL_CSS,"margin-bottom":"8px","font-weight":"700"}}).component(),this._dbName}createAssessmentResultsTitle(){return this._recommendationTitle=this._view.modelBuilder.text().withProps({value:r.WARNINGS,CSSStyles:{...o.LABEL_CSS,margin:"0 8px 4px 0",width:"220px"}}).component(),this._recommendationTitle}createAssessmentDetailsTitle(){return this._recommendation=this._view.modelBuilder.text().withProps({value:r.WARNINGS_DETAILS,CSSStyles:{...o.LABEL_CSS,margin:"0 0 4px 24px",width:"200px"}}).component(),this._recommendation}createImpactedObjectsTable(){return this._assessmentResultsList=this._view.modelBuilder.listView().withProps({width:"200px",options:[]}).component(),this._disposables.push(this._assessmentResultsList.onDidClick((async e=>{const t=this._activeIssues[parseInt(this._assessmentResultsList.selectedOptionId)];await this.refreshAssessmentDetails(t)}))),this._view.modelBuilder.flexContainer().withItems([this._assessmentResultsList]).withLayout({flexFlow:"column",height:"100%"}).withProps({CSSStyles:{"border-right":"solid 1px"}}).component()}refreshImpactedObject(e){this._objectDetailsType.value=r.IMPACT_OBJECT_TYPE(e?.objectType),this._objectDetailsName.value=r.IMPACT_OBJECT_NAME(e?.name),this._objectDetailsSample.value=e?.impactDetail||""}async refreshAssessmentDetails(e){await this._assessmentTitle.updateProperty("value",e?.checkId||""),await this._descriptionText.updateProperty("value",e?.description||""),await this._recommendationText.updateProperty("value",e?.message||r.NA),e?.helpLink?(await this._moreInfoTitle.updateProperty("display","flex"),await this._moreInfoText.updateProperties({display:"flex",url:e?.helpLink||"",label:e?.displayName||"",ariaLabel:e?.displayName||"",showLinkIcon:!0})):(await this._moreInfoTitle.updateProperty("display","none"),await this._moreInfoText.updateProperties({display:"none",url:"",label:"",ariaLabel:"",showLinkIcon:!1})),this._impactedObjects=e?.impactedObjects||[],await this._impactedObjectsTable.setDataValues(this._impactedObjects.map((e=>[{value:e.objectType},{value:e.name}]))),this._impactedObjectsTable.selectedRow=this._impactedObjects?.length>0?0:-1}stringCompare(e,t,i){return e?t?e.localeCompare(t)*-i:-i:i}}},8358:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableMigrationSelectionDialog=void 0;const n=i(9072),r=i(2074),o=i(9563),a=i(3963),s=i(1386),l=i(3186);t.TableMigrationSelectionDialog=class{constructor(e,t,i){this._disposables=[],this._isOpen=!1,this._availableTableCount=0,this._missingTableCount=0,this._unavailableTableCount=0,this._hasMissingTables=!1,this._model=e,this._sourceDatabaseName=t,this._onSaveCallback=i}async _loadData(){try{this._refreshLoader.loading=!0,this._updateRowSelection(),await(0,l.updateControlDisplay)(this._availableTablesSelectionTable,!1),await(0,l.updateControlDisplay)(this._missingTablesSelectionTable,!1),await(0,l.updateControlDisplay)(this._unavailableSourceTablesTable,!1);const e=this._model._sourceTargetMapping.get(this._sourceDatabaseName);if(e){e.enableSchemaMigration=!1;const t=await(0,a.collectSourceDatabaseTableInfo)(this._sourceDatabaseName),i=await(0,a.collectTargetDatabaseTableInfo)(this._model._targetServerInstance,e.databaseName,this._model._azureTenant.id,this._model._targetUserName,this._model._targetPassword);this._targetTableMap=new Map,i.forEach((e=>this._targetTableMap.set(e.tableName,{databaseName:e.databaseName,rowCount:e.rowCount,selectedForMigration:!1,tableName:e.tableName}))),this._availableTablesSelectionMap=new Map,this._missingTablesSelectionMap=new Map,this._unavailableTablesMap=new Map,t.forEach((t=>{var i=this._targetTableMap.get(t.tableName);if(0===t.rowCount){const e={databaseName:t.databaseName,rowCount:t.rowCount,selectedForMigration:!1,tableName:t.tableName};this._unavailableTablesMap.set(t.tableName,e)}else if(null==i){const e={databaseName:t.databaseName,rowCount:t.rowCount,selectedForMigration:!1,tableName:t.tableName};this._missingTablesSelectionMap.set(t.tableName,e)}else{var n=e.sourceTables.get(t.tableName);const i={databaseName:t.databaseName,rowCount:t.rowCount,selectedForMigration:null==n||n.selectedForMigration,tableName:t.tableName};this._availableTablesSelectionMap.set(t.tableName,i)}})),this._availableTableCount=this._availableTablesSelectionMap.size,this._missingTableCount=this._missingTablesSelectionMap.size,this._unavailableTableCount=this._unavailableTablesMap.size;const n=void 0!==Array.from(this._unavailableTablesMap.values()).find((e=>void 0===this._targetTableMap.get(e.tableName)));this._hasMissingTables=this._missingTableCount>0||n,this._unavailableTableCount===t.length?(this._schemaMigrationCheckBox.enabled=n,await this._schemaMigrationInfoBox.updateProperties({text:r.ALL_SOURCE_TABLES_EMPTY,style:"information",width:"600px",CSSStyles:{...o.BODY_CSS,margin:"5px 0 0 0"},isClickable:!0})):0===this._availableTablesSelectionMap.size?await this._schemaMigrationInfoBox.updateProperties({text:r.FULL_SCHEMA_MISSING_ON_TARGET,style:"warning",width:"600px",CSSStyles:{...o.BODY_CSS,margin:"5px 0 0 0"},isClickable:!0}):this._missingTablesSelectionMap.size>0||n?await this._schemaMigrationInfoBox.updateProperties({text:r.PARTIAL_SCHEMA_ON_TARGET,style:"warning",width:"600px",CSSStyles:{...o.BODY_CSS,margin:"5px 0 0 0"},isClickable:!0}):(this._schemaMigrationCheckBox.checked=!1,this._schemaMigrationCheckBox.enabled=!1,await this._schemaMigrationInfoBox.updateProperties({text:r.FULL_SCHEMA_ON_TARGET,style:"information",width:"600px",CSSStyles:{...o.BODY_CSS,margin:"5px 0 0 0"},isClickable:!1}))}this._dialog.message={text:"",level:n.window.MessageLevel.Information}}catch(e){this._dialog.message={text:r.DATABASE_TABLE_CONNECTION_ERROR,description:r.DATABASE_TABLE_CONNECTION_ERROR_MESSAGE(e.message),level:n.window.MessageLevel.Error}}finally{this._refreshLoader.loading=!1,await(0,l.updateControlDisplay)(this._availableTablesSelectionTable,!0,"flex"),await(0,l.updateControlDisplay)(this._missingTablesSelectionTable,!0,"flex"),await(0,l.updateControlDisplay)(this._unavailableSourceTablesTable,!0,"flex"),await this._loadControls(),this._updateTabs()}}_updateTabs(){this._availableTablesTab.title=r.AVAILABLE_TABLE_COUNT_ON_TARGET(this._availableTableCount),this._missingTablesTab.title=r.MISSING_TARGET_TABLES_COUNT(this._missingTableCount),this._unavailableTablesTab.title=r.UNAVAILABLE_SOURCE_TABLES_COUNT(this._unavailableTableCount),1===this._tabs.items.length&&(this._missingTableCount>0&&this._unavailableTableCount>0?this._tabs.updateTabs([this._availableTablesTab,this._missingTablesTab,this._unavailableTablesTab]):this._missingTableCount>0?this._tabs.updateTabs([this._availableTablesTab,this._missingTablesTab]):this._unavailableTableCount>0?this._tabs.updateTabs([this._availableTablesTab,this._unavailableTablesTab]):this._tabs.updateTabs([this._availableTablesTab]))}async _createMigrationContainer(e){const t=e.modelBuilder.text().withProps({value:r.SCHEMA_MIGRATION_HEADER,requiredIndicator:!0,CSSStyles:{...o.SECTION_HEADER_CSS,"margin-top":"4px"}}).component();this._schemaMigrationCheckBox=e.modelBuilder.checkBox().withProps({checked:!1,label:r.SCHEMA_MIGRATION_CHECKBOX_INFO}).component(),this._schemaMigrationInfoBox=e.modelBuilder.infoBox().withProps({text:"",style:"information",width:"40px",CSSStyles:{...o.BODY_CSS,margin:"5px 0 0 0"}}).component(),this._disposables.push(this._schemaMigrationCheckBox.onChanged((async e=>{const t=this._model._sourceTargetMapping.get(this._sourceDatabaseName);if(t){t.enableSchemaMigration=e;const i=[],n=[];let r=0;this._missingTablesSelectionMap.forEach((t=>{t.selectedForMigration=e,i.push([t.selectedForMigration,t.tableName,"--"]),t.selectedForMigration&&n.push(r),r++})),await this._missingTablesSelectionTable.updateProperty("data",i),this._missingTablesSelectionTable.selectedRows=n,this._updateRowSelection()}})));const i=e.modelBuilder.text().withProps({description:r.DATA_MIGRATION_INFO,value:r.DATA_MIGRATION_HEADER,requiredIndicator:!0,CSSStyles:{...o.SECTION_HEADER_CSS,"margin-top":"4px"}}).component();return this._tabs=e.modelBuilder.tabbedPanel().withTabs([]).component(),await this._createAvailableTablesTab(e),await this._createMissingTablesTab(e),await this._createUnavailableTablesTab(e),this._tabs.updateTabs([this._availableTablesTab]),this._disposables.push(e.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([t,this._schemaMigrationCheckBox,this._schemaMigrationInfoBox,i,this._tabs]).component()}async _loadControls(){const e=[],t=[],i=[],n=this._filterInputBox.value??"",o=[],a=[];let s=0,l=0;this._availableTablesSelectionMap.forEach((t=>{const i=t.tableName.toLocaleLowerCase(),a=n.toLocaleLowerCase();if(0===n?.length||i.indexOf(a)>-1){const i=this._targetTableMap.get(t.tableName),n=(i?.rowCount??0)>0?r.TARGET_TABLE_NOT_EMPTY:"--";e.push([t.selectedForMigration,t.tableName,n]),t.selectedForMigration&&o.push(s),s++}})),this._missingTablesSelectionMap.forEach((e=>{t.push([e.selectedForMigration,e.tableName,"--"]),e.selectedForMigration&&a.push(l),l++})),this._unavailableTablesMap.forEach((e=>{this._targetTableMap.get(e.tableName)?i.push([e.tableName,"--"]):i.push([e.tableName,"Yes"])})),await this._availableTablesSelectionTable.updateProperty("data",e),this._availableTablesSelectionTable.selectedRows=o,await this._missingTablesSelectionTable.updateProperty("data",t),this._missingTablesSelectionTable.selectedRows=a,await this._unavailableSourceTablesTable.updateProperty("data",i),this._updateRowSelection()}async _initializeDialog(e){e.registerContent((async t=>{e.okButton.label=r.TABLE_SELECTION_UPDATE_BUTTON,e.okButton.position="left",this._disposables.push(e.okButton.onClick((async()=>this._save()))),e.cancelButton.label=r.TABLE_SELECTION_CANCEL_BUTTON,e.cancelButton.position="left",this._disposables.push(e.cancelButton.onClick((async()=>this._isOpen=!1)));const i=t.modelBuilder.flexContainer().withItems([await this._createMigrationContainer(t)]).withProps({CSSStyles:{padding:"20px"}}).component();await t.initializeModel(i),await this._loadData()}))}async openDialog(e){if(!this._isOpen){this._isOpen=!0,this._dialog=n.window.createModelViewDialog(e,"TableMigrationSelection",600,void 0,void 0,!1);const t=this._initializeDialog(this._dialog);n.window.openDialog(this._dialog),await t}}async _createAvailableTablesTab(e){this._headingText=e.modelBuilder.text().withProps({value:r.DATABASE_LOADING_TABLES}).component(),this._filterInputBox=e.modelBuilder.inputBox().withProps({inputType:"search",placeHolder:r.TABLE_SELECTION_FILTER,width:268}).component(),this._disposables.push(this._filterInputBox.onTextChanged((async e=>await this._loadControls()))),this._refreshButton=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,iconHeight:16,iconWidth:16,iconPath:s.IconPathHelper.refresh,label:r.DATABASE_TABLE_REFRESH_LABEL,width:70,CSSStyles:{margin:"5px 0 0 15px"}}).component(),this._disposables.push(this._refreshButton.onDidClick((async e=>await this._loadData()))),this._refreshLoader=e.modelBuilder.loadingComponent().withItem(this._refreshButton).withProps({loading:!1,CSSStyles:{height:"8px",margin:"5px 0 0 15px"}}).component();const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",flexWrap:"wrap"}).component();t.addItem(this._filterInputBox,{flex:"0 0 auto"}),t.addItem(this._refreshLoader,{flex:"0 0 auto"}),this._availableTablesSelectionTable=this._createAvailableTablesTable(e);const i=e.modelBuilder.flexContainer().withItems([t,this._headingText,this._availableTablesSelectionTable],{flex:"0 0 auto"}).withProps({CSSStyles:{margin:"10px 0 0 15px"}}).withLayout({flexFlow:"column",height:"100%",width:550}).component();this._availableTablesTab={content:i,id:"tableSelectionTab",title:r.AVAILABLE_TABLE_COUNT_ON_TARGET(this._availableTableCount)}}async _createMissingTablesTab(e){const t=e.modelBuilder.text().withProps({value:r.MISSING_TABLES_HEADING}).component();this._missingTablesSelectionTable=this._createMissingTablesTable(e);const i=e.modelBuilder.flexContainer().withItems([t,this._missingTablesSelectionTable],{flex:"0 0 auto"}).withProps({CSSStyles:{margin:"10px 0 0 15px"}}).withLayout({flexFlow:"column",height:"100%",width:550}).component();this._missingTablesTab={content:i,id:"missingTablesTab",title:r.MISSING_TARGET_TABLES_COUNT(this._missingTableCount)}}async _createUnavailableTablesTab(e){const t=e.modelBuilder.text().withProps({value:r.UNAVAILABLE_SOURCE_TABLES_HEADING}).component();this._unavailableSourceTablesTable=this._createUnavailableTablesTable(e);const i=e.modelBuilder.flexContainer().withItems([t,this._unavailableSourceTablesTable],{flex:"0 0 auto"}).withProps({CSSStyles:{margin:"10px 0 0 15px"}}).withLayout({flexFlow:"column",height:"100%",width:550}).component();this._unavailableTablesTab={content:i,id:"unavailableTablesTab",title:r.UNAVAILABLE_SOURCE_TABLES_COUNT(this._unavailableTableCount)}}_createAvailableTablesTable(e){const t="no-borders",i=e.modelBuilder.table().withProps({data:[],width:550,height:"600px",display:"flex",forceFitColumns:n.ColumnSizingMode.ForceFit,columns:[{value:"",width:10,type:n.ColumnType.checkBox,action:n.ActionOnCellCheckboxCheck.selectRow,resizable:!1,cssClass:t,headerCssClass:t},{name:r.TABLE_SELECTION_TABLENAME_COLUMN,value:"tableName",type:n.ColumnType.text,width:285,cssClass:t,headerCssClass:t},{name:r.TABLE_SELECTION_HASROWS_COLUMN,value:"hasRows",type:n.ColumnType.text,width:255,cssClass:t,headerCssClass:t}]}).withValidation((()=>!0)).component();return this._disposables.push(i.onRowSelected((async e=>{this._updateRowSelection()}))),i}_createMissingTablesTable(e){const t="no-borders",i=e.modelBuilder.table().withProps({data:[],width:550,height:"600px",display:"flex",forceFitColumns:n.ColumnSizingMode.ForceFit,columns:[{value:"",width:10,type:n.ColumnType.checkBox,action:n.ActionOnCellCheckboxCheck.selectRow,resizable:!1,cssClass:t,headerCssClass:t},{name:r.TABLE_SELECTION_TABLENAME_COLUMN,value:"tableName",type:n.ColumnType.text,width:285,cssClass:t,headerCssClass:t},{name:r.TABLE_SELECTION_HASROWS_COLUMN,value:"hasRows",type:n.ColumnType.text,width:255,cssClass:t,headerCssClass:t}]}).withValidation((()=>!0)).component();return this._disposables.push(i.onRowSelected((async e=>{this._updateRowSelection()}))),i}_createUnavailableTablesTable(e){const t="no-borders";return e.modelBuilder.table().withProps({data:[],width:550,height:"600px",display:"flex",forceFitColumns:n.ColumnSizingMode.ForceFit,columns:[{name:r.UNAVAILABLE_TABLE_NAME_COLUMN,value:"tableName",type:n.ColumnType.text,cssClass:t,headerCssClass:t},{name:r.NOT_EXIST_IN_TARGET_TABLE_NAME_COLUMN,value:"notExistInTarget",type:n.ColumnType.text,cssClass:t,headerCssClass:t}]}).withValidation((()=>!0)).component()}_updateRowSelection(){this._headingText.value=this._refreshLoader.loading?r.DATABASE_LOADING_TABLES:this._availableTablesSelectionTable.data?.length>0?r.TABLE_SELECTION_COUNT_TO_TARGET(this._availableTablesSelectionTable.selectedRows?.length??0,this._availableTablesSelectionTable.data?.length??0):r.DATABASE_MISSING_TABLES}async _save(){const e=this._model._sourceTargetMapping.get(this._sourceDatabaseName);e&&(this._availableTablesSelectionMap.forEach((t=>{t.selectedForMigration=!1,e.sourceTables.set(t.tableName,t)})),(this._availableTablesSelectionTable.selectedRows??[]).forEach((t=>{const i=this._availableTablesSelectionTable.data[t],n=i.length>1?i[1]:"",r=this._availableTablesSelectionMap.get(n);r&&(r.selectedForMigration=!0,e.sourceTables.set(r.tableName,r))})),this._missingTablesSelectionMap.forEach((t=>{t.selectedForMigration=!1,e.sourceTables.set(t.tableName,t)})),(this._missingTablesSelectionTable.selectedRows??[]).forEach((t=>{const i=this._missingTablesSelectionTable.data[t],n=i.length>1?i[1]:"",r=this._missingTablesSelectionMap.get(n);r&&(r.selectedForMigration=!0,e.sourceTables.set(r.tableName,r))})),this._unavailableTablesMap.forEach((t=>{e.sourceTables.set(t.tableName,t)})),e.hasMissingTables=this._hasMissingTables,this._model._sourceTargetMapping.set(this._sourceDatabaseName,e)),await this._onSaveCallback(),this._isOpen=!1}}},3913:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetDatabaseSummaryDialog=void 0;const n=i(9072),r=i(1285),o=i(2074),a=i(9563);t.TargetDatabaseSummaryDialog=class{constructor(e){this._model=e,this._tableLength=700;let t="medium";this._model._databaseBackup.networkContainerType===r.NetworkContainerType.BLOB_CONTAINER&&(this._tableLength=800,t=900),this._dialogObject=n.window.createModelViewDialog(o.DATABASE_TO_BE_MIGRATED,"TargetDatabaseSummaryDialog",t)}async initialize(){const e=n.window.createTab("sql.migration.CreateResourceGroupDialog");e.registerContent((async e=>{this._view=e;const t=this._model.isSqlDbTarget,i=this._view.modelBuilder.text().withProps({value:o.COUNT_DATABASES(this._model._databasesForMigration.length),CSSStyles:{...a.BODY_CSS,"margin-bottom":"20px"}}).component(),s={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"1px solid"},l={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},c=150,u=[{valueType:n.DeclarativeDataType.string,displayName:o.SOURCE_DATABASE,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.TARGET_DATABASE_NAME,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s}];t?u.push({valueType:n.DeclarativeDataType.string,displayName:o.TARGET_TABLE_COUNT_NAME,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s}):this._model._databaseBackup.networkContainerType===r.NetworkContainerType.BLOB_CONTAINER?u.push({valueType:n.DeclarativeDataType.string,displayName:o.LOCATION,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.RESOURCE_GROUP,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.SUMMARY_AZURE_STORAGE,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.BLOB_CONTAINER,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s},{valueType:n.DeclarativeDataType.string,displayName:o.BLOB_CONTAINER_LAST_BACKUP_FILE,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s,hidden:this._model._databaseBackup.migrationMode===r.MigrationMode.ONLINE}):this._model._databaseBackup.networkContainerType===r.NetworkContainerType.FILE_SHARE&&u.push({valueType:n.DeclarativeDataType.string,displayName:o.NETWORK_SHARE_PATH,isReadOnly:!0,width:c,rowCssStyles:l,headerCssStyles:s});const d=[];this._model._databasesForMigration.forEach(((e,i)=>{const n=[];if(n.push({value:e},{value:this._model._targetDatabaseNames[i]}),t){const t=this._model._sourceTargetMapping.get(e)?.sourceTables.size??0;let i=0;this._model._sourceTargetMapping.get(e)?.sourceTables.forEach((e=>i+=e.selectedForMigration?1:0)),n.push({value:o.TOTAL_TABLES_SELECTED(i,t)})}else this._model._databaseBackup.networkContainerType===r.NetworkContainerType.BLOB_CONTAINER?(n.push({value:this._model._databaseBackup.blobs[i].storageAccount.location},{value:this._model._databaseBackup.blobs[i].storageAccount.resourceGroup},{value:this._model._databaseBackup.blobs[i].storageAccount.name},{value:this._model._databaseBackup.blobs[i].blobContainer.name}),this._model._databaseBackup.migrationMode===r.MigrationMode.OFFLINE&&n.push({value:this._model._databaseBackup.blobs[i].lastBackupFile})):this._model._databaseBackup.networkContainerType===r.NetworkContainerType.FILE_SHARE&&n.push({value:this._model._databaseBackup.networkShares[i].networkShareLocation});d.push(n)}));const p=this._view.modelBuilder.declarativeTable().withProps({ariaLabel:o.DATABASE_TO_BE_MIGRATED,columns:u,dataValues:d,width:this._tableLength}).component(),h=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([i,p]).component(),_=this._view.modelBuilder.formContainer().withFormItems([{component:h}],{horizontal:!1}).withLayout({width:"100%"}).component();return e.initializeModel(_)})),this._dialogObject.content=[e],n.window.openDialog(this._dialogObject)}}},5493:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TdeConfigurationDialog=void 0;const n=i(9072),r=i(2074),o=i(9563),a=i(3186),s=i(349),l=i(1386);t.TdeConfigurationDialog=class{constructor(e,t){this.migrationStateModel=e,this._isOpen=!1,this._disposables=[],this._onClosed=t}async initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async e=>{try{const i=this.createContainer(e);this._disposables.push(e.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await e.initializeModel(i),t()}catch(e){i(e)}}))}))}createContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{margin:"8px 16px","flex-direction":"column"}}).component(),i=r.TDE_WIZARD_DATABASES_SELECTED(this.migrationStateModel.tdeMigrationConfig.getTdeEnabledDatabasesCount(),this.migrationStateModel._databasesForMigration.length),n=e.modelBuilder.text().withProps({value:i,CSSStyles:{...o.BODY_CSS}}).component(),a=e.modelBuilder.text().withProps({value:r.TDE_WIZARD_DESCRIPTION,CSSStyles:{...o.BODY_CSS,"margin-top":"8px","text-align":"justify"},links:[{text:r.LEARN_MORE,url:"https://learn.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption",accessibilityInformation:{label:r.LEARN_MORE}}]}).component(),s=this.createMethodsContainer(e);return t.addItems([n,a,s]),t}createMethodsContainer(e){const t=e.modelBuilder.text().withProps({value:r.TDE_WIZARD_MIGRATION_CAPTION,CSSStyles:{...o.LABEL_CSS,"margin-top":"16px"}}).component(),i="dataSourceContainer",n=e.modelBuilder.flexContainer().withProps({ariaLabel:r.AZURE_RECOMMENDATION_CHOOSE_METHOD,ariaRole:"radiogroup",CSSStyles:{"flex-direction":"column"}}).component(),a=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column",display:"inline"}}).component(),c=e.modelBuilder.radioButton().withProps({name:i,label:r.TDE_WIZARD_MIGRATION_OPTION_ADS,checked:this.migrationStateModel.tdeMigrationConfig.getAppliedConfigDialogSetting()===s.ConfigDialogSetting.ExportCertificates,CSSStyles:{...o.BODY_CSS}}).component();this._disposables.push(c.onDidChangeCheckedState((async e=>{if(e){this.migrationStateModel.tdeMigrationConfig.setPendingTdeMigrationMethod(s.ConfigDialogSetting.ExportCertificates);let e=await this.migrationStateModel.getTdeValidationTitles(),t=""!==this.migrationStateModel.tdeMigrationConfig.getPendingNetworkPath()&&this.migrationStateModel.tdeMigrationConfig.getPendingNetworkPath()===this.migrationStateModel.tdeMigrationConfig.getLastValidatedNetworkPath(),i=e.result.map((e=>[e,{icon:t?l.IconPathHelper.completedMigration:l.IconPathHelper.notFound,title:t?r.TDE_VALIDATION_STATUS_SUCCEEDED:r.TDE_VALIDATION_STATUS_PENDING},t?r.TDE_VALIDATION_STATUS_SUCCEEDED:r.TDE_VALIDATION_STATUS_PENDING]));await this._validationTable.updateProperty("data",i),await this.updateUI()}}))),this._adsMethodConfirmationContainer=this.createAdsConfirmationContainer(e),a.addItems([c,this._adsMethodConfirmationContainer]);const u=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column",display:"inline"}}).component(),d=e.modelBuilder.radioButton().withProps({name:i,label:r.TDE_WIZARD_MIGRATION_OPTION_MANUAL,checked:this.migrationStateModel.tdeMigrationConfig.getAppliedConfigDialogSetting()===s.ConfigDialogSetting.DoNotExport,CSSStyles:{...o.BODY_CSS}}).component();return this._disposables.push(d.onDidChangeCheckedState((async e=>{e&&(this.migrationStateModel.tdeMigrationConfig.setPendingTdeMigrationMethod(s.ConfigDialogSetting.DoNotExport),await this.updateUI())}))),this._manualMethodWarningContainer=this.createManualWarningContainer(e),u.addItems([d,this._manualMethodWarningContainer]),n.addItems([a,u]),e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([t,n]).component()}createAdsConfirmationContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column",display:"none"}}).component(),i=e.modelBuilder.infoBox().withProps({text:r.TDE_WIZARD_ADS_CERTS_INFO,style:"information",CSSStyles:{...o.BODY_CSS,margin:"4px 14px 0px 14px","text-align":"justify"}}).component(),n=e.modelBuilder.text().withProps({value:r.TDE_WIZARD_CERTS_NETWORK_SHARE_LABEL,description:r.TDE_WIZARD_CERTS_NETWORK_SHARE_INFO,requiredIndicator:!0,CSSStyles:{...o.LABEL_CSS,margin:"4px 0 14px 45px"}}).component();this._networkPathText=e.modelBuilder.inputBox().withProps({value:"",width:"300px",placeHolder:r.TDE_WIZARD_CERTS_NETWORK_SHARE_PLACEHOLDER,required:!0,CSSStyles:{...o.BODY_CSS,"margin-top":"-1em","margin-left":"45px"}}).component(),this._disposables.push(this._networkPathText.onTextChanged((async e=>{this.migrationStateModel.tdeMigrationConfig.setPendingNetworkPath(e),await this.updateUI()}))),this._adsConfirmationCheckBox=e.modelBuilder.checkBox().withProps({label:r.TDE_WIZARD_MIGRATION_OPTION_ADS_CONFIRM,checked:this.migrationStateModel.tdeMigrationConfig.getAppliedExportCertUserConsent(),CSSStyles:{...o.BODY_CSS,margin:"10px 0 14px 15px"}}).component(),this._disposables.push(this._adsConfirmationCheckBox.onChanged((async e=>{this.migrationStateModel.tdeMigrationConfig.setPendingExportCertUserConsent(e),e&&(this._validationGroup.collapsed=!1),await this.updateUI()})));const a=e.modelBuilder.separator().component(),s=e.modelBuilder.text().withProps({value:r.TDE_VALIDATION_REQUIREMENTS_MESSAGE,CSSStyles:{...o.BODY_CSS,margin:"4px 2px 4px 0px"}}).component(),c=e.modelBuilder.button().withProps({label:r.TDE_VALIDATION_STATUS_RUN_VALIDATION,enabled:!0,CSSStyles:{width:"calc(100% - 10px)"}}).component();this._disposables.push(c.onDidClick((async e=>{let t=this._validationTable.data.map((e=>[e[0],{icon:l.IconPathHelper.inProgressMigration,title:r.TDE_VALIDATION_STATUS_RUNNING},r.TDE_VALIDATION_STATUS_RUNNING]));await this._validationTable.updateProperty("data",t);let i=await this.migrationStateModel.runTdeValidation(this.migrationStateModel.tdeMigrationConfig.getPendingNetworkPath()),n=!0;this._validationSuccessDescriptionErrorAndTips=i.result.map((e=>[e.validationStatus.toString(),e.validationDescription,e.validationErrorMessage,e.validationTroubleshootingTips]));let o=i.result.map((e=>(e.validationStatus<0&&(n=!1),[e.validationTitle,{icon:e.validationStatus>0?l.IconPathHelper.completedMigration:l.IconPathHelper.error,title:e.validationStatusString},e.validationStatusString])));await this._validationTable.updateProperty("data",o),n&&(this.migrationStateModel.tdeMigrationConfig.setLastValidatedNetworkPath(this.migrationStateModel.tdeMigrationConfig.getPendingNetworkPath()),await this.updateUI())}))),this._validationTable=this._createValidationTable(e),this._disposables.push(this._validationTable.onRowSelected((async e=>{(this._validationTable.selectedRows??[]).forEach((e=>{let t="1"===this._validationSuccessDescriptionErrorAndTips[e][0],i=this._validationSuccessDescriptionErrorAndTips[e][1],n=this._validationSuccessDescriptionErrorAndTips[e][2],r=this._validationSuccessDescriptionErrorAndTips[e][3];this._descriptionText.value=i,this._descriptionLabel.CSSStyles={...o.TDE_VALIDATION_INFO_LABEL},this._descriptionText.CSSStyles={...o.TDE_VALIDATION_INFO_TEXT},this._errorText.value=n,this._errorLabel.CSSStyles={...o.TDE_VALIDATION_INFO_LABEL},this._errorText.CSSStyles={...o.TDE_VALIDATION_INFO_TEXT},this._troubleshootingTipsText.value=r,t?(this._errorLabel.CSSStyles={...o.TDE_VALIDATION_INFO_LABEL,display:"none"},this._errorText.CSSStyles={...o.TDE_VALIDATION_INFO_TEXT,display:"none"},this._troubleshootingTipsLabel.CSSStyles={...o.TDE_VALIDATION_INFO_LABEL,display:"none"},this._troubleshootingTipsText.CSSStyles={...o.TDE_VALIDATION_INFO_TEXT,display:"none"}):(null!==n&&0!==n?.length||(this._errorLabel.CSSStyles={...o.TDE_VALIDATION_INFO_LABEL,display:"none"},this._errorText.CSSStyles={...o.TDE_VALIDATION_INFO_TEXT,display:"none"}),this._troubleshootingTipsLabel.CSSStyles={...o.TDE_VALIDATION_INFO_LABEL},this._troubleshootingTipsText.CSSStyles={...o.TDE_VALIDATION_INFO_TEXT})}))})));const u=e.modelBuilder.separator().component();return this._descriptionLabel=e.modelBuilder.text().withProps({value:r.TDE_VALIDATION_DESCRIPTION,CSSStyles:{...o.TDE_VALIDATION_INFO_LABEL,display:"none"}}).component(),this._descriptionText=e.modelBuilder.text().withProps({value:"",CSSStyles:{...o.TDE_VALIDATION_INFO_TEXT,display:"none"}}).component(),this._errorLabel=e.modelBuilder.text().withProps({value:r.TDE_VALIDATION_ERROR,CSSStyles:{...o.TDE_VALIDATION_INFO_LABEL,display:"none"}}).component(),this._errorText=e.modelBuilder.text().withProps({value:"",CSSStyles:{...o.TDE_VALIDATION_INFO_TEXT,display:"none"}}).component(),this._troubleshootingTipsLabel=e.modelBuilder.text().withProps({value:r.TDE_VALIDATION_TROUBLESHOOTING_TIPS,CSSStyles:{...o.TDE_VALIDATION_INFO_LABEL,display:"none"}}).component(),this._troubleshootingTipsText=e.modelBuilder.text().withProps({value:"",CSSStyles:{...o.TDE_VALIDATION_INFO_TEXT,display:"none"}}).component(),this._validationGroup=e.modelBuilder.groupContainer().withLayout({header:r.TDE_VALIDATION_GROUP_TITLE,collapsible:!0,collapsed:!0}).withProps({collapsed:!0,CSSStyles:{margin:"0 0 0 10px",padding:"0 0 0 0"}}).withItems([a,s,c,this._validationTable,this._descriptionLabel,this._descriptionText,this._errorLabel,this._errorText,this._troubleshootingTipsLabel,this._troubleshootingTipsText,u]).component(),t.addItems([i,n,this._networkPathText,this._adsConfirmationCheckBox,this._validationGroup]),t}_createValidationTable(e){return e.modelBuilder.table().withProps({columns:[{value:"title",name:r.TDE_VALIDATION_TITLE,type:n.ColumnType.text,width:320,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"},{value:"image",name:"",type:n.ColumnType.icon,width:30,headerCssClass:"no-borders display-none",cssClass:"no-borders align-with-header"},{value:"message",name:r.TDE_MIGRATE_COLUMN_STATUS,type:n.ColumnType.text,width:100,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"}],data:[],width:450,height:80,CSSStyles:{"margin-top":"10px"}}).component()}createManualWarningContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column",display:"none"}}).component(),i=e.modelBuilder.infoBox().withProps({text:r.TDE_WIZARD_MIGRATION_OPTION_MANUAL_WARNING,style:"warning",CSSStyles:{...o.BODY_CSS,margin:"4px 14px 0px 14px"},links:[{text:r.LEARN_MORE,url:"https://learn.microsoft.com/azure/azure-sql/managed-instance/tde-certificate-migrate",accessibilityInformation:{label:r.LEARN_MORE}}]}).component();return t.addItems([i]),t}async updateUI(){let e=this.migrationStateModel.tdeMigrationConfig.getPendingConfigDialogSetting()===s.ConfigDialogSetting.ExportCertificates;this._networkPathText.value=this.migrationStateModel.tdeMigrationConfig.getPendingNetworkPath(),this._networkPathText.required=e,this._adsConfirmationCheckBox.checked=this.migrationStateModel.tdeMigrationConfig.getPendingExportCertUserConsent(),await a.updateControlDisplay(this._adsMethodConfirmationContainer,e),await a.updateControlDisplay(this._manualMethodWarningContainer,this.migrationStateModel.tdeMigrationConfig.getPendingConfigDialogSetting()===s.ConfigDialogSetting.DoNotExport),this.dialog.okButton.enabled=this.migrationStateModel.tdeMigrationConfig.isAnyChangeReadyToBeApplied()}async openDialog(e){if(!this._isOpen){this.migrationStateModel.tdeMigrationConfig.configurationShown(),this._isOpen=!0,this.dialog=n.window.createModelViewDialog(r.TDE_WIZARD_TITLE,"TdeConfigurationDialog","narrow"),this.dialog.okButton.label=r.APPLY,this.dialog.okButton.enabled=!1,this._disposables.push(this.dialog.okButton.onClick((()=>{this._isOpen=!1,this.migrationStateModel.tdeMigrationConfig.applyConfigDialogSetting(),this._onClosed()}))),this._disposables.push(this.dialog.cancelButton.onClick((()=>{this.migrationStateModel.tdeMigrationConfig.cancelConfigDialogSetting(),this._isOpen=!1,this._onClosed()})));const e=this.initializeDialog(this.dialog);n.window.openDialog(this.dialog),await e,await this.updateUI()}}get isOpen(){return this._isOpen}}},6122:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TdeMigrationDialog=t.ValidationStatusLookup=t.TdeValidationResultIndex=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(7475),s=i(2037),l=i(1386),c=i(349);var u;!function(e){e[e.name=0]="name",e[e.icon=1]="icon",e[e.status=2]="status",e[e.errors=3]="errors",e[e.state=4]="state",e[e.updated=5]="updated"}(u||(t.TdeValidationResultIndex=u={})),t.ValidationStatusLookup={[c.TdeMigrationState.Canceled]:o.STATE_CANCELED,[c.TdeMigrationState.Failed]:o.STATE_FAILED,[c.TdeMigrationState.Pending]:o.STATE_PENDING,[c.TdeMigrationState.Running]:o.STATE_RUNNING,[c.TdeMigrationState.Succeeded]:o.STATE_SUCCEEDED,default:void 0},t.TdeMigrationDialog=class{constructor(e,t){this._disposables=[],this._isOpen=!1,this._validationResult=[],this._dbRowsMap=new Map,this._tdeMigrationResult={state:c.TdeMigrationState.Pending,dbList:[]},this._valdiationErrors=[],this._completedDatabasesCount=0,this._model=e,this._certMigrationEventEmitter=t}async openDialog(){if(!this._isOpen){this._isOpen=!0,this._dialog=n.window.createModelViewDialog(o.TDE_MIGRATEDIALOG_TITLE,"TdeMigrationDialog",600);const e=this._initializeDialog(this._dialog);n.window.openDialog(this._dialog),await e,await this._loadMigrationResults(),this._tdeMigrationResult.state===c.TdeMigrationState.Pending&&await this._runTdeMigration()}}async _initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async n=>{try{e.okButton.label=o.TDE_MIGRATE_DONE_BUTTON,e.okButton.position="left",e.okButton.enabled=!1,e.cancelButton.position="left",this._headingText=n.modelBuilder.text().withProps({value:o.TDE_MIGRATE_HEADING,CSSStyles:{"font-size":"13px","font-weight":"400","margin-bottom":"10px"}}).component(),this._startMigrationLoader=n.modelBuilder.loadingComponent().withProps({loading:!1,CSSStyles:{margin:"5px 0 0 10px"}}).component(),this._progressReportText=n.modelBuilder.text().withProps({value:"",CSSStyles:{"font-size":"13px","font-weight":"400","margin-bottom":"10px","margin-left":"5px"}}).component();const i=n.modelBuilder.flexContainer().withLayout({flexFlow:"row",justifyContent:"flex-start"}).withItems([this._headingText,this._progressReportText,this._startMigrationLoader],{flex:"0 0 auto"}).component();this._resultsTable=await this._createResultsTable(n),this._retryMigrationButton=n.modelBuilder.button().withProps({iconPath:l.IconPathHelper.restartDataCollection,iconHeight:18,iconWidth:18,width:100,label:o.TDE_MIGRATE_RETRY_VALIDATION}).component(),this._copyButton=n.modelBuilder.button().withProps({iconPath:l.IconPathHelper.copy,iconHeight:18,iconWidth:18,width:150,label:o.TDE_MIGRATE_COPY_RESULTS,enabled:!1}).component(),this._disposables.push(this._retryMigrationButton.onDidClick((async e=>await this._retryTdeMigration()))),this._disposables.push(this._copyButton.onDidClick((async e=>this._copyValidationResults())));const r=n.modelBuilder.toolbarContainer().withToolbarItems([{component:this._retryMigrationButton}]).component(),a=n.modelBuilder.text().withProps({value:o.TDE_MIGRATE_RESULTS_HEADING,CSSStyles:{"font-size":"16px","font-weight":"600","margin-bottom":"10px"}}).component(),s=n.modelBuilder.inputBox().withProps({inputType:"text",height:200,multiline:!0,CSSStyles:{overflow:"none auto"}}).component();this._disposables.push(this._resultsTable.onRowSelected((async e=>await this._updateResultsInfoBox(s))));const c=n.modelBuilder.flexContainer().withItems([i,r,this._resultsTable,a,s],{flex:"0 0 auto"}).withProps({CSSStyles:{margin:"0 0 0 15px"}}).withLayout({flexFlow:"column",height:"100%",width:565}).component();this._disposables.push(n.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),await n.initializeModel(c),t()}catch(e){i(e)}}))}))}async _loadMigrationResults(){const e=this._model.tdeMigrationConfig.lastTdeMigrationResult();this._progressReportText.value="",e.state===c.TdeMigrationState.Pending?(this._headingText.value=o.TDE_MIGRATE_RESULTS_HEADING,e.dbList=this._model.tdeMigrationConfig.getTdeEnabledDatabases().map((e=>({name:e,dbState:c.TdeDatabaseMigrationState.Running,message:""}))),this._startMigrationLoader.loading=!0,this._retryMigrationButton.enabled=!1,this._copyButton.enabled=!1,this._dialog.okButton.enabled=!1,this._dialog.cancelButton.enabled=!0):(this._headingText.value=o.TDE_MIGRATE_RESULTS_HEADING_PREVIOUS,this._startMigrationLoader.loading=!1,this._retryMigrationButton.enabled=!0,this._copyButton.enabled=!0,this._dialog.okButton.enabled=!0,this._dialog.cancelButton.enabled=!0),this._tdeMigrationResult={state:e.state,dbList:e.dbList},await this._populateTableResults()}async _retryTdeMigration(){this._model.tdeMigrationConfig.resetTdeMigrationResult();const e=this._model.tdeMigrationConfig.lastTdeMigrationResult();e.dbList=this._model.tdeMigrationConfig.getTdeEnabledDatabases().map((e=>({name:e,dbState:c.TdeDatabaseMigrationState.Running,message:""}))),this._tdeMigrationResult={state:e.state,dbList:e.dbList},await this._populateTableResults(),await this._runTdeMigration()}_updateProgressText(){this._progressReportText.value=o.TDE_COMPLETED_STATUS(this._completedDatabasesCount,this._model.tdeMigrationConfig.getTdeEnabledDatabasesCount())}async _runTdeMigration(){this._headingText.value=o.TDE_MIGRATE_RESULTS_HEADING,this._startMigrationLoader.loading=!0,this._retryMigrationButton.enabled=!1,this._copyButton.enabled=!1,this._dialog.okButton.enabled=!1,this._dialog.cancelButton.enabled=!0;try{this._completedDatabasesCount=0,this._updateProgressText();const e=await n.accounts.getAccountSecurityToken(this._model._azureAccount,this._model._azureTenant.id,n.AzureResource.ResourceManagement),t=await this._model.startTdeMigration(e.token,this._updateTableResultRow.bind(this));await this._updateTableFromOperationResult(t),t.success?(this._dialog.okButton.enabled=!0,this._tdeMigrationResult={state:c.TdeMigrationState.Succeeded,dbList:t.result.map((e=>({name:e.name,dbState:c.TdeDatabaseMigrationState.Succeeded,message:e.message})))},this._model.tdeMigrationConfig.setTdeMigrationResult(this._tdeMigrationResult),this._certMigrationEventEmitter.fire(this._tdeMigrationResult),(0,a.sendSqlMigrationActionEvent)(a.TelemetryViews.TdeMigrationDialog,a.TelemetryAction.TdeMigrationSuccess,{...(0,a.getTelemetryProps)(this._model),numberOfDbsWithTde:this._model.tdeMigrationConfig.getTdeEnabledDatabasesCount().toString()},{})):(this._dialog.okButton.enabled=!1,this._certMigrationEventEmitter.fire({state:c.TdeMigrationState.Failed,dbList:[]}),(0,a.sendSqlMigrationActionEvent)(a.TelemetryViews.TdeMigrationDialog,a.TelemetryAction.TdeMigrationFailures,{...(0,a.getTelemetryProps)(this._model),numberOfDbsWithTde:this._model.tdeMigrationConfig.getTdeEnabledDatabasesCount().toString()},{})),this._startMigrationLoader.loading=!1,this._retryMigrationButton.enabled=!0,this._copyButton.enabled=!0,this._completedDatabasesCount=this._model.tdeMigrationConfig.getTdeEnabledDatabasesCount(),this._updateProgressText()}catch(e){this._startMigrationLoader.loading=!1,this._retryMigrationButton.enabled=!0,this._copyButton.enabled=!1,this._dialog.okButton.enabled=!1,this._progressReportText.value="",(0,a.logError)(a.TelemetryViews.TdeMigrationDialog,a.TelemetryAction.TdeMigrationClientException,e)}this._headingText.value=o.TDE_MIGRATE_RESULTS_HEADING_COMPLETED}async _copyValidationResults(){const e=this._valdiationErrors.join(s.EOL),t=0===e.length?o.TDE_MIGRATE_VALIDATION_COMPLETED:o.TDE_MIGRATE_VALIDATION_COMPLETED_ERRORS(e);return r.env.clipboard.writeText(t)}async _updateResultsInfoBox(e){const i=this._resultsTable.selectedRows??[],n=[];if(i.length>0)for(let e=0;e<i.length;e++){const r=i[e],a=this._validationResult[r],s=a[u.status],l=a[u.errors];n.push(o.TDE_MIGRATE_VALIDATION_STATUS(t.ValidationStatusLookup[s],l))}const r=n.length>0?n.join(s.EOL):"";e.value=r}async _createResultsTable(e){return e.modelBuilder.table().withProps({columns:[{value:"test",name:o.TDE_MIGRATE_COLUMN_DATABASES,type:n.ColumnType.text,width:380,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"},{value:"image",name:"",type:n.ColumnType.icon,width:20,headerCssClass:"no-borders display-none",cssClass:"no-borders align-with-header"},{value:"message",name:o.TDE_MIGRATE_COLUMN_STATUS,type:n.ColumnType.text,width:150,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"}],data:[],width:580,height:300,CSSStyles:{"margin-top":"10px","margin-bottom":"10px"}}).component()}async _updateTableFromOperationResult(e){let t=!1;e.result.forEach((e=>{const i=this._dbRowsMap.get(e.name);this._validationResult[i][u.updated]||(t=!0,this._updateValidationResultRow(e.name,e.success,e.message))})),t&&await this._updateTableData()}async _updateTableResultRow(e,t,i,n){this._dbRowsMap.has(e)&&(this._updateValidationResultRow(e,t,i),t||(0,a.logError)(a.TelemetryViews.TdeMigrationDialog,n,{}),await this._updateTableData(),this._completedDatabasesCount<this._model.tdeMigrationConfig.getTdeEnabledDatabasesCount()&&(this._completedDatabasesCount++,this._updateProgressText()))}_updateValidationResultRow(e,t,i){const n=this._dbRowsMap.get(e),r=this._buildRow({name:e,dbState:t?c.TdeDatabaseMigrationState.Succeeded:c.TdeDatabaseMigrationState.Failed,message:i},!0);this._validationResult[n]=r}async _updateTableData(){const e=this._validationResult.map((e=>[e[u.name],e[u.icon],e[u.status]]));await this._resultsTable.updateProperty("data",e)}async _populateTableResults(){this._validationResult=this._tdeMigrationResult.dbList.map((e=>this._buildRow(e))),this._dbRowsMap=this._validationResult.reduce((function(e,t,i){const n=t[u.name];return e.set(n,i),e}),new Map),await this._updateTableData()}_buildRow(e,i=!1){const n=t.ValidationStatusLookup[e.dbState],r=e.dbState===c.TdeDatabaseMigrationState.Failed||e.dbState===c.TdeDatabaseMigrationState.Canceled?o.TDE_MIGRATE_STATUS_ERROR(e.dbState,e.message):n;return[e.name,{icon:this._getValidationStateImage(e.dbState),title:r},t.ValidationStatusLookup[e.dbState],e.message,n,i]}_getValidationStateImage(e){switch(e){case c.TdeDatabaseMigrationState.Canceled:return l.IconPathHelper.cancel;case c.TdeDatabaseMigrationState.Failed:return l.IconPathHelper.error;case c.TdeDatabaseMigrationState.Running:return l.IconPathHelper.inProgressMigration;case c.TdeDatabaseMigrationState.Succeeded:return l.IconPathHelper.completedMigration;default:return l.IconPathHelper.notStartedMigration}}}},2495:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidateIrDialog=t.ValidationStatusLookup=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(4294),s=i(1285),l=i(2037),c=i(1386),u=i(3963),d=i(7475),p=i(3186);var h,_,g;!function(e){e.GatewayTimeout="504\r\n"}(h||(h={})),function(e){e.ConnectionTimeoutError="ConnectionTimeoutError"}(_||(_={})),function(e){e[e.message=0]="message",e[e.icon=1]="icon",e[e.status=2]="status",e[e.errors=3]="errors",e[e.state=4]="state"}(g||(g={})),t.ValidationStatusLookup={[s.ValidateIrState.Canceled]:o.VALIDATION_STATE_CANCELED,[s.ValidateIrState.Failed]:o.VALIDATION_STATE_FAILED,[s.ValidateIrState.Pending]:o.VALIDATION_STATE_PENDING,[s.ValidateIrState.Running]:o.VALIDATION_STATE_RUNNING,[s.ValidateIrState.Succeeded]:o.VALIDATION_STATE_SUCCEEDED,default:void 0},t.ValidateIrDialog=class{constructor(e,t){this._canceled=!0,this._disposables=[],this._isOpen=!1,this._validationResult=[],this._valdiationErrors=[],this._model=e,this._onClosed=t}async openDialog(e,t){if(!this._isOpen){this._isOpen=!0,this._dialog=n.window.createModelViewDialog(e,"ValidateIrDialog",600);const i=this._initializeDialog(this._dialog);return n.window.openDialog(this._dialog),await i,this._runValidation(t)}}async _initializeDialog(e){return new Promise(((t,i)=>{e.registerContent((async n=>{try{e.okButton.label=o.VALIDATE_IR_DONE_BUTTON,e.okButton.position="left",e.okButton.enabled=!1,e.cancelButton.position="left",this._disposables.push(e.cancelButton.onClick((e=>{this._canceled=!0,this._saveResults(),this._onClosed()}))),this._disposables.push(e.okButton.onClick((e=>this._onClosed())));const i=n.modelBuilder.text().withProps({value:o.VALIDATE_IR_HEADING,CSSStyles:{"font-size":"13px","font-weight":"400","margin-bottom":"10px"}}).component();this._startLoader=n.modelBuilder.loadingComponent().withProps({loading:!1,CSSStyles:{margin:"5px 0 0 10px"}}).component();const r=n.modelBuilder.flexContainer().withLayout({flexFlow:"row",justifyContent:"flex-start"}).withItems([i,this._startLoader],{flex:"0 0 auto"}).component();this._resultsTable=await this._createResultsTable(n),this._startButton=n.modelBuilder.button().withProps({iconPath:c.IconPathHelper.restartDataCollection,iconHeight:18,iconWidth:18,width:100,label:o.VALIDATE_IR_START_VALIDATION}).component(),this._cancelButton=n.modelBuilder.button().withProps({iconPath:c.IconPathHelper.stop,iconHeight:18,iconWidth:18,width:100,label:o.VALIDATE_IR_STOP_VALIDATION,enabled:!1}).component(),this._revalidationButton=n.modelBuilder.button().withProps({iconPath:c.IconPathHelper.redo,iconHeight:18,iconWidth:18,width:170,label:o.VALIDATE_IR_UNSUCCESSFUL_REVALIDATION,enabled:!1}).component(),this._copyButton=n.modelBuilder.button().withProps({iconPath:c.IconPathHelper.copy,iconHeight:18,iconWidth:18,width:140,label:o.VALIDATE_IR_COPY_RESULTS,enabled:!1}).component(),this._disposables.push(this._startButton.onDidClick((async e=>await this._runValidation()))),this._disposables.push(this._revalidationButton.onDidClick((async e=>await this._runUnsuccessfulRevalidation()))),this._disposables.push(this._cancelButton.onDidClick((e=>{this._cancelButton.enabled=!1,this._canceled=!0}))),this._disposables.push(this._copyButton.onDidClick((async e=>this._copyValidationResults())));const a=n.modelBuilder.toolbarContainer().withToolbarItems([{component:this._startButton},{component:this._cancelButton},{component:this._revalidationButton},{component:this._copyButton}]).component(),s=n.modelBuilder.text().withProps({value:o.VALIDATE_IR_RESULTS_HEADING,CSSStyles:{"font-size":"16px","font-weight":"600","margin-bottom":"10px"}}).component(),l=n.modelBuilder.inputBox().withProps({inputType:"text",height:200,multiline:!0,CSSStyles:{overflow:"none auto"}}).component();this._disposables.push(this._resultsTable.onRowSelected((async e=>await this._updateResultsInfoBox(l))));const u=n.modelBuilder.flexContainer().withItems([r,a,this._resultsTable,s,l],{flex:"0 0 auto"}).withProps({CSSStyles:{margin:"0 0 0 15px"}}).withLayout({flexFlow:"column",height:"100%",width:565}).component();this._disposables.push(n.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),await n.initializeModel(u),t()}catch(e){i(e)}}))}))}_saveResults(){const e=this._validationResults();switch(this._model._targetType){case p.MigrationTargetType.SQLDB:this._model._validateIrSqlDb=e;break;case p.MigrationTargetType.SQLMI:this._model._validateIrSqlMi=e;break;case p.MigrationTargetType.SQLVM:this._model._validateIrSqlVm=e}}_validationResults(){return this._validationResult.map((e=>{const t=e[g.state],i=!this._canceled||t!==s.ValidateIrState.Running&&t!==s.ValidateIrState.Pending?t:s.ValidateIrState.Canceled;return{errors:e[g.errors]??[],state:i}}))}async _runValidation(e){try{this._startLoader.loading=!0,this._startButton.enabled=!1,this._revalidationButton.enabled=!1,this._cancelButton.enabled=!0,this._copyButton.enabled=!1,this._dialog.okButton.enabled=!1,this._dialog.cancelButton.enabled=!0,this._model.isIrTargetValidated&&e?await this._initializeResults(e):await this._validate()}finally{this._startLoader.loading=!1,this._startButton.enabled=!0,this._revalidationButton.enabled=!this._model.isIrTargetValidated,this._cancelButton.enabled=!1,this._copyButton.enabled=!0,this._dialog.okButton.enabled=this._model.isIrTargetValidated,this._dialog.cancelButton.enabled=!this._model.isIrTargetValidated}}async _runUnsuccessfulRevalidation(e){try{this._startLoader.loading=!0,this._startButton.enabled=!1,this._revalidationButton.enabled=!1,this._cancelButton.enabled=!0,this._copyButton.enabled=!1,this._dialog.okButton.enabled=!1,this._dialog.cancelButton.enabled=!0,this._model.isIrTargetValidated||await this._revalidate()}finally{this._startLoader.loading=!1,this._startButton.enabled=!0,this._revalidationButton.enabled=!this._model.isIrTargetValidated,this._cancelButton.enabled=!1,this._copyButton.enabled=!0,this._dialog.okButton.enabled=this._model.isIrTargetValidated,this._dialog.cancelButton.enabled=!this._model.isIrTargetValidated}}async _copyValidationResults(){const e=this._valdiationErrors.join(l.EOL),t=0===e.length?o.VALIDATE_IR_VALIDATION_COMPLETED:o.VALIDATE_IR_VALIDATION_COMPLETED_ERRORS(e);return r.env.clipboard.writeText(t)}async _updateResultsInfoBox(e){const i=this._resultsTable.selectedRows??[],n=[];if(i.length>0)for(let e=0;e<i.length;e++){const r=i[e],a=this._validationResult[r],s=a[g.status],l=a[g.errors];n.push(o.VALIDATE_IR_VALIDATION_STATUS(t.ValidationStatusLookup[s],l))}const r=n.length>0?n.join(l.EOL):"";e.value=r}async _createResultsTable(e){return e.modelBuilder.table().withProps({columns:[{value:"test",name:o.VALIDATE_IR_COLUMN_VALIDATION_STEPS,type:n.ColumnType.text,width:380,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"},{value:"image",name:"",type:n.ColumnType.icon,width:20,headerCssClass:"no-borders display-none",cssClass:"no-borders align-with-header"},{value:"message",name:o.VALIDATE_IR_COLUMN_STATUS,type:n.ColumnType.text,width:150,headerCssClass:"no-borders",cssClass:"no-borders align-with-header"}],data:[],width:580,height:300,CSSStyles:{"margin-top":"10px","margin-bottom":"10px"}}).component()}async _initializeResults(e){this._valdiationErrors=[],this._model.isSqlDbTarget?await this._initSqlDbIrResults(e):await this._initTestIrResults(e)}async _validate(){this._canceled=!1,await this._initializeResults(),this._model.isSqlDbTarget?await this._validateSqlDbMigration():await this._validateDatabaseMigration(),this._saveResults()}async _revalidate(){await this._initIrResultsForRevalidation(),this._model.isSqlDbTarget?await this._validateSqlDbMigration(!0):await this._validateDatabaseMigration(!0),this._saveResults()}async _validateDatabaseMigration(e=!1){const t=await(0,u.getSourceConnectionProfile)(),i=t?.serverName,n=(0,u.getEncryptConnectionValue)(t),r=(0,u.getTrustServerCertificateValue)(t),l=this._model._databasesForMigration.length,c=this._model._databasesForMigration[0],p=this._model._databaseBackup.networkShares[0];let h=0;const _=async(e,t,l,c,u,p)=>{try{await this._updateValidateIrResults(h,s.ValidateIrState.Running);const d=await(0,a.validateIrDatabaseMigrationSettings)(this._model,i,n,r,e,t,l,c,u,p);if(!(d?.errors?.length>0))return await this._updateValidateIrResults(h,s.ValidateIrState.Succeeded),!0;{const i=d.errors.map((i=>o.VALIDATE_IR_VALIDATION_RESULT_ERROR(e,t.networkShareLocation,i)));await this._updateValidateIrResults(h,s.ValidateIrState.Failed,i)}}catch(t){const i=this._formatError(t);(0,d.logError)(d.TelemetryViews.ValidIrDialog,i.message,t),await this._updateValidateIrResults(h,s.ValidateIrState.Failed,[o.VALIDATE_IR_VALIDATION_RESULT_API_ERROR(e,i)])}return!1};if(!(e&&this._validationResult[h][g.state]===s.ValidateIrState.Succeeded||await _(c,p,!0,!1,!1,!1)))return this._canceled=!0,void await this._updateValidateIrResults(h+1,s.ValidateIrState.Canceled,[o.VALIDATE_IR_VALIDATION_CANCELED]);if(h++,e&&this._validationResult[h][g.state]===s.ValidateIrState.Succeeded||await _(c,p,!1,!1,!1,!0))for(let t=0;t<l;t++){const i=this._model._databasesForMigration[t],n=this._model._databaseBackup.networkShares[t];if(h++,this._canceled){await this._updateValidateIrResults(h,s.ValidateIrState.Canceled,[o.VALIDATE_IR_VALIDATION_CANCELED]);break}if(e&&this._validationResult[h][g.state]===s.ValidateIrState.Succeeded||await _(i,n,!1,!1,!0,!1),h++,this._canceled){await this._updateValidateIrResults(h,s.ValidateIrState.Canceled,[o.VALIDATE_IR_VALIDATION_CANCELED]);break}e&&this._validationResult[h][g.state]===s.ValidateIrState.Succeeded||await _(i,n,!1,!0,!1,!1)}else await this._updateValidateIrResults(h+1,s.ValidateIrState.Canceled,[o.VALIDATE_IR_VALIDATION_CANCELED])}_formatError(e){return e?.message?.startsWith(h.GatewayTimeout)?{name:_.ConnectionTimeoutError,message:o.VALIDATE_IR_ERROR_GATEWAY_TIMEOUT}:e}async _validateSqlDbMigration(e=!1){const t=await(0,u.getSourceConnectionProfile)(),i=t?.serverName,n=(0,u.getEncryptConnectionValue)(t),r=(0,u.getTrustServerCertificateValue)(t),l=this._model._databasesForMigration.length,c=this._model._databasesForMigration[0],p=this._model._sourceTargetMapping.get(c)?.databaseName??"";let h=0;const _=async(e,t,l,c,u)=>{try{await this._updateValidateIrResults(h,s.ValidateIrState.Running);const d=await(0,a.validateIrSqlDatabaseMigrationSettings)(this._model,i,n,r,e,t,l,c,u);if(!(d?.errors?.length>0))return await this._updateValidateIrResults(h,s.ValidateIrState.Succeeded),!0;{const i=d.errors.map((i=>o.VALIDATE_IR_SQLDB_VALIDATION_RESULT_ERROR(e,t,i)));await this._updateValidateIrResults(h,s.ValidateIrState.Failed,i)}}catch(t){const i=this._formatError(t);(0,d.logError)(d.TelemetryViews.ValidIrDialog,i.message,t),await this._updateValidateIrResults(h,s.ValidateIrState.Failed,[o.VALIDATE_IR_VALIDATION_RESULT_API_ERROR(e,i)])}return!1};if(!(e&&this._validationResult[h][g.state]===s.ValidateIrState.Succeeded||await _(c,p,!0,!1,!1)))return this._canceled=!0,void await this._updateValidateIrResults(h+1,s.ValidateIrState.Canceled,[o.VALIDATE_IR_VALIDATION_CANCELED]);for(let t=0;t<l;t++){const i=this._model._databasesForMigration[t],n=this._model._sourceTargetMapping.get(i)?.databaseName??"";if(h++,this._canceled){await this._updateValidateIrResults(h,s.ValidateIrState.Canceled,[o.VALIDATE_IR_VALIDATION_CANCELED]);break}if(e&&this._validationResult[h][g.state]===s.ValidateIrState.Succeeded||await _(i,n,!1,!0,!1),h++,this._canceled){await this._updateValidateIrResults(h,s.ValidateIrState.Canceled,[o.VALIDATE_IR_VALIDATION_CANCELED]);break}e&&this._validationResult[h][g.state]===s.ValidateIrState.Succeeded||await _(i,n,!1,!1,!0)}}async _initTestIrResults(e){this._validationResult=[],this._addValidationResult(o.VALIDATE_IR_VALIDATION_RESULT_LABEL_SHIR),this._addValidationResult(o.VALIDATE_IR_VALIDATION_RESULT_LABEL_STORAGE);for(let e=0;e<this._model._databasesForMigration.length;e++){const t=this._model._databasesForMigration[e],i=this._model._databaseBackup.networkShares[e];this._addValidationResult(o.VALIDATE_IR_VALIDATION_RESULT_LABEL_SOURCE_DATABASE(t)),this._addValidationResult(o.VALIDATE_IR_VALIDATION_RESULT_LABEL_NETWORK_SHARE(i.networkShareLocation))}if(e&&e.length>0)for(let t=0;t<e.length;t++)await this._updateValidateIrResults(t,e[t].state,e[t].errors,!1);const t=this._validationResult.map((e=>[e[g.message],e[g.icon],e[g.status]]));await this._resultsTable.updateProperty("data",t)}async _initIrResultsForRevalidation(e){this._valdiationErrors=[],this._canceled=!1;let t=0;this._validationResult.forEach((async e=>{e[g.state]!==s.ValidateIrState.Succeeded?await this._updateValidateIrResults(t++,s.ValidateIrState.Pending):t++}))}async _initSqlDbIrResults(e){if(this._validationResult=[],this._addValidationResult(o.VALIDATE_IR_VALIDATION_RESULT_LABEL_SHIR),this._model._databasesForMigration.forEach((e=>{this._addValidationResult(o.VALIDATE_IR_VALIDATION_RESULT_LABEL_SOURCE_DATABASE(e));const t=this._model._sourceTargetMapping.get(e)?.databaseName??"";this._addValidationResult(o.VALIDATE_IR_VALIDATION_RESULT_LABEL_TARGET_DATABASE(t))})),e&&e.length>0)for(let t=0;t<e.length;t++)await this._updateValidateIrResults(t,e[t].state,e[t].errors,!1);const t=this._validationResult.map((e=>[e[g.message],e[g.icon],e[g.status]]));await this._resultsTable.updateProperty("data",t)}_addValidationResult(e){this._validationResult.push([e,{icon:c.IconPathHelper.notStartedMigration,title:t.ValidationStatusLookup[s.ValidateIrState.Pending]},t.ValidationStatusLookup[s.ValidateIrState.Pending],[],s.ValidateIrState.Pending])}async _updateValidateIrResults(e,t,i=[],n=!0){if(t===s.ValidateIrState.Canceled)for(let n=e;n<this._validationResult.length;n++)await this._updateResults(n,t,i);else await this._updateResults(e,t,i);if(n){const e=this._validationResult.map((e=>[e[g.message],e[g.icon],e[g.status]]));await this._resultsTable.updateProperty("data",e)}this._valdiationErrors.push(...i)}async _updateResults(e,i,n=[]){const r=this._validationResult[e],a=t.ValidationStatusLookup[i],l=i===s.ValidateIrState.Failed&&n.length>0?o.VALIDATE_IR_VALIDATION_STATUS_ERROR_COUNT(a,n.length):a,c=n.length>0?o.VALIDATE_IR_VALIDATION_STATUS_ERROR(a,n):l;this._validationResult[e]=[r[g.message],{icon:this._getValidationStateImage(i),title:c},l,n,i]}_getValidationStateImage(e){switch(e){case s.ValidateIrState.Canceled:return c.IconPathHelper.cancel;case s.ValidateIrState.Failed:return c.IconPathHelper.error;case s.ValidateIrState.Running:return c.IconPathHelper.inProgressMigration;case s.ValidateIrState.Succeeded:return c.IconPathHelper.completedMigration;case s.ValidateIrState.Pending:default:return c.IconPathHelper.notStartedMigration}}}},84:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginMigrationModel=t.GetLoginMigrationStepString=t.InternalServerError=t.ConnectingToTargetFailed=t.CollectingTargetLoginsFailed=t.CollectingSourceLoginsFailed=t.LoginMigrationStep=t.LoginType=void 0;const n=i(8479),r=i(2074),o=i(3963),a=i(7475);var s,l;function c(e){switch(e){case l.NotStarted:return r.NOT_STARTED;case l.MigrateLogins:return r.MIGRATE_LOGINS;case l.EstablishUserMapping:return r.ESTABLISH_USER_MAPPINGS;case l.MigrateServerRolesAndSetPermissions:return r.MIGRATE_SERVER_ROLES_AND_SET_PERMISSIONS;case l.MigrationCompleted:return r.LOGIN_MIGRATION_COMPLETED;default:return""}}!function(e){e.Windows_Login="windows_login",e.SQL_Login="sql_login",e.Mixed_Mode="mixed_mode"}(s||(t.LoginType=s={})),function(e){e[e.NotStarted=-1]="NotStarted",e[e.MigrateLogins=0]="MigrateLogins",e[e.EstablishUserMapping=1]="EstablishUserMapping",e[e.MigrateServerRolesAndSetPermissions=2]="MigrateServerRolesAndSetPermissions",e[e.MigrationCompleted=3]="MigrationCompleted"}(l||(t.LoginMigrationStep=l={})),t.CollectingSourceLoginsFailed="Collecting source logins failed",t.CollectingTargetLoginsFailed="Collecting target logins failed",t.ConnectingToTargetFailed="Connecting to target failed",t.InternalServerError="Login Migrations Internal Server Error",t.GetLoginMigrationStepString=c,t.LoginMigrationModel=class{constructor(){this.collectedSourceLogins=!1,this.collectedTargetLogins=!1,this.loginsOnSource=[],this.loginsOnTarget=[],this.errorCountMap=new Map,this.durationPerStep=new Map,this._currentStepIdx=0,this._loginMigrationSteps=[],this.errorCountList=[],this.resultsPerStep=new Map,this._logins=new Map,this.setLoginMigrationSteps()}get currentStep(){return this._currentStepIdx>=this._loginMigrationSteps.length?l.MigrationCompleted:this._loginMigrationSteps[this._currentStepIdx]}get isMigrationComplete(){return this._currentStepIdx===this._loginMigrationSteps.length}get selectedWindowsLogins(){return this.loginsForMigration.some((e=>e.loginType.toLocaleLowerCase()===s.Windows_Login))}get selectedAllWindowsLogins(){return this.loginsForMigration.every((e=>e.loginType.toLocaleLowerCase()===s.Windows_Login))}get selectedAllSQLLogins(){return this.loginsForMigration.every((e=>e.loginType.toLocaleLowerCase()===s.SQL_Login))}get loginsAuthType(){return this.selectedAllWindowsLogins?s.Windows_Login:this.selectedAllSQLLogins?s.SQL_Login:s.Mixed_Mode}get hasSystemError(){return!!this.loginMigrationsError}async MigrateLogins(e){return this.addNewLogins(e._loginMigrationModel.loginsForMigration.map((e=>e.loginName))),await this.runLoginMigrationStep(l.MigrateLogins,e)}async EstablishUserMappings(e){return await this.runLoginMigrationStep(l.EstablishUserMapping,e)}async MigrateServerRolesAndSetPermissions(e){return await this.runLoginMigrationStep(l.MigrateServerRolesAndSetPermissions,e)}GetDisplayResults(e){let t=[],i=this.getLogin(e);for(const e of this._loginMigrationSteps){let r={stepName:c(e),state:n.MultiStepState.Pending,errors:[]};if(i?.statusPerStep.has(e)){let t=i.statusPerStep.get(e);r.state=t.status,r.errors=t.errors}else e===this.currentStep&&(r.state=n.MultiStepState.Running);t.push(r)}return t}setErrorCountMapPerStep(e,t){const i=new Map;if(!t.exceptionMap)return;for(const e of Object.values(t.exceptionMap))for(const t of e){const e=i.get(t.ErrorCodeString)??0;i.set(t.ErrorCodeString,e+1)}const n=JSON.stringify(Array.from(i.entries()).reduce(((e,[t,i])=>(e[t]=i,e)),{}));this.errorCountMap.set(l[e],n),this.errorCountList.push(`[${l[e]}: ${n}]`)}setDurationPerStep(e,t){this.durationPerStep.set(l[e],t.elapsedTime)}setLoginMigrationSteps(e=[]){this._loginMigrationSteps=[],0===e.length?(this._loginMigrationSteps.push(l.MigrateLogins),this._loginMigrationSteps.push(l.EstablishUserMapping),this._loginMigrationSteps.push(l.MigrateServerRolesAndSetPermissions)):this._loginMigrationSteps=e}addNewLogins(e){e.forEach((e=>this.addNewLogin(e)))}addLoginMigrationResults(e,t){const i=this.getExceptionMapWithNormalizedKeys(t.exceptionMap);this._currentStepIdx=this._loginMigrationSteps.findIndex((t=>t===e))+1;for(const t of this._logins.keys()){const r=t in i?n.MultiStepState.Failed:n.MultiStepState.Succeeded,o=t in i?this.extractErrors(i,t):[];if(this.addStepStateForLogin(t,e,r,o),this.isMigrationComplete){const e=this.didAnyStepFail(t)?n.MultiStepState.Failed:n.MultiStepState.Succeeded;this.markLoginStatus(t,e)}}this.updateLoginMigrationResults(t),this.setErrorCountMapPerStep(e,t),this.setDurationPerStep(e,t)}updateLoginMigrationResults(e){if(this.loginMigrationsResult&&this.loginMigrationsResult.exceptionMap)for(var t in e.exceptionMap)this.loginMigrationsResult.exceptionMap[t]=[...this.loginMigrationsResult.exceptionMap[t]||[],e.exceptionMap[t]];else this.loginMigrationsResult=e}reportException(e,t){this._currentStepIdx=this._loginMigrationSteps.findIndex((t=>t===e))+1;for(const i of this._logins.keys()){let r=[t.message];this.addStepStateForLogin(i,e,n.MultiStepState.Failed,r),this.markRemainingSteps(i,n.MultiStepState.Canceled),this.markLoginStatus(i,n.MultiStepState.Failed)}this.markMigrationComplete()}async runMigrateLoginsTask(e,t,i){try{var n=await i.migrationService.migrateLogins(e,t,i._loginMigrationModel.loginsForMigration.map((e=>e.loginName)),i._aadDomainName);return this.addLoginMigrationResults(l.MigrateLogins,n),!0}catch(e){return(0,a.logError)(a.TelemetryViews.LoginMigrationWizard,"MigratinLoginsFailed",e),this.reportException(l.MigrateLogins,e),this.loginMigrationsError=e,!1}}async runEstablishUserMappingTask(e,t,i){try{var n=await i.migrationService.establishUserMapping(e,t,i._loginMigrationModel.loginsForMigration.map((e=>e.loginName)),i._aadDomainName);return this.addLoginMigrationResults(l.EstablishUserMapping,n),!0}catch(e){return(0,a.logError)(a.TelemetryViews.LoginMigrationWizard,"EstablishingUserMappingFailed",e),this.reportException(l.EstablishUserMapping,e),this.loginMigrationsError=e,!1}}async runMigrateServerRolesAndSetPermissionsTask(e,t,i){try{var n=await i.migrationService.migrateServerRolesAndSetPermissions(e,t,i._loginMigrationModel.loginsForMigration.map((e=>e.loginName)),i._aadDomainName);return this.addLoginMigrationResults(l.MigrateServerRolesAndSetPermissions,n),!0}catch(e){return(0,a.logError)(a.TelemetryViews.LoginMigrationWizard,"MigratingServerRolesAndSettingPermissionsFailed",e),this.reportException(l.MigrateServerRolesAndSetPermissions,e),this.loginMigrationsError=e,!1}}async runLoginMigrationStep(e,t){const i=await(0,o.getSourceConnectionString)(),n=await(0,o.getTargetConnectionString)(t.targetServerName,t._targetServerInstance.id,t._targetUserName,t._targetPassword,!0,!0);switch(e){case l.MigrateLogins:return await this.runMigrateLoginsTask(i,n,t);case l.EstablishUserMapping:return await this.runEstablishUserMappingTask(i,n,t);case l.MigrateServerRolesAndSetPermissions:return await this.runMigrateServerRolesAndSetPermissionsTask(i,n,t)}return!1}getLogin(e){return this._logins.get(e.toLocaleLowerCase())}addNewLogin(e,t=n.MultiStepState.Pending){let i={loginName:e,overallStatus:t,statusPerStep:new Map};this._logins.set(e.toLocaleLowerCase(),i)}addStepStateForLogin(e,t,i,r=[]){this._logins.has(e)||this.addNewLogin(e,n.MultiStepState.Running);const o=this.getLogin(e);o&&(o.overallStatus=n.MultiStepState.Running,o.statusPerStep.set(t,{loginName:e,stepName:t,status:i,errors:r}))}markLoginStatus(e,t){this._logins.has(e)||this.addNewLogin(e,n.MultiStepState.Running);let i=this.getLogin(e);i&&(i.overallStatus=t)}didAnyStepFail(e){const t=this.getLogin(e);return!!t&&Object.values(t.statusPerStep).every((e=>e===n.MultiStepState.Failed))}getExceptionMapWithNormalizedKeys(e){return Object.keys(e).reduce(((t,i)=>(t[i.toLocaleLowerCase()]=e[i],t)),{})}extractErrors(e,t){return e[t].map((e=>void 0!==e.InnerException&&null!==e.InnerException?e.InnerException.Message:e.Message))}markMigrationComplete(){this._currentStepIdx=this._loginMigrationSteps.length}markRemainingSteps(e,t){for(let i=this._currentStepIdx;i<this._loginMigrationSteps.length;i++)this.addStepStateForLogin(e,this._loginMigrationSteps[i],t,[])}}},1419:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentMigrations=t.getSelectedServiceStatus=t.isServiceContextValid=t.MigrationLocalStorage=void 0;const n=i(9072),r=i(4294),o=i(3186),a=i(2074),s=i(3963);class l{static setExtensionContext(e){l.context=e}static async getMigrationServiceContext(){const e=await(0,s.getSourceConnectionProfile)();if(e){const t=`${this.mementoToken}.${e.serverName}.serviceContext`;return(0,o.deepClone)(await this.context.globalState.get(t))||{}}return{}}static async saveMigrationServiceContext(e,t){const i=await(0,s.getSourceConnectionProfile)();if(i){const n=`${this.mementoToken}.${i.serverName}.serviceContext`;await this.context.globalState.update(n,(0,o.deepClone)(e)),t.fire({connectionId:i.connectionId})}}static async refreshMigrationAzureAccount(e,t,i){if((0,o.isAccountTokenStale)(e.azureAccount)){const t=(await n.accounts.getAllAccounts()).find((t=>!(0,o.isAccountTokenStale)(t)&&t.key.accountId===e.azureAccount?.key.accountId));t&&(await(0,r.getSubscriptions)(t)).find((t=>t.id===e.subscription?.id))&&(e.azureAccount=t,await this.saveMigrationServiceContext(e,i))}}}function c(e){return!(0,o.isAccountTokenStale)(e.azureAccount)&&void 0!==e.location?.id&&void 0!==e.migrationService?.id&&void 0!==e.resourceGroup?.id&&void 0!==e.subscription?.id&&void 0!==e.tenant?.id}t.MigrationLocalStorage=l,l.mementoToken="sqlmigration.databaseMigrations",t.isServiceContextValid=c,t.getSelectedServiceStatus=async function(){const e=await l.getMigrationServiceContext(),t=e?.migrationService?.name;return t&&c(e)?a.MIGRATION_SERVICE_SERVICE_PROMPT(t):a.MIGRATION_SERVICE_SELECT_SERVICE_PROMPT},t.getCurrentMigrations=async function(){const e=await l.getMigrationServiceContext();return c(e)?await(0,r.getServiceMigrations)(e.azureAccount,e.subscription,e.migrationService?.id):[]}},2417:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationWizardPage=void 0;const n=i(9073);t.MigrationWizardPage=class{constructor(e,t,i){this.wizard=e,this.wizardPage=t,this.migrationStateModel=i,this.stateChanges=[],this.queueActive=!1}registerWizardContent(){return new Promise((async(e,t)=>{this.wizardPage.registerContent((async i=>{try{await this.registerContent(i),e()}catch(e){t(e)}finally{t(new Error)}}))}))}getwizardPage(){return this.wizardPage}async onStateChangeEvent(e){this.stateChanges.push((()=>this.handleStateChange(e))),await this.enableQueueProcessor()}async enableQueueProcessor(){if(!this.queueActive){for(this.queueActive=!0;;){const e=this.stateChanges.shift();if(!e)break;try{await e()}catch(e){console.error(e)}}this.queueActive=!1}}canEnter(){return Promise.resolve(!0)}canLeave(){return Promise.resolve(!0)}async goToNextPage(){const e=this.wizard.currentPage;await this.wizard.setCurrentPage(e+1)}showDialogMessage(e,t,i){(0,n.ShowStatusMessageDialog)(e,t,i)}}},1285:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationStateModel=t.PerformanceDataSourceOptions=t.WizardEntryPoint=t.Page=t.FileStorageType=t.NetworkContainerType=t.MigrationMode=t.AssessmentRuleId=t.MigrationSourceAuthenticationType=t.ServiceTier=t.State=t.ValidateIrState=void 0;const n=i(9072),r=i(9496),o=i(4294),a=i(2074),s=i(3403),l=i(2277),c=i(7475),u=i(3186),d=i(3963),p=i(84),h=i(349),_=i(7184),g=s.loadMessageBundle(i(1017).join(__dirname,"models/stateMachine.ts"));var m,S,f,E,T,C,y,v,R,A,I;!function(e){e.Pending="Pending",e.Running="Running",e.Succeeded="Succeeded",e.Failed="Failed",e.Canceled="Canceled"}(m||(t.ValidateIrState=m={})),function(e){e[e.INIT=0]="INIT",e[e.COLLECTING_SOURCE_INFO=1]="COLLECTING_SOURCE_INFO",e[e.COLLECTION_SOURCE_INFO_ERROR=2]="COLLECTION_SOURCE_INFO_ERROR",e[e.TARGET_SELECTION=3]="TARGET_SELECTION",e[e.TARGET_SELECTION_ERROR=4]="TARGET_SELECTION_ERROR",e[e.AZURE_SERVER_SELECTION=5]="AZURE_SERVER_SELECTION",e[e.AZURE_SERVER_SELECTION_ERROR=6]="AZURE_SERVER_SELECTION_ERROR",e[e.AZURE_DB_BACKUP=7]="AZURE_DB_BACKUP",e[e.AZURE_DB_BACKUP_ERROR=8]="AZURE_DB_BACKUP_ERROR",e[e.MIGRATION_AGENT_CREATION=9]="MIGRATION_AGENT_CREATION",e[e.MIGRATION_AGENT_SELECTION=10]="MIGRATION_AGENT_SELECTION",e[e.MIGRATION_AGENT_ERROR=11]="MIGRATION_AGENT_ERROR",e[e.MIGRATION_START=12]="MIGRATION_START",e[e.NO_AZURE_SERVER=13]="NO_AZURE_SERVER",e[e.EXIT=14]="EXIT"}(S||(t.State=S={})),function(e){e.GeneralPurpose="GeneralPurpose",e.BusinessCritical="BusinessCritical"}(f||(t.ServiceTier=f={})),function(e){e.Integrated="WindowsAuthentication",e.Sql="SqlAuthentication"}(E||(t.MigrationSourceAuthenticationType=E={})),function(e){e.TdeEnabled="TdeEnabled"}(T||(t.AssessmentRuleId=T={})),function(e){e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE"}(C||(t.MigrationMode=C={})),function(e){e[e.FILE_SHARE=0]="FILE_SHARE",e[e.BLOB_CONTAINER=1]="BLOB_CONTAINER",e[e.NETWORK_SHARE=2]="NETWORK_SHARE"}(y||(t.NetworkContainerType=y={})),function(e){e.FileShare="FileShare",e.AzureBlob="AzureBlob",e.None="None"}(v||(t.FileStorageType=v={})),function(e){e[e.ImportAssessment=0]="ImportAssessment",e[e.DatabaseSelector=1]="DatabaseSelector",e[e.SKURecommendation=2]="SKURecommendation",e[e.TargetSelection=3]="TargetSelection",e[e.IntegrationRuntime=4]="IntegrationRuntime",e[e.DatabaseBackup=5]="DatabaseBackup",e[e.Summary=6]="Summary"}(R||(t.Page=R={})),function(e){e.Default="Default",e.SaveAndClose="SaveAndClose",e.RestartMigration="RestartMigration"}(A||(t.WizardEntryPoint=A={})),function(e){e.CollectData="CollectData",e.OpenExisting="OpenExisting"}(I||(t.PerformanceDataSourceOptions=I={})),t.MigrationStateModel=class{constructor(e,t){this.extensionContext=e,this.migrationService=t,this._sourceTargetMapping=new Map,this._xEventsFilesFolderPath="",this._runAssessments=!0,this._databasesForMigration=[],this._databaseInfosForMigrationMap=new Map,this._databaseInfosForMigration=[],this._didUpdateDatabasesForMigration=!1,this._didDatabaseMappingChange=!1,this._vmDbs=[],this._miDbs=[],this._sqldbDbs=[],this._validateIrSqlDb=[],this._validateIrSqlMi=[],this._validateIrSqlVm=[],this._refreshGetSkuRecommendationIntervalInMinutes=10,this._performanceDataQueryIntervalInSeconds=30,this._staticDataQueryIntervalInSeconds=60,this._numberOfPerformanceDataQueryIterations=19,this._defaultDataPointStartTime="1900-01-01 00:00:00",this._defaultDataPointEndTime="2200-01-01 00:00:00",this._recommendationTargetPlatforms=[u.MigrationTargetType.SQLDB,u.MigrationTargetType.SQLMI,u.MigrationTargetType.SQLVM],this.refreshPerfDataCollectionFrequency=1e3*this._performanceDataQueryIntervalInSeconds,this.refreshGetSkuRecommendationFrequency=a.TIME_IN_MINUTES(this._refreshGetSkuRecommendationIntervalInMinutes),this._sessionId=(0,l.v4)(),this.tdeMigrationConfig=new h.TdeMigrationModel,this._stateChangeEventEmitter=new r.EventEmitter,this._currentState=S.INIT,this._databaseBackup={},this._databaseBackup.networkShares=[],this._databaseBackup.blobs=[],this._databaseBackup.networkContainerType=y.BLOB_CONTAINER,this._targetDatabaseNames=[],this._assessmentReportFilePath="",this._skuRecommendationReportFilePaths=[],this.mementoString="sqlMigration.assessmentResults",this._targetManagedInstances=[],this._skuScalingFactor=100,this._skuTargetPercentile=95,this._skuEnablePreview=!1,this._skuEnableElastic=!1,this._loginMigrationModel=new p.LoginMigrationModel}get validationTargetResults(){switch(this._targetType){case u.MigrationTargetType.SQLDB:return this._validateIrSqlDb;case u.MigrationTargetType.SQLMI:return this._validateIrSqlMi;case u.MigrationTargetType.SQLVM:return this._validateIrSqlVm;default:return[]}}resetIrValidationResults(){this.isIrMigration&&(this._validateIrSqlDb=[],this._validateIrSqlMi=[],this._validateIrSqlVm=[])}get isSqlVmTarget(){return this._targetType===u.MigrationTargetType.SQLVM}get isSqlMiTarget(){return this._targetType===u.MigrationTargetType.SQLMI}get isSqlDbTarget(){return this._targetType===u.MigrationTargetType.SQLDB}get isIrTargetValidated(){const e=this.validationTargetResults??[];return e.length>1&&e.every((e=>0===e.errors.length&&e.state===m.Succeeded))}get migrationTargetServerName(){switch(this._targetType){case u.MigrationTargetType.SQLMI:case u.MigrationTargetType.SQLVM:case u.MigrationTargetType.SQLDB:return this._targetServerInstance?.name;default:return""}}get isBackupContainerNetworkShare(){return this._databaseBackup?.networkContainerType===y.NETWORK_SHARE}get isBackupContainerBlobContainer(){return this._databaseBackup?.networkContainerType===y.BLOB_CONTAINER}get isIrMigration(){return this.isSqlDbTarget||this.isBackupContainerNetworkShare}get currentState(){return this._currentState}set currentState(e){const t=this.currentState;this._currentState=e,this._stateChangeEventEmitter.fire({oldState:t,newState:this.currentState})}async getDatabases(){return(await n.connection.listDatabases(await(0,d.getSourceConnectionId)())).filter((e=>!d.excludeDatabases.includes(e)))}hasRecommendedDatabaseListChanged(){const e=this._skuRecommendationRecommendedDatabaseList,t=this._databasesForAssessment;return!(!e||!t||e.length===t.length&&e.every((function(e,i){return e===t[i]})))}async getDatabaseAssessments(e){const t=await(0,d.getSourceConnectionString)();try{const i=await this.migrationService.getAssessments(t,this._databasesForAssessment,this._xEventsFilesFolderPath??"");this._assessmentApiResponse=i,this._assessedDatabaseList=this._databasesForAssessment.slice(),i?.assessmentResult?(i.assessmentResult.items=i.assessmentResult.items?.filter((t=>e.includes(t.appliesToMigrationTargetPlatform))),i.assessmentResult.databases?.forEach((t=>t.items=t.items?.filter((t=>e.includes(t.appliesToMigrationTargetPlatform))))),this._assessmentResults={issues:this._assessmentApiResponse?.assessmentResult?.items||[],databaseAssessments:this._assessmentApiResponse?.assessmentResult?.databases?.map((e=>({name:e.name,issues:e.items,errors:e.errors})))??[],errors:this._assessmentApiResponse?.errors??[]},this._assessmentReportFilePath=i.assessmentReportPath):this._assessmentResults={issues:[],databaseAssessments:this._databasesForAssessment?.map((e=>({name:e,issues:[],errors:[]})))??[],errors:i?.errors??[]}}catch(e){this._assessmentResults={issues:[],databaseAssessments:this._databasesForAssessment?.map((e=>({name:e,issues:[],errors:[]})))??[],errors:[],assessmentError:e}}return this.generateAssessmentTelemetry().catch((e=>console.error(e))),this._assessmentResults}async getSkuRecommendations(){try{let e;const t=await(0,d.getSourceConnectionProfile)(),i=await(0,d.getSourceConnectionUri)(),r=n.dataprotocol.getProvider(t.providerId,n.DataProviderType.QueryProvider),o="SELECT SERVERPROPERTY('ServerName');",a=await r.runQueryAndReturn(i,o);if(a.rowCount>0)e=a.rows[0][0].displayValue;else{const i=(await(0,d.getSourceConnectionServerInfo)()).machineName,n=t.serverName;e=n.includes("\\")?i+"\\"+n.substring(n.indexOf("\\")+1):i}const s=await this.migrationService.getSkuRecommendations(this._skuRecommendationPerformanceLocation,this._performanceDataQueryIntervalInSeconds,this._recommendationTargetPlatforms.map((e=>e.toString())),e,this._skuTargetPercentile,this._skuScalingFactor,this._defaultDataPointStartTime,this._defaultDataPointEndTime,this._skuEnablePreview,this._databasesForAssessment);this._skuRecommendationApiResponse=s,this._skuRecommendationRecommendedDatabaseList=this._databasesForAssessment.slice(),s&&(this._skuRecommendationResults={recommendations:s},this._skuRecommendationReportFilePaths=this._skuEnableElastic?s.elasticSkuRecommendationReportPaths:s.skuRecommendationReportPaths)}catch(e){(0,c.logError)(c.TelemetryViews.SkuRecommendationWizard,"GetSkuRecommendationFailed",e),this._skuRecommendationResults={recommendations:this._skuRecommendationApiResponse,recommendationError:e}}return this.generateSkuRecommendationTelemetry().catch((e=>console.error(e))),this._skuRecommendationResults}async generateSkuRecommendationTelemetry(){try{this._skuRecommendationResults?.recommendations?.sqlDbRecommendationResults.map(((e,t)=>[e,this._skuRecommendationResults?.recommendations?.elasticSqlDbRecommendationResults[t]])).forEach((e=>{(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.SkuRecommendationWizard,c.TelemetryAction.GetDBSkuRecommendation,{sessionId:this._sessionId,recommendedSku:JSON.stringify(e[0]?.targetSku),elasticRecommendedSku:JSON.stringify(e[1]?.targetSku),recommendationDurationInMs:JSON.stringify(this._skuRecommendationResults?.recommendations?.sqlDbRecommendationDurationInMs),elasticRecommendationDurationInMs:JSON.stringify(this._skuRecommendationResults?.recommendations?.elasticSqlDbRecommendationDurationInMs)},{})})),this._skuRecommendationResults?.recommendations?.sqlMiRecommendationResults.map(((e,t)=>[e,this._skuRecommendationResults?.recommendations?.elasticSqlMiRecommendationResults[t]])).forEach((e=>{(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.SkuRecommendationWizard,c.TelemetryAction.GetMISkuRecommendation,{sessionId:this._sessionId,recommendedSku:JSON.stringify(e[0]?.targetSku),elasticRecommendedSku:JSON.stringify(e[1]?.targetSku),recommendationDurationInMs:JSON.stringify(this._skuRecommendationResults?.recommendations?.sqlMiRecommendationDurationInMs),elasticRecommendationDurationInMs:JSON.stringify(this._skuRecommendationResults?.recommendations?.elasticSqlMiRecommendationDurationInMs)},{})})),this._skuRecommendationResults?.recommendations?.sqlVmRecommendationResults.map(((e,t)=>[e,this._skuRecommendationResults?.recommendations?.elasticSqlVmRecommendationResults[t]])).forEach((e=>{(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.SkuRecommendationWizard,c.TelemetryAction.GetVMSkuRecommendation,{sessionId:this._sessionId,recommendedSku:JSON.stringify(e[0]?.targetSku),elasticRecommendedSku:JSON.stringify(e[1]?.targetSku),recommendationDurationInMs:JSON.stringify(this._skuRecommendationResults?.recommendations?.sqlVmRecommendationDurationInMs),elasticRecommendationDurationInMs:JSON.stringify(this._skuRecommendationResults?.recommendations?.elasticSqlVmRecommendationDurationInMs)},{})})),(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.SkuRecommendationWizard,c.TelemetryAction.GetInstanceRequirements,{sessionId:this._sessionId,performanceDataSource:this._skuRecommendationPerformanceDataSource,scalingFactor:this._skuScalingFactor?.toString(),targetPercentile:this._skuTargetPercentile?.toString(),enablePreviewSkus:this._skuEnablePreview?.toString(),databaseLevelRequirements:JSON.stringify(this._skuRecommendationResults?.recommendations?.instanceRequirements?.databaseLevelRequirements?.map((e=>({cpuRequirementInCores:e.cpuRequirementInCores,dataIOPSRequirement:e.dataIOPSRequirement,logIOPSRequirement:e.logIOPSRequirement,ioLatencyRequirementInMs:e.ioLatencyRequirementInMs,ioThroughputRequirementInMBps:e.ioThroughputRequirementInMBps,dataStorageRequirementInMB:e.dataStorageRequirementInMB,logStorageRequirementInMB:e.logStorageRequirementInMB,databaseName:(0,u.hashString)(e.databaseName),memoryRequirementInMB:e.memoryRequirementInMB,cpuRequirementInPercentageOfTotalInstance:e.cpuRequirementInPercentageOfTotalInstance,numberOfDataPointsAnalyzed:e.numberOfDataPointsAnalyzed,fileLevelRequirements:e.fileLevelRequirements?.map((e=>({fileType:e.fileType,sizeInMB:e.sizeInMB,readLatencyInMs:e.readLatencyInMs,writeLatencyInMs:e.writeLatencyInMs,iopsRequirement:e.iopsRequirement,ioThroughputRequirementInMBps:e.ioThroughputRequirementInMBps,numberOfDataPointsAnalyzed:e.numberOfDataPointsAnalyzed})))}))))},{cpuRequirementInCores:this._skuRecommendationResults?.recommendations?.instanceRequirements?.cpuRequirementInCores,dataStorageRequirementInMB:this._skuRecommendationResults?.recommendations?.instanceRequirements?.dataStorageRequirementInMB,logStorageRequirementInMB:this._skuRecommendationResults?.recommendations?.instanceRequirements?.logStorageRequirementInMB,memoryRequirementInMB:this._skuRecommendationResults?.recommendations?.instanceRequirements?.memoryRequirementInMB,dataIOPSRequirement:this._skuRecommendationResults?.recommendations?.instanceRequirements?.dataIOPSRequirement,logIOPSRequirement:this._skuRecommendationResults?.recommendations?.instanceRequirements?.logIOPSRequirement,ioLatencyRequirementInMs:this._skuRecommendationResults?.recommendations?.instanceRequirements?.ioLatencyRequirementInMs,ioThroughputRequirementInMBps:this._skuRecommendationResults?.recommendations?.instanceRequirements?.ioThroughputRequirementInMBps,tempDBSizeInMB:this._skuRecommendationResults?.recommendations?.instanceRequirements?.tempDBSizeInMB,aggregationTargetPercentile:this._skuRecommendationResults?.recommendations?.instanceRequirements?.aggregationTargetPercentile,numberOfDataPointsAnalyzed:this._skuRecommendationResults?.recommendations?.instanceRequirements?.numberOfDataPointsAnalyzed})}catch(e){(0,c.logError)(c.TelemetryViews.SkuRecommendationWizard,"GetSkuRecommendationTelemetryFailed",e)}}async startPerfDataCollection(e,t,i,n,o){try{if(!this.performanceCollectionInProgress()){const s=await(0,d.getSourceConnectionString)(),l=await this.migrationService.startPerfDataCollection(s,e,t,i,n);this._startPerfDataCollectionApiResponse=l,this._perfDataCollectionStartDate=this._startPerfDataCollectionApiResponse.dateTimeStarted,this._perfDataCollectionStopDate=void 0,r.window.showInformationMessage(a.AZURE_RECOMMENDATION_START_POPUP),await this.startSkuTimers(o)}}catch(e){console.log(e)}return this.generateStartDataCollectionTelemetry().catch((e=>console.error(e))),!0}async generateStartDataCollectionTelemetry(){try{(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.DataCollectionWizard,c.TelemetryAction.StartDataCollection,{sessionId:this._sessionId,timeDataCollectionStarted:this._perfDataCollectionStartDate?.toString()||""},{})}catch(e){(0,c.logError)(c.TelemetryViews.DataCollectionWizard,"StartDataCollectionTelemetryFailed",e)}}async startSkuTimers(e){const t=this;this._autoRefreshPerfDataCollectionHandle||(clearInterval(this._autoRefreshPerfDataCollectionHandle),-1!==this.refreshPerfDataCollectionFrequency&&(this._autoRefreshPerfDataCollectionHandle=setInterval((async function(){await t.refreshPerfDataCollection(),await t.isWaitingForFirstTimeRefresh()&&await e.refreshSkuRecommendationComponents()}),this.refreshPerfDataCollectionFrequency))),this._autoRefreshGetSkuRecommendationHandle||(clearTimeout(this._autoRefreshGetSkuRecommendationHandle),-1!==this.refreshGetSkuRecommendationFrequency&&(this._autoRefreshGetSkuRecommendationHandle=setTimeout((async function(){await e.refreshAzureRecommendation()}),this.refreshGetSkuRecommendationFrequency)))}async stopPerfDataCollection(){try{const e=await this.migrationService.stopPerfDataCollection();r.window.showInformationMessage(a.AZURE_RECOMMENDATION_STOP_POPUP),this._stopPerfDataCollectionApiResponse=e,this._perfDataCollectionStopDate=this._stopPerfDataCollectionApiResponse.dateTimeStopped,clearInterval(this._autoRefreshPerfDataCollectionHandle),clearInterval(this._autoRefreshGetSkuRecommendationHandle)}catch(e){(0,c.logError)(c.TelemetryViews.DataCollectionWizard,"StopDataCollectionFailed",e)}return this.generateStopDataCollectionTelemetry().catch((e=>console.error(e))),!0}async generateStopDataCollectionTelemetry(){try{(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.DataCollectionWizard,c.TelemetryAction.StopDataCollection,{sessionId:this._sessionId,timeDataCollectionStopped:this._perfDataCollectionStopDate?.toString()||""},{})}catch(e){(0,c.logError)(c.TelemetryViews.DataCollectionWizard,"StopDataCollectionTelemetryFailed",e)}}async refreshPerfDataCollection(){try{const e=await this.migrationService.refreshPerfDataCollection(this._perfDataCollectionLastRefreshedDate??new Date);this._refreshPerfDataCollectionApiResponse=e,this._perfDataCollectionLastRefreshedDate=this._refreshPerfDataCollectionApiResponse.refreshTime,this._perfDataCollectionMessages=this._refreshPerfDataCollectionApiResponse.messages,this._perfDataCollectionErrors=this._refreshPerfDataCollectionApiResponse.errors,this._perfDataCollectionIsCollecting=this._refreshPerfDataCollectionApiResponse.isCollecting,this._perfDataCollectionErrors?.length>0&&r.window.showInformationMessage(a.PERF_DATA_COLLECTION_ERROR(this._assessmentApiResponse?.assessmentResult?.name,this._perfDataCollectionErrors))}catch(e){console.log(e)}return!0}async isWaitingForFirstTimeRefresh(){return Math.abs((new Date).getTime()-new Date(this._perfDataCollectionStartDate).getTime())/a.TIME_IN_MINUTES(1)<this.refreshGetSkuRecommendationFrequency/a.TIME_IN_MINUTES(1)}performanceCollectionNotStarted(){return!this._perfDataCollectionStartDate&&!this._perfDataCollectionStopDate}performanceCollectionInProgress(){return void 0!==this._perfDataCollectionStartDate&&void 0===this._perfDataCollectionStopDate}performanceCollectionStopped(){return void 0!==this._perfDataCollectionStartDate&&void 0!==this._perfDataCollectionStopDate}async generateAssessmentTelemetry(){try{const e=this._assessmentResults?.issues.map((e=>({ruleId:e.ruleId,count:e.impactedObjects.length}))),t=new Map;this._assessmentApiResponse?.assessmentResult?.errors?.forEach((e=>{t.set(e.errorId,t.get(e.errorId)??1)}));const i=[];t.forEach(((e,t)=>i.push({errorId:t,count:e})));const n=new Date(this._assessmentApiResponse?.startTime),r=new Date(this._assessmentApiResponse?.endedTime);(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.MigrationWizardTargetSelectionPage,c.TelemetryAction.ServerAssessment,{sessionId:this._sessionId,hashedServerName:(0,u.hashString)(this._assessmentApiResponse?.assessmentResult?.name),startTime:n.toString(),endTime:r.toString(),serverVersion:this._assessmentApiResponse?.assessmentResult?.serverVersion,serverEdition:this._assessmentApiResponse?.assessmentResult?.serverEdition,platform:this._assessmentApiResponse?.assessmentResult?.serverHostPlatform,engineEdition:this._assessmentApiResponse?.assessmentResult?.serverEngineEdition,serverIssues:JSON.stringify(e),serverErrors:JSON.stringify(i)},{issuesCount:this._assessmentResults?.issues.length,warningsCount:this._assessmentResults?.databaseAssessments.reduce(((e,t)=>e+t.issues.length),0),durationInMilliseconds:r.getTime()-n.getTime(),databaseCount:this._assessmentResults?.databaseAssessments.length,serverHostCpuCount:this._assessmentApiResponse?.assessmentResult?.cpuCoreCount,serverHostPhysicalMemoryInBytes:this._assessmentApiResponse?.assessmentResult?.physicalServerMemory,serverDatabases:this._assessmentApiResponse?.assessmentResult?.numberOfUserDatabases,serverDatabasesReadyForMigration:this._assessmentApiResponse?.assessmentResult?.sqlManagedInstanceTargetReadiness?.numberOfDatabasesReadyForMigration,offlineDatabases:this._assessmentApiResponse?.assessmentResult?.sqlManagedInstanceTargetReadiness?.numberOfNonOnlineDatabases});const o=new Map,a=new Map;this._assessmentApiResponse?.assessmentResult?.databases.forEach((e=>{(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.MigrationWizardTargetSelectionPage,c.TelemetryAction.DatabaseAssessment,{sessionId:this._sessionId,hashedDatabaseName:(0,u.hashString)(e.name),compatibilityLevel:e.compatibilityLevel},{warningsCount:e.items.length,errorsCount:e.errors.length,assessmentTimeMs:e.assessmentTimeInMilliseconds,numberOfBlockerIssues:e.sqlManagedInstanceTargetReadiness.numOfBlockerIssues,databaseSizeInMb:e.databaseSize}),e.items.forEach((e=>{o.set(e.ruleId,o.get(e.ruleId)??0+e.impactedObjects.length)})),e.errors.forEach((e=>a.set(e.errorId,a.get(e.errorId)??1)))}));const s=[];o.forEach(((e,t)=>s.push({warningId:t,count:e}))),(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.MigrationWizardTargetSelectionPage,c.TelemetryAction.DatabaseAssessmentWarning,{sessionId:this._sessionId,warnings:JSON.stringify(s)},{});const l=[];a.forEach(((e,t)=>l.push({errorId:t,count:e}))),(0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.MigrationWizardTargetSelectionPage,c.TelemetryAction.DatabaseAssessmentError,{sessionId:this._sessionId,errors:JSON.stringify(l)},{})}catch(e){console.log("error during assessment telemetry:"),console.log(e)}}get gatheringInformationError(){return this._gatheringInformationError}set gatheringInformationError(e){this._gatheringInformationError=e}get stateChangeEvent(){return this._stateChangeEventEmitter.event}dispose(){this._stateChangeEventEmitter.dispose()}getExtensionPath(){return this.extensionContext.extensionPath}async getManagedDatabases(){return(await(0,o.getSqlManagedInstanceDatabases)(this._azureAccount,this._targetSubscription,this._targetServerInstance)).map((e=>e.name))}async startTdeMigration(e,t){const i=this.tdeMigrationConfig.getTdeEnabledDatabases(),n=await(0,d.getSourceConnectionString)(),r={success:!1,result:[],errors:[]};try{const o=await this.migrationService.migrateCertificate(i,n,this._targetSubscription?.id,this._resourceGroup?.name,this._targetServerInstance.name,this.tdeMigrationConfig.getAppliedNetworkPath(),e,t);r.errors=o.migrationStatuses.filter((e=>!e.success)).map((e=>a.TDE_MIGRATION_ERROR_DB(e.dbName,e.message))),r.result=o.migrationStatuses.map((e=>({name:e.dbName,success:e.success,message:e.message})))}catch(e){r.errors=[a.TDE_MIGRATION_ERROR(e.message)],r.result=i.map((t=>({name:t,success:!1,message:e.message})))}return r.success=0===r.errors.length,r}async getTdeValidationTitles(){const e={success:!1,result:[],errors:[]};try{e.result=await this.migrationService.getTdeValidationTitles()??[]}catch(e){console.error(e)}return e}async runTdeValidation(e){const t={success:!1,result:[],errors:[]},i=await(0,d.getSourceConnectionString)();try{let n=await this.migrationService.runTdeValidation(i,e);void 0!==n&&(t.result=n?.map((e=>({validationTitle:e.validationTitle,validationDescription:e.validationDescription,validationTroubleshootingTips:e.validationTroubleshootingTips,validationErrorMessage:e.validationErrorMessage,validationStatus:e.validationStatus,validationStatusString:e.validationStatusString}))))}catch(e){console.error(e)}return t}async startMigration(){const e=await(0,d.getSourceConnectionProfile)(),t=this._databaseBackup.migrationMode===C.OFFLINE,i=this.isSqlDbTarget,n={location:this._sqlMigrationService?.location,properties:{sourceDatabaseName:"",migrationService:this._sqlMigrationService?.id,backupConfiguration:{},sourceSqlConnection:{dataSource:e?.serverName,authentication:this._authenticationType,userName:this._sqlServerUsername,password:this._sqlServerPassword,encryptConnection:(0,d.getEncryptConnectionValue)(e),trustServerCertificate:(0,d.getTrustServerCertificateValue)(e)},scope:this._targetServerInstance.id,offlineConfiguration:{offline:t}}};for(let s=0;s<this._databasesForMigration.length;s++)try{if(i){const t=this._databasesForMigration[s],i=this._sourceTargetMapping.get(t),r=i?.sourceTables.size??0;if(0===r)continue;const o=[];let a=0;if(i?.sourceTables.forEach((e=>{e.selectedForMigration&&(a++,o.push(e.tableName))})),0===a&&!i?.enableSchemaMigration)continue;const l=this._targetServerInstance;n.properties.offlineConfiguration=void 0,n.properties.sourceSqlConnection={dataSource:e?.serverName,authentication:this._authenticationType,userName:this._sqlServerUsername,password:this._sqlServerPassword,encryptConnection:(0,d.getEncryptConnectionValue)(e),trustServerCertificate:(0,d.getTrustServerCertificateValue)(e)},n.properties.targetSqlConnection={dataSource:l.properties.fullyQualifiedDomainName,authentication:E.Sql,userName:this._targetUserName,password:this._targetPassword,encryptConnection:!0,trustServerCertificate:!1},n.properties.sqlSchemaMigrationConfiguration={enableSchemaMigration:i?.enableSchemaMigration??!1},n.properties.sqlDataMigrationConfiguration={enableDataMigration:a>0},n.properties.tableList=a===r?[]:o}else switch(this._databaseBackup.networkContainerType){case y.BLOB_CONTAINER:n.properties.backupConfiguration={targetLocation:void 0,sourceLocation:{fileStorageType:v.AzureBlob,azureBlob:{storageAccountResourceId:this._databaseBackup.blobs[s].storageAccount.id,accountKey:this._databaseBackup.blobs[s].storageKey,blobContainerName:(0,u.getBlobContainerNameWithFolder)(this._databaseBackup.blobs[s],t)}}},t&&(n.properties.offlineConfiguration={offline:t,lastBackupName:(0,u.getLastBackupFileNameWithoutFolder)(this._databaseBackup.blobs[s])});break;case y.NETWORK_SHARE:n.properties.backupConfiguration={targetLocation:{storageAccountResourceId:this._databaseBackup.networkShares[s].storageAccount.id,accountKey:this._databaseBackup.networkShares[s].storageKey},sourceLocation:{fileStorageType:v.FileShare,fileShare:{path:this._databaseBackup.networkShares[s].networkShareLocation,username:this._databaseBackup.networkShares[s].windowsUser,password:this._databaseBackup.networkShares[s].password}}}}n.properties.sourceDatabaseName=this._databasesForMigration[s];const a=await(0,o.startDatabaseMigration)(this._azureAccount,this._sqlMigrationServiceSubscription,this._sqlMigrationService?.location,this._targetServerInstance,this._targetDatabaseNames[s],n,this._sessionId);a.databaseMigration.properties.sourceDatabaseName=this._databasesForMigration[s],a.databaseMigration.properties.backupConfiguration=n.properties.backupConfiguration,a.databaseMigration.properties.offlineConfiguration=n.properties.offlineConfiguration,a.databaseMigration.properties.sqlSchemaMigrationConfiguration=n.properties.sqlSchemaMigrationConfiguration,a.databaseMigration.properties.sqlDataMigrationConfiguration=n.properties.sqlDataMigrationConfiguration;let l=A.Default;this.resumeAssessment?l=A.SaveAndClose:this.restartMigration&&(l=A.RestartMigration),201!==a.status&&200!==a.status||((0,c.sendSqlMigrationActionEvent)(c.TelemetryViews.MigrationWizardSummaryPage,c.TelemetryAction.StartMigration,{sessionId:this._sessionId,tenantId:this._azureTenant?.id,subscriptionId:this._sqlMigrationServiceSubscription?.id,resourceGroup:this._sqlMigrationServiceResourceGroup?.name,location:this._location.name,targetType:this._targetType,hashedServerName:(0,u.hashString)(this._assessmentApiResponse?.assessmentResult?.name),hashedDatabaseName:(0,u.hashString)(this._databasesForMigration[s]),migrationMode:t?"offline":"online",migrationStartTime:(new Date).toString(),targetDatabaseName:this._targetDatabaseNames[s],serverName:this._targetServerInstance.name,sqlMigrationServiceId:Buffer.from(this._sqlMigrationService?.id).toString("base64"),irRegistered:(this._nodeNames?.length>0).toString(),wizardEntryPoint:l},{}),r.window.showInformationMessage(g(0,null,this._databasesForMigration[s],this._targetServerInstance.name,this._targetDatabaseNames[s])))}catch(e){r.window.showErrorMessage(g(1,null,e.message)),(0,c.logError)(c.TelemetryViews.MigrationLocalStorage,"StartMigrationFailed",e)}finally{await this.refreshPerfDataCollection(),this.resumeAssessment&&!this.restartMigration||!this._perfDataCollectionIsCollecting||(this.stopPerfDataCollection(),r.window.showInformationMessage(a.AZURE_RECOMMENDATION_STOP_POPUP))}}async saveInfo(e,t){const i={closedPage:t,databaseAssessment:[],databaseList:[],databaseInfoList:[],migrationTargetType:null,azureAccount:null,azureTenant:null,subscription:null,location:null,resourceGroup:null,targetServerInstance:null,migrationMode:null,networkContainerType:null,networkShares:[],blobs:[],targetDatabaseNames:[],sqlMigrationService:void 0,serverAssessment:null,xEventsFilesFolderPath:null,skuRecommendation:null,serviceResourceGroup:null,serviceSubscription:null};switch(t){case R.Summary:case R.IntegrationRuntime:i.sqlMigrationService=this._sqlMigrationService,i.serviceSubscription=this._sqlMigrationServiceSubscription,i.serviceResourceGroup=this._sqlMigrationServiceResourceGroup,i.migrationMode=this._databaseBackup.migrationMode,i.networkContainerType=this._databaseBackup.networkContainerType;case R.DatabaseBackup:i.networkShares=this._databaseBackup.networkShares,i.blobs=this._databaseBackup.blobs,i.targetDatabaseNames=this._targetDatabaseNames;case R.TargetSelection:i.azureAccount=(0,u.deepClone)(this._azureAccount),i.azureTenant=(0,u.deepClone)(this._azureTenant),i.subscription=this._targetSubscription,i.location=this._location,i.resourceGroup=this._resourceGroup,i.targetServerInstance=this._targetServerInstance;case R.SKURecommendation:if(i.migrationTargetType=this._targetType,i.databaseList=this._databasesForMigration,i.serverAssessment=this._assessmentResults,i.xEventsFilesFolderPath=this._xEventsFilesFolderPath,this._skuRecommendationPerformanceDataSource){const e={skuRecommendationPerformanceDataSource:this._skuRecommendationPerformanceDataSource,skuRecommendationPerformanceLocation:this._skuRecommendationPerformanceLocation,perfDataCollectionStartDate:this._perfDataCollectionStartDate,perfDataCollectionStopDate:this._perfDataCollectionStopDate,skuTargetPercentile:this._skuTargetPercentile,skuScalingFactor:this._skuScalingFactor,skuEnablePreview:this._skuEnablePreview};i.skuRecommendation=e}case R.DatabaseSelector:i.databaseAssessment=this._databasesForAssessment,i.xEventsFilesFolderPath=this._xEventsFilesFolderPath,await this.extensionContext.globalState.update(`${this.mementoString}.${e}`,i)}}async loadSavedInfo(){try{switch(this._targetType=this.savedInfo.migrationTargetType||void 0,this._databasesForAssessment=this.savedInfo.databaseAssessment,this._databasesForMigration=this.savedInfo.databaseList,this._didUpdateDatabasesForMigration=!0,this._didDatabaseMappingChange=!0,this.refreshDatabaseBackupPage=!0,this._targetType){case u.MigrationTargetType.SQLMI:this._miDbs=this._databasesForMigration;break;case u.MigrationTargetType.SQLVM:this._vmDbs=this._databasesForMigration;break;case u.MigrationTargetType.SQLDB:this._sqldbDbs=this._databasesForMigration}this._azureAccount=this.savedInfo.azureAccount||void 0,this._azureTenant=this.savedInfo.azureTenant||void 0,this._targetSubscription=this.savedInfo.subscription||void 0,this._location=this.savedInfo.location||void 0,this._resourceGroup=this.savedInfo.resourceGroup||void 0,this._targetServerInstance=this.savedInfo.targetServerInstance||void 0,this._databaseBackup.migrationMode=this.savedInfo.migrationMode||void 0,this._sourceDatabaseNames=this._databasesForMigration,this._targetDatabaseNames=this.savedInfo.targetDatabaseNames,this._databaseBackup.networkContainerType=this.savedInfo.networkContainerType??y.BLOB_CONTAINER,this._databaseBackup.networkShares=this.savedInfo.networkShares,this._databaseBackup.blobs=this.savedInfo.blobs,this._databaseBackup.subscription=this.savedInfo.subscription||void 0,this._sqlMigrationService=this.savedInfo.sqlMigrationService,this._sqlMigrationServiceSubscription=this.savedInfo.serviceSubscription||void 0,this._sqlMigrationServiceResourceGroup=this.savedInfo.serviceResourceGroup||void 0,this._assessedDatabaseList=this.savedInfo.databaseAssessment??[],this._databasesForAssessment=this.savedInfo.databaseAssessment??[],this._xEventsFilesFolderPath=this.savedInfo.xEventsFilesFolderPath??"";const e=this.savedInfo.serverAssessment;e&&(this._assessmentResults=e,this._assessedDatabaseList=this.savedInfo.databaseAssessment);const t=this.savedInfo.skuRecommendation;return t&&(this._skuRecommendationPerformanceDataSource=t.skuRecommendationPerformanceDataSource,this._skuRecommendationPerformanceLocation=t.skuRecommendationPerformanceLocation,this._perfDataCollectionStartDate=t.perfDataCollectionStartDate,this._perfDataCollectionStopDate=t.perfDataCollectionStopDate,this._skuTargetPercentile=t.skuTargetPercentile,this._skuScalingFactor=t.skuScalingFactor,this._skuEnablePreview=t.skuEnablePreview),!0}catch{return!1}}GetTargetType(){switch(this._targetType){case u.MigrationTargetType.SQLMI:return a.LOGIN_MIGRATIONS_MI_TEXT;case u.MigrationTargetType.SQLVM:return a.LOGIN_MIGRATIONS_VM_TEXT;case u.MigrationTargetType.SQLDB:return a.LOGIN_MIGRATIONS_DB_TEXT}return""}get isWindowsAuthMigrationSupported(){return this._targetType===u.MigrationTargetType.SQLMI}setTargetServerName(){switch(this._targetType){case u.MigrationTargetType.SQLMI:const e=this._targetServerInstance;this._targetServerName=e.properties.fullyQualifiedDomainName;break;case u.MigrationTargetType.SQLDB:const t=this._targetServerInstance;this._targetServerName=t.properties.fullyQualifiedDomainName;break;case u.MigrationTargetType.SQLVM:const i=this._targetServerInstance,n=Array.from(i.networkInterfaces.values());this._targetServerName=_.NetworkInterfaceModel.getIpAddress(n)}}get targetServerName(){return this._targetServerName||this.setTargetServerName(),this._targetServerName}}},349:(e,t)=>{"use strict";var i,n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.TdeMigrationModel=t.ConfigDialogSetting=t.TdeDatabaseMigrationState=t.TdeMigrationState=void 0,function(e){e.Pending="Pending",e.Running="Running",e.Succeeded="Succeeded",e.Failed="Failed",e.Canceled="Canceled"}(i||(t.TdeMigrationState=i={})),function(e){e.Running="Running",e.Succeeded="Succeeded",e.Failed="Failed",e.Canceled="Canceled"}(n||(t.TdeDatabaseMigrationState=n={})),function(e){e.NoSelection="NoSelection",e.ExportCertificates="ExportCertificates",e.DoNotExport="DoNotExport"}(r||(t.ConfigDialogSetting=r={})),t.TdeMigrationModel=class{constructor(){this._tdeMigrationResult={state:i.Pending,dbList:[]},this._configurationCompleted=!1,this._shownBefore=!1,this._encryptedDbs=[],this._appliedConfigDialogSetting=r.NoSelection,this._pendingConfigDialogSetting=r.NoSelection,this._appliedNetworkPath="",this._pendingNetworkPath="",this._appliedExportCertUserConsent=!1,this._pendingExportCertUserConsent=!1,this._tdeMigrationCompleted=!1,this._lastValidatedNetworkPath="",this._tdeMigrationCompleted=this._tdeMigrationCompleted}shownBefore(){return this._shownBefore}configurationShown(){this._shownBefore=!0}getTdeEnabledDatabasesCount(){return this._encryptedDbs.length}hasTdeEnabledDatabases(){return this.getTdeEnabledDatabasesCount()>0}getTdeEnabledDatabases(){return this._encryptedDbs}setTdeEnabledDatabasesCount(e){this._encryptedDbs=e,this._tdeMigrationCompleted=!1,this._shownBefore=!1}applyConfigDialogSetting(){this.isAnyChangeReadyToBeApplied()&&(this._appliedConfigDialogSetting=this._pendingConfigDialogSetting,this._appliedExportCertUserConsent=this._pendingExportCertUserConsent,this._appliedNetworkPath=this._pendingNetworkPath,this._appliedConfigDialogSetting!==r.ExportCertificates&&(this._appliedExportCertUserConsent=!1,this._pendingExportCertUserConsent=!1,this._appliedNetworkPath="",this._pendingNetworkPath=""),this._configurationCompleted=!0)}cancelConfigDialogSetting(){this._pendingConfigDialogSetting=this._appliedConfigDialogSetting,this._pendingExportCertUserConsent=this._appliedExportCertUserConsent,this._pendingNetworkPath=this._appliedNetworkPath}setPendingTdeMigrationMethod(e){this._pendingConfigDialogSetting=e,this._tdeMigrationCompleted=!1}shouldAdsMigrateCertificates(){return this.hasTdeEnabledDatabases()&&this._configurationCompleted&&this.getAppliedConfigDialogSetting()===r.ExportCertificates}lastTdeMigrationResult(){return this._tdeMigrationResult}setTdeMigrationResult(e){this._tdeMigrationResult=e,this._tdeMigrationCompleted=e.state===i.Succeeded}resetTdeMigrationResult(){this._tdeMigrationResult={state:i.Pending,dbList:[]}}isAnyChangeReadyToBeApplied(){return this._pendingConfigDialogSetting!==r.NoSelection&&(this._pendingConfigDialogSetting!==r.ExportCertificates||this._pendingNetworkPath===this._lastValidatedNetworkPath&&this._pendingNetworkPath.length>0&&this._pendingExportCertUserConsent)}getPendingConfigDialogSetting(){return this._pendingConfigDialogSetting}getAppliedConfigDialogSetting(){return this._appliedConfigDialogSetting}getPendingNetworkPath(){return this._pendingNetworkPath}setPendingNetworkPath(e){this._pendingNetworkPath=e}getAppliedNetworkPath(){return this._appliedNetworkPath}getAppliedExportCertUserConsent(){return this._appliedExportCertUserConsent}getPendingExportCertUserConsent(){return this._pendingExportCertUserConsent}setPendingExportCertUserConsent(e){this._pendingExportCertUserConsent=e}setLastValidatedNetworkPath(e){this._lastValidatedNetworkPath=e}getLastValidatedNetworkPath(){return this._lastValidatedNetworkPath}}},8121:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TdeValidationTitlesRequest=t.TdeValidationRequest=t.TdeMigrateProgressEvent=t.TdeMigrateRequest=t.LoginMigrationNotification=t.MigrateServerRolesAndSetPermissionsRequest=t.EstablishUserMappingRequest=t.MigrateLoginsRequest=t.ValidateLoginMigrationRequest=t.StartLoginMigrationRequest=t.LoginMigrationStep=t.SqlMigrationRefreshPerfDataCollectionRequest=t.SqlMigrationStopPerfDataCollectionRequest=t.SqlMigrationStartPerfDataCollectionRequest=t.GetSqlMigrationSkuRecommendationsRequest=t.GetSqlMigrationAssessmentItemsRequest=void 0;const n=i(3056);var r,o,a,s,l,c,u,d,p,h,_,g,m,S,f,E;!function(e){e.type=new n.RequestType("migration/getassessments")}(r||(t.GetSqlMigrationAssessmentItemsRequest=r={})),function(e){e.type=new n.RequestType("migration/getskurecommendations")}(o||(t.GetSqlMigrationSkuRecommendationsRequest=o={})),function(e){e.type=new n.RequestType("migration/startperfdatacollection")}(a||(t.SqlMigrationStartPerfDataCollectionRequest=a={})),function(e){e.type=new n.RequestType("migration/stopperfdatacollection")}(s||(t.SqlMigrationStopPerfDataCollectionRequest=s={})),function(e){e.type=new n.RequestType("migration/refreshperfdatacollection")}(l||(t.SqlMigrationRefreshPerfDataCollectionRequest=l={})),function(e){e[e.StartValidations=0]="StartValidations",e[e.MigrateLogins=1]="MigrateLogins",e[e.EstablishUserMapping=2]="EstablishUserMapping",e[e.MigrateServerRoles=3]="MigrateServerRoles",e[e.EstablishServerRoleMapping=4]="EstablishServerRoleMapping",e[e.SetLoginPermissions=5]="SetLoginPermissions",e[e.SetServerRolePermissions=6]="SetServerRolePermissions"}(c||(t.LoginMigrationStep=c={})),function(e){e.type=new n.RequestType("migration/startloginmigration")}(u||(t.StartLoginMigrationRequest=u={})),function(e){e.type=new n.RequestType("migration/validateloginmigration")}(d||(t.ValidateLoginMigrationRequest=d={})),function(e){e.type=new n.RequestType("migration/migratelogins")}(p||(t.MigrateLoginsRequest=p={})),function(e){e.type=new n.RequestType("migration/establishusermapping")}(h||(t.EstablishUserMappingRequest=h={})),function(e){e.type=new n.RequestType("migration/migrateserverrolesandsetpermissions")}(_||(t.MigrateServerRolesAndSetPermissionsRequest=_={})),function(e){e.type=new n.NotificationType('migration/loginmigrationnotification"')}(g||(t.LoginMigrationNotification=g={})),function(e){e.type=new n.RequestType("migration/tdemigration")}(m||(t.TdeMigrateRequest=m={})),function(e){e.type=new n.NotificationType("migration/tdemigrationprogress")}(S||(t.TdeMigrateProgressEvent=S={})),function(e){e.type=new n.RequestType("migration/tdevalidation")}(f||(t.TdeValidationRequest=f={})),function(e){e.type=new n.RequestType("migration/tdevalidationtitles")}(E||(t.TdeValidationTitlesRequest=E={}))},9785:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlMigrationService=t.MigrationExtensionService=t.ApiType=void 0;const n=i(5868),r=i(2884),o=i(8121),a=i(3137);var s;!function(e){e.SqlMigrationProvider="SqlMigrationProvider"}(s||(t.ApiType=s={}));class l extends n.SqlOpsFeature{}t.MigrationExtensionService=l;class c extends l{constructor(e){super(e,c.messagesTypes),this._reportUpdate=void 0,this.providerId=s.SqlMigrationProvider}initialize(e){this.register(this.messages,{id:r.generateUuid(),registerOptions:void 0}),this._client.onNotification(o.TdeMigrateProgressEvent.type,(e=>{void 0!==this._reportUpdate&&this._reportUpdate(e.name,e.success,e.message,e.statusCode??"")}))}registerProvider(e){return a.migrationServiceProvider.addService(this),this}fillClientCapabilities(e){}async getAssessments(e,t,i){let n={connectionString:e,databases:t,xEventsFilesFolderPath:i};try{return this._client.sendRequest(o.GetSqlMigrationAssessmentItemsRequest.type,n)}catch(e){this._client.logFailedRequest(o.GetSqlMigrationAssessmentItemsRequest.type,e)}}async getSkuRecommendations(e,t,i,n,r,a,s,l,c,u){let d={dataFolder:e,perfQueryIntervalInSec:t,targetPlatforms:i,targetSqlInstance:n,targetPercentile:r,scalingFactor:a,startTime:s,endTime:l,includePreviewSkus:c,databaseAllowList:u,isPremiumSSDV2Enabled:!0};try{return this._client.sendRequest(o.GetSqlMigrationSkuRecommendationsRequest.type,d)}catch(e){this._client.logFailedRequest(o.GetSqlMigrationSkuRecommendationsRequest.type,e)}}async startPerfDataCollection(e,t,i,n,r){let a={connectionString:e,dataFolder:t,perfQueryIntervalInSec:i,staticQueryIntervalInSec:n,numberOfIterations:r};try{return this._client.sendRequest(o.SqlMigrationStartPerfDataCollectionRequest.type,a)}catch(e){this._client.logFailedRequest(o.SqlMigrationStartPerfDataCollectionRequest.type,e)}}async stopPerfDataCollection(){let e={};try{return this._client.sendRequest(o.SqlMigrationStopPerfDataCollectionRequest.type,e)}catch(e){this._client.logFailedRequest(o.SqlMigrationStopPerfDataCollectionRequest.type,e)}}async refreshPerfDataCollection(e){let t={lastRefreshedTime:e};try{return this._client.sendRequest(o.SqlMigrationRefreshPerfDataCollectionRequest.type,t)}catch(e){this._client.logFailedRequest(o.SqlMigrationRefreshPerfDataCollectionRequest.type,e)}}async startLoginMigration(e,t,i,n){let r={sourceConnectionString:e,targetConnectionString:t,loginList:i,aadDomainName:n};try{return this._client.sendRequest(o.StartLoginMigrationRequest.type,r)}catch(e){this._client.logFailedRequest(o.StartLoginMigrationRequest.type,e)}}async validateLoginMigration(e,t,i,n){let r={sourceConnectionString:e,targetConnectionString:t,loginList:i,aadDomainName:n};try{return this._client.sendRequest(o.ValidateLoginMigrationRequest.type,r)}catch(e){this._client.logFailedRequest(o.ValidateLoginMigrationRequest.type,e)}}async migrateLogins(e,t,i,n){let r={sourceConnectionString:e,targetConnectionString:t,loginList:i,aadDomainName:n};try{return this._client.sendRequest(o.MigrateLoginsRequest.type,r)}catch(e){this._client.logFailedRequest(o.MigrateLoginsRequest.type,e)}}async establishUserMapping(e,t,i,n){let r={sourceConnectionString:e,targetConnectionString:t,loginList:i,aadDomainName:n};try{return this._client.sendRequest(o.EstablishUserMappingRequest.type,r)}catch(e){this._client.logFailedRequest(o.EstablishUserMappingRequest.type,e)}}async migrateServerRolesAndSetPermissions(e,t,i,n){let r={sourceConnectionString:e,targetConnectionString:t,loginList:i,aadDomainName:n};try{return this._client.sendRequest(o.MigrateServerRolesAndSetPermissionsRequest.type,r)}catch(e){this._client.logFailedRequest(o.MigrateServerRolesAndSetPermissionsRequest.type,e)}}async migrateCertificate(e,t,i,n,r,a,s,l){this._reportUpdate=l;let c={encryptedDatabases:e,sourceSqlConnectionString:t,targetSubscriptionId:i,targetResourceGroupName:n,targetManagedInstanceName:r,networkSharePath:a,networkShareDomain:"a",networkShareUserName:"b",networkSharePassword:"c",accessToken:s};try{return await this._client.sendRequest(o.TdeMigrateRequest.type,c)}catch(e){this._client.logFailedRequest(o.TdeMigrateRequest.type,e)}}async runTdeValidation(e,t){let i={sourceSqlConnectionString:e,networkSharePath:t};try{return await this._client.sendRequest(o.TdeValidationRequest.type,i)}catch(e){this._client.logFailedRequest(o.TdeValidationRequest.type,e)}}async getTdeValidationTitles(){try{return await this._client.sendRequest(o.TdeValidationTitlesRequest.type,{})}catch(e){this._client.logFailedRequest(o.TdeValidationRequest.type,e)}}}t.SqlMigrationService=c,c.messagesTypes=[o.GetSqlMigrationAssessmentItemsRequest.type,o.GetSqlMigrationSkuRecommendationsRequest.type,o.SqlMigrationStartPerfDataCollectionRequest.type,o.SqlMigrationRefreshPerfDataCollectionRequest.type,o.SqlMigrationStopPerfDataCollectionRequest.type,o.StartLoginMigrationRequest.type,o.ValidateLoginMigrationRequest.type,o.MigrateLoginsRequest.type,o.EstablishUserMappingRequest.type,o.MigrateServerRolesAndSetPermissionsRequest.type,o.TdeMigrateRequest.type]},3137:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.migrationServiceProvider=t.MigrationServiceProvider=void 0;const n=i(2074),r=i(9496);class o{constructor(){this.services=new Map}addService(e){this.services.set(e.providerId,e)}async getService(e){return this.services.has(e)?this.services.get(e):this.waitUntilProviderReady(e)}async waitUntilProviderReady(e){return await r.window.withProgress({location:r.ProgressLocation.Notification,title:n.waitingForService(e),cancellable:!1},((t,i)=>new Promise((t=>{const i=setInterval((()=>{this.services.has(e)&&(clearInterval(i),t(this.services.get(e)))}),250)}))))}}t.MigrationServiceProvider=o,t.migrationServiceProvider=new o},1079:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceClient=void 0;const n=i(5868),r=i(9707),o=i(3056),a=i(9496),s=i(3403).loadMessageBundle(i(1017).join(__dirname,"service/serviceClient.ts")),l=i(1017),c=i(9785),u=i(7147),d=i(2074),p=i(3056),h=i(7282),_=i(6274),g=i(7475);t.ServiceClient=class{constructor(e){this.outputChannel=e,this.statusView=a.window.createStatusBarItem(a.StatusBarAlignment.Left)}async startService(e){const t=await u.promises.readFile(l.join(e.extensionPath,"config.json"));let i=this.createClientOptions();try{let r,o="",c=!0;if(h.env.ADS_MIGRATIONSERVICE){const e=JSON.parse(t.toString());for(let t of e.executableFiles){const e=l.join(h.env.ADS_MIGRATIONSERVICE,t);await(0,_.exists)(e)&&(c=!1,o=e)}c?a.window.showErrorMessage("Failed to find migration service binary falling back to downloaded binary").then((e=>{}),(e=>{})):a.window.showInformationMessage("Using Migration service found at: "+o).then((e=>{}),(e=>{}))}c&&(o=await this.downloadBinaries(e,t));let u=this.generateServerOptions(o,e);r=new n.SqlOpsDataClient(d.serviceName,u,i),r.onReady().then((()=>{this.statusView.text=s(0,null,d.serviceName),setTimeout((()=>{this.statusView.hide()}),1500)})).catch((e=>{console.error(e)})),this.statusView.show(),this.statusView.text=s(1,null,d.serviceName);let p=r.start();return e.subscriptions.push(p),r}catch(e){return await a.window.showErrorMessage(s(2,null,d.serviceName,e.stack.toString())),void(0,g.logError)(g.TelemetryViews.SqlServerDashboard,e.stack.toString(),e)}}async downloadBinaries(e,t){try{const i=JSON.parse(t.toString());i.installDirectory=l.join(e.extensionPath,i.installDirectory),i.proxy=a.workspace.getConfiguration("http").get("proxy"),i.strictSSL=a.workspace.getConfiguration("http").get("proxyStrictSSL",!0);const n=new r.ServerProvider(i);return n.eventEmitter.onAny(this.generateHandleServerProviderEvent()),n.getOrDownloadServer()}catch(e){const t=s(3,null,d.serviceName,"https://aka.ms/dms-migrations-troubleshooting#azure-data-studio-limitations"),i=s(4,null,d.serviceName,"https://aka.ms/dms-migrations-troubleshooting#azure-data-studio-limitations");throw this.outputChannel.appendLine(t),a.window.showErrorMessage(i),(0,g.logError)(g.TelemetryViews.SqlServerDashboard,t,e),e}}createClientOptions(){return{providerId:d.providerId,errorHandler:new m,synchronize:{configurationSection:[d.extensionConfigSectionName,d.sqlConfigSectionName]},features:[c.SqlMigrationService],outputChannel:this.outputChannel}}generateServerOptions(e,t){let i=[];return i.push("--locale",a.env.language),i.push("--log-file",l.join(t.logUri.fsPath)),i.push("--tracing-level",this.getConfigTracingLevel()),i.push("--autoflush-log"),{command:e,args:i,transport:o.TransportKind.stdio}}getConfigTracingLevel(){let e=a.workspace.getConfiguration("mssql");return e?e.tracingLevel:S.Critical}generateHandleServerProviderEvent(){let e=0;return(t,...i)=>{switch(t){case"install_start":this.outputChannel.show(!0),this.statusView.show(),this.outputChannel.appendLine(s(5,null,d.serviceName,i[0])),this.statusView.text=s(6,null,d.serviceName);break;case"install_end":this.outputChannel.appendLine(s(7,null,d.serviceName));break;case"download_start":this.outputChannel.appendLine(s(8,null,i[0])),this.outputChannel.append(s(9,null,Math.ceil(i[1]/1024).toLocaleString(a.env.language))),this.statusView.text=s(10,null,d.serviceName);break;case"download_progress":let t=Math.ceil(i[0]/5);t>e&&(this.outputChannel.append(".".repeat(t-e)),e=t);break;case"download_end":this.outputChannel.appendLine(s(11,null,d.serviceName));break;case"entry_extracted":this.outputChannel.appendLine(s(12,null,i[0],i[1],i[2]));break;case"log_emitted":i[0]>=2&&this.outputChannel.appendLine(i[1])}}}};class m{constructor(){}showOnErrorPrompt(e){console.log(e),a.window.showErrorMessage(d.serviceCrashMessage(e.message)).then((()=>{}),(()=>{}))}error(e,t,i){return this.showOnErrorPrompt(e),p.ErrorAction.Shutdown}closed(){return this.showOnErrorPrompt({name:"Service crashed",message:d.serviceCrashed}),p.CloseAction.DoNotRestart}}var S;!function(e){e.All="All",e.Off="Off",e.Critical="Critical",e.Error="Error",e.Warning="Warning",e.Information="Information",e.Verbose="Verbose"}(S||(S={}))},6274:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exists=void 0;const n=i(7147);t.exists=async function(e){try{return await n.promises.access(e),!0}catch(e){return!1}}},7475:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendButtonClickEvent=t.getTelemetryProps=t.sendSqlMigrationActionEvent=t.logError=t.TelemetryAction=t.TelemetryViews=t.TelemetryReporter=void 0;const n=i(7437),r=i(4147);let o={name:r.name,version:r.version,aiKey:r.aiKey};var a,s;function l(e,i,n,r){t.TelemetryReporter.createActionEvent(e,i).withAdditionalProperties(n).withAdditionalMeasurements(r).send()}function c(e){const t=e._azureTenant?.id??e._azureAccount?.properties?.tenants?.length>0?e._azureAccount?.properties?.tenants[0]?.id:"";return{sessionId:e._sessionId,subscriptionId:e._targetSubscription?.id,resourceGroup:e._resourceGroup?.name,targetType:e._targetType,tenantId:t}}t.TelemetryReporter=new n.default(o.name,o.version,o.aiKey),function(e){e.SqlServerDashboard="SqlServerDashboard",e.CreateDataMigrationServiceDialog="CreateDataMigrationServiceDialog",e.AssessmentsDialog="AssessmentsDialog",e.DatabaseBackupPage="DatabaseBackupPage",e.IntegrationRuntimePage="IntegrationRuntimePage",e.MigrationCutoverDialog="MigrationCutoverDialog",e.MigrationStatusDialog="MigrationStatusDialog",e.DashboardTab="DashboardTab",e.MigrationsTab="MigrationsTab",e.MigrationDetailsTab="MigrationDetailsTab",e.MigrationWizardAccountSelectionPage="MigrationWizardAccountSelectionPage",e.MigrationWizardSkuRecommendationPage="MigrationWizardSkuRecommendationPage",e.MigrationWizardTargetSelectionPage="MigrationWizardTargetSelectionPage",e.MigrationWizardIntegrationRuntimePage="MigrationWizardIntegrationRuntimePage",e.MigrationWizardSummaryPage="MigrationWizardSummaryPage",e.MigrationWizardController="MigrationWizardController",e.StartMigrationService="StartMigrationSerivce",e.SqlMigrationWizard="SqlMigrationWizard",e.MigrationLocalStorage="MigrationLocalStorage",e.SkuRecommendationWizard="SkuRecommendationWizard",e.DataCollectionWizard="GetAzureRecommendationDialog",e.SelectMigrationServiceDialog="SelectMigrationServiceDialog",e.Utils="Utils",e.LoginMigrationWizardController="LoginMigrationWizardController",e.LoginMigrationWizard="LoginMigrationWizard",e.LoginMigrationTargetSelectionPage="LoginMigrationTargetSelectionPage",e.LoginMigrationSelectorPage="LoginMigrationSelectorPage",e.LoginMigrationStatusPage="LoginMigrationStatusPage",e.TdeConfigurationDialog="TdeConfigurationDialog",e.TdeMigrationDialog="TdeMigrationDialog",e.ValidIrDialog="validIrDialog"}(a||(t.TelemetryViews=a={})),function(e){e.ServerAssessment="ServerAssessment",e.ServerAssessmentIssues="ServerAssessmentIssues",e.ServerAssessmentError="ServerAssessmentError",e.DatabaseAssessment="DatabaseAsssessment",e.DatabaseAssessmentWarning="DatabaseAssessmentWarning",e.DatabaseAssessmentError="DatabaseAssessmentError",e.StartMigration="StartMigration",e.CutoverMigration="CutoverMigration",e.CancelMigration="CancelMigration",e.DeleteMigration="DeleteMigration",e.MigrationStatus="MigrationStatus",e.PageButtonClick="PageButtonClick",e.Prev="prev",e.Next="next",e.Done="done",e.Cancel="cancel",e.OnPageLeave="OnPageLeave",e.GetMISkuRecommendation="GetMISkuRecommendation",e.GetVMSkuRecommendation="GetVMSkuRecommendation",e.GetDBSkuRecommendation="GetDBSkuRecommendation",e.GetInstanceRequirements="GetInstanceRequirements",e.StartDataCollection="StartDataCollection",e.StopDataCollection="StopDataCollection",e.GetDatabasesListFailed="GetDatabasesListFailed",e.ConnectToTarget="ConnectToTarget",e.OpenLoginMigrationWizard="OpenLoginMigrationWizard",e.LoginMigrationStarted="LoginMigrationStarted",e.LoginMigrationCompleted="LoginMigrationCompleted",e.LoginMigrationError="LoginMigrationError",e.TdeMigrationSuccess="TdeMigrationSuccess",e.TdeMigrationFailures="TdeMigrationFailures",e.TdeMigrationClientException="TdeMigrationClientException",e.TdeConfigurationUseADS="TdeConfigurationUseADS",e.TdeConfigurationAlreadyMigrated="TdeConfigurationAlreadyMigrated",e.TdeConfigurationCancelled="TdeConfigurationCancelled"}(s||(t.TelemetryAction=s={})),t.logError=function(e,i,n){console.log(n),t.TelemetryReporter.sendErrorEvent(e,i)},t.sendSqlMigrationActionEvent=l,t.getTelemetryProps=c,t.sendButtonClickEvent=function(e,t,i,n,r){l(t,s.PageButtonClick,{...c(e),buttonPressed:i,pageTitle:n,newPageTitle:r},{})}},5982:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssessmentDetailsHeader=void 0;const n=i(9563),r=i(2074),o=i(3186),a=i(3186),s=i(1456),l=i(1386);t.AssessmentDetailsHeader=class{get targetTypeDropdown(){return this._targetSelectionDropdown}get targetTypeContainer(){return this._targetTypeContainer}get noTargetSelectedContainer(){return this._noTargetSelectedContainer}get headerCardsContainer(){return this._headerCardsContainer}constructor(e,t=!1){this.migrationStateModel=e,this._readonly=t,this._valueContainers=[]}createAssessmentDetailsHeader(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({CSSStyles:{"margin-left":"15px"}}).component();this._targetTypeContainer=this.createTargetTypeContainer(),this._noTargetSelectedContainer=this.createTargetSelectedContainer(),this._headerCardsContainer=e.modelBuilder.flexContainer().withLayout({flexFlow:"row"}).component();const i=[];return this._readonly||i.push({title:r.RECOMMENDED_CONFIGURATION}),i.push({title:r.DATABASES_ASSESSED_LABEL},{title:r.MIGRATION_TIME_LABEL}),this._headerCardsContainer.addItems(i.map((e=>this.createCard(e)))),t.addItems([this._targetTypeContainer,this._noTargetSelectedContainer,this._headerCardsContainer]),t}createTargetSelectedContainer(){const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({CSSStyles:{"margin-left":"50px","margin-top":"50px"}}).component(),t=this._view.modelBuilder.image().withProps({iconPath:l.IconPathHelper.emptyState,iconHeight:200,iconWidth:200,width:200,height:200,CSSStyles:{opacity:"50%",margin:"3% auto",filter:"drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25))"}}).component(),i=this._view.modelBuilder.text().withProps({value:r.NO_TARGET_SELECTED_LABEL,width:210,height:34,CSSStyles:{...n.NOTE_CSS,margin:"auto","text-align":"center"}}).component();return e.addItems([t,i]),e}createCard(e){const t=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:190,height:75}).withProps({CSSStyles:{...n.CARD_CSS}}).component(),i=this._view.modelBuilder.text().withProps({value:e.title,CSSStyles:{...n.BODY_CSS,margin:"0px"}}).component(),r=this._view.modelBuilder.text().withProps({value:e.value,CSSStyles:{...n.LABEL_CSS,"overflow-wrap":"break-word"}}).component();return t.addItems([i,r]),this._valueContainers.push(r),t}async populateAssessmentDetailsHeader(e){this._targetSelectionDropdown.value=this.getTargetTypeBasedOnModel(e._targetType);const t=[];if(!this._readonly){const i=await a.getRecommendedConfiguration(e._targetType,e);let n=i[0]??"--";e._targetType===o.MigrationTargetType.SQLVM&&i?.length>1&&(n=i[0]+"\n"+i[1]),t.push({value:n})}t.push({value:String(e._assessmentResults?.databaseAssessments?.length)},{value:String(e._assessmentResults.databaseAssessments.filter((t=>0===t.issues.filter((t=>t.appliesToMigrationTargetPlatform===e._targetType&&t.issueCategory===s.IssueCategory.Issue))?.length))?.length)});let i=0;this._valueContainers.forEach((e=>e.value=t[i++].value))}createTargetTypeContainer(){let e=[r.SUMMARY_SQLDB_TYPE,r.SUMMARY_MI_TYPE,r.SUMMARY_VM_TYPE];if(this._readonly){const t=new Set,i=this.migrationStateModel._assessmentResults?.issues;i.forEach((e=>{t.add(e.appliesToMigrationTargetPlatform)}));for(let e=0;e<this.migrationStateModel._assessmentResults?.databaseAssessments.length;e++){const i=this.migrationStateModel._assessmentResults?.databaseAssessments[e].issues;i.forEach((e=>{t.add(e.appliesToMigrationTargetPlatform)}))}e=Array.from(t).sort().map((e=>{switch(e){case o.MigrationTargetType.SQLDB:return r.SUMMARY_SQLDB_TYPE;case o.MigrationTargetType.SQLMI:return r.SUMMARY_MI_TYPE;case o.MigrationTargetType.SQLVM:return r.SUMMARY_VM_TYPE;default:return e.toString()}}))}const t=this._view.modelBuilder.flexContainer().component(),i=this._view.modelBuilder.text().withProps({value:r.SELECT_TARGET_LABEL,CSSStyles:{...n.LABEL_CSS}}).component();return this._targetSelectionDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:r.AZURE_SQL_TARGET,placeholder:r.SELECT_TARGET_LABEL,values:e,width:250,editable:!0,CSSStyles:{"margin-top":"-0.2em","margin-left":"10px"}}).component(),t.addItem(i,{flex:"none"}),t.addItem(this._targetSelectionDropdown,{flex:"none"}),t}getTargetTypeBasedOnModel(e){switch(e){case o.MigrationTargetType.SQLDB:return r.SUMMARY_SQLDB_TYPE;case o.MigrationTargetType.SQLVM:return r.SUMMARY_VM_TYPE;case o.MigrationTargetType.SQLMI:return r.SUMMARY_MI_TYPE;default:throw new Error("Unsupported type")}}}},8489:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssessmentDetailsPage=void 0;const n=i(9072),r=i(9496),o=i(2074),a=i(9563),s=i(2417),l=i(5982),c=i(8153),u=i(3186),d=i(2037),p=i(7147),h=i(1017),_=i(3186);class g extends s.MigrationWizardPage{constructor(e,t){super(e,n.window.createWizardPage(o.ASSESSMENT_RESULTS_PAGE_TITLE),t),this._disposables=[],this._previousTargetTypeUndefined=!0,this._header=new l.AssessmentDetailsHeader(t),this._body=new c.AssessmentDetailsBody(t,e)}async registerContent(e){this._view=e;const t=this._view.modelBuilder.text().withProps({CSSStyles:{...a.PAGE_TITLE_CSS,margin:"0px 15px 0px 15px"},value:o.ASSESSMENT_RESULTS_PAGE_HEADER}).component();this._headerSection=this._header.createAssessmentDetailsHeader(this._view),this._bodySection=await this._body.createAssessmentDetailsBodyAsync(this._view),this._disposables.push(this._header.targetTypeDropdown.onValueChanged((async e=>{if(e){const t=this.getTargetTypeBasedOnSelection(e);await this.shouldNoTargetSelectionDisplayAsync(!1),await this.executeChange(t),await this._header.populateAssessmentDetailsHeader(this.migrationStateModel),await this._body.populateAssessmentBodyAsync()}}))),this._disposables.push(this.wizard.customButtons[2].onClick((async()=>{const e=await _.promptUserForFolder();if(e){const t=h.join(e,g._assessmentReportName);this.migrationStateModel._assessmentReportFilePath?p.copyFile(this.migrationStateModel._assessmentReportFilePath,t,(e=>{e?console.log(e):r.window.showInformationMessage(o.SAVE_ASSESSMENT_REPORT_SUCCESS(t))})):console.log("assessment report not found")}})));const i=this._view.modelBuilder.formContainer().withFormItems([{component:t},{component:this._headerSection},{component:this._bodySection}]).withProps({CSSStyles:{"padding-top":"0"}}).component();await this._view.initializeModel(i)}async onPageEnter(e){this.wizard.registerNavigationValidator((async e=>{if(this.wizard.message={text:""},e.newPage<e.lastPage)return!0;await this.executeChange(this.migrationStateModel._targetType);const t=[];return 0===this.migrationStateModel._databasesForMigration.length&&t.push(o.SELECT_DATABASE_TO_MIGRATE),!(t.length>0&&(this.wizard.message={text:t.join(d.EOL),level:n.window.MessageLevel.Error},1))})),this.wizard.customButtons[2].hidden=!1,void 0===this.migrationStateModel._targetType?(await this.shouldNoTargetSelectionDisplayAsync(!0),this._previousTargetTypeUndefined=!0):(await this.executeChange(this.migrationStateModel._targetType),await this._header.populateAssessmentDetailsHeader(this.migrationStateModel),await this._body.populateAssessmentBodyAsync()),this.wizard.nextButton.enabled=void 0!==this.migrationStateModel._assessmentResults}async onPageLeave(e){this.wizard.registerNavigationValidator((e=>!0)),this.wizard.message={text:""},this.wizard.customButtons[2].hidden=!0}async handleStateChange(e){}didUpdateDatabasesForMigration(e,t){this.migrationStateModel._didUpdateDatabasesForMigration=0===t.length||t.length!==e.length||e.some((e=>t.indexOf(e)<0))}getTargetTypeBasedOnSelection(e){switch(e){case o.SUMMARY_SQLDB_TYPE:return u.MigrationTargetType.SQLDB;case o.SUMMARY_VM_TYPE:return u.MigrationTargetType.SQLVM;case o.SUMMARY_MI_TYPE:return u.MigrationTargetType.SQLMI;default:throw new Error("Unsupported type")}}async executeChange(e){let t=this._body.treeComponent.selectedDbs();switch(this._previousTargetTypeUndefined&&(t=this.migrationStateModel._databasesForAssessment,this._previousTargetTypeUndefined=!1),e){case u.MigrationTargetType.SQLMI:this.didUpdateDatabasesForMigration(this.migrationStateModel._miDbs,t),this.migrationStateModel._miDbs=t;const e=this.migrationStateModel._miDbs.filter((e=>this.migrationStateModel._databasesForAssessment.findIndex((t=>t===e))>=0));this.migrationStateModel._targetType=u.MigrationTargetType.SQLMI,this.migrationStateModel._databasesForMigration=e;break;case u.MigrationTargetType.SQLVM:this.didUpdateDatabasesForMigration(this.migrationStateModel._vmDbs,t),this.migrationStateModel._vmDbs=t;const i=this.migrationStateModel._vmDbs.filter((e=>this.migrationStateModel._databasesForAssessment.findIndex((t=>t===e))>=0));this.migrationStateModel._targetType=u.MigrationTargetType.SQLVM,this.migrationStateModel._databasesForMigration=i;break;case u.MigrationTargetType.SQLDB:this.didUpdateDatabasesForMigration(this.migrationStateModel._sqldbDbs,t),this.migrationStateModel._sqldbDbs=t;const n=this.migrationStateModel._sqldbDbs.filter((e=>this.migrationStateModel._databasesForAssessment.findIndex((t=>t===e))>=0));this.migrationStateModel._targetType=u.MigrationTargetType.SQLDB,this.migrationStateModel._databasesForMigration=n}this.addWarningNotReadyCondition(),this.migrationStateModel.refreshDatabaseBackupPage=!0}addWarningNotReadyCondition(){var e;switch(this.migrationStateModel._targetType){case u.MigrationTargetType.SQLMI:e=o.ASSESSMENT_MIGRATION_WARNING_SQLMI;break;case u.MigrationTargetType.SQLDB:e=o.ASSESSMENT_MIGRATION_WARNING_SQLDB}this.migrationStateModel._assessmentResults?.databaseAssessments.some((e=>e.issues.find((e=>e.databaseRestoreFails&&e.appliesToMigrationTargetPlatform===this.migrationStateModel._targetType))))&&e&&(this.wizard.message={level:n.window.MessageLevel.Warning,text:e})}async shouldNoTargetSelectionDisplayAsync(e){e?(await _.updateControlDisplay(this._bodySection,!1),await _.updateControlDisplay(this._header.headerCardsContainer,!1),await _.updateControlDisplay(this._header.noTargetSelectedContainer,!0,"flex")):(await _.updateControlDisplay(this._header.noTargetSelectedContainer,!1),await _.updateControlDisplay(this._bodySection,!0,"flex"),await _.updateControlDisplay(this._header.headerCardsContainer,!0,"flex"))}}t.AssessmentDetailsPage=g,g._assessmentReportName="SqlAssessmentReport.json"},8153:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssessmentDetailsBody=void 0;const n=i(2074),r=i(9563),o=i(3186),a=i(9925),s=i(6846),l=i(1386),c=i(5670),u=i(7948),d=i(1456);t.AssessmentDetailsBody=class{constructor(e,t,i=!1){this.migrationStateModel=e,this.wizard=t,this._databaseSummary=new c.DatabaseSummary,this._issueSummary=new u.IssueSummary,this._disposables=[],this._treeComponent=new a.TreeComponent(t,e,i),this._instanceSummary=new s.InstanceSummary(e)}get treeComponent(){return this._treeComponent}async createAssessmentDetailsBodyAsync(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"row"}).withProps({CSSStyles:{"border-top":"solid 1px","border-bottom":"solid 1px","margin-left":"15px"}}).component(),i=this._treeComponent.createTreeComponent(e),n=this.createFindingsListComponent(),r=await this.createSummaryComponentAsync();return t.addItem(i,{flex:"none"}),t.addItem(n,{flex:"none"}),t.addItem(r,{flex:"none",CSSStyles:{width:"450px","min-height":"400px","border-left":"solid 1px"}}),t}async populateAssessmentBodyAsync(){await this._treeComponent.initialize(),this._activeIssues=this.migrationStateModel._assessmentResults?.issues.filter((e=>e.appliesToMigrationTargetPlatform===this.migrationStateModel?._targetType)),await this.refreshResultsAsync(),await this._instanceSummary.populateInstanceSummaryContainerAsync()}createFindingsListComponent(){const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column",width:"190px"}).withProps({CSSStyles:{width:"190px"}}).component();return this._findingsSummaryList=this._view.modelBuilder.listView().withProps({title:{text:n.ASSESSMENT_FINDINGS_LABEL,style:{border:"solid 1px"}},options:[{label:n.SUMMARY_TITLE,id:"summary"}]}).component(),e.addItem(this._findingsSummaryList),this._warningsOrIssuesListSection=this._view.modelBuilder.listView().withProps({title:{text:n.FINDINGS_LABEL},options:[]}).component(),e.addItem(this._warningsOrIssuesListSection),e}async createSummaryComponentAsync(){const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({width:"450px",CSSStyles:{width:"450px"}}).component(),t=this._view.modelBuilder.text().withProps({value:n.DETAILS_TITLE,CSSStyles:{...r.LABEL_CSS,padding:"5px","border-bottom":"solid 1px"}}).component(),i=this._view.modelBuilder.text().withProps({value:n.ASSESSMENT_SUMMARY_TITLE,CSSStyles:{...r.LABEL_CSS,padding:"5px","padding-left":"10px","border-bottom":"solid 1px"}}).component(),o=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component(),a=await this._instanceSummary.createInstanceSummaryContainerAsync(this._view),s=this._databaseSummary.createDatabaseSummary(this._view);s.display="none";const l=this._issueSummary.createIssueSummary(this._view);l.display="none",o.addItems([a,s,l]),e.addItems([t,i,o]);let c=!0;return this._disposables.push(this._treeComponent.instanceTable.onRowSelected((async e=>{c=!0,this._activeIssues=this.migrationStateModel._assessmentResults?.issues.filter((e=>e.appliesToMigrationTargetPlatform===this.migrationStateModel?._targetType)),await a.updateCssStyles({display:"block"}),await s.updateCssStyles({display:"none"}),await l.updateCssStyles({display:"none"}),await i.updateProperty("value",n.ASSESSMENT_SUMMARY_TITLE),await this.refreshResultsAsync(),await this._instanceSummary.populateInstanceSummaryContainerAsync()}))),this._disposables.push(this._treeComponent.databaseTable.onRowSelected((async e=>{c=!1,this._activeIssues=this.migrationStateModel._assessmentResults?.databaseAssessments[e.row].issues.filter((e=>e.appliesToMigrationTargetPlatform===this.migrationStateModel?._targetType)),await a.updateCssStyles({display:"none"}),await l.updateCssStyles({display:"none"}),await s.updateCssStyles({display:"block"}),await i.updateProperty("value",n.ASSESSMENT_SUMMARY_TITLE),await this.refreshResultsAsync(),await this._databaseSummary.populateDatabaseSummaryAsync(this._activeIssues,this.migrationStateModel._assessmentResults?.databaseAssessments[e.row]?.name),this._findingsSummaryList.options.length&&(this._findingsSummaryList.selectedOptionId="0")}))),this._disposables.push(this._findingsSummaryList.onDidClick((async e=>{c?(await a.updateCssStyles({display:"block"}),await s.updateCssStyles({display:"none"})):(await a.updateCssStyles({display:"none"}),await s.updateCssStyles({display:"block"})),await l.updateCssStyles({display:"none"}),await i.updateProperty("value",n.ASSESSMENT_SUMMARY_TITLE)}))),this._disposables.push(this._warningsOrIssuesListSection.onDidClick((async e=>{const t=this._activeIssues[parseInt(this._warningsOrIssuesListSection.selectedOptionId)];await a.updateCssStyles({display:"none"}),await s.updateCssStyles({display:"none"}),await l.updateCssStyles({display:"block"}),await i.updateProperty("value",t?.checkId||""),await this._issueSummary.refreshAssessmentDetailsAsync(t)}))),e}async refreshResultsAsync(){if(this.migrationStateModel?._targetType===o.MigrationTargetType.SQLMI||this.migrationStateModel?._targetType===o.MigrationTargetType.SQLDB){let e=this._activeIssues.sort(((e,t)=>e.databaseRestoreFails?-1:t.databaseRestoreFails?1:e.checkId.localeCompare(t.checkId))).filter((e=>e.appliesToMigrationTargetPlatform===this.migrationStateModel?._targetType)).map(((e,t)=>({id:t.toString(),label:e.checkId,icon:e.issueCategory===d.IssueCategory.Issue?l.IconPathHelper.error:l.IconPathHelper.warning,ariaLabel:e.databaseRestoreFails?n.BLOCKING_ISSUE_ARIA_LABEL(e.checkId):e.checkId}))),t=new Set,i=new Map;for(let n of e)t.has(n.label)||(t.add(n.label),i.set(n.label,n));let r=Array.from(i.values());this._warningsOrIssuesListSection.options=r}else this._warningsOrIssuesListSection.options=[]}}},5670:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseSummary=void 0;const n=i(2074),r=i(9563),o=i(1386),a=i(3186),s=i(1285),l=i(1456);t.DatabaseSummary=class{createDatabaseSummary(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();this._readinessTitle=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.SUBTITLE_LABEL_CSS,margin:"0px","padding-left":"10px"}}).component();const i=e.modelBuilder.text().withProps({value:n.DATABASE_ISSUES_SUMMARY,CSSStyles:{...r.SUBTITLE_LABEL_CSS,margin:"0px","padding-left":"10px","margin-top":"30px"}}).component();return this._totalIssues=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.LIGHT_LABEL_CSS,margin:"0px","padding-left":"10px"}}).component(),this._readinessDescription=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.SUBTITLE_LABEL_CSS,margin:"0px","margin-top":"2px","padding-left":"38px"}}).component(),t.addItem(this._readinessTitle),t.addItem(this.createIconTextContainer()),t.addItem(this._readinessDescription),t.addItem(this.createEncryptionContainer()),t.addItems([i,this._totalIssues]),t}createIconTextContainer(){const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"row"}).withProps({CSSStyles:{"padding-left":"10px","margin-top":"10px"}}).component();return this._readinessIcon=this._view.modelBuilder.image().withProps({iconPath:"",iconHeight:24,iconWidth:24,width:24,height:24,CSSStyles:{"margin-right":"4px"}}).component(),this._readinessText=this._view.modelBuilder.text().withProps({value:"",CSSStyles:{...r.PAGE_SUBTITLE_CSS,"font-weight":"400",margin:"0px"}}).component(),e.addItem(this._readinessIcon,{flex:"none"}),e.addItem(this._readinessText,{flex:"none"}),e}createEncryptionContainer(){this._tdeContainer=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({CSSStyles:{"margin-top":"30px",display:"none"}}).component();const e=this._view.modelBuilder.text().withProps({value:n.ENCRYPTION_LABEL,CSSStyles:{...r.SUBTITLE_LABEL_CSS,margin:"0px","padding-left":"10px"}}).component(),t=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"row"}).withProps({CSSStyles:{"padding-left":"10px","margin-top":"10px"}}).component(),i=this._view.modelBuilder.image().withProps({iconPath:o.IconPathHelper.encryption,iconHeight:24,iconWidth:24,width:24,height:24,CSSStyles:{"margin-right":"4px"}}).component(),a=this._view.modelBuilder.text().withProps({value:n.ENCRYPTION_DESCRIPTION,width:"380px",CSSStyles:{...r.SUBTITLE_LABEL_CSS,margin:"0px"}}).component();return t.addItem(i,{flex:"none"}),t.addItem(a,{flex:"none"}),this._tdeContainer.addItems([e,t]),this._tdeContainer}async populateDatabaseSummaryAsync(e,t){this._readinessTitle.value=n.DB_READINESS_SECTION_TITLE(t),this._totalIssues.value=n.TOTAL_ISSUES_LABEL(e.length);const i=e.filter((e=>e.issueCategory===l.IssueCategory.Issue)).length,r=e.filter((e=>e.issueCategory===l.IssueCategory.Warning)).length;i>0?(this._readinessDescription.value=n.NON_READINESS_DESCRIPTION(i),this._readinessIcon.iconPath=o.IconPathHelper.sqlDatabaseNotReadyLogo,this._readinessText.value=n.NOT_READY):r>0?(this._readinessDescription.value=n.WARNING_READINESS_DESCRIPTION(r),this._readinessIcon.iconPath=o.IconPathHelper.sqlDatabaseWarningLogo,this._readinessText.value=n.READY_WARN):(this._readinessDescription.value=n.READINESS_DESCRIPTION,this._readinessIcon.iconPath=o.IconPathHelper.sqlDatabaseReadyLogo,this._readinessText.value=n.READY),e.findIndex((e=>e.ruleId===s.AssessmentRuleId.TdeEnabled&&e.appliesToMigrationTargetPlatform===a.MigrationTargetType.SQLMI))>=0?await this._tdeContainer.updateCssStyles({display:"block"}):await this._tdeContainer.updateCssStyles({display:"none"})}}},6846:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceSummary=void 0;const n=i(2074),r=i(9563),o=i(3186),a=i(1456),s=i(1285),l=i(5493),c=i(349),u=i(7475);t.InstanceSummary=class{constructor(e){this.migrationStateModel=e,this._yAxisLabels=[],this._divs=[],this._disposables=[],this._previousMiTdeMigrationConfig=new c.TdeMigrationModel}async createInstanceSummaryContainerAsync(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withProps({CSSStyles:{"padding-left":"10px"}}).component(),i=e.modelBuilder.text().withProps({value:n.READINESS_SECTION_TITLE,CSSStyles:{...r.SUBTITLE_LABEL_CSS,margin:"0px"}}).component();this._assessedDatabases=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.LIGHT_LABEL_CSS,margin:"0px"}}).component();const o=e.modelBuilder.text().withProps({value:n.INSTANCE_FINDING_SUMMARY,CSSStyles:{...r.SUBTITLE_LABEL_CSS,margin:"0px","margin-top":"30px"}}).component();return this._totalFindingLabels=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.LIGHT_LABEL_CSS,margin:"0px"}}).component(),this._tdeInfoContainer=await this.createTdeInfoContainerAsync(),t.addItems([i,this._assessedDatabases,this.createGraphComponent(),this._tdeInfoContainer,o,this._totalFindingLabels]),t}async populateInstanceSummaryContainerAsync(){this._previousMiTdeMigrationConfig=this.migrationStateModel.tdeMigrationConfig,await this.refreshTdeViewAsync(),this._assessedDatabases.value=n.ASSESSED_DBS_LABEL(this.migrationStateModel._assessmentResults?.databaseAssessments?.length),this._totalFindingLabels.value=n.TOTAL_FINDINGS_LABEL(this.migrationStateModel._assessmentResults?.issues.filter((e=>e.appliesToMigrationTargetPlatform===this.migrationStateModel._targetType)).length);const e=this.migrationStateModel._assessmentResults.databaseAssessments,t=e.filter((e=>0===e.issues.filter((e=>e.appliesToMigrationTargetPlatform===this.migrationStateModel._targetType)).length)).length,i=e.filter((e=>0!==e.issues.filter((e=>e.appliesToMigrationTargetPlatform===this.migrationStateModel._targetType&&e.issueCategory===a.IssueCategory.Issue)).length)).length,r=e.length-(t+i),o=[{label:n.NOT_READY,count:i,color:a.ColorCodes.NotReadyState_Red},{label:n.READY_WARN,count:r,color:a.ColorCodes.ReadyWithWarningState_Amber},{label:n.READY,count:t,color:a.ColorCodes.ReadyState_Green}];let s=0;this._yAxisLabels.forEach((e=>{e.value=o[s].label+" ("+o[s++].count+")"})),s=0;let l=1;o.forEach((e=>l=Math.max(e.count,l))),this._divs.forEach((async e=>{const t=this.setWidth(o[s++].count??0,l);await e.updateCssStyles({width:t+"%"})}))}createGraphComponent(){const e=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column"}}).component(),t=[{label:n.NOT_READY,color:a.ColorCodes.NotReadyState_Red},{label:n.READY_WARN,color:a.ColorCodes.ReadyWithWarningState_Amber},{label:n.READY,color:a.ColorCodes.ReadyState_Green}];return e.addItems(t.map((e=>this.createBarComponent(e)))),e}createBarComponent(e){const t=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"row"}}).component();t.addItem(this.createYAxisComponent(),{flex:"none"});const i=this._view.modelBuilder.divContainer().withProps({width:"0px",CSSStyles:{"margin-top":"12px","margin-left":"10px","background-color":e.color??"",height:"30px",width:"0px"}}).component();return this._divs.push(i),t.addItem(i),t}createYAxisComponent(){const e=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{width:"80px","margin-top":"12px",height:"30px","overflow-wrap":"break-word"}}).component(),t=this._view.modelBuilder.text().withProps({value:"",CSSStyles:{...r.CARD_AXES_LABEL,"overflow-wrap":"break-word"}}).component();return this._yAxisLabels.push(t),e.addItem(t),e}setWidth(e,t){return 0===t?0:Math.sqrt(e)/Math.sqrt(t)*75}async createTdeInfoContainerAsync(){const e=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"column"}}).component();return this._tdeEditButton=this._view.modelBuilder.button().withProps({label:n.TDE_BUTTON_CAPTION,width:180,CSSStyles:{...r.BODY_CSS,margin:"0","margin-top":"30px"}}).component(),this._tdeConfigurationDialog=new l.TdeConfigurationDialog(this.migrationStateModel,(()=>this._onTdeConfigClosed())),this._disposables.push(this._tdeEditButton.onDidClick((async e=>await this._tdeConfigurationDialog.openDialog()))),this._tdeDatabaseSelectedHelperText=this._view.modelBuilder.text().withProps({CSSStyles:{...r.BODY_CSS},ariaLive:"polite"}).component(),e.addItems([this._tdeEditButton,this._tdeDatabaseSelectedHelperText]),await o.updateControlDisplay(e,!1),e}_resetTdeConfiguration(){this._previousMiTdeMigrationConfig=this.migrationStateModel.tdeMigrationConfig,this.migrationStateModel.tdeMigrationConfig=new c.TdeMigrationModel}async refreshTdeViewAsync(){if(this.migrationStateModel._targetType!==o.MigrationTargetType.SQLMI)this._resetTdeConfiguration();else{const e=this.migrationStateModel._assessmentResults.databaseAssessments.filter((e=>this.migrationStateModel._databasesForMigration.findIndex((t=>t===e.name))>=0&&e.issues.findIndex((e=>e.ruleId===s.AssessmentRuleId.TdeEnabled&&e.appliesToMigrationTargetPlatform===o.MigrationTargetType.SQLMI))>=0)).map((e=>e.name));if(this._matchWithEncryptedDatabases(e))this.migrationStateModel.tdeMigrationConfig=this._previousMiTdeMigrationConfig;else{if(!o.isWindows())return;if(this.migrationStateModel.tdeMigrationConfig.setTdeEnabledDatabasesCount(e),this.migrationStateModel.tdeMigrationConfig.hasTdeEnabledDatabases()){const e=this.migrationStateModel.tdeMigrationConfig.getAppliedConfigDialogSetting()===c.ConfigDialogSetting.ExportCertificates?n.TDE_WIZARD_MSG_TDE:n.TDE_WIZARD_MSG_MANUAL;this._tdeDatabaseSelectedHelperText.value=n.TDE_MSG_DATABASES_SELECTED(this.migrationStateModel.tdeMigrationConfig.getTdeEnabledDatabasesCount(),e)}else this._tdeDatabaseSelectedHelperText.value=n.TDE_WIZARD_MSG_EMPTY}}await o.updateControlDisplay(this._tdeInfoContainer,this.migrationStateModel.tdeMigrationConfig.hasTdeEnabledDatabases())}_onTdeConfigClosed(){const e=this.migrationStateModel.tdeMigrationConfig.getAppliedConfigDialogSetting()===c.ConfigDialogSetting.ExportCertificates?n.TDE_WIZARD_MSG_TDE:n.TDE_WIZARD_MSG_MANUAL;let t;switch(this._tdeDatabaseSelectedHelperText.value=n.TDE_MSG_DATABASES_SELECTED(this.migrationStateModel.tdeMigrationConfig.getTdeEnabledDatabasesCount(),e),this.migrationStateModel.tdeMigrationConfig.getAppliedConfigDialogSetting()){case c.ConfigDialogSetting.ExportCertificates:t=u.TelemetryAction.TdeConfigurationUseADS;break;case c.ConfigDialogSetting.DoNotExport:t=u.TelemetryAction.TdeConfigurationAlreadyMigrated;break;case c.ConfigDialogSetting.NoSelection:default:t=u.TelemetryAction.TdeConfigurationCancelled}return(0,u.sendSqlMigrationActionEvent)(u.TelemetryViews.TdeConfigurationDialog,t,{...(0,u.getTelemetryProps)(this.migrationStateModel),numberOfDbsWithTde:this.migrationStateModel.tdeMigrationConfig.getTdeEnabledDatabasesCount().toString()},{}),this._tdeEditButton.focus()}_matchWithEncryptedDatabases(e){var t=this._previousMiTdeMigrationConfig.getTdeEnabledDatabases();return 0!==e.length&&e.length===t.length&&!(e.filter((e=>t.findIndex((t=>t===e))<0)).length>0)}}},7948:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IssueSummary=void 0;const n=i(9072),r=i(2074),o=i(9563),a={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"1px solid"};t.IssueSummary=class{constructor(){this._disposables=[]}createIssueSummary(e){this._view=e;const t=this.createDescriptionContainer();return this._view.modelBuilder.flexContainer().withItems([t]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{"margin-left":"10px"}}).component()}createDescriptionContainer(){const e=this.createDescription(),t=this.createImpactedObjectsDescription(),i=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"row"}).withProps({CSSStyles:{height:"100%"}}).component();return i.addItem(e,{flex:"0 0 auto",CSSStyles:{width:"200px","margin-right":"35px"}}),i.addItem(t,{flex:"0 0 auto",CSSStyles:{width:"180px"}}),i}createDescription(){const e={...o.LIGHT_LABEL_CSS,width:"200px",margin:"12px 0 0"},t={...o.BODY_CSS,width:"200px","word-wrap":"break-word"},i=this._view.modelBuilder.text().withProps({value:r.DESCRIPTION,CSSStyles:e}).component();this._descriptionText=this._view.modelBuilder.text().withProps({CSSStyles:t}).component();const n=this._view.modelBuilder.text().withProps({value:r.RECOMMENDATION,CSSStyles:e}).component();return this._recommendationText=this._view.modelBuilder.text().withProps({CSSStyles:t}).component(),this._moreInfoTitle=this._view.modelBuilder.text().withProps({value:r.MORE_INFO,CSSStyles:e}).component(),this._moreInfoText=this._view.modelBuilder.hyperlink().withProps({label:"",url:"",CSSStyles:t,ariaLabel:r.MORE_INFO,showLinkIcon:!0}).component(),this._view.modelBuilder.flexContainer().withItems([i,this._descriptionText,n,this._recommendationText,this._moreInfoTitle,this._moreInfoText]).withLayout({flexFlow:"column"}).component()}createImpactedObjectsDescription(){const e=this._view.modelBuilder.text().withProps({value:r.IMPACTED_OBJECTS,CSSStyles:{...o.LIGHT_LABEL_CSS,width:"180px",margin:"10px 0px 0px 0px"}}).component(),t={border:"none","text-align":"left","border-bottom":"1px solid"};this._impactedObjectsTable=this._view.modelBuilder.declarativeTable().withProps({ariaLabel:r.IMPACTED_OBJECTS,enableRowSelection:!0,width:"100%",columns:[{displayName:r.TYPE,valueType:n.DeclarativeDataType.string,width:"120px",isReadOnly:!0,headerCssStyles:a,rowCssStyles:t},{displayName:r.NAME,valueType:n.DeclarativeDataType.string,width:"130px",isReadOnly:!0,headerCssStyles:a,rowCssStyles:t}],dataValues:[[{value:""},{value:""}]],CSSStyles:{"margin-top":"12px"}}).component(),this._disposables.push(this._impactedObjectsTable.onRowSelected((e=>{const t=e.row>-1?this._impactedObjects[e.row]:void 0;this.refreshImpactedObject(t)})));const i=this._view.modelBuilder.text().withProps({value:r.OBJECT_DETAILS,CSSStyles:{...o.LIGHT_LABEL_CSS,margin:"12px 0px 0px 0px"}}).component(),s={...o.BODY_CSS,margin:"5px 0px 0px 0px","word-wrap":"break-word"};return this._objectDetailsType=this._view.modelBuilder.text().withProps({value:r.TYPES_LABEL,CSSStyles:s}).component(),this._objectDetailsName=this._view.modelBuilder.text().withProps({value:r.NAMES_LABEL,CSSStyles:s}).component(),this._objectDetailsSample=this._view.modelBuilder.text().withProps({value:"",CSSStyles:s}).component(),this._view.modelBuilder.flexContainer().withItems([e,this._impactedObjectsTable,i,this._objectDetailsType,this._objectDetailsName,this._objectDetailsSample]).withLayout({flexFlow:"column"}).component()}refreshImpactedObject(e){this._objectDetailsType.value=r.IMPACT_OBJECT_TYPE(e?.objectType),this._objectDetailsName.value=r.IMPACT_OBJECT_NAME(e?.name),this._objectDetailsSample.value=e?.impactDetail||""}async refreshAssessmentDetailsAsync(e){this._descriptionText.value=e?.description??"",this._recommendationText.value=e?.message??r.NA,e?.helpLink?(this._moreInfoTitle.display="flex",await this._moreInfoText.updateProperties({display:"flex",url:e?.helpLink||"",label:e?.displayName||"",ariaLabel:e?.displayName||"",showLinkIcon:!0})):(this._moreInfoTitle.display="none",await this._moreInfoText.updateProperties({display:"none",url:"",label:"",ariaLabel:"",showLinkIcon:!1})),this._impactedObjects=e?.impactedObjects||[],await this._impactedObjectsTable.setDataValues(this._impactedObjects.map((e=>[{value:e.objectType},{value:e.name}]))),this._impactedObjectsTable.selectedRow=this._impactedObjects?.length>0?0:-1}}},9925:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeComponent=void 0;const o=i(9072),a=i(2074),s=i(9563),l=i(3186),c=i(1386),u=i(1456),d=i(3963),p=100,h={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},_={border:"none","text-align":"right","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},g={border:"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"1px solid"},m={border:"none","text-align":"right","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","border-bottom":"1px solid"};class S{constructor(e,t,i=!1){this.wizard=e,this.model=t,this._readOnly=i,this._disposables=[]}get instanceTable(){return this._instanceTable}get databaseTable(){return this._databaseTable}createTreeComponent(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({height:"100%",flexFlow:"column"}).withProps({CSSStyles:{"border-right":"solid 1px",width:"285px"}}).component();return t.addItem(this.createSearchComponent(),{flex:"0 0 auto"}),t.addItem(this.createInstanceComponent(),{flex:"0 0 auto"}),t.addItem(this.createDatabaseCount(),{flex:"0 0 auto"}),t.addItem(this.createDatabaseComponent(),{flex:"1 1 auto",CSSStyles:{"overflow-y":"auto"}}),t}createSearchComponent(){let e=this._view.modelBuilder.inputBox().withProps({stopEnterPropagation:!0,placeHolder:a.SEARCH,width:260}).component();return this._disposables.push(e.onTextChanged((e=>this._filterTableList(e)))),this._view.modelBuilder.divContainer().withItems([e]).withProps({CSSStyles:{margin:"10px 15px 0px 0px"}}).component()}_filterTableList(e){if(this._databaseTableValues&&e?.length>0){const t=[];this._databaseTableValues.forEach(((i,n)=>{const r=i[1]?.value,o=r?.toLowerCase(),a=e?.toLowerCase();o?.includes(a)&&t.push(n)})),this._databaseTable.setFilter(t)}else this._databaseTable.setFilter(void 0)}createInstanceComponent(){return this._instanceTable=this._view.modelBuilder.declarativeTable().withProps({ariaLabel:a.SQL_SERVER_INSTANCE,enableRowSelection:!0,width:240,CSSStyles:{"table-layout":"fixed"},columns:[{displayName:a.INSTANCE,valueType:o.DeclarativeDataType.string,width:190,isReadOnly:!0,headerCssStyles:g},{displayName:a.FINDINGS_LABEL,valueType:o.DeclarativeDataType.string,width:50,isReadOnly:!0,headerCssStyles:m}]}).component(),this._view.modelBuilder.divContainer().withItems([this._instanceTable]).withProps({CSSStyles:{margin:"19px 15px 0px 0px"}}).component()}createDatabaseCount(){return this._databaseCount=this._view.modelBuilder.text().withProps({CSSStyles:{...s.BOLD_NOTE_CSS,"margin-right":"15px"}}).component(),this._databaseCount}createDatabaseComponent(){return this._databaseTable=this._view.modelBuilder.declarativeTable().withProps({ariaLabel:a.DATABASES_TABLE_TILE,enableRowSelection:!0,width:230,CSSStyles:{"table-layout":"fixed"},columns:[{displayName:"",valueType:o.DeclarativeDataType.boolean,width:20,isReadOnly:this._readOnly,showCheckAll:!this._readOnly,headerCssStyles:g},{displayName:a.DATABASE,valueType:o.DeclarativeDataType.string,width:160,isReadOnly:!0,headerCssStyles:g},{displayName:a.FINDINGS_LABEL,valueType:o.DeclarativeDataType.string,width:50,isReadOnly:!0,headerCssStyles:m}]}).component(),this._disposables.push(this._databaseTable.onDataChanged((async()=>{await this.updateValuesOnSelectionAsync(this.model),this.model._databasesForMigration=this.selectedDbs()}))),this._view.modelBuilder.divContainer().withItems([this._databaseTable]).withProps({width:"100%",CSSStyles:{"margin-right":"15px"}}).component()}async updateValuesOnSelectionAsync(e){const t=this.selectedDbs()?.length;!this._readOnly&&e._targetType===l.MigrationTargetType.SQLMI&&t>p?(this.wizard.nextButton.enabled=!1,this.wizard.message={level:o.window.MessageLevel.Error,text:a.AZURE_SQL_MI_DB_COUNT_THRESHOLD_EXCEEDS_ERROR(p)}):this._readOnly||this.wizard.nextButton.enabled||(this.wizard.nextButton.enabled=!0,this.wizard.message={level:o.window.MessageLevel.Information,text:a.AZURE_SQL_MI_DB_COUNT_UNDER_THRESHOLD}),await this._databaseCount.updateProperties({value:a.DATABASES(t,e._databasesForAssessment?.length)})}selectedDbs(){let e=[];return this._databaseTable.dataValues?.forEach(((t,i)=>{!0===t[0].value&&e.push(this._dbNames[i])})),e}async initialize(){let e=[];this._databaseTableValues=[],this._dbNames=this.model._databasesForAssessment,this._serverName=this.model.serverName??(await(0,d.getSourceConnectionProfile)()).serverName;const t=this._dbNames.filter((e=>this.model._databasesForMigration.includes(e)));this.model._targetType!==l.MigrationTargetType.SQLVM&&this.model._assessmentResults?(!this._readOnly&&this.model._targetType===l.MigrationTargetType.SQLMI&&t?.length>p&&(this.wizard.nextButton.enabled=!1,this.wizard.message={level:o.window.MessageLevel.Error,text:a.AZURE_SQL_MI_DB_COUNT_THRESHOLD_EXCEEDS_ERROR(p)}),e=[[{value:this.createIconTextCell(c.IconPathHelper.sqlServerLogo,this._serverName),style:h},{value:this.getUniqueIssuesBasedOnCheckId(this.model._assessmentResults?.issues)?.filter((e=>e.appliesToMigrationTargetPlatform===this.model._targetType)).length,style:_}]],this.model._assessmentResults?.databaseAssessments.sort(((e,t)=>t.issues?.length-e.issues?.length)),this._dbNames=this.model._assessmentResults?.databaseAssessments.map((e=>e.name)),this.model._assessmentResults?.databaseAssessments.forEach((e=>{let i=!0;e.issues.find((e=>e.databaseRestoreFails&&e.appliesToMigrationTargetPlatform===this.model._targetType))&&(i=!1),this._databaseTableValues.push([{value:t.includes(e.name)&&i,style:h,enabled:i},{value:this.createIconTextCell(i?c.IconPathHelper.sqlDatabaseLogo:c.IconPathHelper.sqlDatabaseWarningLogo,e.name),style:h},{value:this.getUniqueIssuesBasedOnCheckId(e.issues)?.filter((e=>e.appliesToMigrationTargetPlatform===this.model._targetType))?.length,style:_}])}))):(e=[[{value:this.createIconTextCell(c.IconPathHelper.sqlServerLogo,this._serverName),style:h},{value:"0",style:_}]],this._dbNames.forEach((e=>{this._databaseTableValues.push([{value:t.includes(e),style:h},{value:this.createIconTextCell(c.IconPathHelper.sqlDatabaseLogo,e),style:h},{value:"0",style:_}])}))),await this._instanceTable.setDataValues(e),this._databaseTableValues=(0,u.selectDatabasesFromList)(this.model._databasesForMigration,this._databaseTableValues),await this._databaseTable.setDataValues(this._databaseTableValues),await this.updateValuesOnSelectionAsync(this.model),this._databaseCount.value=a.DATABASES(t.length,this.model._databasesForAssessment?.length)}createIconTextCell(e,t){return t}getUniqueIssuesBasedOnCheckId(e){let t=[],i=[];return e.forEach((e=>{i.includes(e.checkId)||(i.push(e.checkId),t.push(e))})),t}}t.TreeComponent=S,n([(0,l.debounce)(500),r("design:type",Function),r("design:paramtypes",[String]),r("design:returntype",void 0)],S.prototype,"_filterTableList",null)},4201:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseBackupPage=void 0;const n=i(9072),r=i(2037),o=i(4294),a=i(2417),s=i(1285),l=i(2074),c=i(1386),u=i(2816),d=i(3186),p=i(3186),h=i(7475),_=i(9563),g=i(8358),m=i(2495),S=i(3963),f=i(9208),E="170px",T=[l.RESOURCE_GROUP_NOT_FOUND],C=[l.NO_STORAGE_ACCOUNT_FOUND,l.SELECT_RESOURCE_GROUP_PROMPT],y=[l.NO_BLOBCONTAINERS_FOUND,l.SELECT_STORAGE_ACCOUNT],v=[l.NO_BLOBFILES_FOUND,l.SELECT_BLOB_CONTAINER],R=[l.NO_BLOBFOLDERS_FOUND,l.SELECT_BLOB_CONTAINER];class A extends a.MigrationWizardPage{constructor(e,t){super(e,n.window.createWizardPage(l.DATA_SOURCE_CONFIGURATION_PAGE_TITLE),t),this._networkShareTargetDatabaseNames=[],this._blobContainerTargetDatabaseNames=[],this._networkShareLocations=[],this._existingDatabases=[],this._nonPageBlobErrors=[],this._inaccessibleStorageAccounts=[],this._disposables=[]}async registerContent(e){this._view=e,this._sourceConnectionContainer=this.createSourceCredentialsContainer(),this._networkDetailsContainer=this.createNetworkDetailsContainer(),this._targetDatabaseContainer=this.createTargetDatabaseContainer(),this._networkShareStorageAccountDetails=this.createNetworkShareStorageAccountDetailsContainer(),this._migrationTableSection=this._migrationTableSelectionContainer(),this._disposables.push(this.wizard.customButtons[0].onClick((async e=>await this._validateIr())));const t=this._view.modelBuilder.formContainer().withFormItems([{title:"",component:this._sourceConnectionContainer},{title:"",component:this._networkDetailsContainer},{title:"",component:this._networkShareStorageAccountDetails},{title:"",component:this._targetDatabaseContainer},{title:"",component:this._migrationTableSection}]).withProps({CSSStyles:{"padding-top":"0"}}).component();this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await e.initializeModel(t)}createNetworkDetailsContainer(){return this._networkShareContainer=this.createNetworkShareContainer(),this._blobContainer=this.createBlobContainer(),this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([this._networkShareContainer,this._blobContainer]).component()}createSourceCredentialsContainer(){const e=this._view.modelBuilder.text().withProps({value:l.SOURCE_CREDENTIALS,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.SECTION_HEADER_CSS,"margin-top":"4px"}}).component();this._sourceHelpText=this._view.modelBuilder.text().withProps({width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS}}).component();const t=this._view.modelBuilder.text().withProps({value:l.USERNAME,width:u.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{..._.LABEL_CSS}}).component();this._sqlSourceUsernameInput=this._view.modelBuilder.inputBox().withProps({required:!0,enabled:!1,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._sqlSourceUsernameInput.onTextChanged((e=>{this.migrationStateModel._sqlServerUsername=e,this._resetValidationUI()})));const i=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NETWORK_SHARE_PASSWORD_LABEL,width:u.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{..._.LABEL_CSS}}).component();return this._sqlSourcePassword=this._view.modelBuilder.inputBox().withProps({required:!0,inputType:"password",width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._sqlSourcePassword.onTextChanged((e=>{this.migrationStateModel._sqlServerPassword=e,this._resetValidationUI()}))),this._view.modelBuilder.flexContainer().withItems([e,this._sourceHelpText,t,this._sqlSourceUsernameInput,i,this._sqlSourcePassword]).withLayout({flexFlow:"column"}).withProps({display:"none"}).component()}createNetworkShareContainer(){const e=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NETWORK_SHARE_HEADER_TEXT,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.SECTION_HEADER_CSS,"margin-top":"24px"}}).component(),t=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NC_NETWORK_SHARE_HELP_TEXT,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS}}).component(),i=this._view.modelBuilder.infoBox().withProps({text:l.DATABASE_SERVICE_ACCOUNT_INFO_TEXT,style:"information",width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS}}).component(),n=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NETWORK_SHARE_WINDOWS_USER_LABEL,description:l.DATABASE_BACKUP_NETWORK_SHARE_WINDOWS_USER_INFO,width:u.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{..._.LABEL_CSS}}).component();this._windowsUserAccountText=this._view.modelBuilder.inputBox().withProps({placeHolder:l.WINDOWS_USER_ACCOUNT,required:!0,validationErrorMessage:l.INVALID_USER_ACCOUNT,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS,"margin-top":"-1em"}}).withValidation((e=>!(this.migrationStateModel.isBackupContainerNetworkShare&&e.value&&!/^[A-Za-z0-9\\\._-]{7,}$/.test(e.value)))).component(),this._disposables.push(this._windowsUserAccountText.onTextChanged((e=>{for(let t=0;t<this.migrationStateModel._databaseBackup.networkShares.length;t++)this.migrationStateModel._databaseBackup.networkShares[t].windowsUser=e;this._resetValidationUI()})));const r=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NETWORK_SHARE_PASSWORD_LABEL,width:u.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{..._.LABEL_CSS}}).component();return this._passwordText=this._view.modelBuilder.inputBox().withProps({placeHolder:l.DATABASE_BACKUP_NETWORK_SHARE_PASSWORD_PLACEHOLDER,inputType:"password",required:!0,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS,"margin-top":"-1em"}}).component(),this._disposables.push(this._passwordText.onTextChanged((e=>{for(let t=0;t<this.migrationStateModel._databaseBackup.networkShares.length;t++)this.migrationStateModel._databaseBackup.networkShares[t].password=e;this._resetValidationUI()}))),this._view.modelBuilder.flexContainer().withItems([e,t,i,n,this._windowsUserAccountText,r,this._passwordText]).withLayout({flexFlow:"column"}).withProps({display:"none"}).component()}_resetValidationUI(){this.wizard.message.level===n.window.MessageLevel.Information&&(this.wizard.message={text:""}),this.migrationStateModel.resetIrValidationResults()}createBlobContainer(){const e=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_BLOB_STORAGE_HEADER_TEXT,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.SECTION_HEADER_CSS}}).component(),t=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_BLOB_STORAGE_HELP_TEXT,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS,"margin-bottom":"12px"}}).component(),i=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_BLOB_STORAGE_SUBSCRIPTION_LABEL,CSSStyles:{..._.LABEL_CSS}}).component();this._blobContainerSubscription=this._view.modelBuilder.text().withProps({enabled:!1,CSSStyles:{..._.BODY_CSS,margin:"0 0 12px 0"}}).component();const n=this._view.modelBuilder.text().withProps({value:l.LOCATION,CSSStyles:{..._.LABEL_CSS}}).component();return this._blobContainerLocation=this._view.modelBuilder.text().withProps({enabled:!1,CSSStyles:{..._.BODY_CSS,margin:"0px"}}).component(),this._view.modelBuilder.flexContainer().withItems([e,t,i,this._blobContainerSubscription,n,this._blobContainerLocation]).withLayout({flexFlow:"column"}).withProps({display:"none"}).component()}createTargetDatabaseContainer(){const e={..._.LABEL_CSS,border:"none","text-align":"left","box-shadow":"inset 0px -1px 0px #F3F2F1"},t={..._.BODY_CSS,border:"none","font-size":"13px","box-shadow":"inset 0px -1px 0px #F3F2F1"},i=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NETWORK_SHARE_TABLE_HELP_TEXT,CSSStyles:{..._.SECTION_HEADER_CSS,"margin-top":"8px"}}).component(),r=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_BLOB_STORAGE_TABLE_HELP_TEXT,CSSStyles:{..._.SECTION_HEADER_CSS}}).component();this._networkShareTargetDatabaseNamesTable=this._view.modelBuilder.declarativeTable().withProps({columns:[{displayName:l.SOURCE_DATABASE,valueType:n.DeclarativeDataType.string,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:"250px"},{displayName:l.TARGET_DATABASE_NAME,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E},{displayName:l.NETWORK_SHARE_PATH,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:"300px"}]}).component(),this._blobContainerTargetDatabaseNamesTable=this._view.modelBuilder.declarativeTable().withProps({columns:[{displayName:l.SOURCE_DATABASE,valueType:n.DeclarativeDataType.string,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E},{displayName:l.TARGET_DATABASE_NAME,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E},{displayName:l.RESOURCE_GROUP,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E},{displayName:l.STORAGE_ACCOUNT,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E},{displayName:l.BLOB_CONTAINER,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E},{displayName:l.BLOB_CONTAINER_LAST_BACKUP_FILE,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E,hidden:!0},{displayName:l.BLOB_CONTAINER_FOLDER,valueType:n.DeclarativeDataType.component,rowCssStyles:t,headerCssStyles:e,isReadOnly:!0,width:E,hidden:!0}]}).component(),this._networkShareVmDatabaseAlreadyExistsInfoBox=this._view.modelBuilder.infoBox().withProps({text:l.DATABASE_ALREADY_EXISTS_VM_INFO,style:"information",width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS,display:"none"}}).component(),this._networkTableContainer=this._view.modelBuilder.flexContainer().withItems([i,this._networkShareVmDatabaseAlreadyExistsInfoBox,this._networkShareTargetDatabaseNamesTable]).withProps({CSSStyles:{display:"none"}}).component();const o=this._view.modelBuilder.text().withProps({value:l.ALL_FIELDS_REQUIRED,CSSStyles:{..._.BODY_CSS}}).component();return this._blobContainerFolderStructureInfoBox=this._view.modelBuilder.infoBox().withProps({text:l.DATABASE_BACKUP_BLOB_FOLDER_STRUCTURE_INFO,style:"information",width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS}}).component(),this._blobContainerVmDatabaseAlreadyExistsInfoBox=this._view.modelBuilder.infoBox().withProps({text:l.DATABASE_ALREADY_EXISTS_VM_INFO,style:"information",width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS,display:"none"}}).component(),this._blobTableContainer=this._view.modelBuilder.flexContainer().withItems([r,o,this._blobContainerFolderStructureInfoBox,this._blobContainerVmDatabaseAlreadyExistsInfoBox,this._blobContainerTargetDatabaseNamesTable]).withProps({CSSStyles:{display:"none"}}).component(),this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([this._networkTableContainer,this._blobTableContainer]).withProps({CSSStyles:{display:"none"}}).component()}createNetworkShareStorageAccountDetailsContainer(){const e=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NETWORK_SHARE_AZURE_ACCOUNT_HEADER,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.SECTION_HEADER_CSS,"margin-top":"12px"}}).component(),t=this._view.modelBuilder.text().withProps({value:l.DATABASE_BACKUP_NETWORK_SHARE_AZURE_ACCOUNT_HELP,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS,"margin-bottom":"12px"}}).component(),i=this._view.modelBuilder.text().withProps({value:l.SUBSCRIPTION,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.LABEL_CSS,margin:"0"}}).component();this._networkShareContainerSubscription=this._view.modelBuilder.text().withProps({enabled:!1,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{margin:"0"}}).component();const r=this._view.modelBuilder.text().withProps({value:l.LOCATION,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.LABEL_CSS,margin:"12px 0 0"}}).component();this._networkShareContainerLocation=this._view.modelBuilder.text().withProps({enabled:!1,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{margin:"0"}}).component();const o=this._view.modelBuilder.text().withProps({value:l.RESOURCE_GROUP,width:u.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{..._.LABEL_CSS}}).component();this._networkShareStorageAccountResourceGroupDropdown=this._view.modelBuilder.dropDown().withProps({required:!0,ariaLabel:l.RESOURCE_GROUP,width:u.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,fireOnTextChange:!0,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._networkShareStorageAccountResourceGroupDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this.migrationStateModel._resourceGroups.find((t=>t.name===e));if(t){for(let e=0;e<this.migrationStateModel._databaseBackup.networkShares.length;e++)this.migrationStateModel._databaseBackup.networkShares[e].resourceGroup=t;this.loadNetworkShareStorageDropdown()}}})));const a=this._view.modelBuilder.text().withProps({value:l.STORAGE_ACCOUNT,width:u.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{..._.LABEL_CSS}}).component();this._networkShareContainerStorageAccountDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:l.STORAGE_ACCOUNT,required:!0,width:u.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,fireOnTextChange:!0}).component(),this._disposables.push(this._networkShareContainerStorageAccountDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this.migrationStateModel._storageAccounts.find((t=>t.name===e));if(t){for(let e=0;e<this.migrationStateModel._databaseBackup.networkShares.length;e++)this.migrationStateModel._databaseBackup.networkShares[e].storageAccount=t;this.migrationStateModel.resetIrValidationResults(),(this.migrationStateModel.isSqlMiTarget||this.migrationStateModel.isSqlVmTarget)&&(await(0,S.canTargetConnectToStorageAccount)(this.migrationStateModel._targetType,this.migrationStateModel._targetServerInstance,t,this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription)?this._inaccessibleStorageAccounts=[]:this._inaccessibleStorageAccounts=[t.name],this.wizard.message={text:this._inaccessibleStorageAccounts.length>0?l.STORAGE_ACCOUNT_CONNECTIVITY_WARNING(this.migrationStateModel._targetServerInstance.name,this._inaccessibleStorageAccounts,this.migrationStateModel.isSqlMiTarget):"",level:n.window.MessageLevel.Warning})}}}))),this._networkShareContainerStorageAccountRefreshButton=this._view.modelBuilder.button().withProps({iconPath:c.IconPathHelper.refresh,iconHeight:18,iconWidth:18,height:25,ariaLabel:l.REFRESH}).component(),this._disposables.push(this._networkShareContainerStorageAccountRefreshButton.onDidClick((async()=>{this.loadNetworkShareStorageDropdown();const e=this.migrationStateModel._storageAccounts.find((e=>e.name===this._networkShareContainerStorageAccountDropdown.value.displayName));(this.migrationStateModel.isSqlMiTarget||this.migrationStateModel.isSqlVmTarget)&&e&&(await(0,S.canTargetConnectToStorageAccount)(this.migrationStateModel._targetType,this.migrationStateModel._targetServerInstance,e,this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription)?this._inaccessibleStorageAccounts=[]:this._inaccessibleStorageAccounts=[e.name],this.wizard.message={text:this._inaccessibleStorageAccounts.length>0?l.STORAGE_ACCOUNT_CONNECTIVITY_WARNING(this.migrationStateModel._targetServerInstance.name,this._inaccessibleStorageAccounts,this.migrationStateModel.isSqlMiTarget):"",level:n.window.MessageLevel.Warning})})));const s=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{"margin-top":"-1em"}}).component();return s.addItem(this._networkShareContainerStorageAccountDropdown,{flex:"0 0 auto"}),s.addItem(this._networkShareContainerStorageAccountRefreshButton,{flex:"0 0 auto",CSSStyles:{"margin-left":"5px"}}),this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,t,i,this._networkShareContainerSubscription,r,this._networkShareContainerLocation,o,this._networkShareStorageAccountResourceGroupDropdown,a,s]).withProps({display:"none"}).component()}async _updatePageControlsVisibility(){const e=this.migrationStateModel.isSqlDbTarget,t=this.migrationStateModel.isSqlVmTarget,i=this.migrationStateModel.isBackupContainerNetworkShare,n=this.migrationStateModel.isBackupContainerBlobContainer;await d.updateControlDisplay(this._sourceConnectionContainer,e||i),await d.updateControlDisplay(this._migrationTableSection,e),await d.updateControlDisplay(this._networkDetailsContainer,!e),await d.updateControlDisplay(this._targetDatabaseContainer,!e),await d.updateControlDisplay(this._networkShareContainer,i&&!e),await d.updateControlDisplay(this._networkShareStorageAccountDetails,i&&!e),await d.updateControlDisplay(this._networkShareVmDatabaseAlreadyExistsInfoBox,t),await d.updateControlDisplay(this._networkTableContainer,i&&!e),await d.updateControlDisplay(this._blobContainer,n&&!e),await d.updateControlDisplay(this._blobContainerFolderStructureInfoBox,n&&!e),await d.updateControlDisplay(this._blobContainerVmDatabaseAlreadyExistsInfoBox,t),await d.updateControlDisplay(this._blobTableContainer,n&&!e),await this._windowsUserAccountText.updateProperties({required:i&&!e}),await this._passwordText.updateProperties({required:i&&!e}),await this._sqlSourceUsernameInput.updateProperties({required:i||e}),await this._sqlSourcePassword.updateProperties({required:i||e})}async onPageEnter(e){if(this.wizard.registerNavigationValidator((e=>{if(e.newPage<e.lastPage)return!0;this.wizard.message={text:""};const t=[];if(this.migrationStateModel.isSqlDbTarget)this._validateTableSelection()||t.push(l.DATABASE_TABLE_VALIDATE_SELECTION_MESSAGE);else switch(this.migrationStateModel._databaseBackup.networkContainerType){case s.NetworkContainerType.NETWORK_SHARE:this._networkShareStorageAccountResourceGroupDropdown.value?.displayName===l.RESOURCE_GROUP_NOT_FOUND&&t.push(l.INVALID_RESOURCE_GROUP_ERROR),this._networkShareContainerStorageAccountDropdown.value?.displayName===l.NO_STORAGE_ACCOUNT_FOUND&&t.push(l.INVALID_STORAGE_ACCOUNT_ERROR);break;case s.NetworkContainerType.BLOB_CONTAINER:if(this._blobContainerResourceGroupDropdowns.forEach(((e,i)=>{this.shouldDisplayBlobDropdownError(e,T)&&t.push(l.INVALID_BLOB_RESOURCE_GROUP_ERROR(this.migrationStateModel._databasesForMigration[i]))})),this._blobContainerStorageAccountDropdowns.forEach(((e,i)=>{this.shouldDisplayBlobDropdownError(e,C)&&t.push(l.INVALID_BLOB_STORAGE_ACCOUNT_ERROR(this.migrationStateModel._databasesForMigration[i]))})),this._blobContainerDropdowns.forEach(((e,i)=>{this.shouldDisplayBlobDropdownError(e,y)&&t.push(l.INVALID_BLOB_CONTAINER_ERROR(this.migrationStateModel._databasesForMigration[i]))})),this.migrationStateModel._databaseBackup.migrationMode===s.MigrationMode.OFFLINE?this._blobContainerLastBackupFileDropdowns.forEach(((e,i)=>{this.shouldDisplayBlobDropdownError(e,v)&&t.push(l.INVALID_BLOB_LAST_BACKUP_FILE_ERROR(this.migrationStateModel._databasesForMigration[i]))})):this._blobContainerFolderDropdowns.forEach(((e,i)=>{this.shouldDisplayBlobDropdownError(e,R)&&t.push(l.INVALID_BLOB_LAST_BACKUP_FOLDER_ERROR(this.migrationStateModel._databasesForMigration[i]))})),this.migrationStateModel.isSqlVmTarget&&d.isTargetSqlVm2014OrBelow(this.migrationStateModel._targetServerInstance)&&t.push(...this._nonPageBlobErrors),t.length>0){const e=new Map;for(let t=0;t<this.migrationStateModel._targetDatabaseNames.length;t++){const i=this.migrationStateModel._databaseBackup.blobs[t].blobContainer?.id;e.has(i)?e.get(i)?.push(t):e.set(i,[t])}e.forEach((e=>{if(e.length>1){const i=`${e.map((e=>this.migrationStateModel._databasesForMigration[e])).join(", ")}`;t.push(l.PROVIDE_UNIQUE_CONTAINERS+i)}}))}}return this.migrationStateModel.isSqlMiTarget&&this.migrationStateModel._targetDatabaseNames.forEach((e=>{this._existingDatabases.includes(e)&&t.push(l.DATABASE_ALREADY_EXISTS_MI(e,this.migrationStateModel._targetServerInstance.name))})),this.wizard.message={text:t.join(r.EOL),level:n.window.MessageLevel.Error},!(t.length>0)&&(!this.migrationStateModel.isIrMigration||(this.wizard.nextButton.enabled=this.migrationStateModel.isIrTargetValidated,this.updateValidationResultUI(),this.migrationStateModel.isIrTargetValidated))})),this.wizard.customButtons[0].hidden=!this.migrationStateModel.isIrMigration,await this._updatePageControlsVisibility(),this.migrationStateModel.refreshDatabaseBackupPage){const e=this.migrationStateModel.isSqlDbTarget;e&&(this.wizardPage.title=l.DATABASE_TABLE_SELECTION_LABEL,this.wizardPage.description=l.DATABASE_TABLE_SELECTION_LABEL,await this._loadTableData());try{const t=this.migrationStateModel._databaseBackup?.migrationMode===s.MigrationMode.OFFLINE,i=5,r=this._blobContainerTargetDatabaseNamesTable.columns[i].hidden,o=!t;r!==o&&await this._blobContainerTargetDatabaseNamesTable.setDataValues([]),this._blobContainerTargetDatabaseNamesTable.columns[i].hidden=o;const a=6,c=this._blobContainerTargetDatabaseNamesTable.columns[a].hidden,u=t;c!==u&&await this._blobContainerTargetDatabaseNamesTable.setDataValues([]),this._blobContainerTargetDatabaseNamesTable.columns[a].hidden=u;const p=await(0,S.getSourceConnectionProfile)(),h=await(0,S.getSourceConnectionQueryProvider)();let _="";try{const e="select SUSER_NAME()",t=await(0,S.getSourceConnectionUri)(),i=await h.runQueryAndReturn(t,e);_=i.rows[0][0]?.displayValue}catch(e){_=p.userName}this.migrationStateModel._authenticationType=p.authenticationType===n.connection.AuthenticationType.SqlLogin?s.MigrationSourceAuthenticationType.Sql:p.authenticationType===n.connection.AuthenticationType.Integrated?s.MigrationSourceAuthenticationType.Integrated:void 0,this._sourceHelpText.value=l.SQL_SOURCE_DETAILS(this.migrationStateModel._authenticationType,p.serverName,e),this._sqlSourceUsernameInput.value=_,this._sqlSourcePassword.value=(await(0,S.getSourceConnectionCredentials)()).password;const g=this.migrationStateModel._databaseBackup?.networkShares?.length>0?this.migrationStateModel._databaseBackup?.networkShares:this.migrationStateModel.savedInfo?.networkShares??[],m=g?.length>0?g[0]:void 0;this._windowsUserAccountText.value=m?.windowsUser??"",this._passwordText.value=m?.password??"",this._networkShareTargetDatabaseNames=[],this._networkShareLocations=[],this._blobContainerTargetDatabaseNames=[],this._blobContainerResourceGroupDropdowns=[],this._blobContainerStorageAccountDropdowns=[],this._blobContainerDropdowns=[],this._blobContainerLastBackupFileDropdowns=[],this._blobContainerFolderDropdowns=[],this._inaccessibleStorageAccounts=[],this.migrationStateModel.isSqlMiTarget&&(this._existingDatabases=await this.migrationStateModel.getManagedDatabases());const f=this.migrationStateModel._targetDatabaseNames,E=this.migrationStateModel._databaseBackup.networkShares||[],A=this.migrationStateModel._databaseBackup.blobs;(this.migrationStateModel._didUpdateDatabasesForMigration||this.migrationStateModel._didDatabaseMappingChange)&&(this.migrationStateModel._targetDatabaseNames=[],this.migrationStateModel._databaseBackup.networkShares=[],this.migrationStateModel._databaseBackup.blobs=[]),this.migrationStateModel._databasesForMigration.forEach(((t,i)=>{let r=e?this.migrationStateModel._sourceTargetMapping.get(t)?.databaseName??t:t,o={},a={};if(this.migrationStateModel._didUpdateDatabasesForMigration||this.migrationStateModel._didDatabaseMappingChange){const i=this.migrationStateModel._sourceDatabaseNames?.indexOf(t);if(i>-1)r=e?r:f[i]??r,o=E[i]??o,a=A[i]??a;else{const e=E.length>0?E[0]:"";e&&(o={...e,networkShareLocation:""})}}this.migrationStateModel._targetDatabaseNames[i]=r,this.migrationStateModel._databaseBackup.networkShares[i]=o,this.migrationStateModel._databaseBackup.blobs[i]=a;const c=this._view.modelBuilder.inputBox().withProps({required:!0,value:r,width:"200px"}).withValidation((e=>this._networkShareTargetDatabaseNames.filter((t=>t.value===e.value)).length>1?(e.validationErrorMessage=l.DUPLICATE_NAME_ERROR,!1):this.migrationStateModel.isSqlMiTarget&&this._existingDatabases.includes(e.value)?(e.validationErrorMessage=l.DATABASE_ALREADY_EXISTS_MI(e.value,this.migrationStateModel._targetServerInstance.name),!1):!(e.value.length<1||e.value.length>128||!/[^<>*%&:\\\/?]/.test(e.value))||(e.validationErrorMessage=l.INVALID_TARGET_NAME_ERROR,!1))).component();this._disposables.push(c.onTextChanged((async e=>{this.migrationStateModel._targetDatabaseNames[i]=e.trim(),this._resetValidationUI(),await this.validateFields(c)}))),c.value=this.migrationStateModel._targetDatabaseNames[i],this._networkShareTargetDatabaseNames.push(c);const u=this._view.modelBuilder.inputBox().withProps({required:!0,placeHolder:l.NETWORK_SHARE_PATH_FORMAT,validationErrorMessage:l.INVALID_NETWORK_SHARE_LOCATION,width:"300px"}).withValidation((e=>!(this.migrationStateModel.isBackupContainerNetworkShare&&e.value&&!/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/.test(e.value)))).component();this._disposables.push(u.onTextChanged((async e=>{this.migrationStateModel._databaseBackup.networkShares[i].networkShareLocation=e.trim(),this._resetValidationUI(),await this.validateFields(u)}))),u.value=this.migrationStateModel._databaseBackup.networkShares[i]?.networkShareLocation,this._networkShareLocations.push(u);const p=this._view.modelBuilder.inputBox().withProps({required:!0,value:r}).withValidation((e=>this._blobContainerTargetDatabaseNames.filter((t=>t.value===e.value)).length>1?(e.validationErrorMessage=l.DUPLICATE_NAME_ERROR,!1):this.migrationStateModel.isSqlMiTarget&&this._existingDatabases.includes(e.value)?(e.validationErrorMessage=l.DATABASE_ALREADY_EXISTS_MI(e.value,this.migrationStateModel._targetServerInstance.name),!1):!(e.value.length<1||e.value.length>128||!/[^<>*%&:\\\/?]/.test(e.value))||(e.validationErrorMessage=l.INVALID_TARGET_NAME_ERROR,!1))).component();this._disposables.push(p.onTextChanged((e=>{this.migrationStateModel._targetDatabaseNames[i]=e.trim(),this._resetValidationUI()}))),c.value=this.migrationStateModel._targetDatabaseNames[i],this._blobContainerTargetDatabaseNames.push(p);const h=this._view.modelBuilder.dropDown().withProps({ariaLabel:l.BLOB_CONTAINER_RESOURCE_GROUP,editable:!0,fireOnTextChange:!0,required:!0}).component(),_=this._view.modelBuilder.dropDown().withProps({ariaLabel:l.BLOB_CONTAINER_STORAGE_ACCOUNT,editable:!0,fireOnTextChange:!0,required:!0,enabled:!1}).component(),g=this._view.modelBuilder.dropDown().withProps({ariaLabel:l.BLOB_CONTAINER,editable:!0,fireOnTextChange:!0,required:!0,enabled:!1}).component(),m=this._view.modelBuilder.dropDown().withProps({ariaLabel:l.BLOB_CONTAINER_LAST_BACKUP_FILE,editable:!0,fireOnTextChange:!0,required:!0,enabled:!1}).component(),I=this._view.modelBuilder.dropDown().withProps({ariaLabel:l.BLOB_CONTAINER_FOLDER,editable:!0,fireOnTextChange:!0,required:!0,enabled:!1}).component();this._disposables.push(h.onValueChanged((async e=>{if(e&&"undefined"!==e&&this.migrationStateModel._resourceGroups){const t=this.migrationStateModel._resourceGroups.find((t=>t.name===e));t&&!T.includes(e)?(this.migrationStateModel._databaseBackup.blobs[i].resourceGroup=t,this.loadBlobStorageDropdown(i),await _.updateProperties({enabled:!0})):await this.disableBlobTableDropdowns(i,l.RESOURCE_GROUP)}}))),this._blobContainerResourceGroupDropdowns.push(h),this._disposables.push(_.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this.migrationStateModel._storageAccounts.find((t=>t.name===e));if(t&&!C.includes(e)){const e=this.migrationStateModel._databaseBackup.blobs[i].storageAccount?this.migrationStateModel._databaseBackup.blobs[i].storageAccount.name:"";this.migrationStateModel._databaseBackup.blobs[i].storageAccount=t,(this.migrationStateModel.isSqlMiTarget||this.migrationStateModel.isSqlVmTarget)&&(this.migrationStateModel._databaseBackup.blobs.filter(((e,t)=>t!==i)).every((t=>t.storageAccount&&t.storageAccount.name.toLowerCase()!==e.toLowerCase()))&&(this._inaccessibleStorageAccounts=this._inaccessibleStorageAccounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))),await(0,S.canTargetConnectToStorageAccount)(this.migrationStateModel._targetType,this.migrationStateModel._targetServerInstance,t,this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription)||(this._inaccessibleStorageAccounts=this._inaccessibleStorageAccounts.filter((e=>e.toLowerCase()!==t.name.toLowerCase())),this._inaccessibleStorageAccounts.push(t.name)),this.wizard.message={text:this._inaccessibleStorageAccounts.length>0?l.STORAGE_ACCOUNT_CONNECTIVITY_WARNING(this.migrationStateModel._targetServerInstance.name,this._inaccessibleStorageAccounts,this.migrationStateModel.isSqlMiTarget):"",level:n.window.MessageLevel.Warning}),await this.loadBlobContainerDropdown(i),await g.updateProperties({enabled:!0})}else await this.disableBlobTableDropdowns(i,l.STORAGE_ACCOUNT)}}))),this._blobContainerStorageAccountDropdowns.push(_),this._disposables.push(g.onValueChanged((async e=>{if(e&&"undefined"!==e&&this.migrationStateModel._blobContainers){const t=this.migrationStateModel._blobContainers.find((t=>t.name===e));if(t&&!y.includes(e)){if(this.migrationStateModel._databaseBackup.blobs[i].blobContainer=t,this.migrationStateModel.isSqlVmTarget&&d.isTargetSqlVm2014OrBelow(this.migrationStateModel._targetServerInstance)){const e=await d.getBlobLastBackupFileNames(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription,this.migrationStateModel._databaseBackup.blobs[i]?.storageAccount,this.migrationStateModel._databaseBackup.blobs[i]?.blobContainer),t=l.INVALID_NON_PAGE_BLOB_BACKUP_FILE_ERROR(this.migrationStateModel._databasesForMigration[i]);this._nonPageBlobErrors=this._nonPageBlobErrors.filter((e=>e!==t)),e.every((e=>"PageBlob"===e.properties.blobType))||this._nonPageBlobErrors.push(t)}this.migrationStateModel._databaseBackup.migrationMode===s.MigrationMode.OFFLINE?(await this.loadBlobLastBackupFileDropdown(i),await m.updateProperties({enabled:!0})):(await this.loadBlobFolderDropdown(i),await I.updateProperties({enabled:!0}))}else await this.disableBlobTableDropdowns(i,l.BLOB_CONTAINER)}}))),this._blobContainerDropdowns.push(g),this.migrationStateModel._databaseBackup.migrationMode===s.MigrationMode.OFFLINE?(this._disposables.push(m.onValueChanged((t=>{if(t&&"undefined"!==t&&this.migrationStateModel._lastFileNames){const r=this.migrationStateModel._lastFileNames.find((e=>e.name===t));r&&!v.includes(t)&&(this.migrationStateModel._databaseBackup.blobs[i].lastBackupFile=r.name);let o=[];o=this.migrationStateModel._databaseBackup.blobs.map((e=>e&&e.storageAccount?(e.storageAccount.id+"/"+d.getBlobContainerNameWithFolder(e,this.migrationStateModel._databaseBackup.migrationMode===s.MigrationMode.OFFLINE)).toLowerCase():"")).filter((e=>""!==e));let a=[...new Set(o)];e||a.length===o.length?this.wizard.message={text:""}:this.wizard.message={level:n.window.MessageLevel.Warning,text:l.DATABASE_BACKUP_BLOB_FOLDER_STRUCTURE_WARNING}}}))),this._blobContainerLastBackupFileDropdowns.push(m)):(this._disposables.push(I.onValueChanged((t=>{if(t&&"undefined"!==t&&this.migrationStateModel._blobContainerFolders&&this.migrationStateModel._blobContainerFolders.includes(t)&&!R.includes(t)){const r=t;this.migrationStateModel._databaseBackup.blobs[i].folderName=r;let o=[];o=this.migrationStateModel._databaseBackup.blobs.map((e=>e&&e.storageAccount?(e.storageAccount.id+"/"+d.getBlobContainerNameWithFolder(e,this.migrationStateModel._databaseBackup.migrationMode===s.MigrationMode.OFFLINE)).toLowerCase():"")).filter((e=>""!==e));let a=[...new Set(o)];e||a.length===o.length?this.wizard.message={text:""}:this.wizard.message={level:n.window.MessageLevel.Warning,text:l.DATABASE_BACKUP_BLOB_FOLDER_STRUCTURE_WARNING}}}))),this._blobContainerFolderDropdowns.push(I))})),this.migrationStateModel._sourceDatabaseNames=this.migrationStateModel._databasesForMigration;const I=this.migrationStateModel._databasesForMigration.map(((e,t)=>[{value:e},{value:this._networkShareTargetDatabaseNames[t]},{value:this._networkShareLocations[t]}]));await this._networkShareTargetDatabaseNamesTable.setDataValues(I);const w=this.migrationStateModel._databasesForMigration.map(((e,t)=>[{value:e},{value:this._blobContainerTargetDatabaseNames[t]},{value:this._blobContainerResourceGroupDropdowns[t]},{value:this._blobContainerStorageAccountDropdowns[t]},{value:this._blobContainerDropdowns[t]},{value:this._blobContainerLastBackupFileDropdowns[t]},{value:this._blobContainerFolderDropdowns[t]}]));await this._blobContainerTargetDatabaseNamesTable.setDataValues([]),await this._blobContainerTargetDatabaseNamesTable.setDataValues(w),await this.getSubscriptionValues(),this.migrationStateModel.refreshDatabaseBackupPage=!1,this.migrationStateModel._didUpdateDatabasesForMigration=!1,this.migrationStateModel._didDatabaseMappingChange=!1,this.migrationStateModel._validateIrSqlDb=[],this.migrationStateModel._validateIrSqlMi=[],this.migrationStateModel._validateIrSqlVm=[]}catch(e){console.log(e);let t=e?.message;t===l.INVALID_OWNER_URI&&(t=l.DATABASE_BACKUP_PAGE_LOAD_ERROR),this.wizard.message={text:t,description:e?.stack,level:n.window.MessageLevel.Error}}await this.validateFields(),this.updateValidationResultUI(!0)}}async _validateIr(){this.wizard.message={text:""};const e=new m.ValidateIrDialog(this.migrationStateModel,(()=>this.updateValidationResultUI()));let t=[];switch(this.migrationStateModel._targetType){case p.MigrationTargetType.SQLDB:t=this.migrationStateModel._validateIrSqlDb;break;case p.MigrationTargetType.SQLMI:t=this.migrationStateModel._validateIrSqlMi;break;case p.MigrationTargetType.SQLVM:t=this.migrationStateModel._validateIrSqlVm}await e.openDialog(l.VALIDATION_DIALOG_TITLE,t)}updateValidationResultUI(e){if(this.migrationStateModel.isIrMigration)if(this.migrationStateModel.isIrTargetValidated)this.wizard.message={level:n.window.MessageLevel.Information,text:l.VALIDATION_MESSAGE_SUCCESS};else{const t=this.migrationStateModel.validationTargetResults,i=t.length>0;if(e&&!i)return;const o=t.some((e=>e.state===s.ValidateIrState.Canceled)),a=t.flatMap((e=>e.errors))??[],c=a.join(r.EOL),u=a.length>0,d=i?u?o?l.VALIDATION_MESSAGE_CANCELED_ERRORS(c):l.VALIDATE_IR_VALIDATION_COMPLETED_ERRORS(c):l.VALIDATION_MESSAGE_CANCELED:l.VALIDATION_MESSAGE_NOT_RUN;this.wizard.message={level:n.window.MessageLevel.Error,text:d}}}async onPageLeave(e){if(this.wizard.registerNavigationValidator((e=>!0)),this.wizard.message={text:""},this.wizard.customButtons[0].hidden=!0,e.newPage>e.lastPage&&!this.migrationStateModel.isSqlDbTarget)switch(this.migrationStateModel._databaseBackup.networkContainerType){case s.NetworkContainerType.BLOB_CONTAINER:for(let e=0;e<this.migrationStateModel._databaseBackup.blobs.length;e++){const t=this.migrationStateModel._databaseBackup.blobs[e].storageAccount;this.migrationStateModel._databaseBackup.blobs[e].storageKey=(await(0,o.getStorageAccountAccessKeys)(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription,t)).keyName1}break;case s.NetworkContainerType.NETWORK_SHARE:if(this.migrationStateModel._databaseBackup.networkShares?.length>0){const e=this.migrationStateModel._databaseBackup.networkShares[0]?.storageAccount,t=(await(0,o.getStorageAccountAccessKeys)(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription,e)).keyName1;for(let e=0;e<this.migrationStateModel._databaseBackup.networkShares.length;e++)this.migrationStateModel._databaseBackup.networkShares[e].storageKey=t}}}async handleStateChange(e){}_validateTableSelection(){for(const e of this.migrationStateModel._sourceTargetMapping){const t=e[1];if(t){if(t.enableSchemaMigration)return!0;for(const e of t.sourceTables)if(!0===e[1].selectedForMigration)return!0}}return!1}async validateFields(e){await(this._sqlSourceUsernameInput?.validate()),await(this._sqlSourcePassword?.validate()),await(this._windowsUserAccountText?.validate()),await(this._passwordText?.validate()),await(this._networkShareContainerSubscription?.validate()),await(this._networkShareStorageAccountResourceGroupDropdown?.validate()),await(this._networkShareContainerStorageAccountDropdown?.validate()),await(this._blobContainerSubscription?.validate());for(let e=0;e<this._networkShareTargetDatabaseNames.length;e++)await(this._networkShareTargetDatabaseNames[e]?.validate()),await(this._networkShareLocations[e]?.validate()),await(this._blobContainerTargetDatabaseNames[e]?.validate()),await(this._blobContainerResourceGroupDropdowns[e]?.validate()),await(this._blobContainerStorageAccountDropdowns[e]?.validate()),await(this._blobContainerDropdowns[e]?.validate()),this.migrationStateModel._databaseBackup.migrationMode===s.MigrationMode.OFFLINE?await(this._blobContainerLastBackupFileDropdowns[e]?.validate()):await(this._blobContainerFolderDropdowns[e]?.validate());this.migrationStateModel.isIrMigration&&this.migrationStateModel.isSqlDbTarget&&await(this._databaseTable?.validate()),this.migrationStateModel.isBackupContainerNetworkShare&&await this._networkShareTargetDatabaseNamesTable.validate(),await(e?.validate())}async getSubscriptionValues(){this._networkShareContainerSubscription.value=this.migrationStateModel._targetSubscription.name,this._networkShareContainerLocation.value=this.migrationStateModel._location.displayName,this._blobContainerSubscription.value=this.migrationStateModel._targetSubscription.name,this._blobContainerLocation.value=this.migrationStateModel._location.displayName,this.migrationStateModel._databaseBackup.subscription=this.migrationStateModel._targetSubscription,await this.loadNetworkStorageResourceGroup(),await this.loadBlobResourceGroup()}async loadNetworkStorageResourceGroup(){try{this._networkShareStorageAccountResourceGroupDropdown.loading=!0,this.migrationStateModel._storageAccounts=await d.getStorageAccounts(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription),this.migrationStateModel._resourceGroups=d.getServiceResourceGroupsByLocation(this.migrationStateModel._storageAccounts,this.migrationStateModel._location),this._networkShareStorageAccountResourceGroupDropdown.values=d.getResourceDropdownValues(this.migrationStateModel._resourceGroups,l.RESOURCE_GROUP_NOT_FOUND),d.selectDefaultDropdownValue(this._networkShareStorageAccountResourceGroupDropdown,this.migrationStateModel._databaseBackup?.networkShares[0]?.resourceGroup?.id,!1)}catch(e){(0,h.logError)(h.TelemetryViews.DatabaseBackupPage,"ErrorLoadingNetworkStorageResourceGroup",e)}finally{this._networkShareStorageAccountResourceGroupDropdown.loading=!1,this.loadNetworkShareStorageDropdown()}}loadNetworkShareStorageDropdown(){try{this._networkShareContainerStorageAccountDropdown.loading=!0,this._networkShareStorageAccountResourceGroupDropdown.loading=!0,this._networkShareContainerStorageAccountDropdown.values=d.getAzureResourceDropdownValues(this.migrationStateModel._storageAccounts,this.migrationStateModel._location,this.migrationStateModel._databaseBackup?.networkShares[0]?.resourceGroup?.name,l.NO_STORAGE_ACCOUNT_FOUND),d.selectDefaultDropdownValue(this._networkShareContainerStorageAccountDropdown,this.migrationStateModel?._databaseBackup?.networkShares[0]?.storageAccount?.id,!1)}catch(e){(0,h.logError)(h.TelemetryViews.DatabaseBackupPage,"ErrorLoadingNetworkShareStorageDropdown",e)}finally{this._networkShareContainerStorageAccountDropdown.loading=!1,this._networkShareStorageAccountResourceGroupDropdown.loading=!1}}async loadBlobResourceGroup(){try{this._blobContainerResourceGroupDropdowns.forEach((e=>e.loading=!0)),this.migrationStateModel._storageAccounts=await d.getStorageAccounts(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription),this.migrationStateModel._resourceGroups=d.getServiceResourceGroupsByLocation(this.migrationStateModel._storageAccounts,this.migrationStateModel._location);const e=d.getResourceDropdownValues(this.migrationStateModel._resourceGroups,l.RESOURCE_GROUP_NOT_FOUND);this._blobContainerResourceGroupDropdowns.forEach(((t,i)=>{t.values=e,d.selectDefaultDropdownValue(t,this.migrationStateModel._databaseBackup?.blobs[i]?.resourceGroup?.id,!1)}))}catch(e){(0,h.logError)(h.TelemetryViews.DatabaseBackupPage,"ErrorLoadingBlobResourceGroup",e)}finally{this._blobContainerResourceGroupDropdowns.forEach((e=>e.loading=!1))}}loadBlobStorageDropdown(e){const t=this._blobContainerStorageAccountDropdowns[e];if(t)try{t.loading=!0,t.values=d.getAzureResourceDropdownValues(this.migrationStateModel._storageAccounts,this.migrationStateModel._location,this.migrationStateModel._databaseBackup.blobs[e]?.resourceGroup?.name,l.NO_STORAGE_ACCOUNT_FOUND),d.selectDefaultDropdownValue(t,this.migrationStateModel._databaseBackup?.blobs[e]?.storageAccount?.id,!1)}catch(e){(0,h.logError)(h.TelemetryViews.DatabaseBackupPage,"ErrorLoadingBlobStorageDropdown",e)}finally{t.loading=!1}}async loadBlobContainerDropdown(e){const t=this._blobContainerDropdowns[e];if(t)try{t.loading=!0,this.migrationStateModel._blobContainers=await d.getBlobContainer(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription,this.migrationStateModel._databaseBackup.blobs[e]?.storageAccount),t.values=d.getResourceDropdownValues(this.migrationStateModel._blobContainers,l.NO_BLOBCONTAINERS_FOUND),d.selectDefaultDropdownValue(t,this.migrationStateModel._databaseBackup?.blobs[e]?.blobContainer?.id,!1)}catch(e){(0,h.logError)(h.TelemetryViews.DatabaseBackupPage,"ErrorLoadingBlobContainers",e)}finally{t.loading=!1}}async loadBlobLastBackupFileDropdown(e){const t=this._blobContainerLastBackupFileDropdowns[e];if(t)try{t.loading=!0,this.migrationStateModel._lastFileNames=await d.getBlobLastBackupFileNames(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription,this.migrationStateModel._databaseBackup.blobs[e]?.storageAccount,this.migrationStateModel._databaseBackup.blobs[e]?.blobContainer),t.values=d.getBlobLastBackupFileNamesValues(this.migrationStateModel._lastFileNames),d.selectDefaultDropdownValue(t,this.migrationStateModel._databaseBackup?.blobs[e]?.lastBackupFile,!1)}catch(e){(0,h.logError)(h.TelemetryViews.DatabaseBackupPage,"ErrorLoadingBlobLastBackupFiles",e)}finally{t.loading=!1}}async loadBlobFolderDropdown(e){const t=this._blobContainerFolderDropdowns[e];if(t)try{t.loading=!0,this.migrationStateModel._blobContainerFolders=await d.getBlobFolders(this.migrationStateModel._azureAccount,this.migrationStateModel._databaseBackup.subscription,this.migrationStateModel._databaseBackup.blobs[e]?.storageAccount,this.migrationStateModel._databaseBackup.blobs[e]?.blobContainer),t.values=d.getBlobFolderValues(this.migrationStateModel._blobContainerFolders),d.selectDefaultDropdownValue(t,this.migrationStateModel._blobContainerFolders[0],!1)}catch(e){(0,h.logError)(h.TelemetryViews.DatabaseBackupPage,"ErrorLoadingBlobFolders",e)}finally{t.loading=!1}}shouldDisplayBlobDropdownError(e,t){return void 0===e.value||t.includes(e.value?.displayName)}async disableBlobTableDropdowns(e,t){const i={enabled:!1,loading:!1},n=(e,t="")=>[{displayName:e,name:t}];this.migrationStateModel._databaseBackup?.migrationMode===s.MigrationMode.OFFLINE?(this._blobContainerLastBackupFileDropdowns[e].values=n(l.SELECT_BLOB_CONTAINER),d.selectDropDownIndex(this._blobContainerLastBackupFileDropdowns[e],0),await(this._blobContainerLastBackupFileDropdowns[e]?.updateProperties(i))):(this._blobContainerFolderDropdowns[e].values=n(l.SELECT_BLOB_CONTAINER),d.selectDropDownIndex(this._blobContainerFolderDropdowns[e],0),await(this._blobContainerFolderDropdowns[e]?.updateProperties(i))),t!==l.BLOB_CONTAINER&&(this._blobContainerDropdowns[e].values=n(l.SELECT_STORAGE_ACCOUNT),d.selectDropDownIndex(this._blobContainerDropdowns[e],0),await this._blobContainerDropdowns[e].updateProperties(i),t!==l.STORAGE_ACCOUNT&&(this._blobContainerStorageAccountDropdowns[e].values=n(l.SELECT_RESOURCE_GROUP_PROMPT),d.selectDropDownIndex(this._blobContainerStorageAccountDropdowns[e],0),await this._blobContainerStorageAccountDropdowns[e].updateProperties(i)))}_migrationTableSelectionContainer(){const e=this._view.modelBuilder.text().withProps({value:l.DATABASE_TABLE_SELECTION_LABEL,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.SECTION_HEADER_CSS}}).component(),t=this._view.modelBuilder.text().withProps({value:l.DATABASE_TABLE_SELECTION_DESCRIPTION,width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS}}).component(),i=this._view.modelBuilder.infoBox().withProps({text:l.DATABASE_SCHEMA_MIGRATION_HELP,style:"information",width:u.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{..._.BODY_CSS,margin:"5px 0 0 0"},links:[{text:l.DATABASE_SCHEMA_MIGRATION_DACPAC_EXTENSION,url:"https://learn.microsoft.com/sql/azure-data-studio/extensions/sql-server-dacpac-extension"},{text:l.DATABASE_SCHEMA_MIGRATION_PROJECTS_EXTENSION,url:"https://learn.microsoft.com/sql/azure-data-studio/extensions/sql-database-project-extension"}]}).component();this._refreshButton=this._view.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,iconHeight:16,iconWidth:16,iconPath:c.IconPathHelper.refresh,label:l.DATABASE_TABLE_REFRESH_LABEL,width:70,CSSStyles:{margin:"15px 0 0 0"}}).component(),this._disposables.push(this._refreshButton.onDidClick((async e=>await this._loadTableData()))),this._refreshLoading=this._view.modelBuilder.loadingComponent().withItem(this._refreshButton).withProps({loading:!1}).component();const r=void 0;return this._databaseTable=this._view.modelBuilder.table().withProps({width:"820px",height:"600px",CSSStyles:{margin:"15px 0 0 0"},data:[],columns:[{name:l.DATABASE_TABLE_SOURCE_DATABASE_COLUMN_LABEL,value:"sourceDatabase",width:200,type:n.ColumnType.text,cssClass:r,headerCssClass:r},{name:l.DATABASE_TABLE_TARGET_DATABASE_COLUMN_LABEL,value:"targetDataase",width:200,type:n.ColumnType.text,cssClass:r,headerCssClass:r},{name:l.SCHEMA_MIGRATION_COLUMN_LABLE,value:"enableSchemaMigration",width:180,type:n.ColumnType.hyperlink,cssClass:r,headerCssClass:r,icon:c.IconPathHelper.cancel},{name:l.DATABASE_TABLE_SELECTED_TABLES_COLUMN_LABEL,value:"selectedTables",width:160,type:n.ColumnType.hyperlink,cssClass:r,headerCssClass:r,icon:c.IconPathHelper.edit}]}).withValidation((e=>!this.migrationStateModel.isSqlDbTarget||this._validateTableSelection())).component(),this._disposables.push(this._databaseTable.onCellAction((async e=>{const t=e;if(2===t?.column){const t=this._databaseTable.data[e.row][0];t&&this._hasSchemaMigraitonBlockerIssues(t)&&await this._openSchemaMigrationAssessmentDialog(t,(()=>this._loadTableData()))}else if(3===t?.column){const t=this._databaseTable.data[e.row][0],i=this.migrationStateModel._sourceTargetMapping.get(t),n=i?.databaseName;t&&n&&await this._openTableSelectionDialog(t,n,(()=>this._loadTableData()))}}))),this._view.modelBuilder.flexContainer().withItems([e,t,i,this._refreshLoading,this._databaseTable]).withLayout({flexFlow:"column"}).component()}async _openSchemaMigrationAssessmentDialog(e,t){const i=new f.SchemaMigrationAssessmentDialog(this.migrationStateModel,e,t);await i.openDialog("")}async _openTableSelectionDialog(e,t,i){const n=new g.TableMigrationSelectionDialog(this.migrationStateModel,e,i);await n.openDialog(l.SELECT_DATABASE_TABLES_TITLE(t))}async _loadTableData(){this._refreshLoading.loading=!0,this.wizard.message={text:""};const e=[];this.migrationStateModel._sourceTargetMapping.forEach(((t,i)=>{if(i){const n=t?.sourceTables.size??0,r=n>0;let o=0;t?.sourceTables.forEach((e=>o+=e.selectedForMigration?1:0));const a=r&&o>0;e.push([i,t?.databaseName,{icon:t?.enableSchemaMigration?this._hasSchemaMigraitonBlockerIssues(i)?c.IconPathHelper.warning:c.IconPathHelper.completedMigration:c.IconPathHelper.cancel,title:t?.enableSchemaMigration?this._hasSchemaMigraitonBlockerIssues(i)?"Assessment results":a?"":"Schema only":t?.hasMissingTables?"Not selected":"Not needed"},{icon:a?c.IconPathHelper.completedMigration:c.IconPathHelper.edit,title:r?l.TABLE_SELECTION_COUNT(o,n):l.TABLE_SELECTION_EDIT}])}})),await this._databaseTable.updateProperty("data",e),this._refreshLoading.loading=!1}_hasSchemaMigraitonBlockerIssues(e){var t=this.migrationStateModel._assessmentResults?.databaseAssessments?.find((t=>t.name===e))?.issues?.filter((e=>e.appliesToMigrationTargetPlatform===p.MigrationTargetType.SQLDB))??[];return void 0!==t?.find((e=>void 0!==l.SchemaMigrationFailedRulesLookup[e.ruleId]))}}t.DatabaseBackupPage=A},7149:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseSelectorPage=void 0;const o=i(9072),a=i(2417),s=i(2074),l=i(3186),c=i(9563),u=i(1386),d=i(3963);class p extends a.MigrationWizardPage{constructor(e,t){super(e,o.window.createWizardPage(s.DATABASE_FOR_ASSESSMENT_PAGE_TITLE),t),this._xEventsFilesFolderPath="",this._disposables=[],this._enableNavigationValidation=!0,this.TABLE_WIDTH=650}async registerContent(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",height:"100%",width:"100%"}).component();t.addItem(await this.createRootContainer(e),{flex:"1 1 auto"}),this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await e.initializeModel(t)}async onPageEnter(){this.wizard.registerNavigationValidator((e=>(this.wizard.message={text:"",level:o.window.MessageLevel.Error},e.newPage<e.lastPage||(this._enableNavigationValidation?0!==this.selectedDbs().length||(this.wizard.message={text:s.SELECT_DATABASE_TO_CONTINUE,level:o.window.MessageLevel.Error},!1):(this._enableNavigationValidation=!0,!0))))),(this.migrationStateModel.resumeAssessment||this.migrationStateModel.restartMigration)&&(this._enableNavigationValidation=!1),this._xEventsFilesFolderPath=this.migrationStateModel._xEventsFilesFolderPath}async onPageLeave(){this.wizard.registerNavigationValidator((e=>!0)),this.wizard.message={text:""};const e=this.migrationStateModel._assessedDatabaseList??[],t=this.migrationStateModel._databasesForAssessment;this.migrationStateModel._runAssessments=!this.migrationStateModel._assessmentResults||!!this.migrationStateModel._assessmentResults?.assessmentError||0===e.length||e.length!==t.length||e.some((e=>t.indexOf(e)<0))||this.migrationStateModel._xEventsFilesFolderPath.toLowerCase()!==this._xEventsFilesFolderPath.toLowerCase(),this.migrationStateModel._xEventsFilesFolderPath=this._xEventsFilesFolderPath}async handleStateChange(e){}createSearchComponent(){let e=this._view.modelBuilder.inputBox().withProps({stopEnterPropagation:!0,placeHolder:s.SEARCH,width:200}).component();return this._disposables.push(e.onTextChanged((e=>this._filterTableList(e)))),this._view.modelBuilder.divContainer().withItems([e]).withProps({CSSStyles:{width:"200px","margin-top":"8px"}}).component()}async _filterTableList(e,t){const i=[],n=t||this.selectedDbs();let r=this._databaseTableValues;this._databaseTableValues&&e?.length>0&&(r=this._databaseTableValues.filter((t=>{const i=e?.toLowerCase();return t[2]?.toLowerCase()?.indexOf(i)>-1||t[3]?.toLowerCase()?.indexOf(i)>-1||t[4]?.toLowerCase()?.indexOf(i)>-1})));for(let e=0;e<r.length;e++){const t=r[e][2];n.includes(t)&&i.push(e)}await this._databaseSelectorTable.updateProperty("data",r),this._databaseSelectorTable.selectedRows=i,await this.updateValuesOnSelection()}async createRootContainer(e){await this._loadDatabaseList(this.migrationStateModel,this.migrationStateModel._assessedDatabaseList);const t=this._view.modelBuilder.text().withProps({value:s.DATABASE_FOR_ASSESSMENT_DESCRIPTION,CSSStyles:{...c.BODY_CSS}}).component();this._dbCount=this._view.modelBuilder.text().withProps({value:s.DATABASES_SELECTED(this.selectedDbs().length,this._databaseTableValues.length),CSSStyles:{...c.BODY_CSS,"margin-top":"8px"},ariaLive:"polite"}).component();const i="no-borders";this._databaseSelectorTable=this._view.modelBuilder.table().withProps({data:[],width:this.TABLE_WIDTH,height:"100%",CSSStyles:{"margin-bottom":"12px"},forceFitColumns:o.ColumnSizingMode.ForceFit,columns:[{value:"",width:10,type:o.ColumnType.checkBox,action:o.ActionOnCellCheckboxCheck.selectRow,resizable:!1,cssClass:i,headerCssClass:i},{value:"databaseicon",name:"",width:10,type:o.ColumnType.icon,headerCssClass:i,cssClass:i,resizable:!1},{name:s.DATABASE,value:"database",type:o.ColumnType.text,width:360,cssClass:i,headerCssClass:i},{name:s.STATUS,value:"status",type:o.ColumnType.text,width:80,cssClass:i,headerCssClass:i},{name:s.SIZE,value:"size",type:o.ColumnType.text,width:80,cssClass:i,headerCssClass:i}]}).component(),this._disposables.push(this._databaseSelectorTable.onRowSelected((async e=>await this.updateValuesOnSelection()))),await this._filterTableList("",this.migrationStateModel._databasesForAssessment);const n=this._view.modelBuilder.text().withProps({value:s.XEVENTS_ASSESSMENT_DESCRIPTION,width:this.TABLE_WIDTH,CSSStyles:{...c.BODY_CSS},links:[{text:s.XEVENTS_ASSESSMENT_HELPLINK,url:"https://aka.ms/sql-migration-xe-assess"}]}).component(),r=this._view.modelBuilder.text().withProps({value:s.XEVENTS_ASSESSMENT_OPEN_FOLDER,width:this.TABLE_WIDTH,CSSStyles:{...c.LABEL_CSS}}).component();this._xEventsFolderPickerInput=this._view.modelBuilder.inputBox().withProps({placeHolder:s.FOLDER_NAME,readOnly:!0,width:460,ariaLabel:s.XEVENTS_ASSESSMENT_OPEN_FOLDER}).component(),this._disposables.push(this._xEventsFolderPickerInput.onTextChanged((async e=>{e&&(this._xEventsFilesFolderPath=e.trim())})));const a=this._view.modelBuilder.button().withProps({label:s.OPEN,width:80}).component();this._disposables.push(a.onDidClick((async()=>this._xEventsFolderPickerInput.value=await(0,l.promptUserForFolder)())));const u=this._view.modelBuilder.button().withProps({label:s.CLEAR,width:80}).component();this._disposables.push(u.onDidClick((async()=>{this._xEventsFolderPickerInput.value="",this._xEventsFilesFolderPath=""})));const d=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{"flex-direction":"row","align-items":"left"}}).withItems([this._xEventsFolderPickerInput,a,u]).component();this._xEventsGroup=this._view.modelBuilder.groupContainer().withLayout({header:s.XEVENTS_ASSESSMENT_TITLE,collapsible:!0,collapsed:!0}).withItems([n,r,d]).component();const p=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"65%"}).withProps({CSSStyles:{margin:"0px 28px 0px 28px"}}).component();return p.addItem(t,{flex:"0 0 auto"}),p.addItem(this.createSearchComponent(),{flex:"0 0 auto"}),p.addItem(this._dbCount,{flex:"0 0 auto"}),p.addItem(this._databaseSelectorTable),p.addItem(this._xEventsGroup,{flex:"0 0 auto"}),p}async _loadDatabaseList(e,t){const i=(await(0,d.getDatabasesList)(await(0,d.getSourceConnectionProfile)())).filter((e=>!d.excludeDatabases.includes(e.options.name)))||[];i.sort(((e,t)=>e.options.name.localeCompare(t.options.name))),this._dbNames=[],e._databaseInfosForMigration=[],this._databaseTableValues=i.map((i=>{const n=i.options.name;this._dbNames.push(n);const r=this.getSourceDatabaseInfo(i);return e._databaseInfosForMigration.push(r),e._databaseInfosForMigrationMap.set(n,r),[t?.indexOf(n)>-1,{icon:u.IconPathHelper.sqlDatabaseLogo,title:n},n,i.options.state,i.options.sizeInMB]}))||[]}selectedDbs(){const e=this._databaseSelectorTable?.data||[];return(this._databaseSelectorTable?.selectedRows||[]).filter((t=>t<e.length)).map((t=>e[t][2]))||[]}async updateValuesOnSelection(){const e=this.selectedDbs()||[];await this._dbCount.updateProperties({value:s.DATABASES_SELECTED(e.length,this._databaseSelectorTable.data?.length||0)}),this.migrationStateModel._databasesForAssessment=e}getSourceDatabaseInfo(e){return{databaseName:e.options.name,databaseCollation:e.options.collation,databaseSizeInMB:e.options.sizeInMB,databaseState:e.options.state}}}t.DatabaseSelectorPage=p,n([(0,l.debounce)(500),r("design:type",Function),r("design:paramtypes",[String,Array]),r("design:returntype",Promise)],p.prototype,"_filterTableList",null)},9236:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntergrationRuntimePage=void 0;const n=i(9072),r=i(2417),o=i(1285),a=i(1981),s=i(2074),l=i(2816),c=i(4294),u=i(1386),d=i(7475),p=i(3186),h=i(9563);class _ extends r.MigrationWizardPage{constructor(e,t){super(e,n.window.createWizardPage(s.IR_PAGE_TITLE),t),this._disposables=[],this._lastIn=0,this.migrationStateModel._databaseBackup.migrationMode=this.migrationStateModel._databaseBackup.migrationMode||this.migrationStateModel.isSqlDbTarget?o.MigrationMode.OFFLINE:o.MigrationMode.ONLINE}async registerContent(e){this._view=e,this._statusLoadingComponent=e.modelBuilder.loadingComponent().withItem(this.createDMSDetailsContainer()).component(),this._dmsInfoContainer=this._view.modelBuilder.flexContainer().withItems([this._statusLoadingComponent]).component(),this._radioButtonContainer=this.createBackupLocationComponent(),this._modeContainer=this.migrationModeContainer();const t=e.modelBuilder.formContainer().withFormItems([{component:this._modeContainer},{component:this._radioButtonContainer},{component:this.migrationServiceDropdownContainer()},{component:this._dmsInfoContainer}]).withProps({CSSStyles:{"padding-top":"0"}}).component();this._disposables.push(this._view.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),await e.initializeModel(t)}migrationModeContainer(){const e="migrationMode";this._onlineButton=this._view.modelBuilder.radioButton().withProps({label:s.DATABASE_BACKUP_MIGRATION_MODE_ONLINE_LABEL,name:e,checked:this.migrationStateModel._databaseBackup.migrationMode===o.MigrationMode.ONLINE,CSSStyles:{...h.LABEL_CSS}}).component();const t=this._view.modelBuilder.text().withProps({value:s.DATABASE_BACKUP_MIGRATION_MODE_ONLINE_DESCRIPTION,CSSStyles:{...h.NOTE_CSS,"margin-left":"20px"}}).component();this._disposables.push(this._onlineButton.onDidChangeCheckedState((e=>{e&&(this.migrationStateModel._databaseBackup.migrationMode=o.MigrationMode.ONLINE,this.migrationStateModel.refreshDatabaseBackupPage=!0)}))),this._offlineButton=this._view.modelBuilder.radioButton().withProps({label:s.DATABASE_BACKUP_MIGRATION_MODE_OFFLINE_LABEL,name:e,checked:this.migrationStateModel._databaseBackup.migrationMode===o.MigrationMode.OFFLINE,CSSStyles:{...h.LABEL_CSS,"margin-top":"12px"}}).component();const i=this._view.modelBuilder.text().withProps({value:s.DATABASE_BACKUP_MIGRATION_MODE_OFFLINE_DESCRIPTION,CSSStyles:{...h.NOTE_CSS,"margin-left":"20px"}}).component();return this._disposables.push(this._offlineButton.onDidChangeCheckedState((e=>{e&&(this.migrationStateModel._databaseBackup.migrationMode=o.MigrationMode.OFFLINE,this.migrationStateModel.refreshDatabaseBackupPage=!0)}))),this._view.modelBuilder.flexContainer().withItems([this._onlineButton,t,this._offlineButton,i]).withLayout({flexFlow:"column"}).component()}createBackupLocationComponent(){const e="networkContainer",t=this._view.modelBuilder.text().withProps({value:s.DATABASE_BACKUP_PAGE_DESCRIPTION,CSSStyles:{...h.BODY_CSS}}).component();return this._networkShareButton=this._view.modelBuilder.radioButton().withProps({name:e,label:s.DATABASE_BACKUP_NC_NETWORK_SHARE_RADIO_LABEL,checked:this.migrationStateModel.isBackupContainerNetworkShare,CSSStyles:{...h.BODY_CSS,margin:"0"}}).component(),this._disposables.push(this._networkShareButton.onDidChangeCheckedState((async e=>{if(e){this.migrationStateModel._databaseBackup.networkContainerType=o.NetworkContainerType.NETWORK_SHARE,this.migrationStateModel.refreshDatabaseBackupPage=!0;const e=void 0!==this.migrationStateModel._sqlMigrationService;await p.updateControlDisplay(this._dmsInfoContainer,e),e&&await this.loadStatus()}}))),this._blobContainerButton=this._view.modelBuilder.radioButton().withProps({name:e,label:s.DATABASE_BACKUP_NC_BLOB_STORAGE_RADIO_LABEL,checked:this.migrationStateModel._databaseBackup.networkContainerType===o.NetworkContainerType.BLOB_CONTAINER,CSSStyles:{...h.BODY_CSS,margin:"0"}}).component(),this._disposables.push(this._blobContainerButton.onDidChangeCheckedState((async e=>{e&&(this.migrationStateModel._databaseBackup.networkContainerType=o.NetworkContainerType.BLOB_CONTAINER,await p.updateControlDisplay(this._dmsInfoContainer,!1),this.migrationStateModel.refreshDatabaseBackupPage=!0)}))),this._sqlVmPageBlobInfoBox=this._view.modelBuilder.infoBox().withProps({text:s.DATABASE_BACKUP_SQL_VM_PAGE_BLOB_INFO,style:"information",width:l.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{...h.BODY_CSS,display:"none"},links:[{text:s.DATABASE_BACKUP_SQL_VM_PAGE_BLOB_URL_LABEL,url:"https://aka.ms/dms-migrations-troubleshooting"}]}).component(),this._view.modelBuilder.flexContainer().withItems([t,this._blobContainerButton,this._networkShareButton,this._sqlVmPageBlobInfoBox]).withLayout({flexFlow:"column"}).component()}async onPageEnter(e){const t=this.migrationStateModel.isSqlDbTarget,i=this.migrationStateModel.isSqlVmTarget,r=this.migrationStateModel.isBackupContainerNetworkShare;if(this.wizard.registerNavigationValidator((e=>{if(this.wizard.message={text:""},e.newPage<e.lastPage)return!0;const t=this.migrationStateModel.isSqlDbTarget;if(!t&&!this._networkShareButton.checked&&!this._blobContainerButton.checked)return this.wizard.message={level:n.window.MessageLevel.Error,text:s.SERVICE_SELECTION_LOCATION_MESSAGE},!1;const i=this.migrationStateModel._sqlMigrationService?.properties?.integrationRuntimeState;return this.migrationStateModel._sqlMigrationService?!t&&!r||"Online"===i||(this.wizard.message={level:n.window.MessageLevel.Error,text:s.SERVICE_OFFLINE_ERROR},!1):(this.wizard.message={level:n.window.MessageLevel.Error,text:s.INVALID_SERVICE_ERROR},!1)})),e.newPage<e.lastPage)return;await p.updateControlDisplay(this._modeContainer,!t),this._onlineButton.enabled=!t,t&&(this.migrationStateModel._databaseBackup.migrationMode=o.MigrationMode.OFFLINE,this._offlineButton.checked=!0),this._originalMigrationMode=this.migrationStateModel._databaseBackup.migrationMode,this._networkShareButton.checked=this.migrationStateModel.isBackupContainerNetworkShare,this._blobContainerButton.checked=this.migrationStateModel._databaseBackup.networkContainerType===o.NetworkContainerType.BLOB_CONTAINER,await p.updateControlDisplay(this._radioButtonContainer,!t);const a=i&&p.isTargetSqlVm2014OrBelow(this.migrationStateModel._targetServerInstance);this._networkShareButton.enabled=!a,await p.updateControlDisplay(this._sqlVmPageBlobInfoBox,a,"block"),this.migrationStateModel._databaseBackup.networkContainerType=o.NetworkContainerType.BLOB_CONTAINER,this._blobContainerButton.checked=!0,await this.loadSubscriptionsDropdown(),this._location.value=this.migrationStateModel._location.displayName,await p.updateControlDisplay(this._dmsInfoContainer,t||r)}async onPageLeave(e){this.wizard.registerNavigationValidator((e=>!0)),this.wizard.message={text:""},this._originalMigrationMode!==this.migrationStateModel._databaseBackup.migrationMode&&(this.migrationStateModel.refreshDatabaseBackupPage=!0)}async handleStateChange(e){}migrationServiceDropdownContainer(){const e=this._view.modelBuilder.text().withProps({value:s.IR_PAGE_DESCRIPTION,width:l.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{...h.BODY_CSS,"margin-bottom":"16px"}}).component(),t=this._view.modelBuilder.text().withProps({value:s.SUBSCRIPTION,CSSStyles:{...h.LABEL_CSS}}).component();this._subscriptionDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.MIGRATION_SERVICE_SELECT_SERVICE_LABEL,width:l.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_SERVICE,CSSStyles:{margin:"0"}}).component(),this._disposables.push(this._subscriptionDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.SERVICE_NOT_FOUND){const t=this.migrationStateModel._subscriptions.find((t=>`${t.name} - ${t.id}`===e));this.migrationStateModel._sqlMigrationServiceSubscription=t||void 0}else this.migrationStateModel._sqlMigrationServiceSubscription=void 0;await p.clearDropDown(this._resourceGroupDropdown),await this.loadResourceGroupDropdown()})));const i=this._view.modelBuilder.text().withProps({value:s.LOCATION,CSSStyles:{...h.LABEL_CSS,"margin-top":"1em"}}).component();this._location=this._view.modelBuilder.text().withProps({enabled:!1,width:l.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{margin:"0"}}).component();const n=this._view.modelBuilder.text().withProps({value:s.RESOURCE_GROUP,requiredIndicator:!0,CSSStyles:{...h.LABEL_CSS}}).component();this._resourceGroupDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.RESOURCE_GROUP,placeholder:s.SELECT_RESOURCE_GROUP,width:l.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._resourceGroupDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.RESOURCE_GROUP_NOT_FOUND){const t=this.migrationStateModel._resourceGroups.find((t=>t.name===e));this.migrationStateModel._sqlMigrationServiceResourceGroup=t||void 0}else this.migrationStateModel._sqlMigrationServiceResourceGroup=void 0;await p.clearDropDown(this._dmsDropdown),this.loadDmsDropdown()})));const r=this._view.modelBuilder.text().withProps({value:s.IR_PAGE_TITLE,requiredIndicator:!0,CSSStyles:{...h.LABEL_CSS}}).component();this._dmsDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.IR_PAGE_TITLE,placeholder:s.SELECT_RESOURCE_GROUP_PROMPT,width:l.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._dmsDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.SQL_MIGRATION_SERVICE_NOT_FOUND_ERROR){this.wizard.message={text:""};const t=this.migrationStateModel._sqlMigrationServiceResourceGroup.name.toLowerCase(),i=this.migrationStateModel._sqlMigrationServices.find((i=>i.name===e&&i.properties.resourceGroup.toLowerCase()===t)),n=void 0!==i&&(this.migrationStateModel.isSqlDbTarget||this.migrationStateModel.isBackupContainerNetworkShare);this.migrationStateModel._sqlMigrationService=i,await p.updateControlDisplay(this._dmsInfoContainer,n),n&&await this.loadStatus()}else this.migrationStateModel._sqlMigrationService=void 0,await p.updateControlDisplay(this._dmsInfoContainer,!1)})));const o=this._view.modelBuilder.hyperlink().withProps({label:s.CREATE_NEW,ariaLabel:s.CREATE_NEW_MIGRATION_SERVICE,url:"",CSSStyles:{...h.BODY_CSS}}).component();return this._disposables.push(o.onDidClick((async e=>{const t=new a.CreateSqlMigrationServiceDialog,i=await t.createNewDms(this.migrationStateModel,this._resourceGroupDropdown.value?this._resourceGroupDropdown.value.displayName:"");this.migrationStateModel._sqlMigrationServiceResourceGroup=i.resourceGroup,this.migrationStateModel._sqlMigrationService=i.service,await this.loadResourceGroupDropdown()}))),this._view.modelBuilder.flexContainer().withItems([e,t,this._subscriptionDropdown,i,this._location,n,this._resourceGroupDropdown,r,this._dmsDropdown,o]).withLayout({flexFlow:"column"}).component()}createDMSDetailsContainer(){const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component(),t=this._view.modelBuilder.text().withProps({value:s.SERVICE_CONNECTION_STATUS,CSSStyles:{...h.LABEL_CSS,width:"130px"}}).component();this._refreshButton=this._view.modelBuilder.button().withProps({iconWidth:"18px",iconHeight:"18px",iconPath:u.IconPathHelper.refresh,height:"18px",width:"18px",ariaLabel:s.REFRESH}).component(),this._disposables.push(this._refreshButton.onDidClick((async e=>await this.loadStatus())));const i=this._view.modelBuilder.flexContainer().component();i.addItem(t,{flex:"0"}),i.addItem(this._refreshButton,{flex:"0",CSSStyles:{"margin-right":"10px"}});const n=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();this._dmsStatusInfoBox=this._view.modelBuilder.infoBox().withProps({width:l.WIZARD_INPUT_COMPONENT_WIDTH,style:"error",text:"",CSSStyles:{...h.BODY_CSS}}).component();const r=p.createRegistrationInstructions(this._view,!1);return this._authKeyTable=p.createAuthenticationKeyTable(this._view,"50px","500px"),n.addItems([this._dmsStatusInfoBox,r,this._authKeyTable]),e.addItems([i,n]),e}async loadSubscriptionsDropdown(){try{this._subscriptionDropdown.loading=!0,this.migrationStateModel._subscriptions=await p.getAzureSubscriptions(this.migrationStateModel._azureAccount,this.migrationStateModel._azureTenant?.id);const e=this.migrationStateModel._sqlMigrationServiceSubscription??this.migrationStateModel._targetSubscription;this._subscriptionDropdown.values=await p.getAzureSubscriptionsDropdownValues(this.migrationStateModel._subscriptions),p.selectDefaultDropdownValue(this._subscriptionDropdown,e?.id,!1)}catch(e){(0,d.logError)(d.TelemetryViews.IntegrationRuntimePage,"Error loadSubscriptionsDropdown",e)}finally{this._subscriptionDropdown.loading=!1}}async loadResourceGroupDropdown(){try{this._resourceGroupDropdown.loading=!0;const e=this.migrationStateModel._azureAccount,t=this.migrationStateModel._sqlMigrationServiceSubscription,i=this.migrationStateModel._sqlMigrationService?.id,n=this.migrationStateModel._sqlMigrationServiceResourceGroup?.name??void 0!==i?(0,c.getFullResourceGroupFromId)(i):void 0,r=await p.getAzureSqlMigrationServices(e,t),o=p.getServiceResourceGroupsByLocation(r,this.migrationStateModel._location);this._resourceGroupDropdown.values=p.getResourceDropdownValues(o,s.RESOURCE_GROUP_NOT_FOUND),this.migrationStateModel._sqlMigrationServices=r,this.migrationStateModel._resourceGroups=o,p.selectDefaultDropdownValue(this._resourceGroupDropdown,n,!1)}catch(e){(0,d.logError)(d.TelemetryViews.IntegrationRuntimePage,"Error loadResourceGroupDropdown",e)}finally{this._resourceGroupDropdown.loading=!1}}loadDmsDropdown(){try{this._dmsDropdown.loading=!0;const e=this.migrationStateModel._sqlMigrationService?.id;this._dmsDropdown.values=p.getAzureResourceDropdownValues(this.migrationStateModel._sqlMigrationServices,this.migrationStateModel._location,this.migrationStateModel._sqlMigrationServiceResourceGroup?.name,s.SQL_MIGRATION_SERVICE_NOT_FOUND_ERROR),p.selectDefaultDropdownValue(this._dmsDropdown,e,!1)}catch(e){(0,d.logError)(d.TelemetryViews.IntegrationRuntimePage,"Error loadDmsDropdown",e)}finally{this._dmsDropdown.loading=!1}}async loadStatus(){const e=++this._lastIn;let t="";try{e===this._lastIn&&(this._statusLoadingComponent.loading=!0);const i=this.migrationStateModel._sqlMigrationService;if(i){const n=this.migrationStateModel._azureAccount,r=this.migrationStateModel._sqlMigrationServiceSubscription,o=i.properties.resourceGroup,a=i.location;t=i.name,i?.properties?.integrationRuntimeState&&(i.properties.integrationRuntimeState=void 0);const l=await(0,c.getSqlMigrationService)(n,r,o,a,t);if(e!==this._lastIn)return;const u=(await(0,c.getSqlMigrationServiceMonitoringData)(n,r,o,a,t)).nodes.map((e=>e.nodeName));if(e!==this._lastIn)return;if("Online"===l.properties.integrationRuntimeState?await this._dmsStatusInfoBox.updateProperties({text:s.SERVICE_READY(t,u.join(", "),!0),style:"success"}):await this._dmsStatusInfoBox.updateProperties({text:s.SERVICE_NOT_READY(t,!0),style:"error"}),e!==this._lastIn)return;await p.refreshAuthenticationKeyTable(this._view,this._authKeyTable,n,r,o,a,l),this.migrationStateModel._sqlMigrationService=l,this.migrationStateModel._sqlMigrationServiceSubscription=r,this.migrationStateModel._nodeNames=u}}catch(e){await this._dmsStatusInfoBox.updateProperties({text:s.SERVICE_ERROR_NOT_READY(t,e.message),style:"error"}),(0,d.logError)(d.TelemetryViews.IntegrationRuntimePage,"Error loadStatus",e)}finally{e===this._lastIn&&(this._statusLoadingComponent.loading=!1)}}}t.IntergrationRuntimePage=_},2083:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.LoginMigrationStatusPage=void 0;const o=i(9072),a=i(2417),s=i(2074),l=i(3186),c=i(9563),u=i(1386),d=i(1456),p=i(8479),h=i(7475),_=i(84);class g extends a.MigrationWizardPage{constructor(e,t){super(e,o.window.createWizardPage(s.LOGIN_MIGRATIONS_STATUS_PAGE_TITLE),t),this._disposables=[]}async registerContent(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",height:"100%",width:"100%"}).component();t.addItem(await this.createRootContainer(e),{flex:"1 1 auto"}),this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await e.initializeModel(t)}async onPageEnter(){this.wizard.registerNavigationValidator((e=>!(e.newPage<e.lastPage&&(this.wizard.message={text:s.LOGIN_MIGRATIONS_STATUS_PAGE_PREVIOUS_BUTTON_ERROR,level:o.window.MessageLevel.Error},1)))),this.wizard.backButton.enabled=!1,this.wizard.backButton.hidden=!0,this.wizard.backButton.label=s.LOGIN_MIGRATIONS_STATUS_PAGE_PREVIOUS_BUTTON_TITLE,this.wizard.doneButton.enabled=!1,await this._loadMigratingLoginsList(this.migrationStateModel),await this._filterTableList(""),await this._runLoginMigrations()||(this.migrationStateModel._targetServerInstance?await this._migrationProgress.updateProperties({text:s.LOGIN_MIGRATIONS_FAILED_STATUS_PAGE_DESCRIPTION(this._getTotalNumberOfLogins(),this.migrationStateModel.GetTargetType(),this.migrationStateModel._targetServerInstance.name),style:"error"}):await this._migrationProgress.updateProperties({text:s.LOGIN_MIGRATIONS_FAILED,style:"error"}),this.wizard.message={text:s.LOGIN_MIGRATIONS_FAILED,level:o.window.MessageLevel.Error,description:s.LOGIN_MIGRATIONS_ERROR(this.migrationStateModel._loginMigrationModel.loginMigrationsError.message)},this._progressLoader.loading=!1,(0,h.logError)(h.TelemetryViews.LoginMigrationWizard,"LoginMigrationFailed",_.InternalServerError),(0,h.sendSqlMigrationActionEvent)(h.TelemetryViews.LoginMigrationStatusPage,h.TelemetryAction.LoginMigrationError,{...(0,h.getTelemetryProps)(this.migrationStateModel),errorMessage:_.InternalServerError},{})),this._logMigrationResult(),await this._loadMigratingLoginsList(this.migrationStateModel),await this._filterTableList(""),this.wizard.doneButton.enabled=!0}async onPageLeave(){this.wizard.message={text:"",level:o.window.MessageLevel.Error},this.wizard.registerNavigationValidator((e=>!0))}async handleStateChange(e){}createMigrationProgressLoader(){return this._progressLoader=this._view.modelBuilder.loadingComponent().withProps({loadingText:s.LOGIN_MIGRATION_IN_PROGRESS,loadingCompletedText:s.LOGIN_MIGRATIONS_COMPLETE,loading:!0,CSSStyles:{"margin-right":"20px"}}).component(),this._migrationProgress=this._view.modelBuilder.infoBox().withProps({style:"information",text:s.LOGIN_MIGRATION_IN_PROGRESS,CSSStyles:{...c.PAGE_TITLE_CSS,"margin-right":"20px","font-size":"13px","line-height":"126%"}}).component(),this._progressLoaderContainer=this._view.modelBuilder.flexContainer().withLayout({height:"100%",flexFlow:"row",alignItems:"center"}).component(),this._progressLoaderContainer.addItem(this._migrationProgress,{flex:"0 0 auto"}),this._progressLoaderContainer.addItem(this._progressLoader,{flex:"0 0 auto"}),this._progressLoaderContainer}async createMigrationProgressDetails(){return this._migrationProgressDetails=this._view.modelBuilder.text().withProps({value:s.STARTING_LOGIN_MIGRATION,CSSStyles:{...c.BODY_CSS,width:"660px"}}).component(),this._migrationProgressDetails}createSearchComponent(){let e=this._view.modelBuilder.inputBox().withProps({stopEnterPropagation:!0,placeHolder:s.SEARCH,width:200}).component();return this._disposables.push(e.onTextChanged((e=>this._filterTableList(e)))),this._view.modelBuilder.divContainer().withItems([e]).withProps({CSSStyles:{width:"200px","margin-top":"8px"}}).component()}async _filterTableList(e){let t=this._loginsTableValues;this._loginsTableValues&&e?.length>0&&(t=this._loginsTableValues.filter((t=>{const i=e?.toLowerCase();return t[0]?.toLowerCase()?.indexOf(i)>-1||t[1]?.toLowerCase()?.indexOf(i)>-1||t[2]?.toLowerCase()?.indexOf(i)>-1||t[3]?.title.toLowerCase()?.indexOf(i)>-1}))),await this._migratingLoginsTable.updateProperty("data",t),await this.updateDisplayedLoginCount()}async createRootContainer(e){await this._loadMigratingLoginsList(this.migrationStateModel),this._progressContainer=this._view.modelBuilder.flexContainer().withLayout({height:"100%",flexFlow:"column"}).withProps({CSSStyles:{"margin-bottom":"10px"}}).component(),this._progressContainer.addItem(this.createMigrationProgressLoader(),{flex:"0 0 auto"}),this._progressContainer.addItem(await this.createMigrationProgressDetails(),{flex:"0 0 auto"}),this._loginCount=this._view.modelBuilder.text().withProps({value:s.NUMBER_LOGINS_MIGRATING(this._loginsTableValues.length,this._loginsTableValues.length),CSSStyles:{...c.BODY_CSS,"margin-top":"8px"},ariaLive:"polite"}).component();const t="no-borders";this._migratingLoginsTable=this._view.modelBuilder.table().withProps({data:[],width:650,height:"100%",forceFitColumns:o.ColumnSizingMode.ForceFit,columns:[{name:s.SOURCE_LOGIN,value:"sourceLogin",type:o.ColumnType.text,width:250,cssClass:t,headerCssClass:t},{name:s.LOGIN_TYPE,value:"loginType",type:o.ColumnType.text,width:90,cssClass:t,headerCssClass:t},{name:s.DEFAULT_DATABASE,value:"defaultDatabase",type:o.ColumnType.text,width:100,cssClass:t,headerCssClass:t},{name:s.LOGIN_MIGRATION_STATUS_COLUMN,value:"migrationStatus",width:120,type:o.ColumnType.hyperlink,icon:u.IconPathHelper.inProgressMigration,showText:!0,cssClass:t,headerCssClass:t}]}).component(),this._disposables.push(this._migratingLoginsTable.onCellAction((async e=>{const t=e;if(3===t?.column){const t=this._migratingLoginsTable.data[e.row][0];await this._showLoginDetailsDialog(t)}}))),await this._filterTableList("");const i=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"100%"}).withProps({CSSStyles:{margin:"0px 28px 0px 28px"}}).component();return i.addItem(this._progressContainer,{flex:"0 0 auto"}),i.addItem(this.createSearchComponent(),{flex:"0 0 auto"}),i.addItem(this._loginCount,{flex:"0 0 auto"}),i.addItem(this._migratingLoginsTable),i}async _loadMigratingLoginsList(e){const t=e._loginMigrationModel.loginsForMigration||[];t.sort(((e,t)=>e.loginName.localeCompare(t.loginName))),this._loginsTableValues=t.map((t=>{const i=t.loginName;var n=d.LoginMigrationStatusCodes.InProgress,r=s.LOGIN_MIGRATION_STATUS_IN_PROGRESS;return e._loginMigrationModel.loginMigrationsError?(n=d.LoginMigrationStatusCodes.Failed,r=s.LOGIN_MIGRATION_STATUS_FAILED):e._loginMigrationModel.loginMigrationsResult&&(n=d.LoginMigrationStatusCodes.Succeeded,r=s.LOGIN_MIGRATION_STATUS_SUCCEEDED,Object.keys(e._loginMigrationModel.loginMigrationsResult.exceptionMap).some((e=>e.toLocaleLowerCase()===i.toLocaleLowerCase()))&&(n=d.LoginMigrationStatusCodes.Failed,r=s.LOGIN_MIGRATION_STATUS_FAILED)),[i,t.loginType,t.defaultDatabaseName,{icon:(0,l.getPipelineStatusImage)(n),title:r}]}))||[]}_getTotalNumberOfLogins(){return this._loginsTableValues?.length||0}async updateDisplayedLoginCount(){await this._loginCount.updateProperties({value:s.NUMBER_LOGINS_MIGRATING(this._getNumberOfDisplayedLogins(),this._getTotalNumberOfLogins())})}_getNumberOfDisplayedLogins(){return this._migratingLoginsTable?.data?.length||0}async _updateMigrationProgressDetails(e){await this._migrationProgressDetails.updateProperties({value:e})}async _hideMigrationProgressDetails(){await this._migrationProgressDetails.updateProperties({CSSStyles:{display:"none"}})}async _markMigrationStart(){this.migrationStateModel._targetServerInstance&&await this._migrationProgress.updateProperties({text:s.LOGIN_MIGRATIONS_STATUS_PAGE_DESCRIPTION(this._getTotalNumberOfLogins(),this.migrationStateModel.GetTargetType(),this.migrationStateModel._targetServerInstance.name)}),this._progressLoader.loading=!0,await this._updateMigrationProgressDetails(s.STARTING_LOGIN_MIGRATION),this._logMigrationStart()}async _markMigrationSuccess(){await this._hideMigrationProgressDetails(),this.migrationStateModel._targetServerInstance?await this._migrationProgress.updateProperties({text:s.LOGIN_MIGRATIONS_COMPLETED_STATUS_PAGE_DESCRIPTION(this._getTotalNumberOfLogins(),this.migrationStateModel.GetTargetType(),this.migrationStateModel._targetServerInstance.name),style:"success"}):await this._migrationProgress.updateProperties({text:s.LOGIN_MIGRATIONS_COMPLETE,style:"success"}),this._progressLoader.loading=!1}async _runLoginMigrations(){await this._markMigrationStart();var e=await this.migrationStateModel._loginMigrationModel.MigrateLogins(this.migrationStateModel);return e?(await this._updateMigrationProgressDetails(s.ESTABLISHING_USER_MAPPINGS),(e=await this.migrationStateModel._loginMigrationModel.EstablishUserMappings(this.migrationStateModel))?(await this._updateMigrationProgressDetails(s.MIGRATING_SERVER_ROLES_AND_SET_PERMISSIONS),(e=await this.migrationStateModel._loginMigrationModel.MigrateServerRolesAndSetPermissions(this.migrationStateModel))?(await this._markMigrationSuccess(),!0):(await this._updateMigrationProgressDetails(s.MIGRATING_SERVER_ROLES_AND_SET_PERMISSIONS_FAILED),!1)):(await this._updateMigrationProgressDetails(s.ESTABLISHING_USER_MAPPINGS_FAILED),!1)):(await this._updateMigrationProgressDetails(s.STARTING_LOGIN_MIGRATION_FAILED),!1)}async _showLoginDetailsDialog(e){this.wizard.message={text:""};const t=new p.MultiStepStatusDialog((()=>{})),i=this.migrationStateModel._loginMigrationModel.GetDisplayResults(e),n=this.migrationStateModel._loginMigrationModel.isMigrationComplete;await t.openDialog(s.LOGIN_MIGRATIONS_LOGIN_STATUS_DETAILS_TITLE(e),i,n)}_logMigrationStart(){(0,h.sendSqlMigrationActionEvent)(h.TelemetryViews.LoginMigrationStatusPage,h.TelemetryAction.LoginMigrationStarted,{...(0,h.getTelemetryProps)(this.migrationStateModel),loginsAuthType:this.migrationStateModel._loginMigrationModel.loginsAuthType},{numberLogins:this.migrationStateModel._loginMigrationModel.loginsForMigration.length})}_logMigrationResult(){(0,h.sendSqlMigrationActionEvent)(h.TelemetryViews.LoginMigrationStatusPage,h.TelemetryAction.LoginMigrationCompleted,{...(0,h.getTelemetryProps)(this.migrationStateModel),loginsAuthType:this.migrationStateModel._loginMigrationModel.loginsAuthType,numberLoginsFailingPerStep:this.migrationStateModel._loginMigrationModel.errorCountList.toString(),durationPerStepTimestamp:JSON.stringify(Array.from(this.migrationStateModel._loginMigrationModel.durationPerStep)),hasSystemError:JSON.stringify(this.migrationStateModel._loginMigrationModel.hasSystemError)},{numberLogins:this.migrationStateModel._loginMigrationModel.loginsForMigration.length})}}t.LoginMigrationStatusPage=g,n([(0,l.debounce)(500),r("design:type",Function),r("design:paramtypes",[String]),r("design:returntype",Promise)],g.prototype,"_filterTableList",null)},6178:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginMigrationTargetSelectionPage=void 0;const n=i(9072),r=i(9496),o=i(2037),a=i(2417),s=i(2074),l=i(9563),c=i(2816),u=i(3186),d=i(3186),p=i(4294),h=i(3963),_=i(7184),g=i(7475),m=i(84);class S extends a.MigrationWizardPage{constructor(e,t){super(e,n.window.createWizardPage(s.LOGIN_MIGRATIONS_AZURE_SQL_TARGET_PAGE_TITLE),t),this._disposables=[]}async registerContent(e){this._view=e;const t=this._view.modelBuilder.infoBox().withProps({style:"information",text:s.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_PREVIEW_WARNING,CSSStyles:{...l.BODY_CSS}}).component(),i=this._view.modelBuilder.infoBox().withProps({style:"information",text:s.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_DATA_MIGRATION_WARNING,CSSStyles:{...l.BODY_CSS}}).component(),n=await(0,h.isSourceConnectionSysAdmin)(),r=await(0,h.getSourceConnectionProfile)(),o=this._view.modelBuilder.infoBox().withProps({style:"warning",text:s.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_PERMISSIONS_WARNING(r.userName,r.serverName),CSSStyles:{...l.BODY_CSS}}).component();n&&await o.updateProperties({CSSStyles:{display:"none"}}),this._pageDescription=this._view.modelBuilder.text().withProps({value:s.LOGIN_MIGRATIONS_TARGET_SELECTION_PAGE_DESCRIPTION,CSSStyles:{...l.BODY_CSS,margin:"0"}}).component();const a=this._view.modelBuilder.formContainer().withFormItems([{component:t},{component:i},{component:o},{component:this._pageDescription},{component:this.createAzureSqlTargetTypeDropdown()},{component:this.createAzureAccountsDropdown()},{component:this.createAzureTenantContainer()},{component:this.createTargetDropdownContainer()}]).withProps({CSSStyles:{"padding-top":"0"}}).component();this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await this._view.initializeModel(a)}async onPageEnter(e){if(this.wizard.nextButton.enabled=!1,this.wizard.registerNavigationValidator((e=>(this.wizard.message={text:"",level:n.window.MessageLevel.Error},e.newPage<e.lastPage||!!(this.migrationStateModel._targetServerInstance&&this.migrationStateModel._targetUserName&&this.migrationStateModel._targetPassword)||(this.wizard.message={text:s.SELECT_DATABASE_TO_CONTINUE,level:n.window.MessageLevel.Error},!1)))),!(e.newPage<e.lastPage)){switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_MI_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE;break;case d.MigrationTargetType.SQLVM:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_VM_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE;break;case d.MigrationTargetType.SQLDB:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_SQLDB_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE,this._updateConnectionButtonState()}this._targetUserNameInputBox&&await this._targetUserNameInputBox.updateProperty("required",!0),this._targetPasswordInputBox&&await this._targetPasswordInputBox.updateProperty("required",!0),await u.updateControlDisplay(this._resourceAuthenticationContainer,!0),await this.populateAzureAccountsDropdown(),this._migrationTargetPlatform!==this.migrationStateModel._targetType&&(this._migrationTargetPlatform=this.migrationStateModel._targetType,this._targetPasswordInputBox.value="",this.migrationStateModel._sqlMigrationServices=void 0,this.migrationStateModel._targetServerInstance=void 0,this.migrationStateModel._targetServerName=void 0,this.migrationStateModel._resourceGroup=void 0,this.migrationStateModel._location=void 0,await this.populateLocationDropdown()),this.migrationStateModel._didUpdateDatabasesForMigration&&this._updateConnectionButtonState(),this.wizard.registerNavigationValidator((e=>{if(this.wizard.message={text:""},e.newPage<e.lastPage)return!0;const t=[];this.migrationStateModel._azureAccount||t.push(s.INVALID_ACCOUNT_ERROR),this.migrationStateModel._targetSubscription&&this._azureSubscriptionDropdown.value?.displayName!==s.NO_SUBSCRIPTIONS_FOUND||t.push(s.INVALID_SUBSCRIPTION_ERROR),this.migrationStateModel._location&&this._azureLocationDropdown.value?.displayName!==s.NO_LOCATION_FOUND||t.push(s.INVALID_LOCATION_ERROR),this.migrationStateModel._resourceGroup&&this._azureResourceGroupDropdown.value?.displayName!==s.RESOURCE_GROUP_NOT_FOUND||t.push(s.INVALID_RESOURCE_GROUP_ERROR);const i=this._azureResourceDropdown.value?.displayName;switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:const e=this.migrationStateModel._targetServerInstance;e&&i!==s.NO_MANAGED_INSTANCE_FOUND||t.push(s.INVALID_MANAGED_INSTANCE_ERROR),"Ready"!==e.properties.state&&t.push(s.MI_NOT_READY_ERROR(e.name,e.properties.state));break;case d.MigrationTargetType.SQLVM:this.migrationStateModel._targetServerInstance&&i!==s.NO_VIRTUAL_MACHINE_FOUND||t.push(s.INVALID_VIRTUAL_MACHINE_ERROR);break;case d.MigrationTargetType.SQLDB:const n=this.migrationStateModel._targetServerInstance;n&&i!==s.NO_SQL_DATABASE_FOUND||t.push(s.INVALID_SQL_DATABASE_ERROR),"Ready"!==n.properties.state&&t.push(s.SQLDB_NOT_READY_ERROR(n.name,n.properties.state)),(this._targetUserNameInputBox.value??"").length<1&&t.push(s.MISSING_TARGET_USERNAME_ERROR),(this._targetPasswordInputBox.value??"").length<1&&t.push(s.MISSING_TARGET_PASSWORD_ERROR)}return!(t.length>0&&(this.wizard.message={text:t.join(o.EOL),level:n.window.MessageLevel.Error},1))}))}}async onPageLeave(e){this.wizard.registerNavigationValidator((async e=>!0))}async handleStateChange(e){}createAzureSqlTargetTypeDropdown(){const e=this._view.modelBuilder.text().withProps({value:s.LOGIN_MIGRATIONS_TARGET_TYPE_SELECTION_TITLE,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS,"margin-top":"-1em"}}).component();return this._azureSqlTargetTypeDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.LOGIN_MIGRATIONS_TARGET_TYPE_SELECTION_TITLE,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_AN_TARGET_TYPE,CSSStyles:{"margin-top":"-1em"}}).component(),this._azureSqlTargetTypeDropdown.values=[s.LOGIN_MIGRATIONS_MI_TEXT,s.LOGIN_MIGRATIONS_VM_TEXT],this._disposables.push(this._azureSqlTargetTypeDropdown.onValueChanged((async e=>{switch(e){case s.LOGIN_MIGRATIONS_DB_TEXT:this.migrationStateModel._targetType=d.MigrationTargetType.SQLDB;break;case s.LOGIN_MIGRATIONS_MI_TEXT:this.migrationStateModel._targetType=d.MigrationTargetType.SQLMI;break;case s.LOGIN_MIGRATIONS_VM_TEXT:this.migrationStateModel._targetType=d.MigrationTargetType.SQLVM}switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_MI_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE;break;case d.MigrationTargetType.SQLVM:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_VM_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE;break;case d.MigrationTargetType.SQLDB:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_SQLDB_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE,this._updateConnectionButtonState()}await this.populateAzureAccountsDropdown(),await this.populateSubscriptionDropdown(),await this.populateLocationDropdown();const t=[];t.push(...await(0,h.collectSourceLogins)(await(0,h.getSourceConnectionId)(),this.migrationStateModel.isWindowsAuthMigrationSupported)),this.migrationStateModel._loginMigrationModel.collectedSourceLogins=!0,this.migrationStateModel._loginMigrationModel.loginsOnSource=t}))),this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,this._azureSqlTargetTypeDropdown]).component()}createAzureAccountsDropdown(){const e=this._view.modelBuilder.text().withProps({value:s.ACCOUNTS_SELECTION_PAGE_TITLE,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS,"margin-top":"-1em"}}).component();this._azureAccountsDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.ACCOUNTS_SELECTION_PAGE_TITLE,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_AN_ACCOUNT,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureAccountsDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this.migrationStateModel._azureAccounts.find((t=>t.displayInfo.displayName===e));this.migrationStateModel._azureAccount=t?u.deepClone(t):void 0}else this.migrationStateModel._azureAccount=void 0;await u.clearDropDown(this._accountTenantDropdown),await this.populateTenantsDropdown()})));const t=this._view.modelBuilder.hyperlink().withProps({label:s.ACCOUNT_LINK_BUTTON_LABEL,url:"",CSSStyles:{...l.BODY_CSS}}).component();return this._disposables.push(t.onDidClick((async e=>{await r.commands.executeCommand("workbench.actions.modal.linkedAccount"),await this.populateAzureAccountsDropdown(),this.wizard.message={text:""},await this._azureAccountsDropdown.validate()}))),this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,this._azureAccountsDropdown,t]).component()}createAzureTenantContainer(){const e=this._view.modelBuilder.text().withProps({value:s.AZURE_TENANT,CSSStyles:{...l.LABEL_CSS}}).component();return this._accountTenantDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.AZURE_TENANT,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_TENANT}).component(),this._disposables.push(this._accountTenantDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this.migrationStateModel._accountTenants?.find((t=>t.displayName===e));this.migrationStateModel._azureTenant=t?u.deepClone(t):void 0}else this.migrationStateModel._azureTenant=void 0;await u.clearDropDown(this._azureSubscriptionDropdown),await this.populateSubscriptionDropdown()}))),this._accountTenantFlexContainer=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,this._accountTenantDropdown]).withProps({CSSStyles:{display:"none"}}).component(),this._accountTenantFlexContainer}createTargetDropdownContainer(){const e=this._view.modelBuilder.text().withProps({value:s.SUBSCRIPTION,description:s.TARGET_SUBSCRIPTION_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component();this._azureSubscriptionDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.SUBSCRIPTION,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_SUBSCRIPTION,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureSubscriptionDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.NO_SUBSCRIPTIONS_FOUND){const t=this.migrationStateModel._subscriptions?.find((t=>`${t.name} - ${t.id}`===e));this.migrationStateModel._targetSubscription=t?u.deepClone(t):void 0}else this.migrationStateModel._targetSubscription=void 0;this.migrationStateModel.refreshDatabaseBackupPage=!0,await u.clearDropDown(this._azureLocationDropdown),await this.populateLocationDropdown()})));const t=this._view.modelBuilder.text().withProps({value:s.LOCATION,description:s.TARGET_LOCATION_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component();return this._azureLocationDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.LOCATION,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_LOCATION,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureLocationDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.NO_LOCATION_FOUND){const t=this.migrationStateModel._locations.find((t=>t.displayName===e));this.migrationStateModel._location=t?u.deepClone(t):void 0}else this.migrationStateModel._location=void 0;this.migrationStateModel.refreshDatabaseBackupPage=!0,await u.clearDropDown(this._azureResourceGroupDropdown),await this.populateResourceGroupDropdown()}))),this._resourceSelectionContainer=this._createResourceDropdowns(),this._resourceAuthenticationContainer=this._createResourceAuthenticationContainer(),this._view.modelBuilder.flexContainer().withItems([e,this._azureSubscriptionDropdown,t,this._azureLocationDropdown,this._resourceSelectionContainer,this._resourceAuthenticationContainer]).withLayout({flexFlow:"column"}).component()}_createResourceAuthenticationContainer(){const e=this._view.modelBuilder.text().withProps({value:s.TARGET_USERNAME_LAbEL,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS,"margin-top":"-1em"}}).component();this._targetUserNameInputBox=this._view.modelBuilder.inputBox().withProps({width:"300px",inputType:"text",placeHolder:s.TARGET_USERNAME_PLACEHOLDER,required:!1,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._targetUserNameInputBox.onTextChanged((e=>{this.migrationStateModel._targetUserName=e??"",this._updateConnectionButtonState()}))),this._disposables.push(this._targetUserNameInputBox.onValidityChanged((e=>this._updateConnectionButtonState())));const t=this._view.modelBuilder.text().withProps({value:s.TARGET_PASSWORD_LAbEL,requiredIndicator:!0,title:"",CSSStyles:{...l.LABEL_CSS,"margin-top":"-1em"}}).component();this._targetPasswordInputBox=this._view.modelBuilder.inputBox().withProps({width:"300px",inputType:"password",placeHolder:s.TARGET_PASSWORD_PLACEHOLDER,required:!1,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._targetPasswordInputBox.onTextChanged((e=>{this.migrationStateModel._targetPassword=e??"",this._updateConnectionButtonState()}))),this._disposables.push(this._targetPasswordInputBox.onValidityChanged((e=>this._updateConnectionButtonState()))),this._testConectionButton=this._view.modelBuilder.button().withProps({enabled:!1,label:s.TARGET_CONNECTION_LABEL,width:"80px"}).component(),this._connectionResultsInfoBox=this._view.modelBuilder.infoBox().withProps({style:"success",text:"",announceText:!0,CSSStyles:{display:"none"}}).component();const i=this._view.modelBuilder.loadingComponent().withItem(this._testConectionButton).withProps({loading:!1}).component();this._disposables.push(this._testConectionButton.onDidClick((async e=>{this.wizard.message={text:""};const t=this.migrationStateModel._targetServerInstance,r=this.migrationStateModel._targetUserName,o=this.migrationStateModel._targetPassword,a=[];let l=!1;if(t&&r&&o)try{i.loading=!0,await u.updateControlDisplay(this._connectionResultsInfoBox,!1),this.wizard.nextButton.enabled=!1,a.push(...await(0,h.collectTargetLogins)(this.migrationStateModel.targetServerName,t.id,r,o,this.migrationStateModel.isWindowsAuthMigrationSupported)),this.migrationStateModel._loginMigrationModel.collectedTargetLogins=!0,this.migrationStateModel._loginMigrationModel.loginsOnTarget=a,await this._showConnectionResults(a),l=!0}catch(e){this.wizard.message={level:n.window.MessageLevel.Error,text:s.AZURE_SQL_TARGET_CONNECTION_ERROR_TITLE,description:s.SQL_TARGET_CONNECTION_ERROR(e.message)},await this._showConnectionResults(a,s.AZURE_SQL_TARGET_CONNECTION_ERROR_TITLE),(0,g.logError)(g.TelemetryViews.LoginMigrationTargetSelectionPage,m.ConnectingToTargetFailed,e),(0,g.sendSqlMigrationActionEvent)(g.TelemetryViews.LoginMigrationTargetSelectionPage,g.TelemetryAction.LoginMigrationError,{...(0,g.getTelemetryProps)(this.migrationStateModel),errorMessage:m.ConnectingToTargetFailed},{}),l=!1}finally{i.loading=!1,(0,g.sendSqlMigrationActionEvent)(g.TelemetryViews.LoginMigrationTargetSelectionPage,g.TelemetryAction.ConnectToTarget,{...(0,g.getTelemetryProps)(this.migrationStateModel),connectionSuccessful:JSON.stringify(l)},{})}})));const r=this._view.modelBuilder.flexContainer().withItems([i,this._connectionResultsInfoBox],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignContent:"center",alignItems:"center"}).withProps({CSSStyles:{margin:"15px 0 0 0"}}).component();return this._view.modelBuilder.flexContainer().withItems([e,this._targetUserNameInputBox,t,this._targetPasswordInputBox,r]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{margin:"15px 0 0 0"}}).component()}async _showConnectionResults(e,t){const i=void 0!==t;this._connectionResultsInfoBox.style=i?"error":"success",this._connectionResultsInfoBox.text=i?s.SQL_TARGET_CONNECTION_ERROR(t):s.SQL_TARGET_CONNECTION_SUCCESS_LOGINS(e.length.toLocaleString()),await u.updateControlDisplay(this._connectionResultsInfoBox,!0),i||(this.wizard.nextButton.enabled=!0)}_createResourceDropdowns(){return this._azureResourceGroupLabel=this._view.modelBuilder.text().withProps({value:s.RESOURCE_GROUP,description:s.TARGET_RESOURCE_GROUP_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component(),this._azureResourceGroupDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.RESOURCE_GROUP,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_RESOURCE_GROUP,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureResourceGroupDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.RESOURCE_GROUP_NOT_FOUND){const t=this.migrationStateModel._resourceGroups.find((t=>t.name===e));this.migrationStateModel._resourceGroup=t?u.deepClone(t):void 0}else this.migrationStateModel._resourceGroup=void 0;await u.clearDropDown(this._azureResourceDropdown),await this.populateResourceInstanceDropdown()}))),this._azureResourceDropdownLabel=this._view.modelBuilder.text().withProps({value:s.AZURE_SQL_DATABASE_MANAGED_INSTANCE,description:s.TARGET_RESOURCE_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component(),this._azureResourceDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.AZURE_SQL_DATABASE_MANAGED_INSTANCE,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_SERVICE_PLACEHOLDER,CSSStyles:{"margin-top":"-1em"},loading:!1}).component(),this._disposables.push(this._azureResourceDropdown.onValueChanged((async e=>{const t=this.migrationStateModel._targetType===d.MigrationTargetType.SQLDB;if(e&&"undefined"!==e&&e!==s.NO_MANAGED_INSTANCE_FOUND&&e!==s.NO_SQL_DATABASE_SERVER_FOUND&&e!==s.NO_VIRTUAL_MACHINE_FOUND)switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLVM:const t=this.migrationStateModel._targetSqlVirtualMachines.find((t=>t.name===e));if(t){this.migrationStateModel._targetServerInstance=u.deepClone(t),this.migrationStateModel._vmInstanceView=await(0,p.getVMInstanceView)(this.migrationStateModel._targetServerInstance,this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.migrationStateModel._targetServerInstance.networkInterfaces=await _.NetworkInterfaceModel.getVmNetworkInterfaces(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription,this.migrationStateModel._targetServerInstance),this.migrationStateModel.setTargetServerName(),this.wizard.message={text:""};const e="powerstate/running";this.migrationStateModel._vmInstanceView.statuses.some((t=>t.code.toLowerCase()===e))||(this.wizard.message={text:s.VM_NOT_READY_POWER_STATE_ERROR(this.migrationStateModel._targetServerInstance.name),level:n.window.MessageLevel.Warning});const i="full";this.migrationStateModel._targetServerInstance.properties.sqlManagement.toLowerCase()!==i&&(this.wizard.message={text:s.VM_NOT_READY_IAAS_EXTENSION_ERROR(this.migrationStateModel._targetServerInstance.name,this.migrationStateModel._targetServerInstance.properties.sqlManagement),level:n.window.MessageLevel.Warning})}break;case d.MigrationTargetType.SQLMI:const i=this.migrationStateModel._targetManagedInstances.find((t=>t.name===e||s.UNAVAILABLE_TARGET_PREFIX(t.name)===e));i&&(this.migrationStateModel._targetServerInstance=u.deepClone(i),this.migrationStateModel.setTargetServerName(),this.wizard.message={text:""},"Ready"!==this.migrationStateModel._targetServerInstance.properties.state&&(this.wizard.message={text:s.MI_NOT_READY_ERROR(this.migrationStateModel._targetServerInstance.name,this.migrationStateModel._targetServerInstance.properties.state),level:n.window.MessageLevel.Error}));break;case d.MigrationTargetType.SQLDB:const r=this.migrationStateModel._targetSqlDatabaseServers.find((t=>t.name===e||s.UNAVAILABLE_TARGET_PREFIX(t.name)===e));r&&(this.migrationStateModel._targetServerInstance=u.deepClone(r),this.migrationStateModel.setTargetServerName(),this.wizard.message={text:""},"Ready"===this.migrationStateModel._targetServerInstance.properties.state?this._targetUserNameInputBox.value=this.migrationStateModel._targetServerInstance.properties.administratorLogin:this.wizard.message={text:s.SQLDB_NOT_READY_ERROR(this.migrationStateModel._targetServerInstance.name,this.migrationStateModel._targetServerInstance.properties.state),level:n.window.MessageLevel.Error})}else this.migrationStateModel._targetServerInstance=void 0,this.migrationStateModel._targetServerName=void 0,t&&(this._targetUserNameInputBox.value="");this.migrationStateModel._sqlMigrationServices=void 0,t&&(this._targetPasswordInputBox.value="",this._updateConnectionButtonState())}))),this._view.modelBuilder.flexContainer().withItems([this._azureResourceGroupLabel,this._azureResourceGroupDropdown,this._azureResourceDropdownLabel,this._azureResourceDropdown]).withLayout({flexFlow:"column"}).component()}_updateConnectionButtonState(){const e=this._azureResourceDropdown.value?.name??"",t=this._targetUserNameInputBox.value??"",i=this._targetPasswordInputBox.value??"";this._testConectionButton.enabled=e.length>0&&t.length>0&&i.length>0}async populateAzureAccountsDropdown(){try{this._azureAccountsDropdown.loading=!0,this.migrationStateModel._azureAccounts=await u.getAzureAccounts(),this._azureAccountsDropdown.values=await u.getAzureAccountsDropdownValues(this.migrationStateModel._azureAccounts)}finally{this._azureAccountsDropdown.loading=!1,u.selectDefaultDropdownValue(this._azureAccountsDropdown,this.migrationStateModel._azureAccount?.displayInfo?.userId,!1)}}async populateTenantsDropdown(){try{this._accountTenantDropdown.loading=!0,!u.isAccountTokenStale(this.migrationStateModel._azureAccount)&&this.migrationStateModel._azureAccount?.properties?.tenants?.length>0&&(this.migrationStateModel._accountTenants=u.getAzureTenants(this.migrationStateModel._azureAccount),this._accountTenantDropdown.values=u.getAzureTenantsDropdownValues(this.migrationStateModel._accountTenants)),u.selectDefaultDropdownValue(this._accountTenantDropdown,this.migrationStateModel._azureTenant?.id,!0),await this._accountTenantFlexContainer.updateCssStyles(this.migrationStateModel._azureAccount.properties.tenants.length>1?{display:"inline"}:{display:"none"}),await this._azureAccountsDropdown.validate()}finally{this._accountTenantDropdown.loading=!1}}async populateSubscriptionDropdown(){try{this._azureSubscriptionDropdown.loading=!0,this.migrationStateModel._subscriptions=await u.getAzureSubscriptions(this.migrationStateModel._azureAccount,this.migrationStateModel._azureTenant?.id),this._azureSubscriptionDropdown.values=await u.getAzureSubscriptionsDropdownValues(this.migrationStateModel._subscriptions)}catch(e){console.log(e)}finally{this._azureSubscriptionDropdown.loading=!1,u.selectDefaultDropdownValue(this._azureSubscriptionDropdown,this.migrationStateModel._targetSubscription?.id,!1)}}async populateLocationDropdown(){try{switch(this._azureLocationDropdown.loading=!0,this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this.migrationStateModel._targetManagedInstances=await u.getManagedInstances(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.migrationStateModel._locations=await u.getResourceLocations(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription,this.migrationStateModel._targetManagedInstances);break;case d.MigrationTargetType.SQLVM:this.migrationStateModel._targetSqlVirtualMachines=await u.getVirtualMachines(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.migrationStateModel._locations=await u.getResourceLocations(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription,this.migrationStateModel._targetSqlVirtualMachines);break;case d.MigrationTargetType.SQLDB:this.migrationStateModel._targetSqlDatabaseServers=await u.getAzureSqlDatabaseServers(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.migrationStateModel._locations=await u.getResourceLocations(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription,this.migrationStateModel._targetSqlDatabaseServers)}this._azureLocationDropdown.values=u.getAzureLocationsDropdownValues(this.migrationStateModel._locations)}catch(e){console.log(e)}finally{this._azureLocationDropdown.loading=!1,u.selectDefaultDropdownValue(this._azureLocationDropdown,this.migrationStateModel._location?.displayName,!0)}}async populateResourceGroupDropdown(){try{switch(this._azureResourceGroupDropdown.loading=!0,this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this.migrationStateModel._resourceGroups=u.getServiceResourceGroupsByLocation(this.migrationStateModel._targetManagedInstances,this.migrationStateModel._location);break;case d.MigrationTargetType.SQLVM:this.migrationStateModel._resourceGroups=u.getServiceResourceGroupsByLocation(this.migrationStateModel._targetSqlVirtualMachines,this.migrationStateModel._location);break;case d.MigrationTargetType.SQLDB:this.migrationStateModel._resourceGroups=u.getServiceResourceGroupsByLocation(this.migrationStateModel._targetSqlDatabaseServers,this.migrationStateModel._location)}this._azureResourceGroupDropdown.values=u.getResourceDropdownValues(this.migrationStateModel._resourceGroups,s.RESOURCE_GROUP_NOT_FOUND)}catch(e){console.log(e)}finally{this._azureResourceGroupDropdown.loading=!1,u.selectDefaultDropdownValue(this._azureResourceGroupDropdown,this.migrationStateModel._resourceGroup?.id,!1)}}async populateResourceInstanceDropdown(){try{switch(this._azureResourceDropdown.loading=!0,this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this._azureResourceDropdown.values=await u.getManagedInstancesDropdownValues(this.migrationStateModel._targetManagedInstances,this.migrationStateModel._location,this.migrationStateModel._resourceGroup);break;case d.MigrationTargetType.SQLVM:this._azureResourceDropdown.values=u.getAzureResourceDropdownValues(this.migrationStateModel._targetSqlVirtualMachines,this.migrationStateModel._location,this.migrationStateModel._resourceGroup?.name,s.NO_VIRTUAL_MACHINE_FOUND);break;case d.MigrationTargetType.SQLDB:this._azureResourceDropdown.values=u.getAzureResourceDropdownValues(this.migrationStateModel._targetSqlDatabaseServers,this.migrationStateModel._location,this.migrationStateModel._resourceGroup?.name,s.NO_SQL_DATABASE_SERVER_FOUND)}}finally{this._azureResourceDropdown.loading=!1,u.selectDefaultDropdownValue(this._azureResourceDropdown,this.migrationStateModel._targetServerInstance?.name,!0)}}}t.LoginMigrationTargetSelectionPage=S},6349:function(e,t,i){"use strict";var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.LoginSelectorPage=void 0;const o=i(9072),a=i(2417),s=i(2074),l=i(3186),c=i(9563),u=i(3963),d=i(1386),p=i(3186),h=i(7475),_=i(84);class g extends a.MigrationWizardPage{constructor(e,t){super(e,o.window.createWizardPage(s.LOGIN_MIGRATIONS_SELECT_LOGINS_PAGE_TITLE),t),this._disposables=[],this._isCurrentPage=!1}async registerContent(e){this._view=e;const t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"100%",width:"100%"}).component();t.addItem(await this.createRootContainer(e),{flex:"1 1 auto"}),this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),await e.initializeModel(t)}async onPageEnter(){this._isCurrentPage=!0,this.updateNextButton(),this.wizard.registerNavigationValidator((e=>(this.wizard.message={text:"",level:o.window.MessageLevel.Error},e.newPage<e.lastPage||(0===this.selectedLogins().length?(this.wizard.message={text:s.SELECT_LOGIN_TO_CONTINUE,level:o.window.MessageLevel.Error},!1):!(this.migrationStateModel._loginMigrationModel.selectedWindowsLogins&&!this.migrationStateModel._aadDomainName&&(this.wizard.message={text:s.ENTER_AAD_DOMAIN_NAME,level:o.window.MessageLevel.Error},1)))))),await p.updateControlDisplay(this._windowsAuthInfoBox,!this.migrationStateModel.isWindowsAuthMigrationSupported),await this._loadLoginList(!1),await this._filterTableList("",this.migrationStateModel._loginMigrationModel.loginsForMigration)}async onPageLeave(){this.wizard.registerNavigationValidator((e=>!0)),this._isCurrentPage=!1,this.resetNextButton()}async handleStateChange(e){}createSearchComponent(){let e=this._view.modelBuilder.inputBox().withProps({stopEnterPropagation:!0,placeHolder:s.SEARCH,width:200}).component();return this._disposables.push(e.onTextChanged((e=>this._filterTableList(e,this.migrationStateModel._loginMigrationModel.loginsForMigration||[])))),this._view.modelBuilder.divContainer().withItems([e]).withProps({CSSStyles:{width:"200px","margin-top":"8px"}}).component()}createAadDomainNameComponent(){const e=this._view.modelBuilder.text().withProps({value:s.LOGIN_MIGRATIONS_AAD_DOMAIN_NAME_INPUT_BOX_LABEL,requiredIndicator:!1,CSSStyles:{...c.LABEL_CSS}}).component(),t=this._view.modelBuilder.inputBox().withProps({width:"300px",inputType:"text",placeHolder:s.LOGIN_MIGRATIONS_AAD_DOMAIN_NAME_INPUT_BOX_PLACEHOLDER,required:!1}).component();return this._disposables.push(t.onTextChanged((e=>{this.migrationStateModel._aadDomainName=e??""}))),this._aadDomainNameContainer=this._view.modelBuilder.flexContainer().withItems([e,t]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{margin:"10px 0px 0px 0px",display:"none"}}).component(),this._aadDomainNameContainer}async _filterTableList(e,t){this._filterTableValue=e;const i=[],n=t||this.selectedLogins();let r=this._loginTableValues??[];this._loginTableValues&&e?.length>0&&(r=this._loginTableValues.filter((t=>{const i=e?.toLowerCase();return t[1]?.toLowerCase()?.indexOf(i)>-1||t[2]?.toLowerCase()?.indexOf(i)>-1||t[3]?.toLowerCase()?.indexOf(i)>-1||t[4]?.toLowerCase()?.indexOf(i)>-1||t[5]?.title?.toLowerCase()?.indexOf(i)>-1})));for(let e=0;e<r.length;e++){const t=r[e][1];n.some((e=>e.loginName.toLowerCase()===t.toLowerCase()))&&i.push(e)}await this._loginSelectorTable.updateProperty("data",r),this._loginSelectorTable.selectedRows=i,await this.updateValuesOnSelection()}async createRootContainer(e){this._windowsAuthInfoBox=this._view.modelBuilder.infoBox().withProps({style:"information",text:s.LOGIN_MIGRATIONS_SELECT_LOGINS_WINDOWS_AUTH_WARNING,CSSStyles:{...c.BODY_CSS,display:"none"}}).component(),this._refreshButton=this._view.modelBuilder.button().withProps({buttonType:o.ButtonType.Normal,iconHeight:16,iconWidth:16,iconPath:d.IconPathHelper.refresh,label:s.DATABASE_TABLE_REFRESH_LABEL,width:70,CSSStyles:{margin:"15px 5px 0 0"}}).component(),this._disposables.push(this._refreshButton.onDidClick((async e=>await this._loadLoginList()))),this._refreshLoading=this._view.modelBuilder.loadingComponent().withItem(this._refreshButton).withProps({loading:!1,CSSStyles:{"margin-right":"20px","margin-top":"15px"}}).component(),this._refreshResultsInfoBox=this._view.modelBuilder.infoBox().withProps({style:"success",text:"",announceText:!0,CSSStyles:{display:"none","margin-left":"5px"}}).component();const t=this._view.modelBuilder.flexContainer().withItems([this._refreshLoading,this._refreshResultsInfoBox],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignContent:"center",alignItems:"center"}).component();await this._loadLoginList(),this._loginCount=this._view.modelBuilder.text().withProps({value:s.LOGINS_SELECTED(this.selectedLogins().length,this._loginTableValues.length),CSSStyles:{...c.BODY_CSS,"margin-top":"8px"},ariaLive:"polite"}).component();const i="no-borders";this._loginSelectorTable=this._view.modelBuilder.table().withProps({data:[],width:650,height:"100%",forceFitColumns:o.ColumnSizingMode.ForceFit,columns:[{value:"",width:10,type:o.ColumnType.checkBox,action:o.ActionOnCellCheckboxCheck.selectRow,resizable:!1,cssClass:i,headerCssClass:i},{name:s.SOURCE_LOGIN,value:"sourceLogin",type:o.ColumnType.text,width:250,cssClass:i,headerCssClass:i},{name:s.LOGIN_TYPE,value:"loginType",type:o.ColumnType.text,width:90,cssClass:i,headerCssClass:i},{name:s.DEFAULT_DATABASE,value:"defaultDatabase",type:o.ColumnType.text,width:130,cssClass:i,headerCssClass:i},{name:s.LOGIN_STATUS_COLUMN,value:"status",type:o.ColumnType.text,width:90,cssClass:i,headerCssClass:i},{name:s.LOGIN_TARGET_STATUS_COLUMN,value:"targetStatus",width:150,type:o.ColumnType.hyperlink,icon:d.IconPathHelper.inProgressMigration,showText:!0,cssClass:i,headerCssClass:i}]}).component(),this._disposables.push(this._loginSelectorTable.onRowSelected((async e=>{await this.updateValuesOnSelection()}))),await this._filterTableList("",this.migrationStateModel._loginMigrationModel.loginsForMigration);const n=e.modelBuilder.flexContainer().withLayout({flexFlow:"column",height:"100%"}).withProps({CSSStyles:{margin:"-20px 28px 0px 28px"}}).component();return n.addItem(this._windowsAuthInfoBox,{flex:"0 0 auto"}),n.addItem(t,{flex:"0 0 auto"}),n.addItem(this.createSearchComponent(),{flex:"0 0 auto"}),n.addItem(this._loginCount,{flex:"0 0 auto"}),n.addItem(this._loginSelectorTable),n.addItem(this.createAadDomainNameComponent(),{flex:"0 0 auto",CSSStyles:{"margin-top":"8px"}}),n}async _getSourceLogins(){const e=this.migrationStateModel,t=[];try{t.push(...await(0,u.collectSourceLogins)(await(0,u.getSourceConnectionId)(),e.isWindowsAuthMigrationSupported)),e._loginMigrationModel.collectedSourceLogins=!0,e._loginMigrationModel.loginsOnSource=t}catch(e){this._refreshLoading.loading=!1,this._refreshResultsInfoBox.style="error",this._refreshResultsInfoBox.text=s.LOGIN_MIGRATION_REFRESH_SOURCE_LOGIN_DATA_FAILED,this.wizard.message={level:o.window.MessageLevel.Error,text:s.LOGIN_MIGRATIONS_GET_LOGINS_ERROR_TITLE("source"),description:s.LOGIN_MIGRATIONS_GET_LOGINS_ERROR(e.message)},(0,h.logError)(h.TelemetryViews.LoginMigrationWizard,_.CollectingSourceLoginsFailed,e),(0,h.sendSqlMigrationActionEvent)(h.TelemetryViews.LoginMigrationSelectorPage,h.TelemetryAction.LoginMigrationError,{...(0,h.getTelemetryProps)(this.migrationStateModel),errorMessage:_.CollectingSourceLoginsFailed},{})}}async _getTargetLogins(){const e=this.migrationStateModel,t=[];try{this.isTargetInstanceSet()&&(t.push(...await(0,u.collectTargetLogins)(e.targetServerName,e._targetServerInstance.id,e._targetUserName,e._targetPassword,e.isWindowsAuthMigrationSupported)),e._loginMigrationModel.collectedTargetLogins=!0,e._loginMigrationModel.loginsOnTarget=t)}catch(e){this._refreshLoading.loading=!1,this._refreshResultsInfoBox.style="error",this._refreshResultsInfoBox.text=s.LOGIN_MIGRATION_REFRESH_TARGET_LOGIN_DATA_FAILED,this.wizard.message={level:o.window.MessageLevel.Error,text:s.LOGIN_MIGRATIONS_GET_LOGINS_ERROR_TITLE("target"),description:s.LOGIN_MIGRATIONS_GET_LOGINS_ERROR(e.message)},(0,h.logError)(h.TelemetryViews.LoginMigrationWizard,_.CollectingTargetLoginsFailed,e),(0,h.sendSqlMigrationActionEvent)(h.TelemetryViews.LoginMigrationSelectorPage,h.TelemetryAction.LoginMigrationError,{...(0,h.getTelemetryProps)(this.migrationStateModel),errorMessage:_.CollectingTargetLoginsFailed},{})}}async _markRefreshDataStart(){this._refreshLoading.loading=!0,this.wizard.nextButton.enabled=!1,await p.updateControlDisplay(this._refreshResultsInfoBox,!0),this._refreshResultsInfoBox.text=s.LOGIN_MIGRATION_REFRESHING_LOGIN_DATA,this._refreshResultsInfoBox.style="information"}_markRefreshDataComplete(e,t){this._refreshLoading.loading=!1,this._refreshResultsInfoBox.text=s.LOGIN_MIGRATION_REFRESH_LOGIN_DATA_SUCCESSFUL(e,t),this._refreshResultsInfoBox.style="success",this.updateNextButton()}async _loadLoginList(e=!0){const t=this.migrationStateModel,i=t._loginMigrationModel.loginsForMigration||[];!e&&t._loginMigrationModel.collectedSourceLogins||(await this._markRefreshDataStart(),await this._getSourceLogins()),!e&&t._loginMigrationModel.collectedTargetLogins||(await this._markRefreshDataStart(),await this._getTargetLogins());const n=t._loginMigrationModel.loginsOnSource,r=t._loginMigrationModel.loginsOnTarget;this._loginNames=[],this._loginTableValues=n.map((e=>{const t=e.loginName;this._loginNames.push(t);const n=r.some((e=>e.toLowerCase()===t.toLowerCase()));return[i?.some((e=>e.loginName.toLowerCase()===t.toLowerCase())),t,e.loginType,e.defaultDatabaseName,e.status,{icon:(0,l.getLoginStatusImage)(n),title:(0,l.getLoginStatusMessage)(n)}]}))||[],await this._filterTableList(this._filterTableValue),this._markRefreshDataComplete(n.length,r.length)}selectedLogins(){const e=this._loginSelectorTable?.data||[];return(this._loginSelectorTable?.selectedRows||[]).filter((t=>t<e.length)).map((t=>({loginName:e[t][1],loginType:e[t][2],defaultDatabaseName:e[t][3],status:e[t][4].title})))||[]}async refreshAADInputBox(){const e=this.migrationStateModel._loginMigrationModel.selectedWindowsLogins;await p.updateControlDisplay(this._aadDomainNameContainer,e),await this._loginSelectorTable.updateProperty("height",e?600:650)}async updateValuesOnSelection(){const e=this.selectedLogins()||[];await this._loginCount.updateProperties({value:s.LOGINS_SELECTED(e.length,this._loginSelectorTable.data?.length||0)}),this.migrationStateModel._loginMigrationModel.loginsForMigration=e,this.migrationStateModel._loginMigrationModel.loginsForMigration=e,await this.refreshAADInputBox(),this.updateNextButton()}updateNextButton(){this._isCurrentPage&&(this.wizard.nextButton.label=s.LOGIN_MIGRATE_BUTTON_TEXT,this.wizard.nextButton.enabled=this.migrationStateModel?._loginMigrationModel.loginsForMigration?.length>0)}resetNextButton(){this.wizard.nextButton.label=s.NEXT_LABEL,this.wizard.nextButton.enabled=!0}isTargetInstanceSet(){const e=this.migrationStateModel;return e._targetServerInstance&&e._targetUserName&&e._targetPassword}}t.LoginSelectorPage=g,n([(0,l.debounce)(500),r("design:type",Function),r("design:paramtypes",[String,Array]),r("design:returntype",Promise)],g.prototype,"_filterTableList",null)},2307:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssessmentResultType=t.AssessmentSummaryCard=void 0;const n=i(2074),r=i(9563),o=i(3186),a=i(1386),s=i(1456),l=i(732);var c;t.AssessmentSummaryCard=class{constructor(e,t,i){this.skuRecommendationPage=e,this.migrationTargetType=t,this.migrationStateModel=i,this._disposables=[]}createAssessmentSummaryCard(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{height:"394px",width:"244px","text-align":"center",display:"flex","flex-direction":"column","justify-content":"center","box-shadow":"0px 1px 4px rgba(0, 0, 0, 0.13)","border-radius":"2px",padding:"16px 8px 16px 8px",gap:"16px"}}).component(),i=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"row"}}).component(),r=e.modelBuilder.image().withProps({iconPath:"",iconHeight:34,iconWidth:34,height:34,CSSStyles:{"margin-top":"8px"}}).component(),s=e.modelBuilder.text().withProps({value:"",width:147,height:40,CSSStyles:{"font-size":"14px","line-height":"20px","font-weight":"600",margin:"0px","padding-top":"5px"}}).component();switch(this.migrationTargetType){case o.MigrationTargetType.SQLDB:r.iconPath=a.IconPathHelper.sqlDatabaseLogo,s.value=n.SKU_RECOMMENDATION_SQLDB_CARD_TEXT;break;case o.MigrationTargetType.SQLMI:r.iconPath=a.IconPathHelper.sqlMiLogo,s.value=n.SKU_RECOMMENDATION_MI_CARD_TEXT;break;case o.MigrationTargetType.SQLVM:r.iconPath=a.IconPathHelper.sqlVmLogo,s.value=n.SKU_RECOMMENDATION_VM_CARD_TEXT}return i.addItem(r),i.addItem(s),t.addItem(i),t.addItem(this.createAssessmentResultsContainer(e)),t.addItem(this.createRecommendedConfigurationContainer(e)),this._disposables.push(e.onClosed((e=>this.dispose()))),t}createAssessmentResultsContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column",gap:"8px"}}).component(),i=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column",gap:"4px"}}).component(),o=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column",gap:"0px"}}).component(),s=e.modelBuilder.text().withProps({value:n.ASSESSMENT_RESULTS_SUMMARY_LABEL_CAPS,description:n.ASSESSMENT_RESULTS_SUMMARY_LABEL_DESCRIPTION,CSSStyles:{...r.TOOLBAR_CSS,"margin-left":"55px"}}).component();this._assessmentResultText=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.TOOLBAR_CSS}}).component(),o.addItems([s,this._assessmentResultText]);const l=e.modelBuilder.image().withProps({iconPath:a.IconPathHelper.completedMigration,iconHeight:24,iconWidth:24,height:24}).component();i.addItems([o,l]);const c=this.createMigrationReadinessContainer(e),u=this.createAssessmentFindingsContainer(e);return t.addItem(i),t.addItem(c),t.addItem(u),t}createMigrationReadinessContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column",gap:"4px"}}).component(),i=e.modelBuilder.text().withProps({value:n.MIGRATION_READINESS_LABEL,height:16,CSSStyles:{...r.TOOLBAR_CSS}}).component(),o=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"row",gap:"8px"}}).component(),a=this.createResultComponentContainer(e,c.READY),s=this.createResultComponentContainer(e,c.NEEDS_REVIEW),l=this.createResultComponentContainer(e,c.NOT_READY);return o.addItem(a),o.addItem(s),o.addItem(l),t.addItem(i),t.addItem(o),t}createAssessmentFindingsContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column",gap:"4px"}}).component(),i=e.modelBuilder.text().withProps({value:n.ASSESSMENT_FINDINGS_LABEL,height:16,CSSStyles:{...r.TOOLBAR_CSS}}).component(),o=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"row",gap:"8px"}}).component(),a=this.createResultComponentContainer(e,c.BLOCKERS),s=this.createResultComponentContainer(e,c.WARNINGS);return o.addItem(a),o.addItem(s),t.addItem(i),t.addItem(o),t}createResultComponentContainer(e,t){const i=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column"}}).component(),o=e.modelBuilder.text().withProps({value:"",height:16,CSSStyles:{...r.TOOLBAR_CSS}}).component(),a=e.modelBuilder.text().withProps({value:"",height:22}).component();switch(t){case c.READY:o.value=n.READY,a.CSSStyles={...r.ASSESSMENT_SUMMARY_CARD_CSS,color:s.ColorCodes.ReadyState_Green},this._readyText=a;break;case c.NEEDS_REVIEW:o.value=n.NEEDS_REVIEW,a.CSSStyles={...r.ASSESSMENT_SUMMARY_CARD_CSS,color:s.ColorCodes.ReadyWithWarningState_Amber},this._needsReviewText=a;break;case c.NOT_READY:o.value=n.NOT_READY,a.CSSStyles={...r.ASSESSMENT_SUMMARY_CARD_CSS,color:s.ColorCodes.NotReadyState_Red},this._notReadyText=a;break;case c.BLOCKERS:o.value=n.BLOCKERS,a.CSSStyles={...r.ASSESSMENT_SUMMARY_CARD_CSS},this._blockersText=a;break;case c.WARNINGS:o.value=n.WARNINGS,a.CSSStyles={...r.ASSESSMENT_SUMMARY_CARD_CSS},this._warningsText=a}return i.addItems([o,a]),i}createRecommendedConfigurationContainer(e){const t=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"column",gap:"4px"}}).component(),i=e.modelBuilder.text().withProps({value:n.RECOMMENDED_CONFIGURATION_SUMMARY_LABEL_CAPS,description:n.RECOMMENDED_CONFIGURATION_SUMMARY_LABEL_DESCRIPTION,height:18,CSSStyles:{...r.TOOLBAR_CSS,"text-align":"center",align:"center","margin-left":"20px"}}).component();return this._azureRecommendationStatusText=e.modelBuilder.text().withProps({value:n.AZURE_RECOMMENDATION_CARD_NOT_ENABLED,CSSStyles:{"font-size":"13px","font-weight":"400","line-height":"18px"}}).component(),this._recommendedConfigurationText=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.PERFORMANCE_DATA_DIALOG_CSS,margin:"0px",display:"none"}}).component(),this._vmRecommendedConfigurationText=e.modelBuilder.text().withProps({value:"",CSSStyles:{"font-size":"10px","line-height":"14px","font-weight":"400",margin:"0px",display:"none"}}).component(),this._viewDetailsLink=e.modelBuilder.hyperlink().withProps({label:n.VIEW_DETAILS,url:"",height:18,CSSStyles:{"font-size":"13px","font-weight":"400","line-height":"18px","text-decoration":"none",display:"none"}}).component(),this._viewDetailsLink.onDidClick((async()=>{if((0,o.hasRecommendations)(this.migrationStateModel)){const e=new l.SkuRecommendationResultsDialog(this.migrationStateModel,this.migrationTargetType);await e.openDialog(this.migrationTargetType,this.migrationStateModel._skuRecommendationResults.recommendations)}})),t.addItem(i),t.addItem(this._azureRecommendationStatusText),t.addItem(this._recommendedConfigurationText),this.migrationTargetType===o.MigrationTargetType.SQLVM?(t.addItem(this._vmRecommendedConfigurationText),t.addItem(this._viewDetailsLink)):(t.addItem(this._viewDetailsLink),t.addItem(this._vmRecommendedConfigurationText)),t}updateAssessmentResult(e,t,i,r,o,a){this._assessmentResultText.value=n.ASSESSED_DBS(e),this._readyText.value=t.toString(),this._needsReviewText.value=i.toString(),this._notReadyText.value=r.toString(),this._blockersText.value=o.toString(),this._warningsText.value=a.toString()}async updateSkuRecommendationDetails(e,t=""){await this._azureRecommendationStatusText.updateCssStyles({display:"none"}),await this._recommendedConfigurationText.updateCssStyles({display:"block"}),await this._vmRecommendedConfigurationText.updateCssStyles({display:"block"}),await this._viewDetailsLink.updateCssStyles({display:"block"}),this._recommendedConfigurationText.value=e,this._vmRecommendedConfigurationText.value=t}async updateSKURecommendationStatus(e){await this._azureRecommendationStatusText.updateCssStyles({display:"none"}),await this._recommendedConfigurationText.updateCssStyles({display:"none"}),await this._vmRecommendedConfigurationText.updateCssStyles({display:"none"}),await this._viewDetailsLink.updateCssStyles({display:"none"}),await this._azureRecommendationStatusText.updateCssStyles({display:"block"}),this._azureRecommendationStatusText.value=e}dispose(){this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}},function(e){e[e.READY=0]="READY",e[e.NEEDS_REVIEW=1]="NEEDS_REVIEW",e[e.NOT_READY=2]="NOT_READY",e[e.BLOCKERS=3]="BLOCKERS",e[e.WARNINGS=4]="WARNINGS"}(c||(t.AssessmentResultType=c={}))},3682:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkuDataCollectionToolbar=t.relativeDefaultPerfDataPath=t.dataCollectionPathKey=t.sqlRecommendationConfigurationKey=void 0;const n=i(9072),r=i(9496),o=i(7147),a=i(1017),s=i(3186),l=i(1386),c=i(9563),u=i(2074),d=i(1285),p=i(4757),h=i(4267);t.sqlRecommendationConfigurationKey="azureRecommendation",t.dataCollectionPathKey="dataCollectionPath",t.relativeDefaultPerfDataPath="\\AppData\\Roaming\\azuredatastudio\\PerfData",t.SkuDataCollectionToolbar=class{constructor(e,t,i){this.skuRecommendationPage=e,this.wizard=t,this.migrationStateModel=i,this._disposables=[],this._defaultPathForStartDataCollection=this.getDefaultPath()}createToolbar(e){const t=e.modelBuilder.toolbarContainer();return this._refreshAssessmentButton=this.createRefreshAssessmentButton(e),this._refreshSkuButton=this.createRefreshSkuButton(e),this._startPerformanceCollectionButton=this.createStartPerformanceCollectionButton(e),this._restartPerformanceCollectionButton=this.createRestartPerformanceCollectionButton(e),this._stopPerformanceCollectionButton=this.createStopPerformanceCollectionButton(e),this._importPerformanceDataButton=this.createImportPerformanceDataButton(e),this._recommendationParametersButton=this.createRecommendationParametersButton(e),t.addToolbarItems([{component:this._refreshAssessmentButton,toolbarSeparatorAfter:!0},{component:this._refreshSkuButton,toolbarSeparatorAfter:!1},{component:this._startPerformanceCollectionButton,toolbarSeparatorAfter:!1},{component:this._restartPerformanceCollectionButton,toolbarSeparatorAfter:!1},{component:this._stopPerformanceCollectionButton,toolbarSeparatorAfter:!1},{component:this._importPerformanceDataButton,toolbarSeparatorAfter:!1},{component:this._recommendationParametersButton,toolbarSeparatorAfter:!1}]),this._disposables.push(e.onClosed((e=>this.dispose()))),t.component()}createRefreshAssessmentButton(e){const t=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:u.REFRESH_ASSESSMENT_LABEL,height:36,iconHeight:16,iconWidth:16,iconPath:l.IconPathHelper.refresh,CSSStyles:{...c.TOOLBAR_CSS}}).component();return this._disposables.push(t.onDidClick((async()=>{await this.skuRecommendationPage.refreshAssessment()}))),t}createRefreshSkuButton(e){const t=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:u.REFRESH_SKU_LABEL,height:36,iconHeight:16,iconWidth:16,iconPath:l.IconPathHelper.refresh,CSSStyles:{...c.TOOLBAR_CSS}}).component();return t.enabled=!1,this._disposables.push(t.onDidClick((async()=>{await this.skuRecommendationPage.refreshAzureRecommendation()}))),t}createStartPerformanceCollectionButton(e){const i=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:u.START_PERFORMANCE_COLLECTION,width:146,height:36,iconHeight:16,iconWidth:16,iconPath:l.IconPathHelper.startDataCollection,CSSStyles:{...c.TOOLBAR_CSS}}).component(),a=u.AZURE_RECOMMENDATION_DATA_COLLECTION_DEFAULT_PATH,s=u.AZURE_RECOMMENDATION_DATA_COLLECTION_CHOOSE_PATH;return this._disposables.push(i.onDidClick((async()=>{const e=await r.window.showInformationMessage(u.AZURE_RECOMMENDATION_DATA_COLLECTION_POPUP_MESSAGE_LABEL,a,s);if(e&&e!==a){if(e===s){const e={openLabel:"Select",canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1},t=await r.window.showOpenDialog(e);t&&t.length>0&&t[0]&&(this.migrationStateModel._skuRecommendationPerformanceDataSource=d.PerformanceDataSourceOptions.CollectData,this.migrationStateModel._skuRecommendationPerformanceLocation=t[0].fsPath,await this.executeDataCollection())}}else{const e=r.workspace.getConfiguration(t.sqlRecommendationConfigurationKey)[t.dataCollectionPathKey];""!==e&&o.existsSync(e)&&(this._defaultPathForStartDataCollection=e),o.existsSync(this._defaultPathForStartDataCollection)||o.mkdirSync(this._defaultPathForStartDataCollection),this.migrationStateModel._skuRecommendationPerformanceDataSource=d.PerformanceDataSourceOptions.CollectData,this.migrationStateModel._skuRecommendationPerformanceLocation=this._defaultPathForStartDataCollection,await this.executeDataCollection()}}))),i}createRestartPerformanceCollectionButton(e){const t=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:u.RESTART_PERFORMANCE_COLLECTION,height:36,iconHeight:16,iconWidth:16,iconPath:l.IconPathHelper.startDataCollection,CSSStyles:{...c.TOOLBAR_CSS,display:"none"}}).component();return t.enabled=!1,this._disposables.push(t.onDidClick((async()=>{await this.executeDataCollection()}))),t}createStopPerformanceCollectionButton(e){const t=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:u.STOP_PERFORMANCE_COLLECTION,height:36,iconHeight:16,iconWidth:16,iconPath:l.IconPathHelper.stopDataCollection,CSSStyles:{...c.TOOLBAR_CSS}}).component();return t.enabled=!1,this._disposables.push(t.onDidClick((async()=>{await this.migrationStateModel.stopPerfDataCollection(),await this.skuRecommendationPage.refreshAzureRecommendation(),await this._setToolbarState()}))),t}createImportPerformanceDataButton(e){const t=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:u.IMPORT_PERFORMANCE_DATA,height:36,iconHeight:16,iconWidth:16,iconPath:l.IconPathHelper.import,CSSStyles:{...c.TOOLBAR_CSS}}).component();return this._disposables.push(t.onDidClick((async e=>{const t=new p.ImportPerformanceDataDialog(this.skuRecommendationPage,this.wizard,this.migrationStateModel);await t.openDialog()}))),t}createRecommendationParametersButton(e){const t=e.modelBuilder.button().withProps({buttonType:n.ButtonType.Normal,label:u.RECOMMENDATION_PARAMETERS,height:36,iconHeight:16,iconWidth:16,iconPath:l.IconPathHelper.settings,CSSStyles:{...c.TOOLBAR_CSS}}).component();let i=new h.SkuEditParametersDialog(this.skuRecommendationPage,this.migrationStateModel);return this._disposables.push(t.onDidClick((async()=>await i.openDialog()))),t}getDefaultPath(){return a.join(s.getUserHome()??"",t.relativeDefaultPerfDataPath)}async executeDataCollection(){await this.migrationStateModel.startPerfDataCollection(this.migrationStateModel._skuRecommendationPerformanceLocation,this.migrationStateModel._performanceDataQueryIntervalInSeconds,this.migrationStateModel._staticDataQueryIntervalInSeconds,this.migrationStateModel._numberOfPerformanceDataQueryIterations,this.skuRecommendationPage),await this.skuRecommendationPage.refreshSkuRecommendationComponents(),await this._setToolbarState()}async _setToolbarState(){this.migrationStateModel._skuRecommendationPerformanceDataSource===d.PerformanceDataSourceOptions.CollectData&&(this.migrationStateModel.performanceCollectionInProgress()?(this._refreshSkuButton.enabled=!0,this._importPerformanceDataButton.enabled=!1,this._stopPerformanceCollectionButton.enabled=!0,this._restartPerformanceCollectionButton.enabled=!1,this._startPerformanceCollectionButton.enabled=!1):this.migrationStateModel.performanceCollectionStopped()&&(this._refreshSkuButton.enabled=!0,this._importPerformanceDataButton.enabled=!1,this._stopPerformanceCollectionButton.enabled=!1,await this._startPerformanceCollectionButton.updateCssStyles({display:"none"}),await this._restartPerformanceCollectionButton.updateCssStyles({display:"inline"}),this._restartPerformanceCollectionButton.enabled=!0))}dispose(){this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}}},6637:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SKURecommendationPage=void 0;const n=i(9072),r=i(9563),o=i(2074),a=i(3186),s=i(2037),l=i(2417),c=i(1285),u=i(3682),d=i(1386),p=i(2307),h=i(3186),_=i(7475),g=i(3963),m=i(1456);class S extends l.MigrationWizardPage{constructor(e,t){super(e,n.window.createWizardPage(o.ASSESSMENT_SUMMARY_AND_RECOMMENDATIONS_PAGE_TITLE),t),this._disposables=[],this._serverName="",this._skipAssessmentValid=!1}async registerContent(e){this._view=e,this._skuDataCollectionToolbar=new u.SkuDataCollectionToolbar(this,this.wizard,this.migrationStateModel);const t=this._skuDataCollectionToolbar.createToolbar(e);this._assessmentStatusIcon=this._view.modelBuilder.image().withProps({iconPath:d.IconPathHelper.completedMigration,iconHeight:16,iconWidth:16,width:16,height:16}).component(),this._igComponent=this.createStatusComponent(e);const i=this._view.modelBuilder.flexContainer().withProps({CSSStyles:{"align-items":"center"}}).component();i.addItem(this._assessmentStatusIcon,{flex:"0 0 auto"}),i.addItem(this._igComponent,{flex:"0 0 auto"}),this._skuDataCollectionStatusContainer=this.createPerformanceCollectionStatusContainer(e),this._skipAssessmentCheckbox=e.modelBuilder.checkBox().withProps({label:o.SKU_RECOMMENDATION_ASSESSMENT_ERROR_BYPASS,checked:!1,CSSStyles:{...r.SECTION_HEADER_CSS,margin:"10px 0 0 0",display:"none"}}).component(),this._skipAssessmentSubText=e.modelBuilder.text().withProps({value:o.SKU_RECOMMENDATION_ASSESSMENT_ERROR_DETAIL,CSSStyles:{margin:"0 0 0 15px","font-size":"13px",color:"red",width:"590px",display:"none"}}).component(),this._disposables.push(this._skipAssessmentCheckbox.onChanged((async e=>await this._setAssessmentState(!1,!0))));const n=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([i,this._skuDataCollectionStatusContainer,this._skipAssessmentCheckbox,this._skipAssessmentSubText]).withProps({CSSStyles:{margin:"0"}}).component();this._targetSummaryComponent=this.createTargetSummaryComponent(e),this._formContainer=e.modelBuilder.formContainer().withFormItems([{component:t},{component:n},{component:this._targetSummaryComponent}]).withProps({CSSStyles:{display:"none","padding-top":"0"}}),this._assessmentComponent=this._view.modelBuilder.flexContainer().withLayout({height:"100%",flexFlow:"column"}).withProps({CSSStyles:{"margin-left":"30px"}}).component(),this._assessmentComponent.addItem(this.createAssessmentProgress(),{flex:"0 0 auto"}),this._assessmentComponent.addItem(await this.createAssessmentInfo(),{flex:"0 0 auto"}),this._rootContainer=this._view.modelBuilder.flexContainer().withLayout({height:"100%",flexFlow:"column"}).withProps({ariaLive:"polite"}).component(),this._rootContainer.addItem(this._assessmentComponent,{flex:"0 0 auto"}),this._rootContainer.addItem(this._formContainer.component(),{flex:"0 0 auto"}),this._disposables.push(this._view.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),await this._view.initializeModel(this._rootContainer)}createStatusComponent(e){return e.modelBuilder.text().withProps({CSSStyles:{"font-size":"13px","font-weight":"400","line-height":"18px","text-decoration":"none","margin-left":"8px"}}).component()}createTargetSummaryComponent(e){const t=this._view.modelBuilder.text().withProps({value:o.ASSESSMENT_SUMMARY_AND_SKU_RECOMMENDATION_FOR_TARGETS_LABEL,CSSStyles:{...r.SECTION_HEADER_CSS,"margin-bottom":"5px"}}).component();return this._assessmentSummaryCard=e.modelBuilder.flexContainer().withProps({CSSStyles:{display:"flex","flex-direction":"row"}}).component(),this._dbAssessmentCard=new p.AssessmentSummaryCard(this,h.MigrationTargetType.SQLDB,this.migrationStateModel),this._miAssessmentCard=new p.AssessmentSummaryCard(this,h.MigrationTargetType.SQLMI,this.migrationStateModel),this._vmAssessmentCard=new p.AssessmentSummaryCard(this,h.MigrationTargetType.SQLVM,this.migrationStateModel),this._assessmentSummaryCard.addItems([this._dbAssessmentCard.createAssessmentSummaryCard(e),this._miAssessmentCard.createAssessmentSummaryCard(e),this._vmAssessmentCard.createAssessmentSummaryCard(e)]),this._assessmentSummaryCardLoader=this._view.modelBuilder.loadingComponent().withItem(this._assessmentSummaryCard).component(),this._view.modelBuilder.flexContainer().withItems([t,this._assessmentSummaryCardLoader]).component()}async constructDetails(){if(this.wizard.message={text:"",level:n.window.MessageLevel.Error},this._serverName=this.migrationStateModel.serverName||(await(0,g.getSourceConnectionProfile)()).serverName,this.migrationStateModel._runAssessments){const e=[];await this._setAssessmentState(!0,!1);try{await this.migrationStateModel.getDatabaseAssessments([h.MigrationTargetType.SQLMI,h.MigrationTargetType.SQLDB]);const t=this.migrationStateModel._assessmentResults?.assessmentError;t&&e.push(o.SKU_RECOMMENDATION_ASSESSMENT_ERROR_WITH_STACK(t)),this.migrationStateModel?._assessmentResults?.errors?.length>0&&e.push(...this.migrationStateModel._assessmentResults?.errors?.map((e=>o.SKU_RECOMMENDATION_ASSESSMENT_ERROR_WITH_INFO(e))))}catch(t){e.push(o.SKU_RECOMMENDATION_ASSESSMENT_UNEXPECTED_ERROR(this._serverName,t)),(0,_.logError)(_.TelemetryViews.MigrationWizardSkuRecommendationPage,"SkuRecommendationUnexpectedError",t)}finally{this.migrationStateModel._runAssessments=e.length>0,e.length>0?(this.wizard.message={text:o.SKU_RECOMMENDATION_ASSESSMENT_ERROR(this._serverName),description:e.join(s.EOL),level:n.window.MessageLevel.Error},this._assessmentStatusIcon.iconPath=d.IconPathHelper.error,this._igComponent.value=o.ASSESSMENT_FAILED(this._serverName)):(this._assessmentStatusIcon.iconPath=d.IconPathHelper.completedMigration,this._igComponent.value=o.ASSESSMENT_COMPLETED(this._serverName))}}else this._assessmentStatusIcon.iconPath=d.IconPathHelper.completedMigration,this._igComponent.value=o.ASSESSMENT_COMPLETED(this._serverName);let e=!1;if(a.hasRecommendations(this.migrationStateModel)&&this.migrationStateModel.hasRecommendedDatabaseListChanged()&&(e=!0),this.migrationStateModel.savedInfo?.skuRecommendation)switch(this.migrationStateModel._skuRecommendationPerformanceDataSource){case c.PerformanceDataSourceOptions.CollectData:await this.migrationStateModel.refreshPerfDataCollection(),this.migrationStateModel._perfDataCollectionIsCollecting?(await this.migrationStateModel.startSkuTimers(this),await this.refreshSkuRecommendationComponents()):(this.migrationStateModel._perfDataCollectionStopDate=this.migrationStateModel._perfDataCollectionStopDate||new Date,e=!0);break;case c.PerformanceDataSourceOptions.OpenExisting:e=!0}e&&await this.migrationStateModel.getSkuRecommendations(),await this.refreshSkuRecommendationComponents(),await this._setAssessmentState(!1,this.migrationStateModel._runAssessments)}createAssessmentProgress(){return this._assessmentLoader=this._view.modelBuilder.loadingComponent().component(),this._assessmentProgress=this._view.modelBuilder.text().withProps({value:o.ASSESSMENT_IN_PROGRESS,CSSStyles:{...r.PAGE_TITLE_CSS,"margin-right":"20px"}}).component(),this._progressContainer=this._view.modelBuilder.flexContainer().withLayout({height:"100%",flexFlow:"row",alignItems:"center"}).component(),this._progressContainer.addItem(this._assessmentProgress,{flex:"0 0 auto"}),this._progressContainer.addItem(this._assessmentLoader,{flex:"0 0 auto"}),this._progressContainer}async createAssessmentInfo(){return this._assessmentInfo=this._view.modelBuilder.text().withProps({value:o.ASSESSMENT_IN_PROGRESS_CONTENT(this._serverName),CSSStyles:{...r.BODY_CSS,width:"660px"}}).component(),this._assessmentInfo}async handleStateChange(e){}async _setAssessmentState(e,t){await a.updateControlDisplay(this._assessmentComponent,e,"block"),await a.updateControlDisplay(this._skipAssessmentCheckbox,!e&&t,"block"),await a.updateControlDisplay(this._skipAssessmentSubText,!e&&t,"block"),await a.updateControlDisplay(this._formContainer.component(),!e,"block"),await a.updateControlDisplay(this._targetSummaryComponent,!t||!0===this._skipAssessmentCheckbox.checked,"block"),this._assessmentSummaryCardLoader.loading=e,this._skipAssessmentValid=!e&&t}async refreshCardText(e=!0){this._assessmentSummaryCardLoader.loading=e&&!0;const t=this.migrationStateModel._assessmentResults?.databaseAssessments?.length;this.migrationStateModel._assessmentResults&&(a.hasRecommendations(this.migrationStateModel)||(this.migrationStateModel._perfDataCollectionStartDate?(await this._dbAssessmentCard.updateSKURecommendationStatus(o.AZURE_RECOMMENDATION_CARD_IN_PROGRESS),await this._miAssessmentCard.updateSKURecommendationStatus(o.AZURE_RECOMMENDATION_CARD_IN_PROGRESS),await this._vmAssessmentCard.updateSKURecommendationStatus(o.AZURE_RECOMMENDATION_CARD_IN_PROGRESS)):(await this._dbAssessmentCard.updateSKURecommendationStatus(o.AZURE_RECOMMENDATION_CARD_NOT_ENABLED),await this._miAssessmentCard.updateSKURecommendationStatus(o.AZURE_RECOMMENDATION_CARD_NOT_ENABLED),await this._vmAssessmentCard.updateSKURecommendationStatus(o.AZURE_RECOMMENDATION_CARD_NOT_ENABLED))),await this.updateDetailsForEachTarget(h.MigrationTargetType.SQLDB,t),await this.updateDetailsForEachTarget(h.MigrationTargetType.SQLMI,t),await this.updateDetailsForEachTarget(h.MigrationTargetType.SQLVM,t)),this._assessmentSummaryCardLoader.loading=!1}async updateDetailsForEachTarget(e,t){const i=await a.getRecommendedConfiguration(e,this.migrationStateModel);if(e===h.MigrationTargetType.SQLVM)return this._vmAssessmentCard.updateAssessmentResult(t,t,0,0,0,0),void(i?.length>0&&await this._vmAssessmentCard.updateSkuRecommendationDetails(i[0],i[1]??""));const n=this.migrationStateModel._assessmentResults?.databaseAssessments?.filter((t=>!t.issues?.some((t=>t.appliesToMigrationTargetPlatform===e)))).length,r=this.migrationStateModel._assessmentResults?.databaseAssessments?.filter((t=>t.issues?.some((t=>t.appliesToMigrationTargetPlatform===e&&t.issueCategory===m.IssueCategory.Issue)))).length,o=t-(n+r);var s=this.migrationStateModel._assessmentResults?.issues.filter((t=>t.appliesToMigrationTargetPlatform===e&&t.issueCategory===m.IssueCategory.Issue)).length;s+=this.migrationStateModel._assessmentResults?.databaseAssessments?.reduce(((t,i)=>t+i.issues.filter((t=>t.appliesToMigrationTargetPlatform===e&&t.issueCategory===m.IssueCategory.Issue)).length),0);var l=this.migrationStateModel._assessmentResults?.issues.filter((t=>t.appliesToMigrationTargetPlatform===e&&t.issueCategory===m.IssueCategory.Warning)).length;switch(l+=this.migrationStateModel._assessmentResults?.databaseAssessments?.reduce(((t,i)=>t+i.issues.filter((t=>t.appliesToMigrationTargetPlatform===e&&t.issueCategory===m.IssueCategory.Warning)).length),0),e){case h.MigrationTargetType.SQLDB:this._dbAssessmentCard.updateAssessmentResult(t,n,o,r,s,l),i.length>0&&await this._dbAssessmentCard.updateSkuRecommendationDetails(i[0]);break;case h.MigrationTargetType.SQLMI:this._miAssessmentCard.updateAssessmentResult(t,n,o,r,s,l),i.length>0&&await this._miAssessmentCard.updateSkuRecommendationDetails(i[0])}}createPerformanceCollectionStatusContainer(e){return this._skuDataCollectionStatusIcon=e.modelBuilder.image().withProps({iconPath:d.IconPathHelper.inProgressMigration,iconHeight:16,iconWidth:16,width:16,height:16,CSSStyles:{"margin-right":"4px"}}).component(),this._skuDataCollectionStatusText=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.BODY_CSS,margin:"0"}}).component(),this._skuDataCollectionTimerText=e.modelBuilder.text().withProps({value:"",CSSStyles:{...r.BODY_CSS,margin:0}}).component(),e.modelBuilder.flexContainer().withItems([this._skuDataCollectionStatusIcon,this._skuDataCollectionStatusText,this._skuDataCollectionTimerText]).withProps({CSSStyles:{"flex-direction":"row",width:"fit-content","align-items":"center",display:this.migrationStateModel.performanceCollectionNotStarted()?"none":"flex"}}).component()}async startCardLoading(){await this._dbAssessmentCard.updateSKURecommendationStatus(o.LOADING_RECOMMENDATIONS),await this._miAssessmentCard.updateSKURecommendationStatus(o.LOADING_RECOMMENDATIONS),await this._vmAssessmentCard.updateSKURecommendationStatus(o.LOADING_RECOMMENDATIONS)}async refreshSkuRecommendationComponents(){switch(this.migrationStateModel._skuRecommendationPerformanceDataSource){case c.PerformanceDataSourceOptions.CollectData:if(this.migrationStateModel.performanceCollectionInProgress()){if(await this._skuDataCollectionStatusIcon.updateProperties({iconPath:d.IconPathHelper.inProgressMigration}),this._skuDataCollectionStatusText.value=a.hasRecommendations(this.migrationStateModel)?o.AZURE_RECOMMENDATION_STATUS_REFINING:o.AZURE_RECOMMENDATION_STATUS_IN_PROGRESS,await this.migrationStateModel.isWaitingForFirstTimeRefresh()){const e=Math.abs((new Date).getTime()-new Date(this.migrationStateModel._perfDataCollectionStartDate).getTime())/6e4,t=this.migrationStateModel.refreshGetSkuRecommendationFrequency/6e4;this._skuDataCollectionTimerText.value=o.AZURE_RECOMMENDATION_STATUS_AUTO_REFRESH_TIMER(Math.ceil(t-e))}else this._skuDataCollectionTimerText.value=o.AZURE_RECOMMENDATION_STATUS_MANUAL_REFRESH_TIMER;await this._skuDataCollectionStatusContainer.updateCssStyles({display:"flex"})}else this.migrationStateModel.performanceCollectionStopped()&&(await this._skuDataCollectionStatusIcon.updateProperties({iconPath:d.IconPathHelper.stop}),this._skuDataCollectionStatusText.value=o.AZURE_RECOMMENDATION_STATUS_STOPPED,this._skuDataCollectionTimerText.value="");break;case c.PerformanceDataSourceOptions.OpenExisting:a.hasRecommendations(this.migrationStateModel)&&(await this._skuDataCollectionStatusContainer.updateCssStyles({display:"flex"}),await this._skuDataCollectionStatusIcon.updateProperties({iconPath:d.IconPathHelper.completedMigration}),this._skuDataCollectionStatusText.value=o.AZURE_RECOMMENDATION_STATUS_DATA_IMPORTED,this._skuDataCollectionTimerText.value="");break;default:await this._skuDataCollectionStatusContainer.updateCssStyles({display:"none"})}await this.refreshCardText(!1)}async refreshAssessment(){await this.startCardLoading(),this.migrationStateModel._runAssessments=!0,await this.constructDetails()}async refreshAzureRecommendation(){await this.startCardLoading(),await this.migrationStateModel.getSkuRecommendations();const e=this.migrationStateModel._skuRecommendationResults?.recommendationError;e&&(this.wizard.message={text:o.SKU_RECOMMENDATION_ERROR(this._serverName),description:e.message,level:n.window.MessageLevel.Error}),await this.refreshSkuRecommendationComponents()}async onPageEnter(e){this.wizard.registerNavigationValidator((e=>{if(this.wizard.message={text:""},e.newPage<e.lastPage)return!0;const t=[];return this._skipAssessmentValid&&!this._skipAssessmentCheckbox.checked&&t.push(o.SELECT_SKIP_ASSESSMENT_CHECK_TO_CONTINUE),!(t.length>0&&(this.wizard.message={text:t.join(s.EOL),level:n.window.MessageLevel.Error},1))})),await this.constructDetails(),await this._skuDataCollectionToolbar._setToolbarState(),this.wizard.nextButton.enabled=void 0!==this.migrationStateModel._assessmentResults}async onPageLeave(e){this.wizard.registerNavigationValidator((e=>!0)),this.wizard.message={text:""}}}t.SKURecommendationPage=S},6364:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryPage=void 0;const n=i(9072),r=i(2417),o=i(1285),a=i(2074),s=i(2816),l=i(4294),c=i(3913),u=i(9563),d=i(3186);class p extends r.MigrationWizardPage{constructor(e,t){super(e,n.window.createWizardPage(a.SUMMARY_PAGE_TITLE),t),this._disposables=[]}async registerContent(e){this._view=e,this._flexContainer=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();const t=e.modelBuilder.formContainer().withFormItems([{component:this._flexContainer}]).component();this._disposables.push(this._view.onClosed((e=>this._disposables.forEach((e=>{try{e.dispose()}catch{}}))))),await e.initializeModel(t)}async onPageEnter(e){this.wizard.registerNavigationValidator((e=>!0));const t=new c.TargetDatabaseSummaryDialog(this.migrationStateModel),i=this.migrationStateModel.isSqlVmTarget,n=this.migrationStateModel.isSqlMiTarget,r=this.migrationStateModel.isSqlDbTarget,p=this.migrationStateModel.isBackupContainerNetworkShare,h=this._view.modelBuilder.hyperlink().withProps({url:"",label:(this.migrationStateModel._databasesForMigration?.length??0).toString(),CSSStyles:{...u.BODY_CSS,margin:"0px",width:"300px"}}).component();this._disposables.push(h.onDidClick((async e=>await t.initialize())));const _=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"row",alignItems:"center"}).withItems([(0,s.createLabelTextComponent)(this._view,a.SUMMARY_DATABASE_COUNT_LABEL,{...u.BODY_CSS,width:"300px"}),h],{CSSStyles:{"margin-right":"5px"}}).component();this._flexContainer.addItems([await(0,s.createHeadingTextComponent)(this._view,a.SOURCE_DATABASES),_,await(0,s.createHeadingTextComponent)(this._view,a.AZURE_SQL_TARGET_PAGE_TITLE),(0,s.createInformationRow)(this._view,a.ACCOUNTS_SELECTION_PAGE_TITLE,this.migrationStateModel._azureAccount.displayInfo.displayName),(0,s.createInformationRow)(this._view,a.AZURE_SQL_TARGET_PAGE_TITLE,i?a.SUMMARY_VM_TYPE:n?a.SUMMARY_MI_TYPE:a.SUMMARY_SQLDB_TYPE),(0,s.createInformationRow)(this._view,a.SUBSCRIPTION,this.migrationStateModel._targetSubscription.name),(0,s.createInformationRow)(this._view,a.LOCATION,this.migrationStateModel._location.displayName),(0,s.createInformationRow)(this._view,a.RESOURCE_GROUP,(0,l.getResourceGroupFromId)(this.migrationStateModel._targetServerInstance.id)),(0,s.createInformationRow)(this._view,i?a.SUMMARY_VM_TYPE:n?a.SUMMARY_MI_TYPE:a.SUMMARY_SQLDB_TYPE,this.migrationStateModel._targetServerInstance.name),await(0,s.createHeadingTextComponent)(this._view,a.DATABASE_BACKUP_MIGRATION_MODE_LABEL),(0,s.createInformationRow)(this._view,a.MODE,this.migrationStateModel._databaseBackup.migrationMode===o.MigrationMode.ONLINE?a.DATABASE_BACKUP_MIGRATION_MODE_ONLINE_LABEL:a.DATABASE_BACKUP_MIGRATION_MODE_OFFLINE_LABEL)]),this.migrationStateModel._targetType!==d.MigrationTargetType.SQLDB&&this._flexContainer.addItems([await(0,s.createHeadingTextComponent)(this._view,a.DATA_SOURCE_CONFIGURATION_PAGE_TITLE),await this.createNetworkContainerRows()]),this._flexContainer.addItems([await(0,s.createHeadingTextComponent)(this._view,a.IR_PAGE_TITLE),(0,s.createInformationRow)(this._view,a.SUBSCRIPTION,this.migrationStateModel._sqlMigrationServiceSubscription.name),(0,s.createInformationRow)(this._view,a.LOCATION,this.migrationStateModel._location.displayName),(0,s.createInformationRow)(this._view,a.RESOURCE_GROUP,this.migrationStateModel._sqlMigrationServiceResourceGroup.name),(0,s.createInformationRow)(this._view,a.IR_PAGE_TITLE,this.migrationStateModel._sqlMigrationService?.name)]),(r||p&&this.migrationStateModel._nodeNames?.length>0)&&this._flexContainer.addItem((0,s.createInformationRow)(this._view,a.SHIR,this.migrationStateModel._nodeNames.join(", "))),this.wizard.registerNavigationValidator((async e=>(this.wizard.message={text:""},!0)))}async onPageLeave(e){this.wizard.registerNavigationValidator((e=>!0)),this.wizard.message={text:""},this._flexContainer.clearItems()}async handleStateChange(e){}async createNetworkContainerRows(){const e=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component(),t=this.migrationStateModel._databaseBackup.networkShares?.length>0?this.migrationStateModel._databaseBackup.networkShares[0]:{};switch(this.migrationStateModel._databaseBackup.networkContainerType){case o.NetworkContainerType.NETWORK_SHARE:e.addItems([(0,s.createInformationRow)(this._view,a.BACKUP_LOCATION,a.NETWORK_SHARE),(0,s.createInformationRow)(this._view,a.USER_ACCOUNT,t.windowsUser),await(0,s.createHeadingTextComponent)(this._view,a.AZURE_STORAGE_ACCOUNT_TO_UPLOAD_BACKUPS),(0,s.createInformationRow)(this._view,a.SUBSCRIPTION,this.migrationStateModel._databaseBackup.subscription.name),(0,s.createInformationRow)(this._view,a.LOCATION,t.storageAccount?.location),(0,s.createInformationRow)(this._view,a.RESOURCE_GROUP,t.storageAccount?.resourceGroup),(0,s.createInformationRow)(this._view,a.STORAGE_ACCOUNT,t.storageAccount?.name)]);break;case o.NetworkContainerType.BLOB_CONTAINER:e.addItems([(0,s.createInformationRow)(this._view,a.TYPE,a.BLOB_CONTAINER),(0,s.createInformationRow)(this._view,a.SUMMARY_AZURE_STORAGE_SUBSCRIPTION,this.migrationStateModel._databaseBackup.subscription.name)])}return e}}t.SummaryPage=p},1718:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TargetSelectionPage=void 0;const n=i(9072),r=i(9496),o=i(2037),a=i(2417),s=i(2074),l=i(9563),c=i(2816),u=i(3186),d=i(3186),p=i(4294),h=i(3963),_=i(1419),g=i(1456),m=i(6122),S=i(349);class f extends a.MigrationWizardPage{constructor(e,t){super(e,n.window.createWizardPage(s.AZURE_SQL_TARGET_PAGE_TITLE),t),this._disposables=[],this._certMigrationEventEmitter=new r.EventEmitter,this._certMigrationEventEmitter.event((()=>this._updateNextButton()))}async registerContent(e){this._view=e,this._serviceContext=await _.MigrationLocalStorage.getMigrationServiceContext(),this._pageDescription=this._view.modelBuilder.text().withProps({value:s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(),CSSStyles:{...l.BODY_CSS,margin:"0"}}).component(),this._certMigrationRequiredInfoBox=this._view.modelBuilder.infoBox().withProps({text:s.TDE_WIZARD_CERT_MIGRATION_BUTTON_MUST_BE_CLICKED,style:"warning",CSSStyles:{...l.BODY_CSS,margin:"4px 14px 0px 14px","text-align":"justify",width:c.WIZARD_INPUT_COMPONENT_WIDTH,display:"none"}}).component();const t=this._view.modelBuilder.formContainer().withFormItems([{component:this._pageDescription},{component:this.createAzureAccountsDropdown()},{component:this.createAzureTenantContainer()},{component:await this.createTargetDropdownContainer()},{component:this._certMigrationRequiredInfoBox}]).withProps({CSSStyles:{"padding-top":"0"}}).component();this._disposables.push(this._view.onClosed((e=>{this._disposables.forEach((e=>{try{e.dispose()}catch{}}))}))),this._disposables.push(this.wizard.customButtons[1].onClick((async e=>await this._startTdeMigration()))),this.migrationStateModel.resumeAssessment&&await this.populateAzureAccountsDropdown(),await this._view.initializeModel(t)}async onPageEnter(e){if(this.wizard.customButtons[1].hidden=!this.migrationStateModel.tdeMigrationConfig.shouldAdsMigrateCertificates(),this._updateNextButton(),this._updateTdeMigrationButtonStatus(),e.newPage<e.lastPage)return;switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_MI_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE;break;case d.MigrationTargetType.SQLVM:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_VM_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE;break;case d.MigrationTargetType.SQLDB:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_SQLDB_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE,this._updateConnectionButtonState(),this.migrationStateModel._didUpdateDatabasesForMigration&&(await this._resetTargetMapping(),this.migrationStateModel._didUpdateDatabasesForMigration=!1)}if(this.wizard.registerNavigationValidator((e=>{if(this.wizard.message={text:""},e.newPage<e.lastPage)return!0;const t=[];this.migrationStateModel._azureAccount||t.push(s.INVALID_ACCOUNT_ERROR),this.migrationStateModel._targetSubscription&&this._azureSubscriptionDropdown.value?.displayName!==s.NO_SUBSCRIPTIONS_FOUND||t.push(s.INVALID_SUBSCRIPTION_ERROR),this.migrationStateModel._location&&this._azureLocationDropdown.value?.displayName!==s.NO_LOCATION_FOUND||t.push(s.INVALID_LOCATION_ERROR),this.migrationStateModel._resourceGroup&&this._azureResourceGroupDropdown.value?.displayName!==s.RESOURCE_GROUP_NOT_FOUND||t.push(s.INVALID_RESOURCE_GROUP_ERROR);const i=this._azureResourceDropdown.value?.displayName;switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:const e=this.migrationStateModel._targetServerInstance;e&&i!==s.NO_MANAGED_INSTANCE_FOUND||t.push(s.INVALID_MANAGED_INSTANCE_ERROR),e&&e.properties?.state.toLowerCase()!=="Ready".toLowerCase()&&t.push(s.MI_NOT_READY_ERROR(e.name,e.properties?.state)),this.migrationStateModel.tdeMigrationConfig.shouldAdsMigrateCertificates()&&this.migrationStateModel.tdeMigrationConfig.lastTdeMigrationResult().state!==S.TdeMigrationState.Succeeded&&t.push(s.TDE_MIGRATE_REQUIRED);break;case d.MigrationTargetType.SQLVM:const n=this.migrationStateModel._targetServerInstance;n&&i!==s.NO_VIRTUAL_MACHINE_FOUND||t.push(s.INVALID_VIRTUAL_MACHINE_ERROR),this.migrationStateModel._vmInstanceView.statuses.some((e=>e.code.toLowerCase()==="PowerState/running".toLowerCase()))||t.push(s.VM_NOT_READY_POWER_STATE_ERROR(n.name)),n.properties.sqlManagement.toLowerCase()!=="Full".toLowerCase()&&t.push(s.VM_NOT_READY_IAAS_EXTENSION_ERROR(n.name,n.properties.sqlManagement));break;case d.MigrationTargetType.SQLDB:const r=this.migrationStateModel._targetServerInstance;r&&i!==s.NO_SQL_DATABASE_FOUND||t.push(s.INVALID_SQL_DATABASE_ERROR),r&&r.properties?.state.toLowerCase()!=="Ready".toLowerCase()&&t.push(s.SQLDB_NOT_READY_ERROR(r.name,r.properties.state)),(this._targetUserNameInputBox.value??"").length<1&&t.push(s.MISSING_TARGET_USERNAME_ERROR),(this._targetPasswordInputBox.value??"").length<1&&t.push(s.MISSING_TARGET_PASSWORD_ERROR);const o=this._getSourceTargetMappingErrors();o.length>0&&t.push(...o)}return!(t.length>0&&(this.wizard.message={text:t.join(o.EOL),level:n.window.MessageLevel.Error},1))})),e.newPage<e.lastPage)return;switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_MI_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_MANAGED_INSTANCE;break;case d.MigrationTargetType.SQLVM:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_VM_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE;break;case d.MigrationTargetType.SQLDB:this._pageDescription.value=s.AZURE_SQL_TARGET_PAGE_DESCRIPTION(s.SKU_RECOMMENDATION_SQLDB_CARD_TEXT),this._azureResourceDropdownLabel.value=s.AZURE_SQL_DATABASE,this._azureResourceDropdown.ariaLabel=s.AZURE_SQL_DATABASE,this._updateConnectionButtonState(),this.migrationStateModel._didUpdateDatabasesForMigration&&(await this._resetTargetMapping(),this.migrationStateModel._didUpdateDatabasesForMigration=!1)}const t=this.migrationStateModel._targetType===d.MigrationTargetType.SQLDB;await this._targetUserNameInputBox.updateProperties({required:t}),await this._targetPasswordInputBox.updateProperties({required:t}),await u.updateControlDisplay(this._resourceAuthenticationContainer,t),this._migrationTargetPlatform||(this._migrationTargetPlatform=this.migrationStateModel._targetType),this._migrationTargetPlatform!==this.migrationStateModel._targetType&&(this._migrationTargetPlatform=this.migrationStateModel._targetType,this._targetPasswordInputBox.value="",this.migrationStateModel._sqlMigrationServices=void 0,this.migrationStateModel._azureAccount=void 0,this.migrationStateModel._azureTenant=void 0,this.migrationStateModel._targetSubscription=void 0,this.migrationStateModel._location=void 0,this.migrationStateModel._resourceGroup=void 0,this.migrationStateModel._targetServerInstance=void 0,await u.clearDropDown(this._azureAccountsDropdown),await u.clearDropDown(this._accountTenantDropdown),await u.clearDropDownWithLoading(this._azureSubscriptionDropdown),await u.clearDropDownWithLoading(this._azureLocationDropdown),await u.clearDropDownWithLoading(this._azureResourceGroupDropdown),await u.clearDropDownWithLoading(this._azureResourceDropdown)),await u.updateControlDisplay(this._certMigrationRequiredInfoBox,this.migrationStateModel.tdeMigrationConfig.shouldAdsMigrateCertificates()),await this.populateAzureAccountsDropdown(),await this.populateTenantsDropdown(),await this.populateSubscriptionDropdown(),await this.populateLocationDropdown(),await this.populateResourceGroupDropdown(),await this.populateResourceInstanceDropdown()}async onPageLeave(e){this.wizard.registerNavigationValidator((e=>!0)),this.wizard.message={text:""},this.wizard.customButtons[1].hidden=!0}async handleStateChange(e){}createAzureAccountsDropdown(){const e=this._view.modelBuilder.text().withProps({value:s.ACCOUNTS_SELECTION_PAGE_TITLE,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS,"margin-top":"-1em"}}).component();this._azureAccountsDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.ACCOUNTS_SELECTION_PAGE_TITLE,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_AN_ACCOUNT,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureAccountsDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this.migrationStateModel._azureAccounts?.find((t=>t.displayInfo.displayName===e));this.migrationStateModel._azureAccount=t?u.deepClone(t):void 0}else this.migrationStateModel._azureAccount=void 0;await u.clearDropDown(this._accountTenantDropdown),await this.populateTenantsDropdown()})));const t=this._view.modelBuilder.hyperlink().withProps({label:s.ACCOUNT_LINK_BUTTON_LABEL,url:"",CSSStyles:{...l.BODY_CSS}}).component();return this._disposables.push(t.onDidClick((async e=>{await r.commands.executeCommand("workbench.actions.modal.linkedAccount"),await this.populateAzureAccountsDropdown(),this.wizard.message={text:""},await this._azureAccountsDropdown.validate()}))),this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,this._azureAccountsDropdown,t]).component()}createAzureTenantContainer(){const e=this._view.modelBuilder.text().withProps({value:s.AZURE_TENANT,CSSStyles:{...l.LABEL_CSS}}).component();return this._accountTenantDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.AZURE_TENANT,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_TENANT}).component(),this._disposables.push(this._accountTenantDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e){const t=this.migrationStateModel._accountTenants?.find((t=>t.displayName===e));this.migrationStateModel._azureTenant=t?u.deepClone(t):void 0}else this.migrationStateModel._azureTenant=void 0;await u.clearDropDown(this._azureSubscriptionDropdown),await this.populateSubscriptionDropdown()}))),this._accountTenantFlexContainer=this._view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([e,this._accountTenantDropdown]).withProps({CSSStyles:{display:"none"}}).component(),this._accountTenantFlexContainer}async createTargetDropdownContainer(){const e=this._view.modelBuilder.text().withProps({value:s.SUBSCRIPTION,description:s.TARGET_SUBSCRIPTION_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component();this._azureSubscriptionDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.SUBSCRIPTION,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_SUBSCRIPTION,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureSubscriptionDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.NO_SUBSCRIPTIONS_FOUND){const t=this.migrationStateModel._subscriptions?.find((t=>`${t.name} - ${t.id}`===e));this.migrationStateModel._targetSubscription=t?u.deepClone(t):void 0}else this.migrationStateModel._targetSubscription=void 0;this.migrationStateModel.refreshDatabaseBackupPage=!0,await u.clearDropDown(this._azureLocationDropdown),await this.populateLocationDropdown()})));const t=this._view.modelBuilder.text().withProps({value:s.LOCATION,description:s.TARGET_LOCATION_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component();this._azureLocationDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.LOCATION,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_LOCATION,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureLocationDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.NO_LOCATION_FOUND){const t=this.migrationStateModel._locations?.find((t=>t.displayName===e));this.migrationStateModel._location=t?u.deepClone(t):void 0}else this.migrationStateModel._location=void 0;this.migrationStateModel.refreshDatabaseBackupPage=!0,await u.clearDropDown(this._azureResourceGroupDropdown),await this.populateResourceGroupDropdown()}))),this._resourceSelectionContainer=this._createResourceDropdowns(),this._resourceAuthenticationContainer=this._createResourceAuthenticationContainer();const i=this.migrationStateModel._targetType===d.MigrationTargetType.SQLDB;return await this._targetUserNameInputBox.updateProperties({required:i}),await this._targetPasswordInputBox.updateProperties({required:i}),await u.updateControlDisplay(this._resourceAuthenticationContainer,i),this._view.modelBuilder.flexContainer().withItems([e,this._azureSubscriptionDropdown,t,this._azureLocationDropdown,this._resourceSelectionContainer,this._resourceAuthenticationContainer]).withLayout({flexFlow:"column"}).component()}_createResourceAuthenticationContainer(){const e=this._view.modelBuilder.text().withProps({value:s.TARGET_USERNAME_LAbEL,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS,"margin-top":"-1em"}}).component();this._targetUserNameInputBox=this._view.modelBuilder.inputBox().withProps({width:"300px",inputType:"text",placeHolder:s.TARGET_USERNAME_PLACEHOLDER,required:!1,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._targetUserNameInputBox.onTextChanged((async e=>{this.migrationStateModel._targetUserName=e??"",await this._resetTargetMapping()})));const t=this._view.modelBuilder.text().withProps({value:s.TARGET_PASSWORD_LAbEL,requiredIndicator:!0,title:"",CSSStyles:{...l.LABEL_CSS,"margin-top":"-1em"}}).component();this._targetPasswordInputBox=this._view.modelBuilder.inputBox().withProps({width:"300px",inputType:"password",placeHolder:s.TARGET_PASSWORD_PLACEHOLDER,required:!1,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._targetPasswordInputBox.onTextChanged((async e=>{this.migrationStateModel._targetPassword=e??"",await this._resetTargetMapping()}))),this._testConectionButton=this._view.modelBuilder.button().withProps({enabled:!1,label:s.TARGET_CONNECTION_LABEL,width:"80px"}).component(),this._connectionResultsInfoBox=this._view.modelBuilder.infoBox().withProps({style:"success",text:"",announceText:!0,CSSStyles:{display:"none"}}).component();const i=this._view.modelBuilder.loadingComponent().withItem(this._testConectionButton).withProps({loading:!1}).component();this._disposables.push(this._testConectionButton.onDidClick((async e=>{this.wizard.message={text:""};const t=this.migrationStateModel._targetServerInstance,r=this.migrationStateModel._targetUserName,o=this.migrationStateModel._targetPassword,a=[];if(t&&r&&o)try{i.loading=!0,await u.updateControlDisplay(this._connectionResultsInfoBox,!1),a.push(...await(0,h.collectTargetDatabaseInfo)(t,r,o)),await this._showConnectionResults(a)}catch(e){this.wizard.message={level:n.window.MessageLevel.Error,text:s.AZURE_SQL_TARGET_CONNECTION_ERROR_TITLE,description:s.SQL_TARGET_CONNECTION_ERROR(e.message)},await this._showConnectionResults(a,s.AZURE_SQL_TARGET_CONNECTION_ERROR_TITLE)}finally{i.loading=!1}await this._populateResourceMappingTable(a)})));const r=this._view.modelBuilder.flexContainer().withItems([i,this._connectionResultsInfoBox],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignContent:"center",alignItems:"center"}).withProps({CSSStyles:{margin:"15px 0 0 0"}}).component(),o=this._view.modelBuilder.text().withProps({value:s.MAP_SOURCE_TARGET_HEADING,width:c.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{"font-weight":"600","font-size":"16px",margin:"15px 0 0 0"}}).component(),a=this._view.modelBuilder.text().withProps({value:s.MAP_SOURCE_TARGET_DESCRIPTION,width:c.WIZARD_INPUT_COMPONENT_WIDTH,CSSStyles:{"font-size":"13px",margin:"15px 0 15px 0"}}).component();return this._azureResourceTable=this._createResourceTable(),this._view.modelBuilder.flexContainer().withItems([e,this._targetUserNameInputBox,t,this._targetPasswordInputBox,r,o,a,this._azureResourceTable]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{margin:"15px 0 0 0"}}).component()}async _resetTargetMapping(){this._initializeSourceTargetDatabaseMap(),this._updateConnectionButtonState(),await this._azureResourceTable.setDataValues([]),await u.updateControlDisplay(this._connectionResultsInfoBox,!1)}async _showConnectionResults(e,t){const i=void 0!==t,n=e.length>0;this._connectionResultsInfoBox.style=i?"error":n?"success":"warning",this._connectionResultsInfoBox.text=i?s.SQL_TARGET_CONNECTION_ERROR(t):n?s.SQL_TARGET_CONNECTION_SUCCESS(e.length.toLocaleString()):s.SQL_TARGET_MISSING_SOURCE_DATABASES,await u.updateControlDisplay(this._connectionResultsInfoBox,!0)}_createResourceDropdowns(){this._azureResourceGroupLabel=this._view.modelBuilder.text().withProps({value:s.RESOURCE_GROUP,description:s.TARGET_RESOURCE_GROUP_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component(),this._azureResourceGroupDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:s.RESOURCE_GROUP,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_A_RESOURCE_GROUP,CSSStyles:{"margin-top":"-1em"}}).component(),this._disposables.push(this._azureResourceGroupDropdown.onValueChanged((async e=>{if(e&&"undefined"!==e&&e!==s.RESOURCE_GROUP_NOT_FOUND){const t=this.migrationStateModel._resourceGroups?.find((t=>t.name===e));this.migrationStateModel._resourceGroup=t?u.deepClone(t):void 0}else this.migrationStateModel._resourceGroup=void 0;await u.clearDropDown(this._azureResourceDropdown),await this.populateResourceInstanceDropdown()})));const e=this.migrationStateModel._targetType===d.MigrationTargetType.SQLMI?s.AZURE_SQL_DATABASE_MANAGED_INSTANCE:this.migrationStateModel._targetType===d.MigrationTargetType.SQLDB?s.AZURE_SQL_DATABASE:s.AZURE_SQL_DATABASE_VIRTUAL_MACHINE;return this._azureResourceDropdownLabel=this._view.modelBuilder.text().withProps({value:e,description:s.TARGET_RESOURCE_INFO,width:c.WIZARD_INPUT_COMPONENT_WIDTH,requiredIndicator:!0,CSSStyles:{...l.LABEL_CSS}}).component(),this._azureResourceDropdown=this._view.modelBuilder.dropDown().withProps({ariaLabel:e,width:c.WIZARD_INPUT_COMPONENT_WIDTH,editable:!0,required:!0,fireOnTextChange:!0,placeholder:s.SELECT_SERVICE_PLACEHOLDER,CSSStyles:{"margin-top":"-1em"},loading:!1}).component(),this._disposables.push(this._azureResourceDropdown.onValueChanged((async e=>{const t=this.migrationStateModel._targetType===d.MigrationTargetType.SQLDB;if(e&&"undefined"!==e&&e!==s.NO_MANAGED_INSTANCE_FOUND&&e!==s.NO_SQL_DATABASE_SERVER_FOUND&&e!==s.NO_VIRTUAL_MACHINE_FOUND){switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLVM:const t=this.migrationStateModel._targetSqlVirtualMachines?.find((t=>t.name===e||s.UNAVAILABLE_TARGET_PREFIX(t.name)===e));t&&(this.migrationStateModel._targetServerInstance=u.deepClone(t),this.migrationStateModel._vmInstanceView=await(0,p.getVMInstanceView)(this.migrationStateModel._targetServerInstance,this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.wizard.message={text:""},this.migrationStateModel._vmInstanceView.statuses.some((e=>e.code.toLowerCase()==="PowerState/running".toLowerCase()))||(this.wizard.message={text:s.VM_NOT_READY_POWER_STATE_ERROR(this.migrationStateModel._targetServerInstance.name),level:n.window.MessageLevel.Error}),this.migrationStateModel._targetServerInstance.properties.sqlManagement.toLowerCase()!=="Full".toLowerCase()&&(this.wizard.message={text:s.VM_NOT_READY_IAAS_EXTENSION_ERROR(this.migrationStateModel._targetServerInstance.name,this.migrationStateModel._targetServerInstance.properties.sqlManagement),level:n.window.MessageLevel.Error}));break;case d.MigrationTargetType.SQLMI:const i=this.migrationStateModel._targetManagedInstances?.find((t=>t.name===e||s.UNAVAILABLE_TARGET_PREFIX(t.name)===e));i&&(this.migrationStateModel._targetServerInstance=u.deepClone(i),this.wizard.message={text:""},this.migrationStateModel._targetServerInstance.properties.state.toLowerCase()!=="Ready".toLowerCase()&&(this.wizard.message={text:s.MI_NOT_READY_ERROR(this.migrationStateModel._targetServerInstance.name,this.migrationStateModel._targetServerInstance.properties.state),level:n.window.MessageLevel.Error})),this.migrationStateModel.tdeMigrationConfig.resetTdeMigrationResult();break;case d.MigrationTargetType.SQLDB:const r=this.migrationStateModel._targetSqlDatabaseServers?.find((t=>t.name===e||s.UNAVAILABLE_TARGET_PREFIX(t.name)===e));r&&(this.migrationStateModel._targetServerInstance=u.deepClone(r),this.wizard.message={text:""},this.migrationStateModel._targetServerInstance.properties.state.toLowerCase()==="Ready".toLowerCase()?this._targetUserNameInputBox.value=this.migrationStateModel._targetServerInstance.properties.administratorLogin:this.wizard.message={text:s.SQLDB_NOT_READY_ERROR(this.migrationStateModel._targetServerInstance.name,this.migrationStateModel._targetServerInstance.properties.state),level:n.window.MessageLevel.Error})}await this._validateFields()}else this.migrationStateModel._targetServerInstance=void 0,this.migrationStateModel._vmInstanceView=void 0,t&&(this._targetUserNameInputBox.value="");this._resetTdeMigrationResult(),this.migrationStateModel._sqlMigrationServices=void 0,t&&(await this._resetTargetMapping(),this._targetPasswordInputBox.value="")}))),this._view.modelBuilder.flexContainer().withItems([this._azureResourceGroupLabel,this._azureResourceGroupDropdown,this._azureResourceDropdownLabel,this._azureResourceDropdown]).withLayout({flexFlow:"column"}).component()}_initializeSourceTargetDatabaseMap(){this.migrationStateModel._sourceTargetMapping=new Map,this.migrationStateModel._targetDatabaseNames=[],this.migrationStateModel._databasesForMigration.forEach((e=>this.migrationStateModel._sourceTargetMapping.set(e,void 0)))}_updateConnectionButtonState(){const e=this._azureResourceDropdown.value?.name??"",t=this.migrationStateModel._targetUserName??"",i=this.migrationStateModel._targetPassword??"";this._testConectionButton.enabled=e.length>0&&t.length>0&&i.length>0}_createResourceTable(){const e={padding:"0px","border-style":"none","text-align":"left","font-weight":"600"},t={padding:"1px 0px","border-style":"none","text-align":"left","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"};return this._view.modelBuilder.declarativeTable().withProps({ariaLabel:s.MAP_SOURCE_TARGET_HEADING,width:c.WIZARD_INPUT_COMPONENT_WIDTH,data:[],display:"inline-block",CSSStyles:{padding:"0px"},columns:[{displayName:s.MAP_SOURCE_COLUMN,valueType:n.DeclarativeDataType.string,width:"50%",isReadOnly:!0,rowCssStyles:t,headerCssStyles:e},{displayName:s.MAP_TARGET_COLUMN,valueType:n.DeclarativeDataType.component,width:"50%",isReadOnly:!1,rowCssStyles:t,headerCssStyles:e}]}).withValidation((e=>this.migrationStateModel._targetType!==d.MigrationTargetType.SQLDB||void 0!==e.dataValues&&e.dataValues.length>0)).component()}async populateAzureAccountsDropdown(){try{this._azureAccountsDropdown.loading=!0,this.migrationStateModel._azureAccounts=await u.getAzureAccounts();const e=this.migrationStateModel._azureAccount?.displayInfo?.userId??this._serviceContext?.azureAccount?.displayInfo?.userId;this._azureAccountsDropdown.values=await u.getAzureAccountsDropdownValues(this.migrationStateModel._azureAccounts),u.selectDefaultDropdownValue(this._azureAccountsDropdown,e,!1);const t=this.migrationStateModel._azureAccounts?.find((e=>e.displayInfo.displayName===this._azureAccountsDropdown.value?.displayName));this.migrationStateModel._azureAccount=t?u.deepClone(t):void 0}finally{this._azureAccountsDropdown.loading=!1}}async populateTenantsDropdown(){try{if(this._accountTenantDropdown.loading=!0,!u.isAccountTokenStale(this.migrationStateModel._azureAccount)&&this.migrationStateModel._azureAccount?.properties?.tenants?.length>0){this.migrationStateModel._accountTenants=u.getAzureTenants(this.migrationStateModel._azureAccount);const e=this.migrationStateModel._azureTenant?.id;this._accountTenantDropdown.values=u.getAzureTenantsDropdownValues(this.migrationStateModel._accountTenants),u.selectDefaultDropdownValue(this._accountTenantDropdown,e,!0)}const e=this.migrationStateModel._accountTenants?.find((e=>e.displayName===this._accountTenantDropdown.value?.displayName));this.migrationStateModel._azureTenant=e?u.deepClone(e):void 0,await this._azureAccountsDropdown.validate()}finally{this._accountTenantDropdown.loading=!1,await this._accountTenantFlexContainer.updateCssStyles(this.migrationStateModel._azureAccount?.properties?.tenants?.length>1?{display:"inline"}:{display:"none"})}}async populateSubscriptionDropdown(){try{this._azureSubscriptionDropdown.loading=!0,this.migrationStateModel._subscriptions=await u.getAzureSubscriptions(this.migrationStateModel._azureAccount,this.migrationStateModel._azureTenant?.id);const e=this.migrationStateModel._targetSubscription?.id??this._serviceContext?.subscription?.id;this._azureSubscriptionDropdown.values=await u.getAzureSubscriptionsDropdownValues(this.migrationStateModel._subscriptions),u.selectDefaultDropdownValue(this._azureSubscriptionDropdown,e,!1);const t=this.migrationStateModel._subscriptions?.find((e=>`${e.name} - ${e.id}`===this._azureSubscriptionDropdown.value?.displayName));this.migrationStateModel._targetSubscription=t?u.deepClone(t):void 0,this.migrationStateModel.refreshDatabaseBackupPage=!0}catch(e){console.log(e)}finally{this._azureSubscriptionDropdown.loading=!1}}async populateLocationDropdown(){try{switch(this._azureLocationDropdown.loading=!0,this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this.migrationStateModel._targetManagedInstances=await u.getManagedInstances(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.migrationStateModel._locations=await u.getResourceLocations(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription,this.migrationStateModel._targetManagedInstances);break;case d.MigrationTargetType.SQLVM:this.migrationStateModel._targetSqlVirtualMachines=await u.getVirtualMachines(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.migrationStateModel._locations=await u.getResourceLocations(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription,this.migrationStateModel._targetSqlVirtualMachines);break;case d.MigrationTargetType.SQLDB:this.migrationStateModel._targetSqlDatabaseServers=await u.getAzureSqlDatabaseServers(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription),this.migrationStateModel._locations=await u.getResourceLocations(this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription,this.migrationStateModel._targetSqlDatabaseServers)}const e=this.migrationStateModel._location?.displayName??this._serviceContext?.location?.displayName;this._azureLocationDropdown.values=u.getAzureLocationsDropdownValues(this.migrationStateModel._locations),u.selectDefaultDropdownValue(this._azureLocationDropdown,e,!0);const t=this.migrationStateModel._locations?.find((e=>e.displayName===this._azureLocationDropdown.value?.displayName));this.migrationStateModel._location=t?u.deepClone(t):void 0}catch(e){console.log(e)}finally{this._azureLocationDropdown.loading=!1}}async populateResourceGroupDropdown(){try{switch(this._azureResourceGroupDropdown.loading=!0,this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this.migrationStateModel._resourceGroups=u.getServiceResourceGroupsByLocation(this.migrationStateModel._targetManagedInstances,this.migrationStateModel._location);break;case d.MigrationTargetType.SQLVM:this.migrationStateModel._resourceGroups=u.getServiceResourceGroupsByLocation(this.migrationStateModel._targetSqlVirtualMachines,this.migrationStateModel._location);break;case d.MigrationTargetType.SQLDB:this.migrationStateModel._resourceGroups=u.getServiceResourceGroupsByLocation(this.migrationStateModel._targetSqlDatabaseServers,this.migrationStateModel._location)}const e=this.migrationStateModel._resourceGroup?.id;this._azureResourceGroupDropdown.values=u.getResourceDropdownValues(this.migrationStateModel._resourceGroups,s.RESOURCE_GROUP_NOT_FOUND),u.selectDefaultDropdownValue(this._azureResourceGroupDropdown,e,!1);const t=this.migrationStateModel._resourceGroups?.find((e=>e.name===this._azureResourceGroupDropdown.value?.displayName));this.migrationStateModel._resourceGroup=t?u.deepClone(t):void 0}catch(e){console.log(e)}finally{this._azureResourceGroupDropdown.loading=!1}}async populateResourceInstanceDropdown(){try{this._azureResourceDropdown.loading=!0;const e=this.migrationStateModel.migrationTargetServerName;switch(this.migrationStateModel._targetType){case d.MigrationTargetType.SQLMI:this._azureResourceDropdown.values=await u.getManagedInstancesDropdownValues(this.migrationStateModel._targetManagedInstances,this.migrationStateModel._location,this.migrationStateModel._resourceGroup),this._updateTdeMigrationButtonStatus();break;case d.MigrationTargetType.SQLVM:this._azureResourceDropdown.values=await u.getVirtualMachinesDropdownValues(this.migrationStateModel._targetSqlVirtualMachines,this.migrationStateModel._location,this.migrationStateModel._resourceGroup,this.migrationStateModel._azureAccount,this.migrationStateModel._targetSubscription);break;case d.MigrationTargetType.SQLDB:this._azureResourceDropdown.values=u.getAzureResourceDropdownValues(this.migrationStateModel._targetSqlDatabaseServers,this.migrationStateModel._location,this.migrationStateModel._resourceGroup?.name,s.NO_SQL_DATABASE_SERVER_FOUND)}u.selectDefaultDropdownValue(this._azureResourceDropdown,e,!0)}finally{this._azureResourceDropdown.loading=!1}}async _populateResourceMappingTable(e){const t=this._getTargetDatabaseDropdownValues(e,s.NO_SQL_DATABASE_FOUND),i=this.migrationStateModel._databasesForMigration.map((i=>{const n=this._view.modelBuilder.dropDown().withProps({width:"100%",required:!0,editable:!0,fireOnTextChange:!0,values:t,placeholder:s.MAP_TARGET_PLACEHOLDER}).component();this._disposables.push(n.onValueChanged((t=>{const n=e?.find((e=>e.databaseName===t));this.migrationStateModel._sourceTargetMapping.set(i,n),this.migrationStateModel.refreshDatabaseBackupPage=!0,this.migrationStateModel._didDatabaseMappingChange=!0})));const r=this.migrationStateModel._sourceTargetMapping.get(i)?.databaseName??"";return r.length>0?u.selectDefaultDropdownValue(n,r):this._getPotentialTargetDatabaseMappingForSource(i,e,n),[{value:i},{value:n}]}))||[];await this._azureResourceTable.setDataValues(i)}_getPotentialTargetDatabaseMappingForSource(e,t,i){const n=this.migrationStateModel._databaseInfosForMigrationMap.get(e),r=t?.find((e=>e.databaseName===n?.databaseName&&e.databaseCollation===n?.databaseCollation))??void 0;r&&(this.migrationStateModel._sourceTargetMapping.set(e,r),u.selectDefaultDropdownValue(i,r?.databaseName))}_getTargetDatabaseDropdownValues(e,t){return e?.length>0?e.map((e=>{const t=e.databaseName;return{name:t,displayName:t}})):[{name:"",displayName:t}]}_getSourceTargetMappingErrors(){var e=[];const t=[],i=new Map,n=this._azureResourceTable.dataValues?.length??0;this.migrationStateModel._targetDatabaseNames=[];const r=new Map(this.migrationStateModel._databaseInfosForMigration.map((e=>[e.databaseName,e])));if(0===n)e.push(s.SQL_TARGET_MAPPING_ERROR_MISSING_TARGET);else for(let n=0;n<this.migrationStateModel._databasesForMigration.length;n++){const o=this.migrationStateModel._databasesForMigration[n],a=r.get(o),l=this.migrationStateModel._sourceTargetMapping.get(o),c=l?.databaseName,u=a?.databaseCollation,d=l?.databaseCollation;if(c&&c.length>0){if(i.has(c)){const t=i.get(c)??"";e.push(s.SQL_TARGET_CONNECTION_DUPLICATE_TARGET_MAPPING(c,o,t))}else i.set(c,o),this.migrationStateModel._targetDatabaseNames.push(c);this._isCollationSame(u,d)||t.push(s.SQL_TARGET_SOURCE_COLLATION_NOT_SAME(g.ValidationErrorCodes.SqlInfoValidationFailed,o,c,u,d))}else e.push(s.SQL_TARGET_CONNECTION_SOURCE_NOT_MAPPED(o))}return t.length>0&&(t.push(s.SQL_MIGRATION_TROUBLESHOOTING_LINK),e=e.concat(t)),e}async _validateFields(){await this._azureAccountsDropdown.validate(),await this._accountTenantDropdown.validate(),await this._azureSubscriptionDropdown.validate(),await this._azureLocationDropdown.validate(),await this._azureResourceGroupDropdown.validate(),await this._azureResourceDropdown.validate(),await this._targetPasswordInputBox.validate(),await this._targetUserNameInputBox.validate(),await this._azureResourceTable.validate()}_isCollationSame(e,t){return void 0!==e&&e.length>0&&void 0!==t&&t.length>0&&e.toLocaleLowerCase()===t.toLocaleLowerCase()}_updateNextButton(){this.migrationStateModel.tdeMigrationConfig.shouldAdsMigrateCertificates()&&this.migrationStateModel.tdeMigrationConfig.lastTdeMigrationResult().state!==S.TdeMigrationState.Succeeded?(this.wizard.pages[this.wizard.currentPage+1].enabled=!1,this.wizard.nextButton.enabled=!1):(this.wizard.pages[this.wizard.currentPage+1].enabled=!0,this.wizard.nextButton.enabled=!0)}_updateTdeMigrationButtonStatus(){this.wizard.customButtons[1].enabled=this.migrationStateModel.tdeMigrationConfig.shouldAdsMigrateCertificates()&&this.migrationStateModel._targetManagedInstances.length>0}_resetTdeMigrationResult(){this.migrationStateModel.tdeMigrationConfig.resetTdeMigrationResult(),this._updateNextButton()}async _startTdeMigration(){this._resetTdeMigrationResult();const e=new m.TdeMigrationDialog(this.migrationStateModel,this._certMigrationEventEmitter);await e.openDialog()}}t.TargetSelectionPage=f},2816:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTextComponent=t.createLabelTextComponent=t.createHeadingTextComponent=t.createInformationRow=t.WizardController=t.WIZARD_INPUT_COMPONENT_WIDTH=void 0;const n=i(9072),r=i(9496),o=i(1285),a=i(2074),s=i(6637),l=i(4201),c=i(1718),u=i(6178),d=i(9236),p=i(6364),h=i(2083),_=i(7149),g=i(6349),m=i(7475),S=i(9563),f=i(1419),E=i(3963),T=i(8489);function C(e,t,i={width:"300px"}){return y(e,t,i)}function y(e,t,i={width:"300px"}){return e.modelBuilder.text().withProps({value:t,CSSStyles:i}).component()}t.WIZARD_INPUT_COMPONENT_WIDTH="600px",t.WizardController=class{constructor(e,t,i){this.extensionContext=e,this._model=t,this._serviceContextChangedEvent=i,this._disposables=[]}async openWizard(){this.extensionContext.subscriptions.push(this._model),await this.createWizard(this._model)}async openLoginWizard(){this.extensionContext.subscriptions.push(this._model),await this.createLoginWizard(this._model)}async createWizard(e){const t=(await(0,E.getSourceConnectionProfile)()).serverName;this._wizardObject=n.window.createWizard(a.WIZARD_TITLE(t),"MigrationWizard","wide"),this._wizardObject.generateScriptButton.enabled=!1,this._wizardObject.generateScriptButton.hidden=!0,this._wizardObject.nextButton.position="left",this._wizardObject.nextButton.secondary=!1,this._wizardObject.doneButton.label=a.START_MIGRATION_TEXT,this._wizardObject.doneButton.position="left",this._wizardObject.doneButton.secondary=!1,this._wizardObject.backButton.position="left",this._wizardObject.backButton.secondary=!0,this._wizardObject.cancelButton.position="left",this._wizardObject.cancelButton.secondary=!0;const i=n.window.createButton(a.SAVE_AND_CLOSE,"right");i.secondary=!0;const u=n.window.createButton(a.RUN_VALIDATION,"left");u.secondary=!1,u.hidden=!0;const h=n.window.createButton(a.TDE_MIGRATE_BUTTON,"left");h.secondary=!1,h.hidden=!0;const g=n.window.createButton(a.SAVE_ASSESSMENT_REPORT,"right");g.secondary=!0,g.hidden=!0,this._wizardObject.customButtons=[u,h,g,i];const S=[new _.DatabaseSelectorPage(this._wizardObject,e),new s.SKURecommendationPage(this._wizardObject,e),new T.AssessmentDetailsPage(this._wizardObject,e),new c.TargetSelectionPage(this._wizardObject,e),new d.IntergrationRuntimePage(this._wizardObject,e),new l.DatabaseBackupPage(this._wizardObject,e),new p.SummaryPage(this._wizardObject,e)];this._wizardObject.pages=S.map((e=>e.getwizardPage())),await this._model.refreshPerfDataCollection(),this._model.resumeAssessment&&!this._model.restartMigration||!this._model._perfDataCollectionIsCollecting||(this._model.stopPerfDataCollection(),r.window.showInformationMessage(a.AZURE_RECOMMENDATION_STOP_POPUP));const f=[];f.push(...S.map((e=>e.registerWizardContent()))),f.push(this._wizardObject.open()),(this._model.resumeAssessment||this._model.restartMigration)&&(this._model.savedInfo.closedPage>=o.Page.IntegrationRuntime&&(this._model.refreshDatabaseBackupPage=!0),this._model.savedInfo.closedPage>=o.Page.IntegrationRuntime&&this._model.isSqlDbTarget?f.push(this._wizardObject.setCurrentPage(o.Page.TargetSelection)):this._model.savedInfo.closedPage>=o.Page.IntegrationRuntime&&this._model.savedInfo.networkContainerType===o.NetworkContainerType.NETWORK_SHARE?f.push(this._wizardObject.setCurrentPage(o.Page.IntegrationRuntime)):f.push(this._wizardObject.setCurrentPage(this._model.savedInfo.closedPage))),this._model.extensionContext.subscriptions.push(this._wizardObject.onPageChanged((async e=>{const t=e.newPage,i=e.lastPage;this.sendPageButtonClickEvent(m.TelemetryViews.SqlMigrationWizard,e).catch((e=>(0,m.logError)(m.TelemetryViews.MigrationWizardController,"ErrorSendingPageButtonClick",e))),await(S[i]?.onPageLeave(e)),await(S[t]?.onPageEnter(e))}))),this._wizardObject.registerNavigationValidator((async e=>!0)),await Promise.all(f),this._model.extensionContext.subscriptions.push(this._wizardObject.onPageChanged((async e=>await S[0].onPageEnter(e)))),this._disposables.push(i.onClick((async()=>{await e.saveInfo(t,this._wizardObject.currentPage),await this._wizardObject.close(),e.performanceCollectionInProgress()&&r.window.showInformationMessage(a.SAVE_AND_CLOSE_POPUP)}))),this._disposables.push(this._wizardObject.cancelButton.onClick((e=>{(0,m.sendSqlMigrationActionEvent)(m.TelemetryViews.SqlMigrationWizard,m.TelemetryAction.PageButtonClick,{...(0,m.getTelemetryProps)(this._model),buttonPressed:m.TelemetryAction.Cancel,pageTitle:this._wizardObject.pages[this._wizardObject.currentPage].title},{})}))),this._disposables.push(this._wizardObject.doneButton.onClick((async t=>{try{await e.startMigration(),await this.updateServiceContext(e,this._serviceContextChangedEvent)}catch(t){(0,m.logError)(m.TelemetryViews.MigrationWizardController,"StartMigrationFailed",t)}finally{(0,m.sendSqlMigrationActionEvent)(m.TelemetryViews.SqlMigrationWizard,m.TelemetryAction.PageButtonClick,{...(0,m.getTelemetryProps)(this._model),buttonPressed:m.TelemetryAction.Done,pageTitle:this._wizardObject.pages[this._wizardObject.currentPage].title},{})}})))}async createLoginWizard(e){const t=(await(0,E.getSourceConnectionProfile)()).serverName;this._wizardObject=n.window.createWizard(a.LOGIN_WIZARD_TITLE(t),"LoginMigrationWizard","wide"),this._wizardObject.generateScriptButton.enabled=!1,this._wizardObject.generateScriptButton.hidden=!0;const i=[new u.LoginMigrationTargetSelectionPage(this._wizardObject,e),new g.LoginSelectorPage(this._wizardObject,e),new h.LoginMigrationStatusPage(this._wizardObject,e)];this._wizardObject.pages=i.map((e=>e.getwizardPage()));const r=[];r.push(...i.map((e=>e.registerWizardContent()))),r.push(this._wizardObject.open());const o=this._wizardObject.pages.length>0?this._wizardObject.pages[0].title:"";(0,m.sendButtonClickEvent)(this._model,m.TelemetryViews.LoginMigrationWizard,m.TelemetryAction.OpenLoginMigrationWizard,"",o),this._model.extensionContext.subscriptions.push(this._wizardObject.onPageChanged((async e=>{const t=e.newPage,n=e.lastPage;this.sendPageButtonClickEvent(m.TelemetryViews.LoginMigrationWizard,e).catch((e=>(0,m.logError)(m.TelemetryViews.LoginMigrationWizardController,"ErrorSendingPageButtonClick",e))),await(i[n]?.onPageLeave(e)),await(i[t]?.onPageEnter(e))}))),this._wizardObject.registerNavigationValidator((async e=>!0)),await Promise.all(r),this._disposables.push(this._wizardObject.cancelButton.onClick((e=>{(0,m.sendSqlMigrationActionEvent)(m.TelemetryViews.LoginMigrationWizard,m.TelemetryAction.PageButtonClick,{...(0,m.getTelemetryProps)(this._model),buttonPressed:m.TelemetryAction.Cancel,pageTitle:this._wizardObject.pages[this._wizardObject.currentPage].title},{})}))),this._disposables.push(this._wizardObject.doneButton.onClick((async e=>{(0,m.sendSqlMigrationActionEvent)(m.TelemetryViews.LoginMigrationWizard,m.TelemetryAction.PageButtonClick,{...(0,m.getTelemetryProps)(this._model),buttonPressed:m.TelemetryAction.Done,pageTitle:this._wizardObject.pages[this._wizardObject.currentPage].title},{})})))}async updateServiceContext(e,t){const i=e._sqlMigrationServiceResourceGroup,n=this._getSubscriptionFromResourceId(e._subscriptions,i?.id),r=this._getLocationByValue(e._locations,e._sqlMigrationService?.location);return await f.MigrationLocalStorage.saveMigrationServiceContext({azureAccount:e._azureAccount,tenant:e._azureTenant,subscription:n,location:r,resourceGroup:i,migrationService:e._sqlMigrationService},t)}_getLocationByValue(e,t){return e.find((e=>e.name===t))}_getSubscriptionFromResourceId(e,t){let i=t?.split("/subscriptions/");if(i?.length&&i?.length>1&&(i=i[1]?.split("/resourcegroups/"),i?.length&&i?.length>0)){const t=i[0];return e.find((e=>e.id===t),1)}}async sendPageButtonClickEvent(e,t){const i=t.newPage>t.lastPage?m.TelemetryAction.Next:m.TelemetryAction.Prev,n=this._wizardObject.pages[t.lastPage]?.title,r=this._wizardObject.pages[t.newPage]?.title;(0,m.sendButtonClickEvent)(this._model,e,i,n,r)}},t.createInformationRow=function(e,t,i){return e.modelBuilder.flexContainer().withLayout({flexFlow:"row",alignItems:"center"}).withItems([C(e,t,{...S.BODY_CSS,margin:"4px 0px",width:"300px"}),y(e,i,{...S.BODY_CSS,margin:"4px 0px",width:"300px"})]).component()},t.createHeadingTextComponent=async function(e,t,i=!1){const n=y(e,t);return await n.updateCssStyles({...S.LABEL_CSS,"margin-top":i?"0":"24px"}),n},t.createLabelTextComponent=C,t.createTextComponent=y},9166:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},9072:e=>{"use strict";e.exports=require("azdata")},9624:e=>{"use strict";e.exports=require("native-is-elevated")},9496:e=>{"use strict";e.exports=require("vscode")},9491:e=>{"use strict";e.exports=require("assert")},852:e=>{"use strict";e.exports=require("async_hooks")},8709:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6206:e=>{"use strict";e.exports=require("console")},2057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},8188:e=>{"use strict";e.exports=require("module")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},9512:e=>{"use strict";e.exports=require("timers")},4404:e=>{"use strict";e.exports=require("tls")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"sql-migration","displayName":"%displayName%","description":"%description%","version":"1.5.1","publisher":"Microsoft","preview":false,"license":"https://raw.githubusercontent.com/Microsoft/azuredatastudio/main/LICENSE.txt","icon":"images/extension.png","aiKey":"29a207bb14f84905966a8f22524cb730-25407f35-11b6-4d4e-8114-ab9e843cb52f-7380","engines":{"vscode":"*","azdata":">=1.44.1"},"activationEvents":["onDashboardOpen","onCommand:sqlmigration.start","onCommand:sqlmigration.newsupportrequest","onCommand:sqlmigration.sendfeedback","onCommand:sqlmigration.openNotebooks"],"capabilities":{"virtualWorkspaces":false,"untrustedWorkspaces":{"supported":true}},"main":"./out/main","repository":{"type":"git","url":"https://github.com/Microsoft/azuredatastudio.git"},"extensionDependencies":["Microsoft.mssql"],"contributes":{"commands":[{"command":"sqlmigration.start","title":"%start-migration-command%","category":"%migration-command-category%","icon":"./images/migration.svg"},{"command":"sqlmigration.newsupportrequest","title":"%new-support-request-command%","category":"%migration-command-category%","icon":"./images/newSupportRequest.svg"},{"command":"sqlmigration.sendfeedback","title":"%send-feedback-command%","category":"%migration-command-category%","icon":"./images/sendFeedback.svg"},{"command":"sqlmigration.openNotebooks","title":"%migration-notebook-command-title%","category":"%migration-command-category%"},{"command":"sqlmigration.cutover","title":"%complete-cutover-menu%","category":"%migration-context-menu-category%"},{"command":"sqlmigration.view.database","title":"%database-details-menu%","category":"%migration-context-menu-category%"},{"command":"sqlmigration.view.target","title":"%view-target-menu%","category":"%migration-context-menu-category%"},{"command":"sqlmigration.view.service","title":"%view-service-menu%","category":"%migration-context-menu-category%"},{"command":"sqlmigration.copy.migration","title":"%copy-migration-menu%","category":"%migration-context-menu-category%"},{"command":"sqlmigration.cancel.migration","title":"%cancel-migration-menu%","category":"%migration-context-menu-category%"},{"command":"sqlmigration.delete.migration","title":"%delete-migration-menu%","category":"%migration-context-menu-category%"},{"command":"sqlmigration.retry.migration","title":"%retry-migration-menu%","category":"%migration-context-menu-category%"}],"menu":{"commandPalette":[{"command":"sqlmigration.newsupportrequest","when":"false"},{"command":"sqlmigration.sendfeedback","when":"false"},{"command":"sqlmigration.cutover","when":"false"},{"command":"sqlmigration.view.database","when":"false"},{"command":"sqlmigration.view.target","when":"false"},{"command":"sqlmigration.view.service","when":"false"},{"command":"sqlmigration.copy.migration","when":"false"},{"command":"sqlmigration.cancel.migration","when":"false"},{"command":"sqlmigration.delete.migration","when":"false"},{"command":"sqlmigration.retry.migration","when":"false"}]},"configuration":[{"title":"%migration-dashboard-title%","properties":{"azureRecommendation.dataCollectionPath":{"type":"string","default":"","description":"%data-collection-path-description%"}}}],"dashboard.tabs":[{"id":"migration-dashboard","description":"%migration-dashboard-title%","provider":"MSSQL","title":"%migration-dashboard-title%","icon":{"light":"./images/migration.svg","dark":"./images/migration.svg"},"when":"connectionProvider == \'MSSQL\' && !mssql:iscloud  && mssql:engineedition != 8","hideRefreshTask":true,"container":{"modelview-container":null}}]},"dependencies":{"dataprotocol-client":"github:Microsoft/sqlops-dataprotocolclient#2.0.0","@microsoft/ads-service-downloader":"^1.2.1","@microsoft/ads-extension-telemetry":"^3.0.1","uuid":"^8.3.2","vscode-nls":"^4.1.2"},"__metadata":{"publisherDisplayName":"Microsoft","publisherId":"Microsoft","id":"81"},"devDependencies":{"@types/uuid":"^8.3.1"}}')}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=i(9496),r=i(3636),o=i(2074),a=i(1079),s=i(3137),l=i(7475);let c,u;e.activate=async function(e){s.migrationServiceProvider||await t.window.showErrorMessage(o.serviceProviderInitializationError);const i=t.window.createOutputChannel(o.serviceName),n=new a.ServiceClient(i);return u=await n.startService(e).catch((e=>{console.error(e)})),c=new r.DashboardWidget(e),await c.register(),e.subscriptions.push(l.TelemetryReporter),c},e.deactivate=async function(){u&&await u.stop()}})();var r=exports;for(var o in n)r[o]=n[o];n.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();
//# sourceMappingURL=https://sqlopsbuilds.blob.core.windows.net/sourcemaps/805b66df2e92ec59bf40e27b443bd5ef215314ed/extensions/sql-migration/dist/main.js.map